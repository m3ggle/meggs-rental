/*! For license information please see main.5f9f244a.js.LICENSE.txt */
(()=>{var e={472:e=>{e.exports="object"==typeof self?self.FormData:window.FormData},463:(e,t,n)=>{"use strict";var r=n(791),i=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),M=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var N,j=Object.assign;function B(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var F=!1;function z(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function U(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case E:return"Profiler";case A:return"StrictMode";case P:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function J(e,t){Z(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,_e=null,Ae=null;function Ee(e){if(e=xi(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function Ce(e){_e?Ae?Ae.push(e):Ae=[e]:_e=e}function Me(){if(_e){var e=_e,t=Ae;if(Ae=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Pe(){}var De=!1;function ke(e,t,n){if(De)return e(t,n);De=!0;try{return Te(e,t,n)}finally{De=!1,(null!==_e||null!==Ae)&&(Pe(),Me())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Re=!1;if(u)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ue){Re=!1}function Le(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ne=!1,je=null,Be=!1,Fe=null,ze={onError:function(e){Ne=!0,je=e}};function Ue(e,t,n,r,i,o,a,s,l){Ne=!1,je=null,Le.apply(ze,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ge(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ye=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Ze=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,_t,At,Et,Ct=!1,Mt=[],Tt=null,Pt=null,Dt=null,kt=new Map,Ot=new Map,Rt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Nt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Bt(e)&&n.delete(t)}function zt(){Ct=!1,null!==Tt&&Bt(Tt)&&(Tt=null),null!==Pt&&Bt(Pt)&&(Pt=null),null!==Dt&&Bt(Dt)&&(Dt=null),kt.forEach(Ft),Ot.forEach(Ft)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Gt(e){function t(t){return Ut(t,e)}if(0<Mt.length){Ut(Mt[0],e);for(var n=1;n<Mt.length;n++){var r=Mt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ut(Tt,e),null!==Pt&&Ut(Pt,e),null!==Dt&&Ut(Dt,e),kt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)jt(n),null===n.blockedOn&&Rt.shift()}var Vt=b.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=xt,o=Vt.transition;Vt.transition=null;try{xt=1,Yt(e,t,n,r)}finally{xt=i,Vt.transition=o}}function qt(e,t,n,r){var i=xt,o=Vt.transition;Vt.transition=null;try{xt=4,Yt(e,t,n,r)}finally{xt=i,Vt.transition=o}}function Yt(e,t,n,r){if(Ht){var i=Qt(e,t,n,r);if(null===i)Hr(e,t,r,Xt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Nt(Tt,e,t,n,r,i),!0;case"dragenter":return Pt=Nt(Pt,e,t,n,r,i),!0;case"mouseover":return Dt=Nt(Dt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return kt.set(o,Nt(kt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ot.set(o,Nt(Ot.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<It.indexOf(e)){for(;null!==i;){var o=xi(i);if(null!==o&&wt(o),null===(o=Qt(e,t,n,r))&&Hr(e,t,r,Xt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Xt=null;function Qt(e,t,n,r){if(Xt=null,null!==(e=yi(e=we(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Jt=null,$t=null;function en(){if($t)return $t;var e,t,n=Jt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=j({},cn,{view:0,detail:0}),hn=on(dn),fn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),mn=on(j({},fn,{dataTransfer:0})),gn=on(j({},dn,{relatedTarget:0})),vn=on(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=on(yn),bn=on(j({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return An}var Cn=j({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Mn=on(Cn),Tn=on(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Dn=on(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(kn),Rn=[9,13,27,32],In=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Nn=u&&"TextEvent"in window&&!Ln,jn=u&&(!In||Ln&&8<Ln&&11>=Ln),Bn=String.fromCharCode(32),Fn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Yn=null;function Xn(e){Br(e,0)}function Qn(e){if(Y(bi(e)))return e}function Kn(e,t){if("change"===e)return t}var Zn=!1;if(u){var Jn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Jn=$n}else Jn=!1;Zn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Yn=qn=null)}function nr(e){if("value"===e.propertyName&&Qn(Yn)){var t=[];Wn(t,Yn,e,we(e)),ke(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Yn)}function or(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Ar={};function Er(e){if(_r[e])return _r[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ar)return _r[e]=n[t];return e}u&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Cr=Er("animationend"),Mr=Er("animationiteration"),Tr=Er("animationstart"),Pr=Er("transitionend"),Dr=new Map,kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Dr.set(e,t),l(t,[e])}for(var Rr=0;Rr<kr.length;Rr++){var Ir=kr[Rr];Or(Ir.toLowerCase(),"on"+(Ir[0].toUpperCase()+Ir.slice(1)))}Or(Cr,"onAnimationEnd"),Or(Mr,"onAnimationIteration"),Or(Tr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if(Ue.apply(this,arguments),Ne){if(!Ne)throw Error(o(198));var u=je;Ne=!1,je=null,Be||(Be=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;jr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;jr(i,s,c),o=l}}}if(Be)throw e=Fe,Be=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[Ur]){e[Ur]=!0,a.forEach((function(t){"selectionchange"!==t&&(Nr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,zr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Kt(t)){case 1:var i=Wt;break;case 4:i=qt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}ke((function(){var r=o,i=we(n),a=[];e:{var s=Dr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Mn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Cr:case Mr:case Tr:l=vn;break;case Pr:l=Dn;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Oe(p,h))&&u.push(Wr(p,m,f)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:bi(l),f=null==c?s:bi(c),(s=new u(m,p+"leave",l,n,i)).target=d,s.relatedTarget=f,m=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Yr(f))p++;for(f=0,m=h;m;m=Yr(m))f++;for(;0<p-f;)u=Yr(u),p--;for(;0<f-p;)h=Yr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Yr(u),h=Yr(h)}u=null}else u=null;null!==l&&Xr(a,s,l,u,!1),null!==c&&null!==d&&Xr(a,d,c,u,!0)}if("select"===(l=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Kn;else if(Hn(s))if(Zn)g=ar;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Wn(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?bi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var y;if(In)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Gn?zn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(jn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Gn&&(y=en()):(Jt="value"in(Zt=i)?Zt.value:Zt.textContent,Gn=!0)),0<(v=qr(r,x)).length&&(x=new bn(x,e,null,n,i),a.push({event:x,listeners:v}),y?x.data=y:null!==(y=Un(n))&&(x.data=y))),(y=Nn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,Bn);case"textInput":return(e=t.data)===Bn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!In&&zn(e,t)?(e=en(),$t=Jt=Zt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Br(a,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Oe(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Oe(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Oe(n,o))&&a.unshift(Wr(n,l,s)):i||null!=(l=Oe(n,o))&&a.push(Wr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Kr,"")}function Jr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(o(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Gt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[fi]||null}var Si=[],_i=-1;function Ai(e){return{current:e}}function Ei(e){0>_i||(e.current=Si[_i],Si[_i]=null,_i--)}function Ci(e,t){_i++,Si[_i]=e.current,e.current=t}var Mi={},Ti=Ai(Mi),Pi=Ai(!1),Di=Mi;function ki(e,t){var n=e.type.contextTypes;if(!n)return Mi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ei(Pi),Ei(Ti)}function Ii(e,t,n){if(Ti.current!==Mi)throw Error(o(168));Ci(Ti,t),Ci(Pi,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,V(e)||"Unknown",i));return j({},n,r)}function Ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mi,Di=Ti.current,Ci(Ti,e),Ci(Pi,Pi.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Ei(Pi),Ei(Ti),Ci(Ti,e)):Ei(Pi),Ci(Pi,n)}var Bi=null,Fi=!1,zi=!1;function Ui(e){null===Bi?Bi=[e]:Bi.push(e)}function Gi(){if(!zi&&null!==Bi){zi=!0;var e=0,t=xt;try{var n=Bi;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,Fi=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),Ye($e,Gi),i}finally{xt=t,zi=!1}}return null}var Vi=[],Hi=0,Wi=null,qi=0,Yi=[],Xi=0,Qi=null,Ki=1,Zi="";function Ji(e,t){Vi[Hi++]=qi,Vi[Hi++]=Wi,Wi=e,qi=t}function $i(e,t,n){Yi[Xi++]=Ki,Yi[Xi++]=Zi,Yi[Xi++]=Qi,Qi=e;var r=Ki;e=Zi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ki=1<<32-at(t)+i|n<<i|r,Zi=o+e}else Ki=1<<o|n<<i|r,Zi=e}function eo(e){null!==e.return&&(Ji(e,1),$i(e,1,0))}function to(e){for(;e===Wi;)Wi=Vi[--Hi],Vi[Hi]=null,qi=Vi[--Hi],Vi[Hi]=null;for(;e===Qi;)Qi=Yi[--Xi],Yi[Xi]=null,Zi=Yi[--Xi],Yi[Xi]=null,Ki=Yi[--Xi],Yi[Xi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=kc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Ki,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=kc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Ai(null),xo=null,bo=null,wo=null;function So(){wo=bo=xo=null}function _o(e){var t=yo.current;Ei(yo),e._currentValue=t}function Ao(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){xo=e,wo=bo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},null===bo){if(null===xo)throw Error(o(308));bo=e,xo.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var Mo=null;function To(e){null===Mo?Mo=[e]:Mo.push(e)}function Po(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,To(t)):(n.next=i.next,i.next=n),t.interleaved=n,Do(e,r)}function Do(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var ko=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Io(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Do(e,n)}return null===(i=r.interleaved)?(t.next=t,To(r)):(t.next=i.next,i.next=t),r.interleaved=t,Do(e,n)}function No(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function jo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bo(e,t,n,r){var i=e.updateQueue;ko=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=j({},d,h);break e;case 2:ko=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Nl|=a,e.lanes=a,e.memoizedState=d}}function Fo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var zo=(new r.Component).refs;function Uo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Go={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Io(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(nc(t,e,i,r),No(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Io(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(nc(t,e,i,r),No(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Io(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Lo(e,i,r))&&(nc(t,e,r,n),No(t,e,r))}};function Vo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Ho(e,t,n){var r=!1,i=Mi,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Oi(t)?Di:Ti.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?ki(e,i):Mi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Go,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Go.enqueueReplaceState(t,t.state,null)}function qo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=zo,Oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Oi(t)?Di:Ti.current,i.context=ki(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Uo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Go.enqueueReplaceState(i,i.state,null),Bo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===zo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Xo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qo(e){return(0,e._init)(e._payload)}function Ko(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&Qo(o)===t.type)?((r=i(t,n.props)).ref=Yo(e,t,n),r.return=e,r):((r=Ic(n.type,n.key,n.props,null,e.mode,r)).ref=Yo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ic(t.type,t.key,t.props,null,e.mode,n)).ref=Yo(e,null,t),n.return=e,n;case S:return(t=Bc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Xo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);Xo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);Xo(t,r)}return null}function m(i,o,s,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),o=a(v,o,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===s.length)return n(i,d),io&&Ji(i,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(o=a(d,o,m),null===u?c=d:u.sibling=d,u=d);return io&&Ji(i,m),c}for(d=r(i,d);m<s.length;m++)null!==(g=p(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Ji(i,m),c}function g(i,s,l,c){var u=L(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var x=f(i,m,y.value,c);if(null===x){null===m&&(m=v);break}e&&m&&null===x.alternate&&t(i,m),s=a(x,s,g),null===d?u=x:d.sibling=x,d=x,m=v}if(y.done)return n(i,m),io&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(s=a(y,s,g),null===d?u=y:d.sibling=y,d=y);return io&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Ji(i,g),u}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===_){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Qo(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=Yo(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===_?((o=Lc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Ic(a.type,a.key,a.props,null,r.mode,l)).ref=Yo(r,o,a),l.return=r,r=l)}return s(r);case S:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Bc(a,r.mode,l)).return=r,r=o}return s(r);case O:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return m(r,o,a,l);if(L(a))return g(r,o,a,l);Xo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=jc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Zo=Ko(!0),Jo=Ko(!1),$o={},ea=Ai($o),ta=Ai($o),na=Ai($o);function ra(e){if(e===$o)throw Error(o(174));return e}function ia(e,t){switch(Ci(na,t),Ci(ta,e),Ci(ea,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(ea),Ci(ea,t)}function oa(){Ei(ea),Ei(ta),Ei(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=le(t,e.type);t!==n&&(Ci(ta,e),Ci(ea,n))}function sa(e){ta.current===e&&(Ei(ea),Ei(ta))}var la=Ai(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function da(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var ha=b.ReactCurrentDispatcher,fa=b.ReactCurrentBatchConfig,pa=0,ma=null,ga=null,va=null,ya=!1,xa=!1,ba=0,wa=0;function Sa(){throw Error(o(321))}function _a(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Aa(e,t,n,r,i,a){if(pa=a,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=null===e||null===e.memoizedState?ss:ls,e=n(r,i),xa){a=0;do{if(xa=!1,ba=0,25<=a)throw Error(o(301));a+=1,va=ga=null,t.updateQueue=null,ha.current=cs,e=n(r,i)}while(xa)}if(ha.current=as,t=null!==ga&&null!==ga.next,pa=0,va=ga=ma=null,ya=!1,t)throw Error(o(300));return e}function Ea(){var e=0!==ba;return ba=0,e}function Ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===va?ma.memoizedState=va=e:va=va.next=e,va}function Ma(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===va?ma.memoizedState:va.next;if(null!==t)va=t,ga=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===va?ma.memoizedState=va=e:va=va.next=e}return va}function Ta(e,t){return"function"===typeof t?t(e):t}function Pa(e){var t=Ma(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((pa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,ma.lanes|=d,Nl|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,ma.lanes|=a,Nl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Da(e){var t=Ma(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ka(){}function Oa(e,t){var n=ma,r=Ma(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,Ha(La.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==va&&1&va.memoizedState.tag){if(n.flags|=2048,Fa(9,Ia.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(o(349));0!==(30&pa)||Ra(n,t,i)}return i}function Ra(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ia(e,t,n,r){t.value=n,t.getSnapshot=r,Na(t)&&ja(e)}function La(e,t,n){return n((function(){Na(t)&&ja(e)}))}function Na(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function ja(e){var t=Do(e,1);null!==t&&nc(t,e,1,-1)}function Ba(e){var t=Ca();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,ma,e),[t.memoizedState,e]}function Fa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function za(){return Ma().memoizedState}function Ua(e,t,n,r){var i=Ca();ma.flags|=e,i.memoizedState=Fa(1|t,n,void 0,void 0===r?null:r)}function Ga(e,t,n,r){var i=Ma();r=void 0===r?null:r;var o=void 0;if(null!==ga){var a=ga.memoizedState;if(o=a.destroy,null!==r&&_a(r,a.deps))return void(i.memoizedState=Fa(t,n,o,r))}ma.flags|=e,i.memoizedState=Fa(1|t,n,o,r)}function Va(e,t){return Ua(8390656,8,e,t)}function Ha(e,t){return Ga(2048,8,e,t)}function Wa(e,t){return Ga(4,2,e,t)}function qa(e,t){return Ga(4,4,e,t)}function Ya(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ga(4,4,Ya.bind(null,t,e),n)}function Qa(){}function Ka(e,t){var n=Ma();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_a(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Za(e,t){var n=Ma();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_a(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ja(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),ma.lanes|=n,Nl|=n,e.baseState=!0),t)}function $a(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=fa.transition;fa.transition={};try{e(!1),t()}finally{xt=n,fa.transition=r}}function es(){return Ma().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Po(e,t,n,r))){nc(n,e,r,ec()),os(n,t,r)}}function ns(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,To(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Po(e,t,i,r))&&(nc(n,e,r,i=ec()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function is(e,t){xa=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var as={readContext:Co,useCallback:Sa,useContext:Sa,useEffect:Sa,useImperativeHandle:Sa,useInsertionEffect:Sa,useLayoutEffect:Sa,useMemo:Sa,useReducer:Sa,useRef:Sa,useState:Sa,useDebugValue:Sa,useDeferredValue:Sa,useTransition:Sa,useMutableSource:Sa,useSyncExternalStore:Sa,useId:Sa,unstable_isNewReconciler:!1},ss={readContext:Co,useCallback:function(e,t){return Ca().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:Va,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4194308,4,Ya.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ua(4,2,e,t)},useMemo:function(e,t){var n=Ca();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ca();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ca().memoizedState=e},useState:Ba,useDebugValue:Qa,useDeferredValue:function(e){return Ca().memoizedState=e},useTransition:function(){var e=Ba(!1),t=e[0];return e=$a.bind(null,e[1]),Ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ma,i=Ca();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Pl)throw Error(o(349));0!==(30&pa)||Ra(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Va(La.bind(null,r,a,e),[e]),r.flags|=2048,Fa(9,Ia.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ca(),t=Pl.identifierPrefix;if(io){var n=Zi;t=":"+t+"R"+(n=(Ki&~(1<<32-at(Ki)-1)).toString(32)+n),0<(n=ba++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Co,useCallback:Ka,useContext:Co,useEffect:Ha,useImperativeHandle:Xa,useInsertionEffect:Wa,useLayoutEffect:qa,useMemo:Za,useReducer:Pa,useRef:za,useState:function(){return Pa(Ta)},useDebugValue:Qa,useDeferredValue:function(e){return Ja(Ma(),ga.memoizedState,e)},useTransition:function(){return[Pa(Ta)[0],Ma().memoizedState]},useMutableSource:ka,useSyncExternalStore:Oa,useId:es,unstable_isNewReconciler:!1},cs={readContext:Co,useCallback:Ka,useContext:Co,useEffect:Ha,useImperativeHandle:Xa,useInsertionEffect:Wa,useLayoutEffect:qa,useMemo:Za,useReducer:Da,useRef:za,useState:function(){return Da(Ta)},useDebugValue:Qa,useDeferredValue:function(e){var t=Ma();return null===ga?t.memoizedState=e:Ja(t,ga.memoizedState,e)},useTransition:function(){return[Da(Ta)[0],Ma().memoizedState]},useMutableSource:ka,useSyncExternalStore:Oa,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Io(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),hs(0,t)},n}function ms(e,t,n){(n=Io(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Io(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var xs=b.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?Jo(t,null,n,r):Zo(t,e.child,n,r)}function Ss(e,t,n,r,i){n=n.render;var o=t.ref;return Eo(t,i),r=Aa(e,t,n,r,o,i),n=Ea(),null===e||bs?(io&&n&&eo(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function _s(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ic(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,As(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Rc(o,r)).ref=t.ref,e.return=t,t.child=e}function As(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ms(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Rl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Rl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Rl,Ol),Ol|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Rl,Ol),Ol|=r;return ws(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ms(e,t,n,r,i){var o=Oi(n)?Di:Ti.current;return o=ki(t,o),Eo(t,i),n=Aa(e,t,n,r,o,i),r=Ea(),null===e||bs?(io&&r&&eo(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ts(e,t,n,r,i){if(Oi(n)){var o=!0;Ni(t)}else o=!1;if(Eo(t,i),null===t.stateNode)Vs(e,t),Ho(t,n,r),qo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Co(c):c=ki(t,c=Oi(n)?Di:Ti.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Wo(t,a,r,c),ko=!1;var h=t.memoizedState;a.state=h,Bo(t,r,a,i),l=t.memoizedState,s!==r||h!==l||Pi.current||ko?("function"===typeof u&&(Uo(t,n,u,r),l=t.memoizedState),(s=ko||Vo(t,n,s,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ro(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:vo(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Co(l):l=ki(t,l=Oi(n)?Di:Ti.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&Wo(t,a,r,l),ko=!1,h=t.memoizedState,a.state=h,Bo(t,r,a,i);var p=t.memoizedState;s!==d||h!==p||Pi.current||ko?("function"===typeof f&&(Uo(t,n,f,r),p=t.memoizedState),(c=ko||Vo(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ps(e,t,n,r,o,i)}function Ps(e,t,n,r,i,o){Cs(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&ji(t,n,!1),Hs(e,t,o);r=t.stateNode,xs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Zo(t,e.child,null,o),t.child=Zo(t,null,s,o)):ws(e,t,s,o),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Ds(e){var t=e.stateNode;t.pendingContext?Ii(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ii(0,t.context,!1),ia(e,t.containerInfo)}function ks(e,t,n,r,i){return po(),mo(i),t.flags|=256,ws(e,t,n,r),t.child}var Os,Rs,Is,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ns(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,i=t.pendingProps,a=la.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ci(la,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Nc(l,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ns(n),t.memoizedState=Ls,e):Bs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,r=ds(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Nc({mode:"visible",children:r.children},i,0,null),(a=Lc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Zo(t,e.child,null,s),t.child.memoizedState=Ns(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return Fs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fs(e,t,s,r=ds(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Pl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Do(e,i),nc(r,e,i,-1))}return mc(),Fs(e,t,s,r=ds(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Mc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Yi[Xi++]=Ki,Yi[Xi++]=Zi,Yi[Xi++]=Qi,Ki=e.id,Zi=e.overflow,Qi=t),(t=Bs(t,r.children)).flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Rc(r,s):(s=Lc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ns(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Rc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bs(e,t){return(t=Nc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,n,r){return null!==r&&mo(r),Zo(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ao(e.return,t,n)}function Us(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Gs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=la.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(la,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Us(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ca(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Us(t,!0,n,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ys(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Oi(t.type)&&Ri(),qs(t),null;case 3:return r=t.stateNode,oa(),Ei(Pi),Ei(Ti),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),qs(t),null;case 5:sa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return qs(t),null}if(e=ra(ea.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":K(r,a),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fr("invalid",r);break;case"textarea":ie(r,a),Fr("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":q(r),$(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Os(e,t),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":K(e,r),i=Q(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fr("scroll",e):null!=u&&x(e,a,u,l))}switch(n){case"input":q(e),$(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Is(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return qs(t),null;case 13:if(Ei(la),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&la.current)?0===Il&&(Il=3):mc())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return oa(),null===e&&Gr(t.stateNode.containerInfo),qs(t),null;case 10:return _o(t.type._context),qs(t),null;case 19:if(Ei(la),null===(a=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ws(a,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ca(e))){for(t.flags|=128,Ws(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(la,1&la.current|2),t.child}e=e.sibling}null!==a.tail&&Ze()>Gl&&(t.flags|=128,r=!0,Ws(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return qs(t),null}else 2*Ze()-a.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,Ws(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ze(),t.sibling=null,n=la.current,Ci(la,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xs(e,t){switch(to(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Ei(Pi),Ei(Ti),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Ei(la),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(la),null;case 4:return oa(),null;case 10:return _o(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),a=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Is=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,Ks=!1,Zs="function"===typeof WeakSet?WeakSet:Set,Js=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ac(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ac(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ks||$s(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Gt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Ks&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ac(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,hl(e,t,n),Ks=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));fl(a,s,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ac(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ac(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ac(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ac(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Z(i,a),xe(l,s);var u=xe(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):x(i,d,h,u)}switch(l){case"input":J(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Ac(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Ac(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(g){Ac(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Ze())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(u=Ks)||d,ml(t,e),Ks=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(h=Js=d;null!==Js;){switch(p=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:$s(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ac(r,n,g)}}break;case 5:$s(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,Js=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Ac(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ac(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Ac(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Js=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Qs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Qs;var c=Ks;if(Qs=a,(Ks=l)&&!c)for(Js=i;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?Sl(i):null!==l?(l.return=a,Js=l):Sl(i);for(;null!==o;)Js=o,xl(o,t,n),o=o.sibling;Js=i,Qs=s,Ks=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):bl(e)}}function bl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ks)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Fo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Gt(h)}}}break;default:throw Error(o(163))}Ks||512&t.flags&&il(t)}catch(f){Ac(t,t.return,f)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function wl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function Sl(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ac(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ac(t,i,l)}}var o=t.return;try{il(t)}catch(l){Ac(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Ac(t,a,l)}}}catch(l){Ac(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var _l,Al=Math.ceil,El=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,Ml=b.ReactCurrentBatchConfig,Tl=0,Pl=null,Dl=null,kl=0,Ol=0,Rl=Ai(0),Il=0,Ll=null,Nl=0,jl=0,Bl=0,Fl=null,zl=null,Ul=0,Gl=1/0,Vl=null,Hl=!1,Wl=null,ql=null,Yl=!1,Xl=null,Ql=0,Kl=0,Zl=null,Jl=-1,$l=0;function ec(){return 0!==(6&Tl)?Ze():-1!==Jl?Jl:Jl=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==kl?kl&-kl:null!==go.transition?(0===$l&&($l=mt()),$l):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nc(e,t,n,r){if(50<Kl)throw Kl=0,Zl=null,Error(o(185));vt(e,n,r),0!==(2&Tl)&&e===Pl||(e===Pl&&(0===(2&Tl)&&(jl|=n),4===Il&&sc(e,kl)),rc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Gl=Ze()+500,Fi&&Gi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===Pl?kl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Fi=!0,Ui(e)}(lc.bind(null,e)):Ui(lc.bind(null,e)),ai((function(){0===(6&Tl)&&Gi()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,$l=0,0!==(6&Tl))throw Error(o(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===Pl?kl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Tl;Tl|=2;var a=pc();for(Pl===e&&kl===t||(Vl=null,Gl=Ze()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}So(),El.current=a,Tl=i,null!==Dl?t=0:(Pl=null,kl=0,t=Il)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ll,hc(e,0),sc(e,r),rc(e,Ze()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t))throw n=Ll,hc(e,0),sc(e,r),rc(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,zl,Vl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Ul+500-Ze())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,zl,Vl),t);break}wc(e,zl,Vl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,zl,Vl),r);break}wc(e,zl,Vl);break;default:throw Error(o(329))}}}return rc(e,Ze()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function sc(e,t){for(t&=~Bl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Tl))throw Error(o(327));Sc();var t=ht(e,0);if(0===(1&t))return rc(e,Ze()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ll,hc(e,0),sc(e,t),rc(e,Ze()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zl,Vl),rc(e,Ze()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Gl=Ze()+500,Fi&&Gi())}}function uc(e){null!==Xl&&0===Xl.tag&&0===(6&Tl)&&Sc();var t=Tl;Tl|=1;var n=Ml.transition,r=xt;try{if(Ml.transition=null,xt=1,e)return e()}finally{xt=r,Ml.transition=n,0===(6&(Tl=t))&&Gi()}}function dc(){Ol=Rl.current,Ei(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:oa(),Ei(Pi),Ei(Ti),da();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Ei(la);break;case 10:_o(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Dl=e=Rc(e.current,null),kl=Ol=t,Il=0,Ll=null,Bl=jl=Nl=0,zl=Fl=null,null!==Mo){for(t=0;t<Mo.length;t++)if(null!==(r=(n=Mo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Mo=null}return e}function fc(e,t){for(;;){var n=Dl;try{if(So(),ha.current=as,ya){for(var r=ma.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(pa=0,va=ga=ma=null,xa=!1,ba=0,Cl.current=null,null===n||null===n.return){Il=1,Ll=t,Dl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=kl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&gs(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){gs(a,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=vs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ys(v,s,l,0,t),mo(us(c,l));break e}}a=c=us(c,l),4!==Il&&(Il=2),null===Fl?Fl=[a]:Fl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,jo(a,ps(0,c,t));break e;case 1:l=c;var y=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===ql||!ql.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,jo(a,ms(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=as,null===e?as:e}function mc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Pl||0===(268435455&Nl)&&0===(268435455&jl)||sc(Pl,kl)}function gc(e,t){var n=Tl;Tl|=2;var r=pc();for(Pl===e&&kl===t||(Vl=null,hc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(So(),Tl=n,El.current=r,null!==Dl)throw Error(o(261));return Pl=null,kl=0,Il}function vc(){for(;null!==Dl;)xc(Dl)}function yc(){for(;null!==Dl&&!Qe();)xc(Dl)}function xc(e){var t=_l(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?bc(e):Dl=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ys(n,t,Ol)))return void(Dl=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Il=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Il&&(Il=5)}function wc(e,t,n){var r=xt,i=Ml.transition;try{Ml.transition=null,xt=1,function(e,t,n,r){do{Sc()}while(null!==Xl);if(0!==(6&Tl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Pl&&(Dl=Pl=null,kl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Pc(tt,(function(){return Sc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ml.transition,Ml.transition=null;var s=xt;xt=1;var l=Tl;Tl|=4,Cl.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=s),f===a&&++d===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:vo(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(w){Ac(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Ke(),Tl=l,xt=s,Ml.transition=a}else e.current=n;if(Yl&&(Yl=!1,Xl=e,Ql=i),0===(a=e.pendingLanes)&&(ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Ql)&&0!==e.tag&&Sc(),0!==(1&(a=e.pendingLanes))?e===Zl?Kl++:(Kl=0,Zl=e):Kl=0,Gi()}(e,t,n,r)}finally{Ml.transition=i,xt=r}return null}function Sc(){if(null!==Xl){var e=bt(Ql),t=Ml.transition,n=xt;try{if(Ml.transition=null,xt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Ql=0,0!==(6&Tl))throw Error(o(331));var i=Tl;for(Tl|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Js=h;else for(;null!==Js;){var f=(d=Js).sibling,p=d.return;if(ol(d),d===u){Js=null;break}if(null!==f){f.return=p,Js=f;break}Js=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Js=y;break e}Js=a.return}}var x=e.current;for(Js=x;null!==Js;){var b=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Js=b;else e:for(s=x;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){Ac(l,l.return,S)}if(l===s){Js=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Js=w;break e}Js=l.return}}if(Tl=i,Gi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{xt=n,Ml.transition=t}}return!1}function _c(e,t,n){e=Lo(e,t=ps(0,t=us(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Ac(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Lo(t,e=ms(t,e=us(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(kl&n)===n&&(4===Il||3===Il&&(130023424&kl)===kl&&500>Ze()-Ul?hc(e,0):Bl|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Do(e,t))&&(vt(e,t,n),rc(e,n))}function Mc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Cc(e,n)}function Pc(e,t){return Ye(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kc(e,t,n,r){return new Dc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=kc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ic(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Lc(n.children,i,a,t);case A:s=8,i|=8;break;case E:return(e=kc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case P:return(e=kc(13,n,t,i)).elementType=P,e.lanes=a,e;case D:return(e=kc(19,n,t,i)).elementType=D,e.lanes=a,e;case R:return Nc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case M:s=9;break e;case T:s=11;break e;case k:s=14;break e;case O:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=kc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=kc(7,e,r,t)).lanes=n,e}function Nc(e,t,n,r){return(e=kc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=kc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=kc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,o,a,s,l){return e=new Fc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=kc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function Uc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Gc(e){if(!e)return Mi;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function Vc(e,t,n,r,i,o,a,s,l){return(e=zc(n,r,!0,e,0,o,0,s,l)).context=Gc(null),n=e.current,(o=Io(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Hc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=Gc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Io(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Lo(i,t,a))&&(nc(e,i,a,o),No(e,i,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pi.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ds(t),po();break;case 5:aa(t);break;case 1:Oi(t.type)&&Ni(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(la,1&la.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Ci(la,1&la.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ci(la,1&la.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(la,la.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,io&&0!==(1048576&t.flags)&&$i(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=ki(t,Ti.current);Eo(t,n),i=Aa(null,t,r,e,i,n);var a=Ea();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(a=!0,Ni(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oo(t),i.updater=Go,t.stateNode=i,i._reactInternals=t,qo(t,r,e,n),t=Ps(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===k)return 14}return 2}(r),e=vo(r,e),i){case 0:t=Ms(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=Ss(null,t,r,e,n);break e;case 14:t=_s(null,t,r,vo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ms(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 3:e:{if(Ds(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ro(e,t),Bo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=ks(e,t,r,n,i=us(Error(o(423)),t));break e}if(r!==i){t=ks(e,t,r,n,i=us(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Jo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Cs(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return js(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zo(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ci(yo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Pi.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Io(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ao(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ao(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Eo(t,n),r=r(i=Co(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=vo(r=t.type,t.pendingProps),_s(e,t,r,i=vo(r.type,i),n);case 15:return As(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vo(r,i),Vs(e,t),t.tag=1,Oi(r)?(e=!0,Ni(t)):e=!1,Eo(t,n),Ho(t,r,i),qo(t,r,i,n),Ps(null,t,r,!0,e,n);case 19:return Gs(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function eu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Wc(a);s.call(e)}}Hc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wc(a);o.call(e)}}var a=Vc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=a,e[pi]=a.current,Gr(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wc(l);s.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pi]=l.current,Gr(8===e.nodeType?e.parentNode:e),uc((function(){Hc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(a)}Kc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hc(e,t,null,null)},Kc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Hc(null,e,null,null)})),t[pi]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Ze()),0===(6&Tl)&&(Gl=Ze()+500,Gi()))}break;case 13:uc((function(){var t=Do(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Yc(e,1)}},St=function(e){if(13===e.tag){var t=Do(e,134217728);if(null!==t)nc(t,e,134217728,ec());Yc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Do(e,t);if(null!==n)nc(n,e,t,ec());Yc(e,t)}},At=function(){return xt},Et=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));Y(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Pe=uc;var tu={usingClientEntryPoint:!1,Events:[xi,bi,wi,Ce,Me,cc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(o(200));return Uc(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(o(299));var n=!1,r="",i=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Gr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Gr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Kc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=x.prototype=new y;b.constructor=x,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!A.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:_.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var M=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+T(l,0):o,w(a)?(i="",null!=e&&(i=e.replace(M,"$&/")+"/"),P(a,t,i,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(M,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+T(s=e[c],c);l+=P(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=P(s=s.value,t,i,u=o+T(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function D(e,t,n){if(null==e)return e;var r=[],i=0;return P(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function k(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},I={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=x,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!A.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,R(S);else{var t=r(u);null!==t&&I(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(C),C=-1),p=!0;var o=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&I(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,A=!1,E=null,C=-1,M=5,T=-1;function P(){return!(t.unstable_now()-T<M)}function D(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?_():(A=!1,E=null)}}else A=!1}if("function"===typeof x)_=function(){x(D)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,O=k.port2;k.port1.onmessage=D,_=function(){O.postMessage(null)}}else _=function(){v(D,0)};function R(e){E=e,A||(A=!0,_())}function I(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(C),C=-1):g=!0,I(w,o-a))):(e.sortIndex=s,n(c,e),m||p||(m=!0,R(S))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)},561:(e,t,n)=>{"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,a=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return s((function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})}),[e,n,t]),a((function(){return c(i)&&u({inst:i}),e((function(){c(i)&&u({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},248:(e,t,n)=>{"use strict";e.exports=n(561)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{227:"3cabc3e6",232:"765aea66",237:"e4106284",483:"92d24b41",526:"37abd843"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="meggs-rental:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,a=r[0],s=r[1],l=r[2],c=0;if(a.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkmeggs_rental=self.webpackChunkmeggs_rental||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(791),t=n.t(e,2),r=n(250);const i="undefined"===typeof window;function o(){}function a(e){return"number"===typeof e&&e>=0&&e!==1/0}function s(e,t){return Math.max(e+(t||0)-Date.now(),0)}function l(e,t,n){return w(e)?"function"===typeof t?{...n,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function c(e,t,n){return w(e)?[{...t,queryKey:e},n]:[e||{},t]}function u(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:a,stale:s}=e;if(w(a))if(r){if(t.queryHash!==h(a,t.options))return!1}else if(!p(t.queryKey,a))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!==typeof s||t.isStale()===s)&&(("undefined"===typeof i||i===t.state.fetchStatus)&&!(o&&!o(t)))}function d(e,t){const{exact:n,fetching:r,predicate:i,mutationKey:o}=e;if(w(o)){if(!t.options.mutationKey)return!1;if(n){if(f(t.options.mutationKey)!==f(o))return!1}else if(!p(t.options.mutationKey,o))return!1}return("boolean"!==typeof r||"loading"===t.state.status===r)&&!(i&&!i(t))}function h(e,t){return((null==t?void 0:t.queryKeyHashFn)||f)(e)}function f(e){return JSON.stringify(e,((e,t)=>x(t)?Object.keys(t).sort().reduce(((e,n)=>(e[n]=t[n],e)),{}):t))}function p(e,t){return m(e,t)}function m(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&!Object.keys(t).some((n=>!m(e[n],t[n]))))}function g(e,t){if(e===t)return e;const n=y(e)&&y(t);if(n||x(e)&&x(t)){const r=n?e.length:Object.keys(e).length,i=n?t:Object.keys(t),o=i.length,a=n?[]:{};let s=0;for(let l=0;l<o;l++){const r=n?l:i[l];a[r]=g(e[r],t[r]),a[r]===e[r]&&s++}return r===o&&s===r?e:a}return t}function v(e,t){if(e&&!t||t&&!e)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function y(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function x(e){if(!b(e))return!1;const t=e.constructor;if("undefined"===typeof t)return!0;const n=t.prototype;return!!b(n)&&!!n.hasOwnProperty("isPrototypeOf")}function b(e){return"[object Object]"===Object.prototype.toString.call(e)}function w(e){return Array.isArray(e)}function S(e){return new Promise((t=>{setTimeout(t,e)}))}function _(e){S(0).then(e)}function A(e,t,n){return null!=n.isDataEqual&&n.isDataEqual(e,t)?e:"function"===typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?g(e,t):t}const E=console;const C=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()};const i=r=>{t?e.push(r):_((()=>{n(r)}))},o=()=>{const t=e;e=[],t.length&&_((()=>{r((()=>{t.forEach((e=>{n(e)}))}))}))};return{batch:e=>{let n;t++;try{n=e()}finally{t--,t||o()}return n},batchCalls:e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];i((()=>{e(...n)}))},schedule:i,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e}}}();class M{constructor(){this.listeners=[],this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.push(e),this.onSubscribe(),()=>{this.listeners=this.listeners.filter((t=>t!==e)),this.onUnsubscribe()}}hasListeners(){return this.listeners.length>0}onSubscribe(){}onUnsubscribe(){}}const T=new class extends M{constructor(){super(),this.setup=e=>{if(!i&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e((e=>{"boolean"===typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){this.focused=e,e&&this.onFocus()}onFocus(){this.listeners.forEach((e=>{e()}))}isFocused(){return"boolean"===typeof this.focused?this.focused:"undefined"===typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}};const P=new class extends M{constructor(){super(),this.setup=e=>{if(!i&&window.addEventListener){const t=()=>e();return window.addEventListener("online",t,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)}setEventListener(e){var t;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e((e=>{"boolean"===typeof e?this.setOnline(e):this.onOnline()}))}setOnline(e){this.online=e,e&&this.onOnline()}onOnline(){this.listeners.forEach((e=>{e()}))}isOnline(){return"boolean"===typeof this.online?this.online:"undefined"===typeof navigator||"undefined"===typeof navigator.onLine||navigator.onLine}};function D(e){return Math.min(1e3*2**e,3e4)}function k(e){return"online"!==(null!=e?e:"online")||P.isOnline()}class O{constructor(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}}function R(e){return e instanceof O}function I(e){let t,n,r,i=!1,o=0,a=!1;const s=new Promise(((e,t)=>{n=e,r=t})),l=()=>!T.isFocused()||"always"!==e.networkMode&&!P.isOnline(),c=r=>{a||(a=!0,null==e.onSuccess||e.onSuccess(r),null==t||t(),n(r))},u=n=>{a||(a=!0,null==e.onError||e.onError(n),null==t||t(),r(n))},d=()=>new Promise((n=>{t=e=>{if(a||!l())return n(e)},null==e.onPause||e.onPause()})).then((()=>{t=void 0,a||null==e.onContinue||e.onContinue()})),h=()=>{if(a)return;let t;try{t=e.fn()}catch(n){t=Promise.reject(n)}Promise.resolve(t).then(c).catch((t=>{var n,r;if(a)return;const s=null!=(n=e.retry)?n:3,c=null!=(r=e.retryDelay)?r:D,f="function"===typeof c?c(o,t):c,p=!0===s||"number"===typeof s&&o<s||"function"===typeof s&&s(o,t);!i&&p?(o++,null==e.onFail||e.onFail(o,t),S(f).then((()=>{if(l())return d()})).then((()=>{i?u(t):h()}))):u(t)}))};return k(e.networkMode)?h():d().then(h),{promise:s,cancel:t=>{a||(u(new O(t)),null==e.abort||e.abort())},continue:()=>{null==t||t()},cancelRetry:()=>{i=!0},continueRetry:()=>{i=!1}}}class L{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),a(this.cacheTime)&&(this.gcTimeout=setTimeout((()=>{this.optionalRemove()}),this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,null!=e?e:i?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class N extends L{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||E,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||function(e){const t="function"===typeof e.initialData?e.initialData():e.initialData,n="undefined"!==typeof e.initialData?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0,r="undefined"!==typeof t;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?null!=n?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}(this.options),this.state=this.initialState,this.meta=e.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.meta=null==e?void 0:e.meta,this.updateCacheTime(this.options.cacheTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.cache.remove(this)}setData(e,t){const n=A(this.state.data,e,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),n}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;const n=this.promise;return null==(t=this.retryer)||t.cancel(e),n?n.then(o).catch(o):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some((e=>!1!==e.options.enabled))}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some((e=>e.getCurrentResult().isStale))}isStaleByTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.state.isInvalidated||!this.state.dataUpdatedAt||!s(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find((e=>e.shouldFetchOnWindowFocus()));t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}onOnline(){var e;const t=this.observers.find((e=>e.shouldFetchOnReconnect()));t&&t.refetch({cancelRefetch:!1}),null==(e=this.retryer)||e.continue()}addObserver(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var n,r;if("idle"!==this.state.fetchStatus)if(this.state.dataUpdatedAt&&null!=t&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var i;return null==(i=this.retryer)||i.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}Array.isArray(this.options.queryKey);const o=function(){if("function"===typeof AbortController)return new AbortController}(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},s=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};s(a);const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn"),meta:this.meta};var c;(s(l),null==(n=this.options.behavior)||n.onFetch(l),this.revertState=this.state,"idle"===this.state.fetchStatus||this.state.fetchMeta!==(null==(r=l.fetchOptions)?void 0:r.meta))&&this.dispatch({type:"fetch",meta:null==(c=l.fetchOptions)?void 0:c.meta});const u=e=>{var t,n;(R(e)&&e.silent||this.dispatch({type:"error",error:e}),R(e))||(null==(t=(n=this.cache.config).onError)||t.call(n,e,this));this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=I({fn:l.fetchFn,abort:null==o?void 0:o.abort.bind(o),onSuccess:e=>{var t,n;"undefined"!==typeof e?(this.setData(e),null==(t=(n=this.cache.config).onSuccess)||t.call(n,e,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1):u(new Error("undefined"))},onError:u,onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){this.state=(t=>{var n,r;switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null!=(n=e.meta)?n:null,fetchStatus:k(this.options.networkMode)?"fetching":"paused",...!t.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!=(r=e.dataUpdatedAt)?r:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return R(i)&&i.revert&&this.revertState?{...this.revertState}:{...t,error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),C.batch((()=>{this.observers.forEach((t=>{t.onQueryUpdate(e)})),this.cache.notify({query:this,type:"updated",action:e})}))}}class j extends M{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,t,n){var r;const i=t.queryKey,o=null!=(r=t.queryHash)?r:h(i,t);let a=this.get(o);return a||(a=new N({cache:this,logger:e.getLogger(),queryKey:i,queryHash:o,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i),meta:t.meta}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter((t=>t!==e)),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){C.batch((()=>{this.queries.forEach((e=>{this.remove(e)}))}))}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){const[n]=c(e,t);return"undefined"===typeof n.exact&&(n.exact=!0),this.queries.find((e=>u(n,e)))}findAll(e,t){const[n]=c(e,t);return Object.keys(n).length>0?this.queries.filter((e=>u(n,e))):this.queries}notify(e){C.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){C.batch((()=>{this.queries.forEach((e=>{e.onFocus()}))}))}onOnline(){C.batch((()=>{this.queries.forEach((e=>{e.onOnline()}))}))}}class B extends L{constructor(e){super(),this.options={...e.defaultOptions,...e.options},this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||E,this.observers=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0},this.meta=e.meta,this.updateCacheTime(this.options.cacheTime),this.scheduleGc()}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter((t=>t!==e)),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()}async execute(){const e=()=>{var e;return this.retryer=I({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(e,t)=>{this.dispatch({type:"failed",failureCount:e,error:t})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},t="loading"===this.state.status;try{var n,r,i,o,a,s;if(!t){var l,c,u,d;this.dispatch({type:"loading",variables:this.options.variables}),await(null==(l=(c=this.mutationCache.config).onMutate)?void 0:l.call(c,this.state.variables,this));const e=await(null==(u=(d=this.options).onMutate)?void 0:u.call(d,this.state.variables));e!==this.state.context&&this.dispatch({type:"loading",context:e,variables:this.state.variables})}const h=await e();return await(null==(n=(r=this.mutationCache.config).onSuccess)?void 0:n.call(r,h,this.state.variables,this.state.context,this)),await(null==(i=(o=this.options).onSuccess)?void 0:i.call(o,h,this.state.variables,this.state.context)),await(null==(a=(s=this.options).onSettled)?void 0:a.call(s,h,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:h}),h}catch(y){try{var h,f,p,m,g,v;throw await(null==(h=(f=this.mutationCache.config).onError)?void 0:h.call(f,y,this.state.variables,this.state.context,this)),await(null==(p=(m=this.options).onError)?void 0:p.call(m,y,this.state.variables,this.state.context)),await(null==(g=(v=this.options).onSettled)?void 0:g.call(v,void 0,y,this.state.variables,this.state.context)),y}finally{this.dispatch({type:"error",error:y})}}}dispatch(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"loading":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!k(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...t,...e.state}}})(this.state),C.batch((()=>{this.observers.forEach((t=>{t.onMutationUpdate(e)})),this.mutationCache.notify({mutation:this,type:"updated",action:e})}))}}class F extends M{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,t,n){const r=new B({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:n,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0,meta:t.meta});return this.add(r),r}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter((t=>t!==e)),this.notify({type:"removed",mutation:e})}clear(){C.batch((()=>{this.mutations.forEach((e=>{this.remove(e)}))}))}getAll(){return this.mutations}find(e){return"undefined"===typeof e.exact&&(e.exact=!0),this.mutations.find((t=>d(e,t)))}findAll(e){return this.mutations.filter((t=>d(e,t)))}notify(e){C.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.mutations.filter((e=>e.state.isPaused));return C.batch((()=>e.reduce(((e,t)=>e.then((()=>t.continue().catch(o)))),Promise.resolve())))}}function z(){return{onFetch:e=>{e.fetchFn=()=>{var t,n,r,i,o,a;const s=null==(t=e.fetchOptions)||null==(n=t.meta)?void 0:n.refetchPage,l=null==(r=e.fetchOptions)||null==(i=r.meta)?void 0:i.fetchMore,c=null==l?void 0:l.pageParam,u="forward"===(null==l?void 0:l.direction),d="backward"===(null==l?void 0:l.direction),h=(null==(o=e.state.data)?void 0:o.pages)||[],f=(null==(a=e.state.data)?void 0:a.pageParams)||[];let p=f,m=!1;const g=e.options.queryFn||(()=>Promise.reject("Missing queryFn")),v=(e,t,n,r)=>(p=r?[t,...p]:[...p,t],r?[n,...e]:[...e,n]),y=(t,n,r,i)=>{if(m)return Promise.reject("Cancelled");if("undefined"===typeof r&&!n&&t.length)return Promise.resolve(t);const o={queryKey:e.queryKey,pageParam:r,meta:e.meta};var a;a=o,Object.defineProperty(a,"signal",{enumerable:!0,get:()=>{var t,n;return null!=(t=e.signal)&&t.aborted?m=!0:null==(n=e.signal)||n.addEventListener("abort",(()=>{m=!0})),e.signal}});const s=g(o);return Promise.resolve(s).then((e=>v(t,r,e,i)))};let x;if(h.length)if(u){const t="undefined"!==typeof c,n=t?c:U(e.options,h);x=y(h,t,n)}else if(d){const t="undefined"!==typeof c,n=t?c:G(e.options,h);x=y(h,t,n,!0)}else{p=[];const t="undefined"===typeof e.options.getNextPageParam;x=!s||!h[0]||s(h[0],0,h)?y([],t,f[0]):Promise.resolve(v([],f[0],h[0]));for(let n=1;n<h.length;n++)x=x.then((r=>{if(!s||!h[n]||s(h[n],n,h)){const i=t?f[n]:U(e.options,r);return y(r,t,i)}return Promise.resolve(v(r,f[n],h[n]))}))}else x=y([]);return x.then((e=>({pages:e,pageParams:p})))}}}}function U(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function G(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}class V{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.queryCache=e.queryCache||new j,this.mutationCache=e.mutationCache||new F,this.logger=e.logger||E,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}mount(){this.unsubscribeFocus=T.subscribe((()=>{T.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())})),this.unsubscribeOnline=P.subscribe((()=>{P.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,t;null==(e=this.unsubscribeFocus)||e.call(this),null==(t=this.unsubscribeOnline)||t.call(this)}isFetching(e,t){const[n]=c(e,t);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state.data}getQueriesData(e){return this.getQueryCache().findAll(e).map((e=>{let{queryKey:t,state:n}=e;return[t,n.data]}))}setQueryData(e,t,n){const r=this.queryCache.find(e),i=function(e,t){return"function"===typeof e?e(t):e}(t,null==r?void 0:r.state.data);if("undefined"===typeof i)return;const o=l(e),a=this.defaultQueryOptions(o);return this.queryCache.build(this,a).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return C.batch((()=>this.getQueryCache().findAll(e).map((e=>{let{queryKey:r}=e;return[r,this.setQueryData(r,t,n)]}))))}getQueryState(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state}removeQueries(e,t){const[n]=c(e,t),r=this.queryCache;C.batch((()=>{r.findAll(n).forEach((e=>{r.remove(e)}))}))}resetQueries(e,t,n){const[r,i]=c(e,t,n),o=this.queryCache,a={type:"active",...r};return C.batch((()=>(o.findAll(r).forEach((e=>{e.reset()})),this.refetchQueries(a,i))))}cancelQueries(e,t,n){const[r,i={}]=c(e,t,n);"undefined"===typeof i.revert&&(i.revert=!0);const a=C.batch((()=>this.queryCache.findAll(r).map((e=>e.cancel(i)))));return Promise.all(a).then(o).catch(o)}invalidateQueries(e,t,n){const[r,i]=c(e,t,n);return C.batch((()=>{var e,t;if(this.queryCache.findAll(r).forEach((e=>{e.invalidate()})),"none"===r.refetchType)return Promise.resolve();const n={...r,type:null!=(e=null!=(t=r.refetchType)?t:r.type)?e:"active"};return this.refetchQueries(n,i)}))}refetchQueries(e,t,n){const[r,i]=c(e,t,n),a=C.batch((()=>this.queryCache.findAll(r).filter((e=>!e.isDisabled())).map((e=>{var t;return e.fetch(void 0,{...i,cancelRefetch:null==(t=null==i?void 0:i.cancelRefetch)||t,meta:{refetchPage:r.refetchPage}})}))));let s=Promise.all(a).then(o);return null!=i&&i.throwOnError||(s=s.catch(o)),s}fetchQuery(e,t,n){const r=l(e,t,n),i=this.defaultQueryOptions(r);"undefined"===typeof i.retry&&(i.retry=!1);const o=this.queryCache.build(this,i);return o.isStaleByTime(i.staleTime)?o.fetch(i):Promise.resolve(o.state.data)}prefetchQuery(e,t,n){return this.fetchQuery(e,t,n).then(o).catch(o)}fetchInfiniteQuery(e,t,n){const r=l(e,t,n);return r.behavior=z(),this.fetchQuery(r)}prefetchInfiniteQuery(e,t,n){return this.fetchInfiniteQuery(e,t,n).then(o).catch(o)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){const n=this.queryDefaults.find((t=>f(e)===f(t.queryKey)));n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;const t=this.queryDefaults.find((t=>p(e,t.queryKey)));return null==t?void 0:t.defaultOptions}setMutationDefaults(e,t){const n=this.mutationDefaults.find((t=>f(e)===f(t.mutationKey)));n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;const t=this.mutationDefaults.find((t=>p(e,t.mutationKey)));return null==t?void 0:t.defaultOptions}defaultQueryOptions(e){if(null!=e&&e._defaulted)return e;const t={...this.defaultOptions.queries,...this.getQueryDefaults(null==e?void 0:e.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=h(t.queryKey,t)),"undefined"===typeof t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),"undefined"===typeof t.useErrorBoundary&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return null!=e&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(null==e?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}const H=e.createContext(void 0),W=e.createContext(!1);function q(e,t){return e||(t&&"undefined"!==typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=H),window.ReactQueryClientContext):H)}const Y=t=>{let{client:n,children:r,context:i,contextSharing:o=!1}=t;e.useEffect((()=>(n.mount(),()=>{n.unmount()})),[n]);const a=q(i,o);return e.createElement(W.Provider,{value:!i&&o},e.createElement(a.Provider,{value:n},r))};function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X.apply(this,arguments)}var Q;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Q||(Q={}));const K="popstate";function Z(e){return{usr:e.state,key:e.key}}function J(e,t,n,r){return void 0===n&&(n=null),X({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?ee(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function $(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function ee(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function te(e){let t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:"unknown://unknown",n="string"===typeof e?e:$(e);return new URL(n,t)}function ne(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=Q.Pop,l=null;function c(){s=Q.Pop,l&&l({action:s,location:u.location})}let u={get action(){return s},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(K,c),l=e,()=>{i.removeEventListener(K,c),l=null}},createHref:e=>t(i,e),encodeLocation(e){let t=te($(e));return X({},e,{pathname:t.pathname,search:t.search,hash:t.hash})},push:function(e,t){s=Q.Push;let r=J(u.location,e,t);n&&n(r,e);let c=Z(r),d=u.createHref(r);try{a.pushState(c,"",d)}catch(h){i.location.assign(d)}o&&l&&l({action:s,location:u.location})},replace:function(e,t){s=Q.Replace;let r=J(u.location,e,t);n&&n(r,e);let i=Z(r),c=u.createHref(r);a.replaceState(i,"",c),o&&l&&l({action:s,location:u.location})},go:e=>a.go(e)};return u}var re;function ie(e,t,n){void 0===n&&(n="/");let r=he(("string"===typeof t?ee(t):t).pathname||"/",n);if(null==r)return null;let i=oe(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let a=0;null==o&&a<i.length;++a)o=ce(i[a],de(r));return o}function oe(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach(((e,i)=>{let o={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(fe(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=ye([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(fe(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),oe(e.children,t,s,a)),(null!=e.path||e.index)&&t.push({path:a,score:le(a,e.index),routesMeta:s})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(re||(re={}));const ae=/^:\w+$/,se=e=>"*"===e;function le(e,t){let n=e.split("/"),r=n.length;return n.some(se)&&(r+=-2),t&&(r+=2),n.filter((e=>!se(e))).reduce(((e,t)=>e+(ae.test(t)?3:""===t?1:10)),r)}function ce(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let a=0;a<n.length;++a){let e=n[a],s=a===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=ue({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;o.push({params:r,pathname:ye([i,c.pathname]),pathnameBase:xe(ye([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=ye([i,c.pathnameBase]))}return o}function ue(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);pe("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,((e,t)=>(r.push(t),"([^\\/]+)")));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce(((e,t,n)=>{if("*"===t){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return pe(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(s[n]||"",t),e}),{}),pathname:o,pathnameBase:a,pattern:e}}function de(e){try{return decodeURI(e)}catch(t){return pe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function he(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function fe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function pe(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(UV){}}}function me(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ge(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function ve(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=ee(e):(i=X({},e),fe(!i.pathname||!i.pathname.includes("?"),me("?","pathname","search",i)),fe(!i.pathname||!i.pathname.includes("#"),me("#","pathname","hash",i)),fe(!i.search||!i.search.includes("#"),me("#","search","hash",i)));let o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(r||null==s)o=n;else{let e=t.length-1;if(s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?ee(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:be(r),hash:we(i)}}(i,o),c=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const ye=e=>e.join("/").replace(/\/\/+/g,"/"),xe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),be=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",we=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class Se extends Error{}class _e{constructor(e,t,n){this.status=e,this.statusText=t||"",this.data=n}}function Ae(e){return e instanceof _e}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;const Ee=new Set(["POST","PUT","PATCH","DELETE"]);new Set(["GET","HEAD",...Ee]);function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ce.apply(this,arguments)}const Me="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},{useState:Te,useEffect:Pe,useLayoutEffect:De,useDebugValue:ke}=t;function Oe(e){const t=e.getSnapshot,n=e.value;try{const e=t();return!Me(n,e)}catch(r){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,(e=>{e.useSyncExternalStore})(t);const Re=e.createContext(null);const Ie=e.createContext(null);const Le=e.createContext(null);const Ne=e.createContext(null);const je=e.createContext(null);const Be=e.createContext({outlet:null,matches:[]});const Fe=e.createContext(null);function ze(){return null!=e.useContext(je)}function Ue(){return ze()||fe(!1),e.useContext(je).location}function Ge(){ze()||fe(!1);let{basename:t,navigator:n}=e.useContext(Ne),{matches:r}=e.useContext(Be),{pathname:i}=Ue(),o=JSON.stringify(ge(r).map((e=>e.pathnameBase))),a=e.useRef(!1);e.useEffect((()=>{a.current=!0}));let s=e.useCallback((function(e,r){if(void 0===r&&(r={}),!a.current)return;if("number"===typeof e)return void n.go(e);let s=ve(e,JSON.parse(o),i,"path"===r.relative);"/"!==t&&(s.pathname="/"===s.pathname?t:ye([t,s.pathname])),(r.replace?n.replace:n.push)(s,r.state,r)}),[t,n,o,i]);return s}function Ve(){let t=function(){var t;let n=e.useContext(Fe),r=Qe(Xe.UseRouteError),i=e.useContext(Be),o=i.matches[i.matches.length-1];if(n)return n;return i||fe(!1),!o.route.id&&fe(!1),null==(t=r.errors)?void 0:t[o.route.id]}(),n=Ae(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unhandled Thrown Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:o},r):null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",e.createElement("code",{style:a},"errorElement")," props on\xa0",e.createElement("code",{style:a},"<Route>")))}class He extends e.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?e.createElement(Fe.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function We(t){let{routeContext:n,match:r,children:i}=t,o=e.useContext(Re);return o&&r.route.errorElement&&(o._deepestRenderedBoundaryId=r.route.id),e.createElement(Be.Provider,{value:n},i)}function qe(t,n,r){if(void 0===n&&(n=[]),null==t){if(null==r||!r.errors)return null;t=r.matches}let i=t,o=null==r?void 0:r.errors;if(null!=o){let e=i.findIndex((e=>e.route.id&&(null==o?void 0:o[e.route.id])));e>=0||fe(!1),i=i.slice(0,Math.min(i.length,e+1))}return i.reduceRight(((t,a,s)=>{let l=a.route.id?null==o?void 0:o[a.route.id]:null,c=r?a.route.errorElement||e.createElement(Ve,null):null,u=()=>e.createElement(We,{match:a,routeContext:{outlet:t,matches:n.concat(i.slice(0,s+1))}},l?c:void 0!==a.route.element?a.route.element:t);return r&&(a.route.errorElement||0===s)?e.createElement(He,{location:r.location,component:c,error:l,children:u()}):u()}),null)}var Ye,Xe;function Qe(t){let n=e.useContext(Le);return n||fe(!1),n}!function(e){e.UseRevalidator="useRevalidator"}(Ye||(Ye={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Xe||(Xe={}));function Ke(e){fe(!1)}function Ze(t){let{basename:n="/",children:r=null,location:i,navigationType:o=Q.Pop,navigator:a,static:s=!1}=t;ze()&&fe(!1);let l=n.replace(/^\/*/,"/"),c=e.useMemo((()=>({basename:l,navigator:a,static:s})),[l,a,s]);"string"===typeof i&&(i=ee(i));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=i,m=e.useMemo((()=>{let e=he(u,l);return null==e?null:{pathname:e,search:d,hash:h,state:f,key:p}}),[l,u,d,h,f,p]);return null==m?null:e.createElement(Ne.Provider,{value:c},e.createElement(je.Provider,{children:r,value:{location:m,navigationType:o}}))}function Je(t){let{children:n,location:r}=t,i=e.useContext(Ie);return function(t,n){ze()||fe(!1);let r=e.useContext(Le),{matches:i}=e.useContext(Be),o=i[i.length-1],a=o?o.params:{},s=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let l,c=Ue();if(n){var u;let e="string"===typeof n?ee(n):n;"/"===s||(null==(u=e.pathname)?void 0:u.startsWith(s))||fe(!1),l=e}else l=c;let d=l.pathname||"/",h=ie(t,{pathname:"/"===s?d:d.slice(s.length)||"/"}),f=qe(h&&h.map((e=>Object.assign({},e,{params:Object.assign({},a,e.params),pathname:ye([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:ye([s,e.pathnameBase])}))),i,r||void 0);return n&&f?e.createElement(je.Provider,{value:{location:Ce({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:Q.Pop}},f):f}(i&&!n?i.router.routes:tt(n),r)}var $e;!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}($e||($e={}));new Promise((()=>{}));class et extends e.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){console.error("<Await> caught the following error during render",e,t)}render(){let{children:e,errorElement:t,resolve:n}=this.props,r=null,i=$e.pending;if(n instanceof Promise)if(this.state.error){$e.error;let e=this.state.error;Promise.reject().catch((()=>{})),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_error",{get:()=>e})}else n._tracked?(n,void 0!==r._error?$e.error:void 0!==r._data?$e.success:$e.pending):($e.pending,Object.defineProperty(n,"_tracked",{get:()=>!0}),n.then((e=>Object.defineProperty(n,"_data",{get:()=>e})),(e=>Object.defineProperty(n,"_error",{get:()=>e}))));else $e.success,Promise.resolve(),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_data",{get:()=>n});if(i===$e.error&&r._error instanceof AbortedDeferredError)throw neverSettledPromise;if(i===$e.error&&!t)throw r._error;if(i===$e.error)return React.createElement(AwaitContext.Provider,{value:r,children:t});if(i===$e.success)return React.createElement(AwaitContext.Provider,{value:r,children:e});throw r}}function tt(t,n){void 0===n&&(n=[]);let r=[];return e.Children.forEach(t,((t,i)=>{if(!e.isValidElement(t))return;if(t.type===e.Fragment)return void r.push.apply(r,tt(t.props.children,n));t.type!==Ke&&fe(!1),t.props.index&&t.props.children&&fe(!1);let o=[...n,i],a={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,hasErrorBoundary:null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle};t.props.children&&(a.children=tt(t.props.children,o)),r.push(a)})),r}function nt(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map((e=>[n,e])):[[n,r]])}),[]))}function rt(t){let{basename:n,children:r,window:i}=t,o=e.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:i,v5Compat:!0})&&(a={}),ne((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return J("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:$(t)}),null,a)));let s=o.current,[l,c]=e.useState({action:s.action,location:s.location});return e.useLayoutEffect((()=>s.listen(c)),[s]),e.createElement(Ze,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:s})}var it,ot;function at(t){let n=e.useRef(nt(t)),r=Ue(),i=e.useMemo((()=>function(e,t){let n=nt(e);for(let r of t.keys())n.has(r)||t.getAll(r).forEach((e=>{n.append(r,e)}));return n}(r.search,n.current)),[r.search]),o=Ge(),a=e.useCallback(((e,t)=>{const n=nt("function"===typeof e?e(i):e);o("?"+n,t)}),[o,i]);return[i,a]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(it||(it={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ot||(ot={}));var st=Object.create,lt=Object.defineProperty,ct=Object.getOwnPropertyDescriptor,ut=Object.getOwnPropertyNames,dt=Object.getPrototypeOf,ht=Object.prototype.hasOwnProperty,ft=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pt=(e,t,n)=>(n=null!=e?st(dt(e)):{},((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of ut(t))!ht.call(e,i)&&i!==n&&lt(e,i,{get:()=>t[i],enumerable:!(r=ct(t,i))||r.enumerable});return e})(!t&&e&&e.__esModule?n:lt(n,"default",{value:e,enumerable:!0}),e)),mt=ft(((e,t)=>{!function(n,r){"object"==typeof e&&typeof t<"u"?r(e):"function"==typeof define&&define.amd?define(["exports"],r):r((n=typeof globalThis<"u"?globalThis:n||self).SVDJS={})}(e,(function(e){e.SVD=function(e,t,n,r,i){if(t=void 0===t||t,n=void 0===n||n,i=1e-64/(r=r||Math.pow(2,-52)),!e)throw new TypeError("Matrix a is not defined");var o,a,s,l,c,u,d,h,f,p,m,g,v=e[0].length,y=e.length;if(y<v)throw new TypeError("Invalid matrix: m < n");for(var x=[],b=[],w=[],S="f"===t?y:v,_=p=d=0;_<y;_++)b[_]=new Array(S).fill(0);for(_=0;_<v;_++)w[_]=new Array(v).fill(0);var A,E=new Array(v).fill(0);for(_=0;_<y;_++)for(o=0;o<v;o++)b[_][o]=e[_][o];for(_=0;_<v;_++){for(x[_]=d,f=0,s=_+1,o=_;o<y;o++)f+=Math.pow(b[o][_],2);if(f<i)d=0;else for(h=(u=b[_][_])*(d=u<0?Math.sqrt(f):-Math.sqrt(f))-f,b[_][_]=u-d,o=s;o<v;o++){for(f=0,a=_;a<y;a++)f+=b[a][_]*b[a][o];for(u=f/h,a=_;a<y;a++)b[a][o]=b[a][o]+u*b[a][_]}for(E[_]=d,f=0,o=s;o<v;o++)f+=Math.pow(b[_][o],2);if(f<i)d=0;else{for(h=(u=b[_][_+1])*(d=u<0?Math.sqrt(f):-Math.sqrt(f))-f,b[_][_+1]=u-d,o=s;o<v;o++)x[o]=b[_][o]/h;for(o=s;o<y;o++){for(f=0,a=s;a<v;a++)f+=b[o][a]*b[_][a];for(a=s;a<v;a++)b[o][a]=b[o][a]+f*x[a]}}p<(m=Math.abs(E[_])+Math.abs(x[_]))&&(p=m)}if(n)for(_=v-1;0<=_;_--){if(0!==d){for(h=b[_][_+1]*d,o=s;o<v;o++)w[o][_]=b[_][o]/h;for(o=s;o<v;o++){for(f=0,a=s;a<v;a++)f+=b[_][a]*w[a][o];for(a=s;a<v;a++)w[a][o]=w[a][o]+f*w[a][_]}}for(o=s;o<v;o++)w[_][o]=0,w[o][_]=0;w[_][_]=1,d=x[_],s=_}if(t){if("f"===t)for(_=v;_<y;_++){for(o=v;o<y;o++)b[_][o]=0;b[_][_]=1}for(_=v-1;0<=_;_--){for(s=_+1,d=E[_],o=s;o<S;o++)b[_][o]=0;if(0!==d){for(h=b[_][_]*d,o=s;o<S;o++){for(f=0,a=s;a<y;a++)f+=b[a][_]*b[a][o];for(u=f/h,a=_;a<y;a++)b[a][o]=b[a][o]+u*b[a][_]}for(o=_;o<y;o++)b[o][_]=b[o][_]/d}else for(o=_;o<y;o++)b[o][_]=0;b[_][_]=b[_][_]+1}}for(r*=p,a=v-1;0<=a;a--)for(var C=0;C<50;C++){for(A=!1,s=a;0<=s;s--){if(Math.abs(x[s])<=r){A=!0;break}if(Math.abs(E[s-1])<=r)break}if(!A)for(c=0,l=s-(f=1),_=s;_<a+1&&(u=f*x[_],x[_]=c*x[_],!(Math.abs(u)<=r));_++)if(d=E[_],E[_]=Math.sqrt(u*u+d*d),c=d/(h=E[_]),f=-u/h,t)for(o=0;o<y;o++)m=b[o][l],g=b[o][_],b[o][l]=m*c+g*f,b[o][_]=-m*f+g*c;if(g=E[a],s===a){if(g<0&&(E[a]=-g,n))for(o=0;o<v;o++)w[o][a]=-w[o][a];break}for(p=E[s],u=(((m=E[a-1])-g)*(m+g)+((d=x[a-1])-(h=x[a]))*(d+h))/(2*h*m),d=Math.sqrt(u*u+1),u=((p-g)*(p+g)+h*(m/(u<0?u-d:u+d)-h))/p,_=s+(f=c=1);_<a+1;_++){if(d=x[_],m=E[_],h=f*d,d*=c,g=Math.sqrt(u*u+h*h),u=p*(c=u/(x[_-1]=g))+d*(f=h/g),d=-p*f+d*c,h=m*f,m*=c,n)for(o=0;o<v;o++)p=w[o][_-1],g=w[o][_],w[o][_-1]=p*c+g*f,w[o][_]=-p*f+g*c;if(g=Math.sqrt(u*u+h*h),u=(c=u/(E[_-1]=g))*d+(f=h/g)*m,p=-f*d+c*m,t)for(o=0;o<y;o++)m=b[o][_-1],g=b[o][_],b[o][_-1]=m*c+g*f,b[o][_]=-m*f+g*c}x[s]=0,x[a]=u,E[a]=p}for(_=0;_<v;_++)E[_]<r&&(E[_]=0);return{u:b,q:E,v:w}},e.VERSION="1.1.1",Object.defineProperty(e,"__esModule",{value:!0})}))})),gt=ft((e=>{!function(){var t=function(){this.init()};t.prototype={init:function(){var e=this||n;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||n;if(e=parseFloat(e),t.ctx||u(),typeof e<"u"&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,n.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var i=t._howls[r]._getSoundIds(),o=0;o<i.length;o++){var a=t._howls[r]._soundById(i[o]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||n;t.ctx||u(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,n.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var i=t._howls[r]._getSoundIds(),o=0;o<i.length;o++){var a=t._howls[r]._soundById(i[o]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},stop:function(){for(var e=this||n,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||n,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,u()),e},codecs:function(e){return(this||n)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||n;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{typeof(new Audio).oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||n,t=null;try{t=typeof Audio<"u"?new Audio:null}catch{return e}if(!t||"function"!=typeof t.canPlayType)return e;var r=t.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator?e._navigator.userAgent:"",o=i.match(/OPR\/([0-6].)/g),a=o&&parseInt(o[0].split("/")[1],10)<33,s=-1!==i.indexOf("Safari")&&-1===i.indexOf("Chrome"),l=i.match(/Version\/(.*?) /),c=s&&l&&parseInt(l[1],10)<15;return e._codecs={mp3:!(a||!r&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(c||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(c||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||n;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&44100!==e.ctx.sampleRate&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch{e.noAudio=!0;break}for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var o=e._howls[i]._getSoundIds(),a=0;a<o.length;a++){var s=e._howls[i]._soundById(o[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),typeof l.start>"u"?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||n;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&typeof Promise<"u"&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||n;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&!(typeof e.ctx.suspend>"u")&&n.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var r=0;r<e._howls[t]._sounds.length;r++)if(!e._howls[t]._sounds[r]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&!(typeof e.ctx.resume>"u")&&n.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var n=new t,r=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};r.prototype={init:function(e){var t=this;return n.ctx||u(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=n.usingWebAudio&&!t._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(n.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var o,s;if(e._format&&e._format[r])o=e._format[r];else{if("string"!=typeof(s=e._src[r])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(o=/^data:audio\/([^;,]+);/i.exec(s))||(o=/\.([^.]+)$/.exec(s.split("?",1)[0])),o&&(o=o[1].toLowerCase())}if(o||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),o&&n.codecs(o)){t=e._src[r];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new i(e),e._webAudio&&a(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var r=this,i=null;if("number"==typeof e)i=e,e=null;else{if("string"==typeof e&&"loaded"===r._state&&!r._sprite[e])return null;if(typeof e>"u"&&(e="__default",!r._playLock)){for(var o=0,a=0;a<r._sounds.length;a++)r._sounds[a]._paused&&!r._sounds[a]._ended&&(o++,i=r._sounds[a]._id);1===o?e=null:i=null}}var s=i?r._soundById(i):r._inactiveSound();if(!s)return null;if(i&&!e&&(e=s._sprite||"__default"),"loaded"!==r._state){s._sprite=e,s._ended=!1;var l=s._id;return r._queue.push({event:"play",action:function(){r.play(l)}}),l}if(i&&!s._paused)return t||r._loadQueue("play"),s._id;r._webAudio&&n._autoResume();var c=Math.max(0,s._seek>0?s._seek:r._sprite[e][0]/1e3),u=Math.max(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-c),d=1e3*u/Math.abs(s._rate),h=r._sprite[e][0]/1e3,f=(r._sprite[e][0]+r._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var p=function(){s._paused=!1,s._seek=c,s._start=h,s._stop=f,s._loop=!(!s._loop&&!r._sprite[e][2])};if(!(c>=f)){var m=s._node;if(r._webAudio){var g=function(){r._playLock=!1,p(),r._refreshBuffer(s);var e=s._muted||r._muted?0:s._volume;m.gain.setValueAtTime(e,n.ctx.currentTime),s._playStart=n.ctx.currentTime,typeof m.bufferSource.start>"u"?s._loop?m.bufferSource.noteGrainOn(0,c,86400):m.bufferSource.noteGrainOn(0,c,u):s._loop?m.bufferSource.start(0,c,86400):m.bufferSource.start(0,c,u),d!==1/0&&(r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),d)),t||setTimeout((function(){r._emit("play",s._id),r._loadQueue()}),0)};"running"===n.state&&"interrupted"!==n.ctx.state?g():(r._playLock=!0,r.once("resume",g),r._clearTimer(s._id))}else{var v=function(){m.currentTime=c,m.muted=s._muted||r._muted||n._muted||m.muted,m.volume=s._volume*n.volume(),m.playbackRate=s._rate;try{var i=m.play();if(i&&typeof Promise<"u"&&(i instanceof Promise||"function"==typeof i.then)?(r._playLock=!0,p(),i.then((function(){r._playLock=!1,m._unlocked=!0,t?r._loadQueue():r._emit("play",s._id)})).catch((function(){r._playLock=!1,r._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):t||(r._playLock=!1,p(),r._emit("play",s._id)),m.playbackRate=s._rate,m.paused)return void r._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),d):(r._endTimers[s._id]=function(){r._ended(s),m.removeEventListener("ended",r._endTimers[s._id],!1)},m.addEventListener("ended",r._endTimers[s._id],!1))}catch(o){r._emit("playerror",s._id,o)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=r._src,m.load());var y=window&&window.ejecta||!m.readyState&&n._navigator.isCocoonJS;if(m.readyState>=3||y)v();else{r._playLock=!0,r._state="loading";var x=function(){r._state="loaded",v(),m.removeEventListener(n._canPlayEvent,x,!1)};m.addEventListener(n._canPlayEvent,x,!1),r._clearTimer(s._id)}}return s._id}r._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var i=t._soundById(n[r]);if(i&&!i._paused&&(i._seek=t.seek(n[r]),i._rateSeek=0,i._paused=!0,t._stopFade(n[r]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;typeof i._node.bufferSource.stop>"u"?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else(!isNaN(i._node.duration)||i._node.duration===1/0)&&i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(typeof o._node.bufferSource.stop>"u"?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):(!isNaN(o._node.duration)||o._node.duration===1/0)&&(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),t||n._emit("stop",o._id))}return n},mute:function(e,t){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(e,t)}}),r;if(typeof t>"u"){if("boolean"!=typeof e)return r._muted;r._muted=e}for(var i=r._getSoundIds(t),o=0;o<i.length;o++){var a=r._soundById(i[o]);a&&(a._muted=e,a._interval&&r._stopFade(a._id),r._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,n.ctx.currentTime):a._node&&(a._node.muted=!!n._muted||e),r._emit("mute",a._id))}return r},volume:function(){var e,t,r,i=this,o=arguments;if(0===o.length)return i._volume;if(1===o.length||2===o.length&&typeof o[1]>"u"){var a=i._getSoundIds(),s=a.indexOf(o[0]);s>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else o.length>=2&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if(!(typeof e<"u"&&e>=0&&e<=1))return(r=t?i._soundById(t):i._sounds[0])?r._volume:0;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,o)}}),i;typeof t>"u"&&(i._volume=e),t=i._getSoundIds(t);for(var l=0;l<t.length;l++)(r=i._soundById(t[l]))&&(r._volume=e,o[2]||i._stopFade(t[l]),i._webAudio&&r._node&&!r._muted?r._node.gain.setValueAtTime(e,n.ctx.currentTime):r._node&&!r._muted&&(r._node.volume=e*n.volume()),i._emit("volume",r._id));return i},fade:function(e,t,r,i){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"fade",action:function(){o.fade(e,t,r,i)}}),o;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),r=parseFloat(r),o.volume(e,i);for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var l=o._soundById(a[s]);if(l){if(i||o._stopFade(a[s]),o._webAudio&&!l._muted){var c=n.ctx.currentTime,u=c+r/1e3;l._volume=e,l._node.gain.setValueAtTime(e,c),l._node.gain.linearRampToValueAtTime(t,u)}o._startFadeInterval(l,e,t,r,a[s],typeof i>"u")}}return o},_startFadeInterval:function(e,t,n,r,i,o){var a=this,s=t,l=n-t,c=Math.abs(l/.01),u=Math.max(4,c>0?r/c:r),d=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var i=(Date.now()-d)/r;d=Date.now(),s+=l*i,s=Math.round(100*s)/100,s=l<0?Math.max(n,s):Math.min(n,s),a._webAudio?e._volume=s:a.volume(s,e._id,!0),o&&(a._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))}),u)},_stopFade:function(e){var t=this,r=t._soundById(e);return r&&r._interval&&(t._webAudio&&r._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(r._interval),r._interval=null,t.volume(r._fadeTo,e),r._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;e=i[0],r._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var o=r._getSoundIds(t),a=0;a<o.length;a++)(n=r._soundById(o[a]))&&(n._loop=e,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,r.playing(o[a])&&(r.pause(o[a],!0),r.play(o[a],!0)))));return r},rate:function(){var e,t,r,i=this,o=arguments;if(0===o.length)t=i._sounds[0]._id;else if(1===o.length){var a=i._getSoundIds(),s=a.indexOf(o[0]);s>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if("number"!=typeof e)return(r=i._soundById(t))?r._rate:i._rate;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,o)}}),i;typeof t>"u"&&(i._rate=e),t=i._getSoundIds(t);for(var l=0;l<t.length;l++)if(r=i._soundById(t[l])){i.playing(t[l])&&(r._rateSeek=i.seek(t[l]),r._playStart=i._webAudio?n.ctx.currentTime:r._playStart),r._rate=e,i._webAudio&&r._node&&r._node.bufferSource?r._node.bufferSource.playbackRate.setValueAtTime(e,n.ctx.currentTime):r._node&&(r._node.playbackRate=e);var c=i.seek(t[l]),u=(i._sprite[r._sprite][0]+i._sprite[r._sprite][1])/1e3-c,d=1e3*u/Math.abs(r._rate);(i._endTimers[t[l]]||!r._paused)&&(i._clearTimer(t[l]),i._endTimers[t[l]]=setTimeout(i._ended.bind(i,r),d)),i._emit("rate",r._id)}return i},seek:function(){var e,t,r=this,i=arguments;if(0===i.length)r._sounds.length&&(t=r._sounds[0]._id);else if(1===i.length){var o=r._getSoundIds(),a=o.indexOf(i[0]);a>=0?t=parseInt(i[0],10):r._sounds.length&&(t=r._sounds[0]._id,e=parseFloat(i[0]))}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(typeof t>"u")return 0;if("number"==typeof e&&("loaded"!==r._state||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,i)}}),r;var s=r._soundById(t);if(s){if(!("number"==typeof e&&e>=0)){if(r._webAudio){var l=r.playing(t)?n.ctx.currentTime-s._playStart:0,c=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(c+l*Math.abs(s._rate))}return s._node.currentTime}var u=r.playing(t);u&&r.pause(t,!0),s._seek=e,s._ended=!1,r._clearTimer(t),!r._webAudio&&s._node&&!isNaN(s._node.duration)&&(s._node.currentTime=e);var d=function(){u&&r.play(t,!0),r._emit("seek",t)};if(u&&!r._webAudio){var h=function(){r._playLock?setTimeout(h,0):d()};setTimeout(h,0)}else d()}return r},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var r=0;r<t._sounds.length;r++)if(!t._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,r=t._soundById(e);return r&&(n=t._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,r=0;r<t.length;r++)t[r]._paused||e.stop(t[r]._id),e._webAudio||(e._clearSound(t[r]._node),t[r]._node.removeEventListener("error",t[r]._errorFn,!1),t[r]._node.removeEventListener(n._canPlayEvent,t[r]._loadFn,!1),t[r]._node.removeEventListener("ended",t[r]._endFn,!1),n._releaseHtml5Audio(t[r]._node)),delete t[r]._node,e._clearTimer(t[r]._id);var i=n._howls.indexOf(e);i>=0&&n._howls.splice(i,1);var a=!0;for(r=0;r<n._howls.length;r++)if(n._howls[r]._src===e._src||e._src.indexOf(n._howls[r]._src)>=0){a=!1;break}return o&&a&&delete o[e._src],n.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var i=this["_on"+e];return"function"==typeof t&&i.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this,i=r["_on"+e],o=0;if("number"==typeof t&&(n=t,t=null),t||n)for(o=0;o<i.length;o++){var a=n===i[o].id;if(t===i[o].fn&&a||!t&&a){i.splice(o,1);break}}else if(e)r["_on"+e]=[];else{var s=Object.keys(r);for(o=0;o<s.length;o++)0===s[o].indexOf("_on")&&Array.isArray(r[s[o]])&&(r[s[o]]=[])}return r},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this,i=r["_on"+e],o=i.length-1;o>=0;o--)(!i[o].id||i[o].id===t||"load"===e)&&(setTimeout(function(e){e.call(this,t,n)}.bind(r,i[o].fn),0),i[o].once&&r.off(e,i[o].fn,i[o].id));return r._loadQueue(e),r},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var t=this,r=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var i=!(!e._loop&&!t._sprite[r][2]);if(t._emit("end",e._id),!t._webAudio&&i&&t.stop(e._id,!0).play(e._id),t._webAudio&&i){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=n.ctx.currentTime;var o=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),o)}return t._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),n._autoSuspend()),!t._webAudio&&!i&&t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new i(e)},_drain:function(){var e=this,t=e._pool,n=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&n++;for(r=e._sounds.length-1;r>=0;r--){if(n<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),n--)}}},_getSoundIds:function(e){if(typeof e>"u"){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=n.ctx.createBufferSource(),e._node.bufferSource.buffer=o[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,n.ctx.currentTime),this},_cleanBuffer:function(e){var t=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=n._scratchBuffer}catch{}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(e){this._parent=e,this.init()};i.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,r=n._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),e._node.gain.setValueAtTime(r,n.ctx.currentTime),e._node.paused=!0,e._node.connect(n.masterGain)):n.noAudio||(e._node=n._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(n._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=r*n.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(n._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var o={},a=function(e){var t=e._src;if(o[t])return e._duration=o[t].duration,void c(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);l(r.buffer,e)}else{var a=new XMLHttpRequest;a.open(e._xhr.method,t,!0),a.withCredentials=e._xhr.withCredentials,a.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){a.setRequestHeader(t,e._xhr.headers[t])})),a.onload=function(){var t=(a.status+"")[0];"0"===t||"2"===t||"3"===t?l(a.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".")},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete o[t],e.load())},s(a)}},s=function(e){try{e.send()}catch{e.onerror()}},l=function(e,t){var r=function(){t._emit("loaderror",null,"Decoding audio data failed.")},i=function(e){e&&t._sounds.length>0?(o[t._src]=e,c(t,e)):r()};typeof Promise<"u"&&1===n.ctx.decodeAudioData.length?n.ctx.decodeAudioData(e).then(i).catch(r):n.ctx.decodeAudioData(e,i,r)},c=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},u=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),t=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=t?parseInt(t[1],10):null;if(e&&r&&r<9){var i=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!i&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};"function"==typeof define&&define.amd&&define([],(function(){return{Howler:n,Howl:r}})),typeof e<"u"&&(e.Howler=n,e.Howl=r),typeof global<"u"?(global.HowlerGlobal=t,global.Howler=n,global.Howl=r,global.Sound=i):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=n,window.Howl=r,window.Sound=i)}(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var r=this;return r.ctx&&r.ctx.listener?(t="number"!=typeof t?r._pos[1]:t,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof e?r._pos:(r._pos=[e,t,n],typeof r.ctx.listener.positionX<"u"?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(e,t,n,r,i,o){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,r="number"!=typeof r?s[3]:r,i="number"!=typeof i?s[4]:i,o="number"!=typeof o?s[5]:o,"number"!=typeof e?s:(a._orientation=[e,t,n,r,i,o],typeof a.ctx.listener.forwardX<"u"?(a.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(e,t,n,r,i,o),a)},Howl.prototype.init=function(e){return function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:typeof t.coneInnerAngle<"u"?t.coneInnerAngle:360,coneOuterAngle:typeof t.coneOuterAngle<"u"?t.coneOuterAngle:360,coneOuterGain:typeof t.coneOuterGain<"u"?t.coneOuterGain:0,distanceModel:typeof t.distanceModel<"u"?t.distanceModel:"inverse",maxDistance:typeof t.maxDistance<"u"?t.maxDistance:1e4,panningModel:typeof t.panningModel<"u"?t.panningModel:"HRTF",refDistance:typeof t.refDistance<"u"?t.refDistance:1,rolloffFactor:typeof t.rolloffFactor<"u"?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var i=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u"){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",(!s._panner||!s._panner.pan)&&e(s,i),"spatial"===i?typeof s._panner.positionX<"u"?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,n,r,i)}}),o;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,typeof i>"u"){if("number"!=typeof t)return o._pos;o._pos=[t,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var l=o._soundById(a[s]);if(l){if("number"!=typeof t)return l._pos;l._pos=[t,n,r],l._node&&((!l._panner||l._panner.pan)&&e(l,"spatial"),typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):l._panner.setPosition(t,n,r)),o._emit("pos",l._id)}}return o},Howl.prototype.orientation=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,r,i)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,r="number"!=typeof r?o._orientation[2]:r,typeof i>"u"){if("number"!=typeof t)return o._orientation;o._orientation=[t,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var l=o._soundById(a[s]);if(l){if("number"!=typeof t)return l._orientation;l._orientation=[t,n,r],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),e(l,"spatial")),typeof l._panner.orientationX<"u"?(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):l._panner.setOrientation(t,n,r)),o._emit("orientation",l._id)}}return o},Howl.prototype.pannerAttr=function(){var t,n,r,i=this,o=arguments;if(!i._webAudio)return i;if(0===o.length)return i._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return(r=i._soundById(parseInt(o[0],10)))?r._pannerAttr:i._pannerAttr;t=o[0],typeof n>"u"&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),i._pannerAttr={coneInnerAngle:typeof t.pannerAttr.coneInnerAngle<"u"?t.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:typeof t.pannerAttr.coneOuterAngle<"u"?t.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:typeof t.pannerAttr.coneOuterGain<"u"?t.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:typeof t.pannerAttr.distanceModel<"u"?t.pannerAttr.distanceModel:i._distanceModel,maxDistance:typeof t.pannerAttr.maxDistance<"u"?t.pannerAttr.maxDistance:i._maxDistance,refDistance:typeof t.pannerAttr.refDistance<"u"?t.pannerAttr.refDistance:i._refDistance,rolloffFactor:typeof t.pannerAttr.rolloffFactor<"u"?t.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:typeof t.pannerAttr.panningModel<"u"?t.pannerAttr.panningModel:i._panningModel})}else 2===o.length&&(t=o[0],n=parseInt(o[1],10));for(var a=i._getSoundIds(n),s=0;s<a.length;s++)if(r=i._soundById(a[s])){var l=r._pannerAttr;l={coneInnerAngle:typeof t.coneInnerAngle<"u"?t.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:typeof t.coneOuterAngle<"u"?t.coneOuterAngle:l.coneOuterAngle,coneOuterGain:typeof t.coneOuterGain<"u"?t.coneOuterGain:l.coneOuterGain,distanceModel:typeof t.distanceModel<"u"?t.distanceModel:l.distanceModel,maxDistance:typeof t.maxDistance<"u"?t.maxDistance:l.maxDistance,refDistance:typeof t.refDistance<"u"?t.refDistance:l.refDistance,rolloffFactor:typeof t.rolloffFactor<"u"?t.rolloffFactor:l.rolloffFactor,panningModel:typeof t.panningModel<"u"?t.panningModel:l.panningModel};var c=r._panner;c?(c.coneInnerAngle=l.coneInnerAngle,c.coneOuterAngle=l.coneOuterAngle,c.coneOuterGain=l.coneOuterGain,c.distanceModel=l.distanceModel,c.maxDistance=l.maxDistance,c.refDistance=l.refDistance,c.rolloffFactor=l.rolloffFactor,c.panningModel=l.panningModel):(r._pos||(r._pos=i._pos||[0,0,-.5]),e(r,"spatial"))}return i},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var e=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,typeof e._panner.positionX<"u"?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),typeof e._panner.orientationX<"u"?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()})),vt="142",yt=0,xt=1,bt=2,wt=3,St=100,_t=301,At=302,Et=306,Ct=1e3,Mt=1001,Tt=1002,Pt=1003,Dt=1006,kt=1008,Ot=1009,Rt=1012,It=1014,Lt=1015,Nt=1016,jt=1020,Bt=1023,Ft=1026,zt=1027,Ut=33776,Gt=33777,Vt=33778,Ht=33779,Wt=35840,qt=35841,Yt=35842,Xt=35843,Qt=37492,Kt=37496,Zt=37808,Jt=37809,$t=37810,en=37811,tn=37812,nn=37813,rn=37814,on=37815,an=37816,sn=37817,ln=37818,cn=37819,un=37820,dn=37821,hn=36492,fn=2300,pn=2301,mn=2302,gn=3e3,vn=3001,yn=3200,xn="srgb",bn="srgb-linear",wn=7680,Sn=35044,_n="300 es",An=1035,En=class{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let n=this._listeners[e];if(void 0!==n){let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}},Cn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Mn=1234567,Tn=Math.PI/180,Pn=180/Math.PI;function Dn(){let e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Cn[255&e]+Cn[e>>8&255]+Cn[e>>16&255]+Cn[e>>24&255]+"-"+Cn[255&t]+Cn[t>>8&255]+"-"+Cn[t>>16&15|64]+Cn[t>>24&255]+"-"+Cn[63&n|128]+Cn[n>>8&255]+"-"+Cn[n>>16&255]+Cn[n>>24&255]+Cn[255&r]+Cn[r>>8&255]+Cn[r>>16&255]+Cn[r>>24&255]).toLowerCase()}function kn(e,t,n){return Math.max(t,Math.min(n,e))}function On(e,t){return(e%t+t)%t}function Rn(e,t,n){return(1-n)*e+n*t}function In(e){return 0===(e&e-1)&&0!==e}function Ln(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var Nn=Object.freeze({__proto__:null,DEG2RAD:Tn,RAD2DEG:Pn,generateUUID:Dn,clamp:kn,euclideanModulo:On,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Rn,damp:function(e,t,n,r){return Rn(e,t,1-Math.exp(-n*r))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(On(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Mn=e);let t=Mn+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Tn},radToDeg:function(e){return e*Pn},isPowerOfTwo:In,ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:Ln,setQuaternionFromProperEuler:function(e,t,n,r,i){let o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((t+r)/2),u=a((t+r)/2),d=o((t-r)/2),h=a((t-r)/2),f=o((r-t)/2),p=a((r-t)/2);switch(i){case"XYX":e.set(s*u,l*d,l*h,s*c);break;case"YZY":e.set(l*h,s*u,l*d,s*c);break;case"ZXZ":e.set(l*d,l*h,s*u,s*c);break;case"XZX":e.set(s*u,l*p,l*f,s*c);break;case"YXY":e.set(l*f,s*u,l*p,s*c);break;case"ZYZ":e.set(l*p,l*f,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}},denormalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}}),jn=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;jn.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Bn=class{constructor(){Bn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,l){let c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],x=r[7],b=r[2],w=r[5],S=r[8];return i[0]=o*p+a*v+s*b,i[3]=o*m+a*y+s*w,i[6]=o*g+a*x+s*S,i[1]=l*p+c*v+u*b,i[4]=l*m+c*y+u*w,i[7]=l*g+c*x+u*S,i[2]=d*p+h*v+f*b,i[5]=d*m+h*y+f*w,i[8]=d*g+h*x+f*S,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*o-a*l,d=a*s-c*i,h=l*i-o*s,f=t*u+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);let p=1/f;return e[0]=u*p,e[1]=(r*l-c*n)*p,e[2]=(a*n-r*o)*p,e[3]=d*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-a*t)*p,e[6]=h*p,e[7]=(n*s-l*t)*p,e[8]=(o*t-n*i)*p,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){let s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){let n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){let t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*l,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*l,r[7]=-n*a+t*c,this}translate(e,t){let n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}};function Fn(e){for(let t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}var zn={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Un(e,t){return new zn[e](t)}function Gn(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Vn(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Hn(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var Wn={[xn]:{[bn]:Vn},[bn]:{[xn]:Hn}},qn={legacyMode:!0,get workingColorSpace(){return bn},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(Wn[t]&&void 0!==Wn[t][n]){let r=Wn[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Yn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Xn={r:0,g:0,b:0},Qn={h:0,s:0,l:0},Kn={h:0,s:0,l:0};function Zn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Jn(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var $n=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xn;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,qn.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bn;return this.r=e,this.g=t,this.b=n,qn.toWorkingColorSpace(this,r),this}setHSL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bn;if(e=On(e,1),t=kn(t,0,1),n=kn(n,0,1),0===t)this.r=this.g=this.b=n;else{let r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Zn(i,r,e+1/3),this.g=Zn(i,r,e),this.b=Zn(i,r,e-1/3)}return qn.toWorkingColorSpace(this,r),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xn;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e,i=t[1],o=t[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,qn.toWorkingColorSpace(this,n),r(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,qn.toWorkingColorSpace(this,n),r(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){let t=parseFloat(e[1])/360,i=parseInt(e[2],10)/100,o=parseInt(e[3],10)/100;return r(e[4]),this.setHSL(t,i,o,n)}}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){let e=t[1],r=e.length;if(3===r)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,qn.toWorkingColorSpace(this,n),this;if(6===r)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,qn.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xn,n=Yn[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Vn(e.r),this.g=Vn(e.g),this.b=Vn(e.b),this}copyLinearToSRGB(e){return this.r=Hn(e.r),this.g=Hn(e.g),this.b=Hn(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn;return qn.fromWorkingColorSpace(Jn(this,Xn),e),kn(255*Xn.r,0,255)<<16^kn(255*Xn.g,0,255)<<8^kn(255*Xn.b,0,255)<<0}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bn;qn.fromWorkingColorSpace(Jn(this,Xn),t);let n,r,i=Xn.r,o=Xn.g,a=Xn.b,s=Math.max(i,o,a),l=Math.min(i,o,a),c=(l+s)/2;if(l===s)n=0,r=0;else{let e=s-l;switch(r=c<=.5?e/(s+l):e/(2-s-l),s){case i:n=(o-a)/e+(o<a?6:0);break;case o:n=(a-i)/e+2;break;case a:n=(i-o)/e+4}n/=6}return e.h=n,e.s=r,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bn;return qn.fromWorkingColorSpace(Jn(this,Xn),t),e.r=Xn.r,e.g=Xn.g,e.b=Xn.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn;return qn.fromWorkingColorSpace(Jn(this,Xn),e),e!==xn?"color(".concat(e," ").concat(Xn.r," ").concat(Xn.g," ").concat(Xn.b,")"):"rgb(".concat(255*Xn.r|0,",").concat(255*Xn.g|0,",").concat(255*Xn.b|0,")")}offsetHSL(e,t,n){return this.getHSL(Qn),Qn.h+=e,Qn.s+=t,Qn.l+=n,this.setHSL(Qn.h,Qn.s,Qn.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Qn),e.getHSL(Kn);let n=Rn(Qn.h,Kn.h,t),r=Rn(Qn.s,Kn.s,t),i=Rn(Qn.l,Kn.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};$n.NAMES=Yn;var er,tr=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===er&&(er=Gn("canvas")),er.width=e.width,er.height=e.height;let n=er.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=er}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Gn("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*Vn(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){let t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Vn(t[e]/255)):t[e]=Vn(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},nr=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,this.uuid=Dn(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(rr(r[t].image)):e.push(rr(r[t]))}else e=rr(r);n.url=e}return t||(e.images[this.uuid]=n),n}};function rr(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?tr.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var ir=0,or=class extends En{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:or.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:or.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mt,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Mt,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dt,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:kt,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bt,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Ot,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:gn;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ir++}),this.uuid=Dn(),this.name="",this.source=new nr(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new jn(0,0),this.repeat=new jn(1,1),this.center=new jn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Bn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ct:e.x=e.x-Math.floor(e.x);break;case Mt:e.x=e.x<0?0:1;break;case Tt:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ct:e.y=e.y-Math.floor(e.y);break;case Mt:e.y=e.y<0?0:1;break;case Tt:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}};or.DEFAULT_IMAGE=null,or.DEFAULT_MAPPING=300;var ar=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ar.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i,o=e.elements,a=o[0],s=o[4],l=o[8],c=o[1],u=o[5],d=o[9],h=o[2],f=o[6],p=o[10];if(Math.abs(s-c)<.01&&Math.abs(l-h)<.01&&Math.abs(d-f)<.01){if(Math.abs(s+c)<.1&&Math.abs(l+h)<.1&&Math.abs(d+f)<.1&&Math.abs(a+u+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let e=(a+1)/2,o=(u+1)/2,m=(p+1)/2,g=(s+c)/4,v=(l+h)/4,y=(d+f)/4;return e>o&&e>m?e<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=g/n,i=v/n):o>m?o<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=g/r,i=y/r):m<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(m),n=v/i,r=y/i),this.set(n,r,i,t),this}let m=Math.sqrt((f-d)*(f-d)+(l-h)*(l-h)+(c-s)*(c-s));return Math.abs(m)<.001&&(m=1),this.x=(f-d)/m,this.y=(l-h)/m,this.z=(c-s)/m,this.w=Math.acos((a+u+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},sr=class extends En{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ar(0,0,e,t),this.scissorTest=!1,this.viewport=new ar(0,0,e,t);let r={width:e,height:t,depth:1};this.texture=new or(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Dt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new nr(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},lr=class extends or{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Pt,this.minFilter=Pt,this.wrapR=Mt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},cr=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3],d=i[o+0],h=i[o+1],f=i[o+2],p=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=d,e[t+1]=h,e[t+2]=f,void(e[t+3]=p);if(u!==p||s!==d||l!==h||c!==f){let e=1-a,t=s*d+l*h+c*f+u*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){let i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}let i=a*n;if(s=s*e+d*i,l=l*e+h*i,c=c*e+f*i,u=u*e+p*i,e===1-a){let e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){let a=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[o],d=i[o+1],h=i[o+2],f=i[o+3];return e[t]=a*f+c*u+s*h-l*d,e[t+1]=s*f+c*d+l*u-a*h,e[t+2]=l*f+c*h+a*d-s*u,e[t+3]=c*f-a*u-s*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");let n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),d=s(n/2),h=s(r/2),f=s(i/2);switch(o){case"XYZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"YXZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"ZXY":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"ZYX":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"YZX":this._x=d*c*u+l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u-d*h*f;break;case"XZY":this._x=d*c*u-l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],d=n+a+u;if(d>0){let e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>a&&n>u){let e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(a>u){let e=2*Math.sqrt(1+a-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+c)/e}else{let e=2*Math.sqrt(1+u-n-a);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(kn(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(0===n)return this;let r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;let s=1-a*a;if(s<=Number.EPSILON){let e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=o*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=i*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},ur=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;ur.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(hr.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(hr.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){let t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,c=s*n+a*t-i*r,u=s*r+i*n-o*t,d=-i*t-o*n-a*r;return this.x=l*s+d*-i+c*-a-u*-o,this.y=c*s+d*-o+u*-i-l*-a,this.z=u*s+d*-a+l*-o-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return dr.copy(this).projectOnVector(e),this.sub(dr)}reflect(e){return this.sub(dr.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(kn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},dr=new ur,hr=new cr,fr=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ur(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ur(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.length;s<l;s+=3){let l=e[s],c=e[s+1],u=e[s+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.count;s<l;s++){let l=e.getX(s),c=e.getY(s),u=e.getZ(s);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=mr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);let n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){let t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)mr.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(mr)}else null===n.boundingBox&&n.computeBoundingBox(),gr.copy(n.boundingBox),gr.applyMatrix4(e.matrixWorld),this.union(gr);let r=e.children;for(let i=0,o=r.length;i<o;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,mr),mr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_r),Ar.subVectors(this.max,_r),vr.subVectors(e.a,_r),yr.subVectors(e.b,_r),xr.subVectors(e.c,_r),br.subVectors(yr,vr),wr.subVectors(xr,yr),Sr.subVectors(vr,xr);let t=[0,-br.z,br.y,0,-wr.z,wr.y,0,-Sr.z,Sr.y,br.z,0,-br.x,wr.z,0,-wr.x,Sr.z,0,-Sr.x,-br.y,br.x,0,-wr.y,wr.x,0,-Sr.y,Sr.x,0];return!(!Mr(t,vr,yr,xr,Ar)||(t=[1,0,0,0,1,0,0,0,1],!Mr(t,vr,yr,xr,Ar)))&&(Er.crossVectors(br,wr),t=[Er.x,Er.y,Er.z],Mr(t,vr,yr,xr,Ar))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return mr.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(mr).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(pr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),pr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),pr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),pr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),pr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),pr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),pr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),pr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(pr)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},pr=[new ur,new ur,new ur,new ur,new ur,new ur,new ur,new ur],mr=new ur,gr=new fr,vr=new ur,yr=new ur,xr=new ur,br=new ur,wr=new ur,Sr=new ur,_r=new ur,Ar=new ur,Er=new ur,Cr=new ur;function Mr(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){Cr.fromArray(e,o);let a=i.x*Math.abs(Cr.x)+i.y*Math.abs(Cr.y)+i.z*Math.abs(Cr.z),s=t.dot(Cr),l=n.dot(Cr),c=r.dot(Cr);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}var Tr=new fr,Pr=new ur,Dr=new ur,kr=new ur,Or=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ur,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;void 0!==t?n.copy(t):Tr.setFromPoints(e).getCenter(n);let r=0;for(let i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){kr.subVectors(e,this.center);let t=kr.lengthSq();if(t>this.radius*this.radius){let e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(kr.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return!0===this.center.equals(e.center)?Dr.set(0,0,1).multiplyScalar(e.radius):Dr.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Pr.copy(e.center).add(Dr)),this.expandByPoint(Pr.copy(e.center).sub(Dr)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}},Rr=new ur,Ir=new ur,Lr=new ur,Nr=new ur,jr=new ur,Br=new ur,Fr=new ur,zr=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ur,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ur(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Rr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Rr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Rr.copy(this.direction).multiplyScalar(t).add(this.origin),Rr.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Ir.copy(e).add(t).multiplyScalar(.5),Lr.copy(t).sub(e).normalize(),Nr.copy(this.origin).sub(Ir);let i,o,a,s,l=.5*e.distanceTo(t),c=-this.direction.dot(Lr),u=Nr.dot(this.direction),d=-Nr.dot(Lr),h=Nr.lengthSq(),f=Math.abs(1-c*c);if(f>0)if(i=c*d-u,o=c*u-d,s=l*f,i>=0)if(o>=-s)if(o<=s){let e=1/f;i*=e,o*=e,a=i*(i+c*o+2*u)+o*(c*i+o+2*d)+h}else o=l,i=Math.max(0,-(c*o+u)),a=-i*i+o*(o+2*d)+h;else o=-l,i=Math.max(0,-(c*o+u)),a=-i*i+o*(o+2*d)+h;else o<=-s?(i=Math.max(0,-(-c*l+u)),o=i>0?-l:Math.min(Math.max(-l,-d),l),a=-i*i+o*(o+2*d)+h):o<=s?(i=0,o=Math.min(Math.max(-l,-d),l),a=o*(o+2*d)+h):(i=Math.max(0,-(c*l+u)),o=i>0?l:Math.min(Math.max(-l,-d),l),a=-i*i+o*(o+2*d)+h);else o=c>0?-l:l,i=Math.max(0,-(c*o+u)),a=-i*i+o*(o+2*d)+h;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(Lr).multiplyScalar(o).add(Ir),a}intersectSphere(e,t){Rr.subVectors(e.center,this.origin);let n=Rr.dot(this.direction),r=Rr.dot(Rr)-n*n,i=e.radius*e.radius;if(r>i)return null;let o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),n>o||i>r||((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),u>=0?(a=(e.min.z-d.z)*u,s=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,s=(e.min.z-d.z)*u),n>s||a>r)||((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Rr)}intersectTriangle(e,t,n,r,i){jr.subVectors(t,e),Br.subVectors(n,e),Fr.crossVectors(jr,Br);let o,a=this.direction.dot(Fr);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Nr.subVectors(this.origin,e);let s=o*this.direction.dot(Br.crossVectors(Nr,Br));if(s<0)return null;let l=o*this.direction.dot(jr.cross(Nr));if(l<0||s+l>a)return null;let c=-o*Nr.dot(Fr);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}},Ur=class{constructor(){Ur.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,l,c,u,d,h,f,p,m){let g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ur).fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,r=1/Gr.setFromMatrixColumn(e,0).length(),i=1/Gr.setFromMatrixColumn(e,1).length(),o=1/Gr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");let t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){let e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*s}else if("YXZ"===e.order){let e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){let e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*a,t[4]=-o*u,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*c,t[9]=i-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){let e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){let e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){let e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=a*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Hr,e,Wr)}lookAt(e,t,n){let r=this.elements;return Xr.subVectors(e,t),0===Xr.lengthSq()&&(Xr.z=1),Xr.normalize(),qr.crossVectors(n,Xr),0===qr.lengthSq()&&(1===Math.abs(n.z)?Xr.x+=1e-4:Xr.z+=1e-4,Xr.normalize(),qr.crossVectors(n,Xr)),qr.normalize(),Yr.crossVectors(Xr,qr),r[0]=qr.x,r[4]=Yr.x,r[8]=Xr.x,r[1]=qr.y,r[5]=Yr.y,r[9]=Xr.y,r[2]=qr.z,r[6]=Yr.z,r[10]=Xr.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],b=n[15],w=r[0],S=r[4],_=r[8],A=r[12],E=r[1],C=r[5],M=r[9],T=r[13],P=r[2],D=r[6],k=r[10],O=r[14],R=r[3],I=r[7],L=r[11],N=r[15];return i[0]=o*w+a*E+s*P+l*R,i[4]=o*S+a*C+s*D+l*I,i[8]=o*_+a*M+s*k+l*L,i[12]=o*A+a*T+s*O+l*N,i[1]=c*w+u*E+d*P+h*R,i[5]=c*S+u*C+d*D+h*I,i[9]=c*_+u*M+d*k+h*L,i[13]=c*A+u*T+d*O+h*N,i[2]=f*w+p*E+m*P+g*R,i[6]=f*S+p*C+m*D+g*I,i[10]=f*_+p*M+m*k+g*L,i[14]=f*A+p*T+m*O+g*N,i[3]=v*w+y*E+x*P+b*R,i[7]=v*S+y*C+x*D+b*I,i[11]=v*_+y*M+x*k+b*L,i[15]=v*A+y*T+x*O+b*N,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+i*s*u-r*l*u-i*a*d+n*l*d+r*a*h-n*s*h)+e[7]*(+t*s*h-t*l*d+i*o*d-r*o*h+r*l*c-i*s*c)+e[11]*(+t*l*u-t*a*h-i*o*u+n*o*h+i*a*c-n*l*c)+e[15]*(-r*a*c-t*s*u+t*a*d+r*o*u-n*o*d+n*s*c)}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(e,t,n){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*d*l+p*s*h-a*m*h-u*s*g+a*d*g,y=f*d*l-c*m*l-f*s*h+o*m*h+c*s*g-o*d*g,x=c*p*l-f*u*l+f*a*h-o*p*h-c*a*g+o*u*g,b=f*u*s-c*p*s-f*a*d+o*p*d+c*a*m-o*u*m,w=t*v+n*y+r*x+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let S=1/w;return e[0]=v*S,e[1]=(p*d*i-u*m*i-p*r*h+n*m*h+u*r*g-n*d*g)*S,e[2]=(a*m*i-p*s*i+p*r*l-n*m*l-a*r*g+n*s*g)*S,e[3]=(u*s*i-a*d*i-u*r*l+n*d*l+a*r*h-n*s*h)*S,e[4]=y*S,e[5]=(c*m*i-f*d*i+f*r*h-t*m*h-c*r*g+t*d*g)*S,e[6]=(f*s*i-o*m*i-f*r*l+t*m*l+o*r*g-t*s*g)*S,e[7]=(o*d*i-c*s*i+c*r*l-t*d*l-o*r*h+t*s*h)*S,e[8]=x*S,e[9]=(f*u*i-c*p*i-f*n*h+t*p*h+c*n*g-t*u*g)*S,e[10]=(o*p*i-f*a*i+f*n*l-t*p*l-o*n*g+t*a*g)*S,e[11]=(c*a*i-o*u*i-c*n*l+t*u*l+o*n*h-t*a*h)*S,e[12]=b*S,e[13]=(c*p*r-f*u*r+f*n*d-t*p*d-c*n*m+t*u*m)*S,e[14]=(f*a*r-o*p*r-f*n*s+t*p*s+o*n*m-t*a*m)*S,e[15]=(o*u*r-c*a*r+c*n*s-t*u*s-o*n*d+t*a*d)*S,this}scale(e){let t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){let r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,c=o+o,u=a+a,d=i*l,h=i*c,f=i*u,p=o*c,m=o*u,g=a*u,v=s*l,y=s*c,x=s*u,b=n.x,w=n.y,S=n.z;return r[0]=(1-(p+g))*b,r[1]=(h+x)*b,r[2]=(f-y)*b,r[3]=0,r[4]=(h-x)*w,r[5]=(1-(d+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(f+y)*S,r[9]=(m-v)*S,r[10]=(1-(d+p))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){let r=this.elements,i=Gr.set(r[0],r[1],r[2]).length(),o=Gr.set(r[4],r[5],r[6]).length(),a=Gr.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Vr.copy(this);let s=1/i,l=1/o,c=1/a;return Vr.elements[0]*=s,Vr.elements[1]*=s,Vr.elements[2]*=s,Vr.elements[4]*=l,Vr.elements[5]*=l,Vr.elements[6]*=l,Vr.elements[8]*=c,Vr.elements[9]*=c,Vr.elements[10]*=c,t.setFromRotationMatrix(Vr),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");let a=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),d=-(o+i)/(o-i),h=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){let a=this.elements,s=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*s,d=(n+r)*l,h=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},Gr=new ur,Vr=new Ur,Hr=new ur(0,0,0),Wr=new ur(1,1,1),qr=new ur,Yr=new ur,Xr=new ur,Qr=new Ur,Kr=new cr,Zr=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zr.DefaultOrder;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(kn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-kn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(kn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-kn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(kn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-kn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Qr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Qr,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return Kr.setFromEuler(this),this.setFromQuaternion(Kr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}};Zr.DefaultOrder="XYZ",Zr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Jr=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&(1<<e|0))}},$r=0,ei=new ur,ti=new cr,ni=new Ur,ri=new ur,ii=new ur,oi=new ur,ai=new cr,si=new ur(1,0,0),li=new ur(0,1,0),ci=new ur(0,0,1),ui={type:"added"},di={type:"removed"},hi=class extends En{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$r++}),this.uuid=Dn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hi.DefaultUp.clone();let e=new ur,t=new Zr,n=new cr,r=new ur(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ur},normalMatrix:{value:new Bn}}),this.matrix=new Ur,this.matrixWorld=new Ur,this.matrixAutoUpdate=hi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Jr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ti.setFromAxisAngle(e,t),this.quaternion.multiply(ti),this}rotateOnWorldAxis(e,t){return ti.setFromAxisAngle(e,t),this.quaternion.premultiply(ti),this}rotateX(e){return this.rotateOnAxis(si,e)}rotateY(e){return this.rotateOnAxis(li,e)}rotateZ(e){return this.rotateOnAxis(ci,e)}translateOnAxis(e,t){return ei.copy(e).applyQuaternion(this.quaternion),this.position.add(ei.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(si,e)}translateY(e){return this.translateOnAxis(li,e)}translateZ(e){return this.translateOnAxis(ci,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(ni.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ri.copy(e):ri.set(e,t,n);let r=this.parent;this.updateWorldMatrix(!0,!1),ii.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ni.lookAt(ii,ri,this.up):ni.lookAt(ri,ii,this.up),this.quaternion.setFromRotationMatrix(ni),r&&(ni.extractRotation(r.matrixWorld),ti.setFromRotationMatrix(ni),this.quaternion.premultiply(ti.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ui)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(di)),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(di)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ni.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),ni.multiply(e.parent.matrixWorld)),e.applyMatrix4(ni),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){let r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ii,e,oi),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ii,ai,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){let n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){let e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){let t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);let t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){let n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){let r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){let t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){let n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){let t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){let t=e.children[n];this.add(t.clone())}return this}};hi.DefaultUp=new ur(0,1,0),hi.DefaultMatrixAutoUpdate=!0;var fi=new ur,pi=new ur,mi=new ur,gi=new ur,vi=new ur,yi=new ur,xi=new ur,bi=new ur,wi=new ur,Si=new ur,_i=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ur,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ur,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ur;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),fi.subVectors(e,t),r.cross(fi);let i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){fi.subVectors(r,t),pi.subVectors(n,t),mi.subVectors(e,t);let o=fi.dot(fi),a=fi.dot(pi),s=fi.dot(mi),l=pi.dot(pi),c=pi.dot(mi),u=o*l-a*a;if(0===u)return i.set(-2,-1,-1);let d=1/u,h=(l*s-a*c)*d,f=(o*c-a*s)*d;return i.set(1-h-f,f,h)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,gi),gi.x>=0&&gi.y>=0&&gi.x+gi.y<=1}static getUV(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,gi),s.set(0,0),s.addScaledVector(i,gi.x),s.addScaledVector(o,gi.y),s.addScaledVector(a,gi.z),s}static isFrontFacing(e,t,n,r){return fi.subVectors(n,t),pi.subVectors(e,t),fi.cross(pi).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return fi.subVectors(this.c,this.b),pi.subVectors(this.a,this.b),.5*fi.cross(pi).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _i.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return _i.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return _i.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return _i.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _i.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n,r,i=this.a,o=this.b,a=this.c;vi.subVectors(o,i),yi.subVectors(a,i),bi.subVectors(e,i);let s=vi.dot(bi),l=yi.dot(bi);if(s<=0&&l<=0)return t.copy(i);wi.subVectors(e,o);let c=vi.dot(wi),u=yi.dot(wi);if(c>=0&&u<=c)return t.copy(o);let d=s*u-c*l;if(d<=0&&s>=0&&c<=0)return n=s/(s-c),t.copy(i).addScaledVector(vi,n);Si.subVectors(e,a);let h=vi.dot(Si),f=yi.dot(Si);if(f>=0&&h<=f)return t.copy(a);let p=h*l-s*f;if(p<=0&&l>=0&&f<=0)return r=l/(l-f),t.copy(i).addScaledVector(yi,r);let m=c*f-h*u;if(m<=0&&u-c>=0&&h-f>=0)return xi.subVectors(a,o),r=(u-c)/(u-c+(h-f)),t.copy(o).addScaledVector(xi,r);let g=1/(m+p+d);return n=p*g,r=d*g,t.copy(i).addScaledVector(vi,n).addScaledVector(yi,r)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},Ai=0,Ei=class extends En{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ai++}),this.uuid=Dn(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=St,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wn,this.stencilZFail=wn,this.stencilZPass=wn,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}let r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){let t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(null!==t){let e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}},Ci=class extends Ei{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new $n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Mi=new ur,Ti=new jn,Pi=class{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=Sn,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){let t=this.array,n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new $n),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){let t=this.array,n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new jn),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){let t=this.array,n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new ur),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){let t=this.array,n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new ar),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ti.fromBufferAttribute(this,t),Ti.applyMatrix3(e),this.setXY(t,Ti.x,Ti.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Mi.fromBufferAttribute(this,t),Mi.applyMatrix3(e),this.setXYZ(t,Mi.x,Mi.y,Mi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Mi.fromBufferAttribute(this,t),Mi.applyMatrix4(e),this.setXYZ(t,Mi.x,Mi.y,Mi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Mi.fromBufferAttribute(this,t),Mi.applyNormalMatrix(e),this.setXYZ(t,Mi.x,Mi.y,Mi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Mi.fromBufferAttribute(this,t),Mi.transformDirection(e),this.setXYZ(t,Mi.x,Mi.y,Mi.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Sn&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}},Di=class extends Pi{constructor(e,t,n){super(new Uint16Array(e),t,n)}},ki=class extends Pi{constructor(e,t,n){super(new Uint32Array(e),t,n)}},Oi=class extends Pi{constructor(e,t,n){super(new Float32Array(e),t,n)}},Ri=0,Ii=new Ur,Li=new hi,Ni=new ur,ji=new fr,Bi=new fr,Fi=new ur,zi=class extends En{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ri++}),this.uuid=Dn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Fn(e)?ki:Di)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(void 0!==n){let t=(new Bn).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}let r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ii.makeRotationFromQuaternion(e),this.applyMatrix4(Ii),this}rotateX(e){return Ii.makeRotationX(e),this.applyMatrix4(Ii),this}rotateY(e){return Ii.makeRotationY(e),this.applyMatrix4(Ii),this}rotateZ(e){return Ii.makeRotationZ(e),this.applyMatrix4(Ii),this}translate(e,t,n){return Ii.makeTranslation(e,t,n),this.applyMatrix4(Ii),this}scale(e,t,n){return Ii.makeScale(e,t,n),this.applyMatrix4(Ii),this}lookAt(e){return Li.lookAt(e),Li.updateMatrix(),this.applyMatrix4(Li.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ni).negate(),this.translate(Ni.x,Ni.y,Ni.z),this}setFromPoints(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Oi(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new fr);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ur(-1/0,-1/0,-1/0),new ur(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){let e=t[n];ji.setFromBufferAttribute(e),this.morphTargetsRelative?(Fi.addVectors(this.boundingBox.min,ji.min),this.boundingBox.expandByPoint(Fi),Fi.addVectors(this.boundingBox.max,ji.max),this.boundingBox.expandByPoint(Fi)):(this.boundingBox.expandByPoint(ji.min),this.boundingBox.expandByPoint(ji.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Or);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ur,1/0);if(e){let n=this.boundingSphere.center;if(ji.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){let n=t[e];Bi.setFromBufferAttribute(n),this.morphTargetsRelative?(Fi.addVectors(ji.min,Bi.min),ji.expandByPoint(Fi),Fi.addVectors(ji.max,Bi.max),ji.expandByPoint(Fi)):(ji.expandByPoint(Bi.min),ji.expandByPoint(Bi.max))}ji.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Fi.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Fi));if(t)for(let i=0,o=t.length;i<o;i++){let o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)Fi.fromBufferAttribute(o,t),a&&(Ni.fromBufferAttribute(e,t),Fi.add(Ni)),r=Math.max(r,n.distanceToSquared(Fi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");let n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Pi(new Float32Array(4*a),4));let s=this.getAttribute("tangent").array,l=[],c=[];for(let E=0;E<a;E++)l[E]=new ur,c[E]=new ur;let u=new ur,d=new ur,h=new ur,f=new jn,p=new jn,m=new jn,g=new ur,v=new ur;function y(e,t,n){u.fromArray(r,3*e),d.fromArray(r,3*t),h.fromArray(r,3*n),f.fromArray(o,2*e),p.fromArray(o,2*t),m.fromArray(o,2*n),d.sub(u),h.sub(u),p.sub(f),m.sub(f);let i=1/(p.x*m.y-m.x*p.y);!isFinite(i)||(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(i),v.copy(h).multiplyScalar(p.x).addScaledVector(d,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(let E=0,C=x.length;E<C;++E){let e=x[E],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)y(n[r+0],n[r+1],n[r+2])}let b=new ur,w=new ur,S=new ur,_=new ur;function A(e){S.fromArray(i,3*e),_.copy(S);let t=l[e];b.copy(t),b.sub(S.multiplyScalar(S.dot(t))).normalize(),w.crossVectors(_,t);let n=w.dot(c[e])<0?-1:1;s[4*e]=b.x,s[4*e+1]=b.y,s[4*e+2]=b.z,s[4*e+3]=n}for(let E=0,C=x.length;E<C;++E){let e=x[E],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)A(n[r+0]),A(n[r+1]),A(n[r+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Pi(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);let r=new ur,i=new ur,o=new ur,a=new ur,s=new ur,l=new ur,c=new ur,u=new ur;if(e)for(let d=0,h=e.count;d<h;d+=3){let h=e.getX(d+0),f=e.getX(d+1),p=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,f),o.fromBufferAttribute(t,p),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),a.fromBufferAttribute(n,h),s.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),a.add(c),s.add(c),l.add(c),n.setXYZ(h,a.x,a.y,a.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));let n=this.attributes;for(let r in n){if(void 0===e.attributes[r])continue;let i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,l=Math.min(a.length,i.length-s);for(let e=0,t=s;e<l;e++,t++)i[t]=a[e]}return this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Fi.fromBufferAttribute(e,t),Fi.normalize(),e.setXYZ(t,Fi.x,Fi.y,Fi.z)}toNonIndexed(){function e(e,t){let n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r),a=0,s=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new Pi(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new zi,n=this.index.array,r=this.attributes;for(let a in r){let i=e(r[a],n);t.setAttribute(a,i)}let i=this.morphAttributes;for(let a in i){let r=[],o=i[a];for(let t=0,i=o.length;t<i;t++){let i=e(o[t],n);r.push(i)}t.morphAttributes[a]=r}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,s=o.length;a<s;a++){let e=o[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let s in n){let t=n[s];e.data.attributes[s]=t.toJSON(e.data)}let r={},i=!1;for(let s in this.morphAttributes){let t=this.morphAttributes[s],n=[];for(let r=0,i=t.length;r<i;r++){let i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[s]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;null!==n&&this.setIndex(n.clone(t));let r=e.attributes;for(let l in r){let e=r[l];this.setAttribute(l,e.clone(t))}let i=e.morphAttributes;for(let l in i){let e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let l=0,c=o.length;l<c;l++){let e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}let a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());let s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},Ui=new Ur,Gi=new zr,Vi=new Or,Hi=new ur,Wi=new ur,qi=new ur,Yi=new ur,Xi=new ur,Qi=new ur,Ki=new ur,Zi=new ur,Ji=new ur,$i=new jn,eo=new jn,to=new jn,no=new ur,ro=new ur,io=class extends hi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ci;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}raycast(e,t){let n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),Vi.copy(n.boundingSphere),Vi.applyMatrix4(i),!1===e.ray.intersectsSphere(Vi))||(Ui.copy(i).invert(),Gi.copy(e.ray).applyMatrix4(Ui),null!==n.boundingBox&&!1===Gi.intersectsBox(n.boundingBox)))return;let o,a=n.index,s=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,u=n.attributes.uv,d=n.attributes.uv2,h=n.groups,f=n.drawRange;if(null!==a)if(Array.isArray(r))for(let p=0,m=h.length;p<m;p++){let n=h[p],i=r[n.materialIndex];for(let r=Math.max(n.start,f.start),h=Math.min(a.count,Math.min(n.start+n.count,f.start+f.count));r<h;r+=3){let h=a.getX(r),f=a.getX(r+1),p=a.getX(r+2);o=oo(this,i,e,Gi,s,l,c,u,d,h,f,p),o&&(o.faceIndex=Math.floor(r/3),o.face.materialIndex=n.materialIndex,t.push(o))}}else{for(let n=Math.max(0,f.start),i=Math.min(a.count,f.start+f.count);n<i;n+=3){let i=a.getX(n),h=a.getX(n+1),f=a.getX(n+2);o=oo(this,r,e,Gi,s,l,c,u,d,i,h,f),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}else if(void 0!==s)if(Array.isArray(r))for(let p=0,m=h.length;p<m;p++){let n=h[p],i=r[n.materialIndex];for(let r=Math.max(n.start,f.start),a=Math.min(s.count,Math.min(n.start+n.count,f.start+f.count));r<a;r+=3){o=oo(this,i,e,Gi,s,l,c,u,d,r,r+1,r+2),o&&(o.faceIndex=Math.floor(r/3),o.face.materialIndex=n.materialIndex,t.push(o))}}else{for(let n=Math.max(0,f.start),i=Math.min(s.count,f.start+f.count);n<i;n+=3){o=oo(this,r,e,Gi,s,l,c,u,d,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}}};function oo(e,t,n,r,i,o,a,s,l,c,u,d){Hi.fromBufferAttribute(i,c),Wi.fromBufferAttribute(i,u),qi.fromBufferAttribute(i,d);let h=e.morphTargetInfluences;if(o&&h){Ki.set(0,0,0),Zi.set(0,0,0),Ji.set(0,0,0);for(let e=0,t=o.length;e<t;e++){let t=h[e],n=o[e];0!==t&&(Yi.fromBufferAttribute(n,c),Xi.fromBufferAttribute(n,u),Qi.fromBufferAttribute(n,d),a?(Ki.addScaledVector(Yi,t),Zi.addScaledVector(Xi,t),Ji.addScaledVector(Qi,t)):(Ki.addScaledVector(Yi.sub(Hi),t),Zi.addScaledVector(Xi.sub(Wi),t),Ji.addScaledVector(Qi.sub(qi),t)))}Hi.add(Ki),Wi.add(Zi),qi.add(Ji)}e.isSkinnedMesh&&(e.boneTransform(c,Hi),e.boneTransform(u,Wi),e.boneTransform(d,qi));let f=function(e,t,n,r,i,o,a,s){let l;if(l=1===t.side?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,2!==t.side,s),null===l)return null;ro.copy(s),ro.applyMatrix4(e.matrixWorld);let c=n.ray.origin.distanceTo(ro);return c<n.near||c>n.far?null:{distance:c,point:ro.clone(),object:e}}(e,t,n,r,Hi,Wi,qi,no);if(f){s&&($i.fromBufferAttribute(s,c),eo.fromBufferAttribute(s,u),to.fromBufferAttribute(s,d),f.uv=_i.getUV(no,Hi,Wi,qi,$i,eo,to,new jn)),l&&($i.fromBufferAttribute(l,c),eo.fromBufferAttribute(l,u),to.fromBufferAttribute(l,d),f.uv2=_i.getUV(no,Hi,Wi,qi,$i,eo,to,new jn));let e={a:c,b:u,c:d,normal:new ur,materialIndex:0};_i.getNormal(Hi,Wi,qi,e.normal),f.face=e}return f}var ao=class extends zi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};let a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);let s=[],l=[],c=[],u=[],d=0,h=0;function f(e,t,n,r,i,o,f,p,m,g,v){let y=o/m,x=f/g,b=o/2,w=f/2,S=p/2,_=m+1,A=g+1,E=0,C=0,M=new ur;for(let a=0;a<A;a++){let o=a*x-w;for(let s=0;s<_;s++){let d=s*y-b;M[e]=d*r,M[t]=o*i,M[n]=S,l.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[n]=p>0?1:-1,c.push(M.x,M.y,M.z),u.push(s/m),u.push(1-a/g),E+=1}}for(let a=0;a<g;a++)for(let e=0;e<m;e++){let t=d+e+_*a,n=d+e+_*(a+1),r=d+(e+1)+_*(a+1),i=d+(e+1)+_*a;s.push(t,n,i),s.push(n,r,i),C+=6}a.addGroup(h,C,v),h+=C,d+=E}f("z","y","x",-1,-1,n,t,e,o,i,0),f("z","y","x",1,-1,n,t,-e,o,i,1),f("x","z","y",1,1,e,n,t,r,o,2),f("x","z","y",1,-1,e,n,-t,r,o,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Oi(l,3)),this.setAttribute("normal",new Oi(c,3)),this.setAttribute("uv",new Oi(u,2))}static fromJSON(e){return new ao(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function so(e){let t={};for(let n in e){t[n]={};for(let r in e[n]){let i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function lo(e){let t={};for(let n=0;n<e.length;n++){let r=so(e[n]);for(let e in r)t[e]=r[e]}return t}var co={clone:so,merge:lo},uo=class extends Ei{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=so(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let n={};for(let r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}},ho=class extends hi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ur,this.projectionMatrix=new Ur,this.projectionMatrixInverse=new Ur}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}},fo=class extends ho{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*Pn*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*Tn*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Pn*Math.atan(Math.tan(.5*Tn*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*Tn*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){let e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}let a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},po=90,mo=class extends hi{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;let r=new fo(po,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ur(1,0,0)),this.add(r);let i=new fo(po,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new ur(-1,0,0)),this.add(i);let o=new fo(po,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new ur(0,1,0)),this.add(o);let a=new fo(po,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new ur(0,-1,0)),this.add(a);let s=new fo(po,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ur(0,0,1)),this.add(s);let l=new fo(po,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ur(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();let n=this.renderTarget,[r,i,o,a,s,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,d=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;let h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}},go=class extends or{constructor(e,t,n,r,i,o,a,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:_t,n,r,i,o,a,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},vo=class extends sr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new go(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Dt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new ao(5,5,5),a=new uo({name:"CubemapFromEquirect",uniforms:so(n),vertexShader:r,fragmentShader:i,side:1,blending:0});a.uniforms.tEquirect.value=t;let s=new io(o,a),l=t.minFilter;return t.minFilter===kt&&(t.minFilter=Dt),new mo(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){let i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}},yo=new ur,xo=new ur,bo=new Bn,wo=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ur(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let r=yo.subVectors(n,t).cross(xo.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let n=e.delta(yo),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||bo.getNormalMatrix(e),r=this.coplanarPoint(yo).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}},So=new Or,_o=new ur,Ao=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wo,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new wo,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new wo,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new wo,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new wo;this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],d=n[8],h=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-r,u-s,p-d,y-m).normalize(),t[1].setComponents(a+r,u+s,p+d,y+m).normalize(),t[2].setComponents(a+i,u+l,p+h,y+g).normalize(),t[3].setComponents(a-i,u-l,p-h,y-g).normalize(),t[4].setComponents(a-o,u-c,p-f,y-v).normalize(),t[5].setComponents(a+o,u+c,p+f,y+v).normalize(),this}intersectsObject(e){let t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),So.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(So)}intersectsSprite(e){return So.center.set(0,0,0),So.radius=.7071067811865476,So.applyMatrix4(e.matrixWorld),this.intersectsSphere(So)}intersectsSphere(e){let t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let r=t[n];if(_o.x=r.normal.x>0?e.max.x:e.min.x,_o.y=r.normal.y>0?e.max.y:e.min.y,_o.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(_o)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}};function Eo(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Co(e,t){let n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);let n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){let e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);let o=r.get(t);void 0===o?r.set(t,function(t,r){let i,o=t.array,a=t.usage,s=e.createBuffer();if(e.bindBuffer(r,s),e.bufferData(r,o,a),t.onUploadCallback(),o instanceof Float32Array)i=5126;else if(o instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");i=5131}else i=5123;else if(o instanceof Int16Array)i=5122;else if(o instanceof Uint32Array)i=5125;else if(o instanceof Int32Array)i=5124;else if(o instanceof Int8Array)i=5120;else if(o instanceof Uint8Array)i=5121;else{if(!(o instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+o);i=5121}return{buffer:s,type:i,bytesPerElement:o.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(function(t,r,i){let o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}var Mo=class extends zi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};let i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),l=a+1,c=s+1,u=e/a,d=t/s,h=[],f=[],p=[],m=[];for(let g=0;g<c;g++){let e=g*d-o;for(let t=0;t<l;t++){let n=t*u-i;f.push(n,-e,0),p.push(0,0,1),m.push(t/a),m.push(1-g/s)}}for(let g=0;g<s;g++)for(let e=0;e<a;e++){let t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;h.push(t,n,i),h.push(n,r,i)}this.setIndex(h),this.setAttribute("position",new Oi(f,3)),this.setAttribute("normal",new Oi(p,3)),this.setAttribute("uv",new Oi(m,2))}static fromJSON(e){return new Mo(e.width,e.height,e.widthSegments,e.heightSegments)}},To={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\nvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\nconst mat3 XYZ_TO_REC709 = mat3(\n    3.2404542, -0.9692660,  0.0556434,\n   -1.5371385,  1.8760108, -0.2040259,\n   -0.4985314,  0.0415560,  1.0572252\n);\nvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n   vec3 sqrtF0 = sqrt( fresnel0 );\n   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n}\nvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n}\nfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n}\nvec3 evalSensitivity( float OPD, vec3 shift ) {\n   float phase = 2.0 * PI * OPD * 1.0e-9;\n   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );\n   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );\n   xyz /= 1.0685e-7;\n   vec3 srgb = XYZ_TO_REC709 * xyz;\n   return srgb;\n}\nvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n   vec3 I;\n   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n   float cosTheta2Sq = 1.0 - sinTheta2Sq;\n   if ( cosTheta2Sq < 0.0 ) {\n       return vec3( 1.0 );\n   }\n   float cosTheta2 = sqrt( cosTheta2Sq );\n   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n   float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n   float R21 = R12;\n   float T121 = 1.0 - R12;\n   float phi12 = 0.0;\n   if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n   float phi21 = PI - phi12;\n   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n   vec3 phi23 = vec3( 0.0 );\n   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;\n   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;\n   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;\n   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n   vec3 phi = vec3( phi21 ) + phi23;\n   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n   vec3 r123 = sqrt( R123 );\n   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n   vec3 C0 = R12 + Rs;\n   I = C0;\n   vec3 Cm = Rs - T121;\n   for ( int m = 1; m <= 2; ++m ) {\n       Cm *= r123;\n       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n       I += Cm * Sm;\n   }\n   return max( I, vec3( 0.0 ) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\nfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\nif ( material.iridescenceThickness == 0.0 ) {\n\tmaterial.iridescence = 0.0;\n} else {\n\tmaterial.iridescence = saturate( material.iridescence );\n}\nif ( material.iridescence > 0.0 ) {\n\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Po={common:{diffuse:{value:new $n(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Bn},uv2Transform:{value:new Bn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new jn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $n(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $n(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Bn}},sprite:{diffuse:{value:new $n(16777215)},opacity:{value:1},center:{value:new jn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Bn}}},Do={basic:{uniforms:lo([Po.common,Po.specularmap,Po.envmap,Po.aomap,Po.lightmap,Po.fog]),vertexShader:To.meshbasic_vert,fragmentShader:To.meshbasic_frag},lambert:{uniforms:lo([Po.common,Po.specularmap,Po.envmap,Po.aomap,Po.lightmap,Po.emissivemap,Po.fog,Po.lights,{emissive:{value:new $n(0)}}]),vertexShader:To.meshlambert_vert,fragmentShader:To.meshlambert_frag},phong:{uniforms:lo([Po.common,Po.specularmap,Po.envmap,Po.aomap,Po.lightmap,Po.emissivemap,Po.bumpmap,Po.normalmap,Po.displacementmap,Po.fog,Po.lights,{emissive:{value:new $n(0)},specular:{value:new $n(1118481)},shininess:{value:30}}]),vertexShader:To.meshphong_vert,fragmentShader:To.meshphong_frag},standard:{uniforms:lo([Po.common,Po.envmap,Po.aomap,Po.lightmap,Po.emissivemap,Po.bumpmap,Po.normalmap,Po.displacementmap,Po.roughnessmap,Po.metalnessmap,Po.fog,Po.lights,{emissive:{value:new $n(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:To.meshphysical_vert,fragmentShader:To.meshphysical_frag},toon:{uniforms:lo([Po.common,Po.aomap,Po.lightmap,Po.emissivemap,Po.bumpmap,Po.normalmap,Po.displacementmap,Po.gradientmap,Po.fog,Po.lights,{emissive:{value:new $n(0)}}]),vertexShader:To.meshtoon_vert,fragmentShader:To.meshtoon_frag},matcap:{uniforms:lo([Po.common,Po.bumpmap,Po.normalmap,Po.displacementmap,Po.fog,{matcap:{value:null}}]),vertexShader:To.meshmatcap_vert,fragmentShader:To.meshmatcap_frag},points:{uniforms:lo([Po.points,Po.fog]),vertexShader:To.points_vert,fragmentShader:To.points_frag},dashed:{uniforms:lo([Po.common,Po.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:To.linedashed_vert,fragmentShader:To.linedashed_frag},depth:{uniforms:lo([Po.common,Po.displacementmap]),vertexShader:To.depth_vert,fragmentShader:To.depth_frag},normal:{uniforms:lo([Po.common,Po.bumpmap,Po.normalmap,Po.displacementmap,{opacity:{value:1}}]),vertexShader:To.meshnormal_vert,fragmentShader:To.meshnormal_frag},sprite:{uniforms:lo([Po.sprite,Po.fog]),vertexShader:To.sprite_vert,fragmentShader:To.sprite_frag},background:{uniforms:{uvTransform:{value:new Bn},t2D:{value:null}},vertexShader:To.background_vert,fragmentShader:To.background_frag},cube:{uniforms:lo([Po.envmap,{opacity:{value:1}}]),vertexShader:To.cube_vert,fragmentShader:To.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:To.equirect_vert,fragmentShader:To.equirect_frag},distanceRGBA:{uniforms:lo([Po.common,Po.displacementmap,{referencePosition:{value:new ur},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:To.distanceRGBA_vert,fragmentShader:To.distanceRGBA_frag},shadow:{uniforms:lo([Po.lights,Po.fog,{color:{value:new $n(0)},opacity:{value:1}}]),vertexShader:To.shadow_vert,fragmentShader:To.shadow_frag}};function ko(e,t,n,r,i,o){let a,s,l=new $n(0),c=!0===i?0:1,u=null,d=0,h=null;function f(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,o)}return{getClearColor:function(){return l},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l.set(e),c=t,f(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,f(l,c)},render:function(n,i){let o=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));let m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(p=null),null===p?f(l,c):p&&p.isColor&&(f(p,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===Et)?(void 0===s&&(s=new io(new ao(1,1,1),new uo({name:"BackgroundCubeMaterial",uniforms:so(Do.cube.uniforms),vertexShader:Do.cube.vertexShader,fragmentShader:Do.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),s.material.uniforms.envMap.value=p,s.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,(u!==p||d!==p.version||h!==e.toneMapping)&&(s.material.needsUpdate=!0,u=p,d=p.version,h=e.toneMapping),s.layers.enableAll(),n.unshift(s,s.geometry,s.material,0,0,null)):p&&p.isTexture&&(void 0===a&&(a=new io(new Mo(2,2),new uo({name:"BackgroundMaterial",uniforms:so(Do.background.uniforms),vertexShader:Do.background.vertexShader,fragmentShader:Do.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),(u!==p||d!==p.version||h!==e.toneMapping)&&(a.material.needsUpdate=!0,u=p,d=p.version,h=e.toneMapping),a.layers.enableAll(),n.unshift(a,a.geometry,a.material,0,0,null))}}}function Oo(e,t,n,r){let i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=f(null),c=l,u=!1;function d(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function f(e){let t=[],n=[],r=[];for(let o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){let e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){let o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function v(){let t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function x(){b(),u=!0,c!==l&&(c=l,d(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,x,b){let w=!1;if(a){let t=function(t,n,i){let a=!0===i.wireframe,l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];return void 0===u&&(u=f(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[a]=u),u}(x,h,l);c!==t&&(c=t,d(c.object)),w=function(e,t,n,r){let i=c.attributes,o=t.attributes,a=0,s=n.getAttributes();for(let l in s)if(s[l].location>=0){let t=i[l],n=o[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t||t.attribute!==n||n&&t.data!==n.data)return!0;a++}return c.attributesNum!==a||c.index!==r}(i,x,h,b),w&&function(e,t,n,r){let i={},o=t.attributes,a=0,s=n.getAttributes();for(let l in s)if(s[l].location>=0){let t=o[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));let n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[l]=n,a++}c.attributes=i,c.attributesNum=a,c.index=r}(i,x,h,b)}else{let e=!0===l.wireframe;(c.geometry!==x.id||c.program!==h.id||c.wireframe!==e)&&(c.geometry=x.id,c.program=h.id,c.wireframe=e,w=!0)}null!==b&&n.update(b,34963),(w||u)&&(u=!1,function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();let l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(let t in c){let r=c[t];if(r.location>=0){let o=l[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){let t=o.normalized,a=o.itemSize,l=n.get(o);if(void 0===l)continue;let c=l.buffer,u=l.type,d=l.bytesPerElement;if(o.isInterleavedBufferAttribute){let n=o.data,l=n.stride,h=o.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)g(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,a/r.locationSize,u,t,l*d,(h+a/r.locationSize*e)*d)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)g(r.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,a/r.locationSize,u,t,a*d,a/r.locationSize*e*d)}}else if(void 0!==u){let n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}v()}(i,l,h,x),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:x,resetDefaultState:b,dispose:function(){x();for(let e in s){let t=s[e];for(let e in t){let n=t[e];for(let e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;let t=s[e.id];for(let n in t){let e=t[n];for(let t in e)h(e[t].object),delete e[t];delete t[n]}delete s[e.id]},releaseStatesOfProgram:function(e){for(let t in s){let n=s[t];if(void 0===n[e.id])continue;let r=n[e.id];for(let e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function Ro(e,t,n,r){let i,o=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,a,s){if(0===s)return;let l,c;if(o)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](i,r,a,s),n.update(a,i,s)}}function Io(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let o=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&e instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);let l=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),d=e.getParameter(35660),h=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=d>0,x=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){let n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:o?e.getParameter(36183):0}}function Lo(e){let t=this,n=null,r=0,i=!1,o=!1,a=new wo,s=new Bn,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){let o=null!==e?e.length:0,c=null;if(0!==o){if(c=l.value,!0!==i||null===c){let t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==o;++n,l+=4)a.copy(e[n]).applyMatrix4(i,s),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){let a=0!==e.length||t||0!==r||i;return i=t,n=u(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(t,a,s){let d=t.clippingPlanes,h=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!i||null===d||0===d.length||o&&!f)o?u(null):c();else{let e=o?0:r,t=4*e,i=p.clippingState||null;l.value=i,i=u(d,a,t,s);for(let r=0;r!==t;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function No(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=_t:304===t&&(e.mapping=At),e}function r(e){let n=e.target;n.removeEventListener("dispose",r);let i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){let o=i.mapping;if(303===o||304===o){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{let o=i.image;if(o&&o.height>0){let a=new vo(o.height/2);return a.fromEquirectangularTexture(e,i),t.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}Do.physical={uniforms:lo([Do.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new jn(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new $n(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new jn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new $n(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new $n(1,1,1)},specularColorMap:{value:null}}]),vertexShader:To.meshphysical_vert,fragmentShader:To.meshphysical_frag};var jo=class extends ho{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}},Bo=[.125,.215,.35,.446,.526,.582],Fo=20,zo=new jo,Uo=new $n,Go=null,Vo=(1+Math.sqrt(5))/2,Ho=1/Vo,Wo=[new ur(1,1,1),new ur(-1,1,1),new ur(1,1,-1),new ur(-1,1,-1),new ur(0,Vo,Ho),new ur(0,Vo,-Ho),new ur(Ho,0,Vo),new ur(-Ho,0,Vo),new ur(Vo,Ho,0),new ur(-Vo,Ho,0)],qo=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Go=this._renderer.getRenderTarget(),this._setSize(256);let i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Ko(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Qo(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Go),e.scissorTest=!1,Xo(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===_t||e.mapping===At?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Go=this._renderer.getRenderTarget();let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Dt,minFilter:Dt,generateMipmaps:!1,type:Nt,format:Bt,encoding:gn,depthBuffer:!1},r=Yo(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Yo(e,t,n);let{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){let t=[],n=[],r=[],i=e,o=e-4+1+Bo.length;for(let a=0;a<o;a++){let o=Math.pow(2,i);n.push(o);let s=1/o;a>e-4?s=Bo[a-e+4-1]:0===a&&(s=0),r.push(s);let l=1/(o-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*h),y=new Float32Array(m*f*h),x=new Float32Array(g*f*h);for(let e=0;e<h;e++){let t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,p*f*e),y.set(d,m*f*e);let i=[e,e,e,e,e,e];x.set(i,g*f*e)}let b=new zi;b.setAttribute("position",new Pi(v,p)),b.setAttribute("uv",new Pi(y,m)),b.setAttribute("faceIndex",new Pi(x,g)),t.push(b),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){let r=new Float32Array(Fo),i=new ur(0,1,0);return new uo({name:"SphericalGaussianBlur",defines:{n:Fo,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){let t=new io(this._lodPlanes[0],e);this._renderer.compile(t,zo)}_sceneToCubeUV(e,t,n,r){let i=new fo(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(Uo),s.toneMapping=0,s.autoClear=!1;let u=new Ci({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),d=new io(new ao,u),h=!1,f=e.background;f?f.isColor&&(u.color.copy(f),e.background=null,h=!0):(u.color.copy(Uo),h=!0);for(let p=0;p<6;p++){let t=p%3;0===t?(i.up.set(0,o[p],0),i.lookAt(a[p],0,0)):1===t?(i.up.set(0,0,o[p]),i.lookAt(0,a[p],0)):(i.up.set(0,o[p],0),i.lookAt(0,0,a[p]));let n=this._cubeSize;Xo(r,t*n,p>2?n:0,n,n),s.setRenderTarget(r),h&&s.render(d,i),s.render(e,i)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=c,s.autoClear=l,e.background=f}_textureToCubeUV(e,t){let n=this._renderer,r=e.mapping===_t||e.mapping===At;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Ko()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Qo());let i=r?this._cubemapMaterial:this._equirectMaterial,o=new io(this._lodPlanes[0],i);i.uniforms.envMap.value=e;let a=this._cubeSize;Xo(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,zo)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){let t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=Wo[(r-1)%Wo.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){let o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){let s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");let c=new io(this._lodPlanes[r],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,f=i/h,p=isFinite(i)?1+Math.floor(3*f):Fo;p>Fo&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(Fo));let m=[],g=0;for(let x=0;x<Fo;++x){let e=x/f,t=Math.exp(-e*e/2);m.push(t),0===x?g+=t:x<p&&(g+=2*t)}for(let x=0;x<m.length;x++)m[x]=m[x]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);let{_lodMax:v}=this;u.dTheta.value=h,u.mipInt.value=v-n;let y=this._sizeLods[r];Xo(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(c,zo)}};function Yo(e,t,n){let r=new sr(e,t,n);return r.texture.mapping=Et,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Xo(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Qo(){return new uo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Ko(){return new uo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Zo(e){let t=new WeakMap,n=null;function r(e){let n=e.target;n.removeEventListener("dispose",r);let i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){let o=i.mapping,a=303===o||304===o,s=o===_t||o===At;if(a||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new qo(e)),r=a?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{let o=i.image;if(a&&o&&o.height>0||s&&o&&function(e){let t=0,n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(o)){null===n&&(n=new qo(e));let o=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,o),i.addEventListener("dispose",r),o.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Jo(e){let t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){let t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function $o(e,t,n,r){let i={},o=new WeakMap;function a(e){let s=e.target;null!==s.index&&t.remove(s.index);for(let n in s.attributes)t.remove(s.attributes[n]);s.removeEventListener("dispose",a),delete i[s.id];let l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){let n=[],r=e.index,i=e.attributes.position,a=0;if(null!==r){let e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){let r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{let e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){let e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}let s=new(Fn(n)?ki:Di)(n,1);s.version=a;let l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){let n=e.attributes;for(let i in n)t.update(n[i],34962);let r=e.morphAttributes;for(let i in r){let e=r[i];for(let n=0,r=e.length;n<r;n++)t.update(e[n],34962)}},getWireframeAttribute:function(e){let t=o.get(e);if(t){let n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function ea(e,t,n,r){let i,o,a,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,d;if(s)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](i,l,o,r*a,c),n.update(l,i,c)}}function ta(e){let t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function na(e,t){return e[0]-t[0]}function ra(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ia(e,t){let n=1,r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Uint8Array?n=255:r instanceof Uint16Array?n=65535:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function oa(e,t,n){let r={},i=new Float32Array(8),o=new WeakMap,a=new ar,s=[];for(let l=0;l<8;l++)s[l]=[l,0];return{update:function(l,c,u,d){let h=l.morphTargetInfluences;if(!0===t.isWebGL2){let r=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,i=void 0!==r?r.length:0,s=o.get(c);if(void 0===s||s.count!==i){let e=function(){v.dispose(),o.delete(c),c.removeEventListener("dispose",e)};void 0!==s&&s.texture.dispose();let n=void 0!==c.morphAttributes.position,r=void 0!==c.morphAttributes.normal,l=void 0!==c.morphAttributes.color,u=c.morphAttributes.position||[],d=c.morphAttributes.normal||[],h=c.morphAttributes.color||[],f=0;!0===n&&(f=1),!0===r&&(f=2),!0===l&&(f=3);let p=c.attributes.position.count*f,m=1;p>t.maxTextureSize&&(m=Math.ceil(p/t.maxTextureSize),p=t.maxTextureSize);let g=new Float32Array(p*m*4*i),v=new lr(g,p,m,i);v.type=Lt,v.needsUpdate=!0;let y=4*f;for(let t=0;t<i;t++){let e=u[t],i=d[t],o=h[t],s=p*m*4*t;for(let t=0;t<e.count;t++){let c=t*y;!0===n&&(a.fromBufferAttribute(e,t),!0===e.normalized&&ia(a,e),g[s+c+0]=a.x,g[s+c+1]=a.y,g[s+c+2]=a.z,g[s+c+3]=0),!0===r&&(a.fromBufferAttribute(i,t),!0===i.normalized&&ia(a,i),g[s+c+4]=a.x,g[s+c+5]=a.y,g[s+c+6]=a.z,g[s+c+7]=0),!0===l&&(a.fromBufferAttribute(o,t),!0===o.normalized&&ia(a,o),g[s+c+8]=a.x,g[s+c+9]=a.y,g[s+c+10]=a.z,g[s+c+11]=4===o.itemSize?a.w:1)}}s={count:i,texture:v,size:new jn(p,m)},o.set(c,s),c.addEventListener("dispose",e)}let l=0;for(let e=0;e<h.length;e++)l+=h[e];let u=c.morphTargetsRelative?1:1-l;d.getUniforms().setValue(e,"morphTargetBaseInfluence",u),d.getUniforms().setValue(e,"morphTargetInfluences",h),d.getUniforms().setValue(e,"morphTargetsTexture",s.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",s.size)}else{let t=void 0===h?0:h.length,n=r[c.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[c.id]=n}for(let e=0;e<t;e++){let t=n[e];t[0]=e,t[1]=h[e]}n.sort(ra);for(let e=0;e<8;e++)e<t&&n[e][1]?(s[e][0]=n[e][0],s[e][1]=n[e][1]):(s[e][0]=Number.MAX_SAFE_INTEGER,s[e][1]=0);s.sort(na);let o=c.morphAttributes.position,a=c.morphAttributes.normal,l=0;for(let e=0;e<8;e++){let t=s[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(o&&c.getAttribute("morphTarget"+e)!==o[n]&&c.setAttribute("morphTarget"+e,o[n]),a&&c.getAttribute("morphNormal"+e)!==a[n]&&c.setAttribute("morphNormal"+e,a[n]),i[e]=r,l+=r):(o&&!0===c.hasAttribute("morphTarget"+e)&&c.deleteAttribute("morphTarget"+e),a&&!0===c.hasAttribute("morphNormal"+e)&&c.deleteAttribute("morphNormal"+e),i[e]=0)}let u=c.morphTargetsRelative?1:1-l;d.getUniforms().setValue(e,"morphTargetBaseInfluence",u),d.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function aa(e,t,n,r){let i=new WeakMap;function o(e){let t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){let a=r.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==a&&(t.update(l),i.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}var sa=new or,la=new lr,ca=new class extends or{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Pt,this.minFilter=Pt,this.wrapR=Mt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},ua=new go,da=[],ha=[],fa=new Float32Array(16),pa=new Float32Array(9),ma=new Float32Array(4);function ga(e,t,n){let r=e[0];if(r<=0||r>0)return e;let i=t*n,o=da[i];if(void 0===o&&(o=new Float32Array(i),da[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function va(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function ya(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function xa(e,t){let n=ha[t];void 0===n&&(n=new Int32Array(t),ha[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function ba(e,t){let n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function wa(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(va(n,t))return;e.uniform2fv(this.addr,t),ya(n,t)}}function Sa(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(va(n,t))return;e.uniform3fv(this.addr,t),ya(n,t)}}function _a(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(va(n,t))return;e.uniform4fv(this.addr,t),ya(n,t)}}function Aa(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(va(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ya(n,t)}else{if(va(n,r))return;ma.set(r),e.uniformMatrix2fv(this.addr,!1,ma),ya(n,r)}}function Ea(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(va(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ya(n,t)}else{if(va(n,r))return;pa.set(r),e.uniformMatrix3fv(this.addr,!1,pa),ya(n,r)}}function Ca(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(va(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ya(n,t)}else{if(va(n,r))return;fa.set(r),e.uniformMatrix4fv(this.addr,!1,fa),ya(n,r)}}function Ma(e,t){let n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Ta(e,t){let n=this.cache;va(n,t)||(e.uniform2iv(this.addr,t),ya(n,t))}function Pa(e,t){let n=this.cache;va(n,t)||(e.uniform3iv(this.addr,t),ya(n,t))}function Da(e,t){let n=this.cache;va(n,t)||(e.uniform4iv(this.addr,t),ya(n,t))}function ka(e,t){let n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Oa(e,t){let n=this.cache;va(n,t)||(e.uniform2uiv(this.addr,t),ya(n,t))}function Ra(e,t){let n=this.cache;va(n,t)||(e.uniform3uiv(this.addr,t),ya(n,t))}function Ia(e,t){let n=this.cache;va(n,t)||(e.uniform4uiv(this.addr,t),ya(n,t))}function La(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||sa,i)}function Na(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||ca,i)}function ja(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||ua,i)}function Ba(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||la,i)}function Fa(e,t){e.uniform1fv(this.addr,t)}function za(e,t){let n=ga(t,this.size,2);e.uniform2fv(this.addr,n)}function Ua(e,t){let n=ga(t,this.size,3);e.uniform3fv(this.addr,n)}function Ga(e,t){let n=ga(t,this.size,4);e.uniform4fv(this.addr,n)}function Va(e,t){let n=ga(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Ha(e,t){let n=ga(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Wa(e,t){let n=ga(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function qa(e,t){e.uniform1iv(this.addr,t)}function Ya(e,t){e.uniform2iv(this.addr,t)}function Xa(e,t){e.uniform3iv(this.addr,t)}function Qa(e,t){e.uniform4iv(this.addr,t)}function Ka(e,t){e.uniform1uiv(this.addr,t)}function Za(e,t){e.uniform2uiv(this.addr,t)}function Ja(e,t){e.uniform3uiv(this.addr,t)}function $a(e,t){e.uniform4uiv(this.addr,t)}function es(e,t,n){let r=t.length,i=xa(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture2D(t[o]||sa,i[o])}function ts(e,t,n){let r=t.length,i=xa(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture3D(t[o]||ca,i[o])}function ns(e,t,n){let r=t.length,i=xa(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTextureCube(t[o]||ua,i[o])}function rs(e,t,n){let r=t.length,i=xa(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.setTexture2DArray(t[o]||la,i[o])}var is=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return ba;case 35664:return wa;case 35665:return Sa;case 35666:return _a;case 35674:return Aa;case 35675:return Ea;case 35676:return Ca;case 5124:case 35670:return Ma;case 35667:case 35671:return Ta;case 35668:case 35672:return Pa;case 35669:case 35673:return Da;case 5125:return ka;case 36294:return Oa;case 36295:return Ra;case 36296:return Ia;case 35678:case 36198:case 36298:case 36306:case 35682:return La;case 35679:case 36299:case 36307:return Na;case 35680:case 36300:case 36308:case 36293:return ja;case 36289:case 36303:case 36311:case 36292:return Ba}}(t.type)}},os=class{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Fa;case 35664:return za;case 35665:return Ua;case 35666:return Ga;case 35674:return Va;case 35675:return Ha;case 35676:return Wa;case 5124:case 35670:return qa;case 35667:case 35671:return Ya;case 35668:case 35672:return Xa;case 35669:case 35673:return Qa;case 5125:return Ka;case 36294:return Za;case 36295:return Ja;case 36296:return $a;case 35678:case 36198:case 36298:case 36306:case 35682:return es;case 35679:case 36299:case 36307:return ts;case 35680:case 36300:case 36308:case 36293:return ns;case 36289:case 36303:case 36311:case 36292:return rs}}(t.type)}},as=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let r=this.seq;for(let i=0,o=r.length;i!==o;++i){let o=r[i];o.setValue(e,t[o.id],n)}}},ss=/(\w+)(\])?(\[|\.)?/g;function ls(e,t){e.seq.push(t),e.map[t.id]=t}function cs(e,t,n){let r=e.name,i=r.length;for(ss.lastIndex=0;;){let o=ss.exec(r),a=ss.lastIndex,s=o[1],l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===i){ls(n,void 0===c?new is(s,e,t):new os(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new as(s),ls(n,e)),n=e}}}var us=class{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){let n=e.getActiveUniform(t,r);cs(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){let i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){let r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){let o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}}static seqWithValue(e,t){let n=[];for(let r=0,i=e.length;r!==i;++r){let i=e[r];i.id in t&&n.push(i)}return n}};function ds(e,t,n){let r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}var hs=0;function fs(e,t,n){let r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";let o=/ERROR: 0:(\d+)/.exec(i);if(o){let r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){let n=e.split("\n"),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let a=i;a<o;a++){let e=a+1;r.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[a]))}return r.join("\n")}(e.getShaderSource(t),r)}return i}function ps(e,t){let n=function(e){switch(e){case gn:return["Linear","( value )"];case vn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function ms(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function gs(e){return""!==e}function vs(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function ys(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var xs=/^[ \t]*#include +<([\w\d./]+)>/gm;function bs(e){return e.replace(xs,ws)}function ws(e,t){let n=To[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return bs(n)}var Ss=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,_s=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function As(e){return e.replace(_s,Cs).replace(Ss,Es)}function Es(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Cs(e,t,n,r)}function Cs(e,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Ms(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Ts(e,t,n,r){let i,o,a=e.getContext(),s=n.defines,l=n.vertexShader,c=n.fragmentShader,u=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),d=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case _t:case At:t="ENVMAP_TYPE_CUBE";break;case Et:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===At&&(t="ENVMAP_MODE_REFRACTION");return t}(n),f=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),p=function(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),m=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(gs).join("\n")}(n),g=function(e){let t=[];for(let n in e){let r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),v=a.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(i=[g].filter(gs).join("\n"),i.length>0&&(i+="\n"),o=[m,g].filter(gs).join("\n"),o.length>0&&(o+="\n")):(i=[Ms(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(gs).join("\n"),o=[m,Ms(n),"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?To.tonemapping_pars_fragment:"",0!==n.toneMapping?ms("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",To.encodings_pars_fragment,ps("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(gs).join("\n")),l=bs(l),l=vs(l,n),l=ys(l,n),c=bs(c),c=vs(c,n),c=ys(c,n),l=As(l),c=As(c),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,o=["#define varying in",n.glslVersion===_n?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===_n?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+o);let x,b,w=y+o+c,S=ds(a,35633,y+i+l),_=ds(a,35632,w);if(a.attachShader(v,S),a.attachShader(v,_),void 0!==n.index0AttributeName?a.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(v,0,"position"),a.linkProgram(v),e.debug.checkShaderErrors){let e=a.getProgramInfoLog(v).trim(),t=a.getShaderInfoLog(S).trim(),n=a.getShaderInfoLog(_).trim(),r=!0,s=!0;if(!1===a.getProgramParameter(v,35714)){r=!1;let t=fs(a,S,"vertex"),n=fs(a,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(v,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):(""===t||""===n)&&(s=!1);s&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:i},fragmentShader:{log:n,prefix:o}})}return a.deleteShader(S),a.deleteShader(_),this.getUniforms=function(){return void 0===x&&(x=new us(a,v)),x},this.getAttributes=function(){return void 0===b&&(b=function(e,t){let n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){let r=e.getActiveAttrib(t,i),o=r.name,a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(a,v)),b},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=hs++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=S,this.fragmentShader=_,this}var Ps=0,Ds=class{constructor(e){this.id=Ps++,this.code=e,this.usedTimes=0}};function ks(e,t,n,r,i,o,a){let s=new Jr,l=new class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){let t=this.shaderCache;if(!1===t.has(e)){let n=new Ds(e);t.set(e,n)}return t.get(e)}},c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures,f=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(o,s,c,m,g){let v=m.fog,y=g.geometry,x=o.isMeshStandardMaterial?m.environment:null,b=(o.isMeshStandardMaterial?n:t).get(o.envMap||x),w=b&&b.mapping===Et?b.image.height:null,S=p[o.type];null!==o.precision&&(f=i.getMaxPrecision(o.precision),f!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",f,"instead."));let _,A,E,C,M=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,T=void 0!==M?M.length:0,P=0;if(void 0!==y.morphAttributes.position&&(P=1),void 0!==y.morphAttributes.normal&&(P=2),void 0!==y.morphAttributes.color&&(P=3),S){let e=Do[S];_=e.vertexShader,A=e.fragmentShader}else _=o.vertexShader,A=o.fragmentShader,l.update(o),E=l.getVertexShaderID(o),C=l.getFragmentShaderID(o);let D=e.getRenderTarget(),k=o.alphaTest>0,O=o.clearcoat>0,R=o.iridescence>0;return{isWebGL2:u,shaderID:S,shaderName:o.type,vertexShader:_,fragmentShader:A,defines:o.defines,customVertexShaderID:E,customFragmentShaderID:C,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:f,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:h,outputEncoding:null===D?e.outputEncoding:!0===D.isXRRenderTarget?D.texture.encoding:gn,map:!!o.map,matcap:!!o.matcap,envMap:!!b,envMapMode:b&&b.mapping,envMapCubeUVHeight:w,lightMap:!!o.lightMap,aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:1===o.normalMapType,tangentSpaceNormalMap:0===o.normalMapType,decodeVideoTexture:!!o.map&&!0===o.map.isVideoTexture&&o.map.encoding===vn,clearcoat:O,clearcoatMap:O&&!!o.clearcoatMap,clearcoatRoughnessMap:O&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:O&&!!o.clearcoatNormalMap,iridescence:R,iridescenceMap:R&&!!o.iridescenceMap,iridescenceThicknessMap:R&&!!o.iridescenceThicknessMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,opaque:!1===o.transparent&&1===o.blending,alphaMap:!!o.alphaMap,alphaTest:k,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!y.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!o.map||!!o.bumpMap||!!o.normalMap||!!o.specularMap||!!o.alphaMap||!!o.emissiveMap||!!o.roughnessMap||!!o.metalnessMap||!!o.clearcoatMap||!!o.clearcoatRoughnessMap||!!o.clearcoatNormalMap||!!o.iridescenceMap||!!o.iridescenceThicknessMap||!!o.displacementMap||!!o.transmissionMap||!!o.thicknessMap||!!o.specularIntensityMap||!!o.specularColorMap||!!o.sheenColorMap||!!o.sheenRoughnessMap,uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.iridescenceMap||o.iridescenceThicknessMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap)&&!!o.displacementMap,fog:!!v,useFog:!0===o.fog,fogExp2:v&&v.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:T,morphTextureStride:P,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:2===o.side,flipSided:1===o.side,useDepthPacking:!!o.depthPacking,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){let n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.map&&s.enable(4),t.matcap&&s.enable(5),t.envMap&&s.enable(6),t.lightMap&&s.enable(7),t.aoMap&&s.enable(8),t.emissiveMap&&s.enable(9),t.bumpMap&&s.enable(10),t.normalMap&&s.enable(11),t.objectSpaceNormalMap&&s.enable(12),t.tangentSpaceNormalMap&&s.enable(13),t.clearcoat&&s.enable(14),t.clearcoatMap&&s.enable(15),t.clearcoatRoughnessMap&&s.enable(16),t.clearcoatNormalMap&&s.enable(17),t.iridescence&&s.enable(18),t.iridescenceMap&&s.enable(19),t.iridescenceThicknessMap&&s.enable(20),t.displacementMap&&s.enable(21),t.specularMap&&s.enable(22),t.roughnessMap&&s.enable(23),t.metalnessMap&&s.enable(24),t.gradientMap&&s.enable(25),t.alphaMap&&s.enable(26),t.alphaTest&&s.enable(27),t.vertexColors&&s.enable(28),t.vertexAlphas&&s.enable(29),t.vertexUvs&&s.enable(30),t.vertexTangents&&s.enable(31),t.uvsVertexOnly&&s.enable(32),t.fog&&s.enable(33),e.push(s.mask),s.disableAll(),t.useFog&&s.enable(0),t.flatShading&&s.enable(1),t.logarithmicDepthBuffer&&s.enable(2),t.skinning&&s.enable(3),t.morphTargets&&s.enable(4),t.morphNormals&&s.enable(5),t.morphColors&&s.enable(6),t.premultipliedAlpha&&s.enable(7),t.shadowMapEnabled&&s.enable(8),t.physicallyCorrectLights&&s.enable(9),t.doubleSided&&s.enable(10),t.flipSided&&s.enable(11),t.useDepthPacking&&s.enable(12),t.dithering&&s.enable(13),t.specularIntensityMap&&s.enable(14),t.specularColorMap&&s.enable(15),t.transmission&&s.enable(16),t.transmissionMap&&s.enable(17),t.thicknessMap&&s.enable(18),t.sheen&&s.enable(19),t.sheenColorMap&&s.enable(20),t.sheenRoughnessMap&&s.enable(21),t.decodeVideoTexture&&s.enable(22),t.opaque&&s.enable(23),e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){let t,n=p[e.type];if(n){let e=Do[n];t=co.clone(e.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){let r;for(let e=0,i=c.length;e<i;e++){let t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Ts(e,n,t,o),c.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){let t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function Os(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Rs(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Is(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ls(){let e=[],t=0,n=[],r=[],i=[];function o(n,r,i,o,a,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,s,l,c){let u=o(e,t,a,s,l,c);a.transmission>0?r.push(u):!0===a.transparent?i.push(u):n.push(u)},unshift:function(e,t,a,s,l,c){let u=o(e,t,a,s,l,c);a.transmission>0?r.unshift(u):!0===a.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){let t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Rs),r.length>1&&r.sort(t||Is),i.length>1&&i.sort(t||Is)}}}function Ns(){let e=new WeakMap;return{get:function(t,n){let r;return!1===e.has(t)?(r=new Ls,e.set(t,[r])):n>=e.get(t).length?(r=new Ls,e.get(t).push(r)):r=e.get(t)[n],r},dispose:function(){e=new WeakMap}}}function js(){let e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new ur,color:new $n};break;case"SpotLight":n={position:new ur,direction:new ur,color:new $n,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ur,color:new $n,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ur,skyColor:new $n,groundColor:new $n};break;case"RectAreaLight":n={color:new $n,position:new ur,halfWidth:new ur,halfHeight:new ur}}return e[t.id]=n,n}}}var Bs=0;function Fs(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function zs(e,t){let n=new js,r=function(){let e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jn,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let l=0;l<9;l++)i.probe.push(new ur);let o=new ur,a=new Ur,s=new Ur;return{setup:function(o,a){let s=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,d=0,h=0,f=0,p=0,m=0,g=0,v=0;o.sort(Fs);let y=!0!==a?Math.PI:1;for(let e=0,t=o.length;e<t;e++){let t=o[e],a=t.color,x=t.intensity,b=t.distance,w=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=a.r*x*y,l+=a.g*x*y,c+=a.b*x*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],x);else if(t.isDirectionalLight){let e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){let e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=w,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){let e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(x*y),e.distance=b,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){let e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[h]=n,i.spotShadowMap[h]=w,i.spotShadowMatrix[h]=t.shadow.matrix,v++}i.spot[h]=e,h++}else if(t.isRectAreaLight){let e=n.get(t);e.color.copy(a).multiplyScalar(x),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[f]=e,f++}else if(t.isPointLight){let e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){let e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[d]=n,i.pointShadowMap[d]=w,i.pointShadowMatrix[d]=t.shadow.matrix,g++}i.point[d]=e,d++}else if(t.isHemisphereLight){let e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(x*y),e.groundColor.copy(t.groundColor).multiplyScalar(x*y),i.hemi[p]=e,p++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Po.LTC_FLOAT_1,i.rectAreaLTC2=Po.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Po.LTC_HALF_1,i.rectAreaLTC2=Po.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=c;let x=i.hash;(x.directionalLength!==u||x.pointLength!==d||x.spotLength!==h||x.rectAreaLength!==f||x.hemiLength!==p||x.numDirectionalShadows!==m||x.numPointShadows!==g||x.numSpotShadows!==v)&&(i.directional.length=u,i.spot.length=h,i.rectArea.length=f,i.point.length=d,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=v,x.directionalLength=u,x.pointLength=d,x.spotLength=h,x.rectAreaLength=f,x.hemiLength=p,x.numDirectionalShadows=m,x.numPointShadows=g,x.numSpotShadows=v,i.version=Bs++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0,d=t.matrixWorldInverse;for(let h=0,f=e.length;h<f;h++){let t=e[h];if(t.isDirectionalLight){let e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),n++}else if(t.isSpotLight){let e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){let e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),s.identity(),a.copy(t.matrixWorld),a.premultiply(d),s.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(t.isPointLight){let e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),r++}else if(t.isHemisphereLight){let e=i.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}},state:i}}function Us(e,t){let n=new zs(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Gs(e,t){let n=new WeakMap;return{get:function(r){let i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new Us(e,t),n.set(r,[i])):o>=n.get(r).length?(i=new Us(e,t),n.get(r).push(i)):i=n.get(r)[o],i},dispose:function(){n=new WeakMap}}}var Vs=class extends Ei{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=yn,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Hs=class extends Ei{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ur,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function Ws(e,t,n){let r=new Ao,i=new jn,o=new jn,a=new ar,s=new Vs({depthPacking:3201}),l=new Hs,c={},u=n.maxTextureSize,d={0:1,1:0,2:2},h=new uo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new jn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let p=new zi;p.setAttribute("position",new Pi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new io(p,h),g=this;function v(n,r){let o=t.update(m);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new sr(i.x,i.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,o,h,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,o,f,m,null)}function y(t,n,r,i,o,a){let u=null,h=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(u=void 0!==h?h:!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){let e=u.uuid,t=n.uuid,r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=u.clone(),r[t]=i),u=i}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=3===a?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=i,u.farDistance=o),u}function x(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);let r=t.update(n),i=n.material;if(Array.isArray(i)){let t=r.groups;for(let l=0,c=t.length;l<c;l++){let c=t[l],u=i[c.materialIndex];if(u&&u.visible){let t=y(n,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,c)}}}else if(i.visible){let t=y(n,i,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,null)}}let l=n.children;for(let e=0,t=l.length;e<t;e++)x(l[e],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===t.length)return;let l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let f=0,p=t.length;f<p;f++){let l=t[f],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);let d=c.getFrameExtents();if(i.multiply(d),o.copy(c.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/d.x),i.x=o.x*d.x,c.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/d.y),i.y=o.y*d.y,c.mapSize.y=o.y)),null===c.map){let e=3!==this.type?{minFilter:Pt,magFilter:Pt}:{};c.map=new sr(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();let p=c.getViewportCount();for(let e=0;e<p;e++){let t=c.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),h.viewport(a),c.updateMatrices(l,e),r=c.getFrustum(),x(n,s,c.camera,l,this.type)}!0!==c.isPointLightShadow&&3===this.type&&v(c,s),c.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(l,c,d)}}function qs(e,t,n){let r=n.isWebGL2;let i=new function(){let t=!1,n=new ar,r=null,i=new ar(0,0,0,0);return{setMask:function(n){r!==n&&!t&&(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?B(2929):F(2929)},setMask:function(r){n!==r&&!t&&(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(e){t||(e?B(2960):F(2960))},setMask:function(r){n!==r&&!t&&(e.stencilMask(r),n=r)},setFunc:function(t,n,a){(r!==t||i!==n||o!==a)&&(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){(a!==t||s!==n||l!==r)&&(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null}}},s={},l={},c=new WeakMap,u=[],d=null,h=!1,f=null,p=null,m=null,g=null,v=null,y=null,x=null,b=!1,w=null,S=null,_=null,A=null,E=null,C=e.getParameter(35661),M=!1,T=0,P=e.getParameter(7938);-1!==P.indexOf("WebGL")?(T=parseFloat(/^WebGL (\d)/.exec(P)[1]),M=T>=1):-1!==P.indexOf("OpenGL ES")&&(T=parseFloat(/^OpenGL ES (\d)/.exec(P)[1]),M=T>=2);let D=null,k={},O=e.getParameter(3088),R=e.getParameter(2978),I=(new ar).fromArray(O),L=(new ar).fromArray(R);function N(t,n,r){let i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}let j={};function B(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function F(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}j[3553]=N(3553,3553,1),j[34067]=N(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),B(2929),o.setFunc(3),V(!1),H(1),B(2884),G(0);let z={[St]:32774,101:32778,102:32779};if(r)z[103]=32775,z[104]=32776;else{let e=t.get("EXT_blend_minmax");null!==e&&(z[103]=e.MIN_EXT,z[104]=e.MAX_EXT)}let U={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function G(t,n,r,i,o,a,s,l){if(0!==t){if(!1===h&&(B(3042),h=!0),5===t)o=o||n,a=a||r,s=s||i,(n!==p||o!==v)&&(e.blendEquationSeparate(z[n],z[o]),p=n,v=o),(r!==m||i!==g||a!==y||s!==x)&&(e.blendFuncSeparate(U[r],U[i],U[a],U[s]),m=r,g=i,y=a,x=s),f=t,b=null;else if(t!==f||l!==b){if((p!==St||v!==St)&&(e.blendEquation(32774),p=St,v=St),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,y=null,x=null,f=t,b=l}}else!0===h&&(F(3042),h=!1)}function V(t){w!==t&&(t?e.frontFace(2304):e.frontFace(2305),w=t)}function H(t){0!==t?(B(2884),t!==S&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):F(2884),S=t}function W(t,n,r){t?(B(32823),(A!==n||E!==r)&&(e.polygonOffset(n,r),A=n,E=r)):F(32823)}function q(t){void 0===t&&(t=33984+C-1),D!==t&&(e.activeTexture(t),D=t)}return{buffers:{color:i,depth:o,stencil:a},enable:B,disable:F,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,r&&(36009===t&&(l[36160]=n),36160===t&&(l[36009]=n)),!0)},drawBuffers:function(r,i){let o=u,a=!1;if(r)if(o=c.get(i),void 0===o&&(o=[],c.set(i,o)),r.isWebGLMultipleRenderTargets){let e=r.texture;if(o.length!==e.length||36064!==o[0]){for(let t=0,n=e.length;t<n;t++)o[t]=36064+t;o.length=e.length,a=!0}}else 36064!==o[0]&&(o[0]=36064,a=!0);else 1029!==o[0]&&(o[0]=1029,a=!0);a&&(n.isWebGL2?e.drawBuffers(o):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:G,setMaterial:function(e,t){2===e.side?F(2884):B(2884);let n=1===e.side;t&&(n=!n),V(n),1===e.blending&&!1===e.transparent?G(0):G(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);let r=e.stencilWrite;a.setTest(r),r&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),W(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?B(32926):F(32926)},setFlipSided:V,setCullFace:H,setLineWidth:function(t){t!==_&&(M&&e.lineWidth(t),_=t)},setPolygonOffset:W,setScissorTest:function(e){e?B(3089):F(3089)},activeTexture:q,bindTexture:function(t,n){null===D&&q();let r=k[D];void 0===r&&(r={type:void 0,texture:void 0},k[D]=r),(r.type!==t||r.texture!==n)&&(e.bindTexture(t,n||j[t]),r.type=t,r.texture=n)},unbindTexture:function(){let t=k[D];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(PG){console.error("THREE.WebGLState:",PG)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(PG){console.error("THREE.WebGLState:",PG)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(PG){console.error("THREE.WebGLState:",PG)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(PG){console.error("THREE.WebGLState:",PG)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(PG){console.error("THREE.WebGLState:",PG)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(PG){console.error("THREE.WebGLState:",PG)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(PG){console.error("THREE.WebGLState:",PG)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(PG){console.error("THREE.WebGLState:",PG)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===L.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),L.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},D=null,k={},l={},c=new WeakMap,u=[],d=null,h=!1,f=null,p=null,m=null,g=null,v=null,y=null,x=null,b=!1,w=null,S=null,_=null,A=null,E=null,I.set(0,0,e.canvas.width,e.canvas.height),L.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),a.reset()}}}function Ys(e,t,n,r,i,o,a){let s,l=i.isWebGL2,c=i.maxTextures,u=i.maxCubemapSize,d=i.maxTextureSize,h=i.maxSamples,f=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p=/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,g=new WeakMap,v=!1;try{v=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function y(e,t){return v?new OffscreenCanvas(e,t):Gn("canvas")}function x(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let r=t?Ln:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===s&&(s=y(o,a));let l=n?y(o,a):s;return l.width=o,l.height=a,l.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return In(e.width)&&In(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==Pt&&e.minFilter!==Dt}function S(t){e.generateMipmap(t)}function _(n,r,i,o){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===l)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=r;return 6403===r&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),33319===r&&(5126===i&&(s=33328),5131===i&&(s=33327),5121===i&&(s=33323)),6408===r&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=o===vn&&!1===a?35907:32856),32819===i&&(s=32854),32820===i&&(s=32855)),(33325===s||33326===s||33327===s||33328===s||34842===s||34836===s)&&t.get("EXT_color_buffer_float"),s}function A(e,t,n){return!0===w(e,n)||e.isFramebufferTexture&&e.minFilter!==Pt&&e.minFilter!==Dt?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function E(e){return e===Pt||1004===e||1005===e?9728:9729}function C(e){let t=e.target;t.removeEventListener("dispose",C),function(e){let t=r.get(e);if(void 0===t.__webglInit)return;let n=e.source,i=g.get(n);if(i){let r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&T(e),0===Object.keys(i).length&&g.delete(n)}r.remove(e)}(t),t.isVideoTexture&&m.delete(t)}function M(t){let n=t.target;n.removeEventListener("dispose",M),function(t){let n=t.texture,i=r.get(t),o=r.get(n);if(void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let s=0,l=n.length;s<l;s++){let t=r.get(n[s]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),r.remove(n[s])}r.remove(n),r.remove(t)}(n)}function T(t){let n=r.get(t);e.deleteTexture(n.__webglTexture);let i=t.source;delete g.get(i)[n.__cacheKey],a.memory.textures--}let P=0;function D(e,t){let i=r.get(e);if(e.isVideoTexture&&function(e){let t=a.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){let n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void L(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}let k={[Ct]:10497,[Mt]:33071,[Tt]:33648},O={[Pt]:9728,1004:9984,1005:9986,[Dt]:9729,1007:9985,[kt]:9987};function R(n,o,a){if(a?(e.texParameteri(n,10242,k[o.wrapS]),e.texParameteri(n,10243,k[o.wrapT]),(32879===n||35866===n)&&e.texParameteri(n,32882,k[o.wrapR]),e.texParameteri(n,10240,O[o.magFilter]),e.texParameteri(n,10241,O[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),(32879===n||35866===n)&&e.texParameteri(n,32882,33071),(o.wrapS!==Mt||o.wrapT!==Mt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,E(o.magFilter)),e.texParameteri(n,10241,E(o.minFilter)),o.minFilter!==Pt&&o.minFilter!==Dt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){let a=t.get("EXT_texture_filter_anisotropic");if(o.type===Lt&&!1===t.has("OES_texture_float_linear")||!1===l&&o.type===Nt&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function I(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",C));let i=n.source,o=g.get(i);void 0===o&&(o={},g.set(i,o));let s=function(e){let t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===o[s]&&(o[s]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;let i=o[t.__cacheKey];void 0!==i&&(o[t.__cacheKey].usedTimes--,0===i.usedTimes&&T(n)),t.__cacheKey=s,t.__webglTexture=o[s].texture}return r}function L(t,r,i){let a=3553;r.isDataArrayTexture&&(a=35866),r.isData3DTexture&&(a=32879);let s=I(t,r),c=r.source;if(n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),c.version!==c.__currentVersion||!0===s){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);let t=function(e){return!l&&(e.wrapS!==Mt||e.wrapT!==Mt||e.minFilter!==Pt&&e.minFilter!==Dt)}(r)&&!1===b(r.image),i=x(r.image,t,!1,d);i=U(r,i);let u=b(i)||l,h=o.convert(r.format,r.encoding),f=o.convert(r.type),p=_(r.internalFormat,h,f,r.encoding,r.isVideoTexture);R(a,r,u);let m,g=r.mipmaps,v=l&&!0!==r.isVideoTexture,y=void 0===c.__currentVersion||!0===s,E=A(r,i,u);if(r.isDepthTexture)p=6402,l?p=r.type===Lt?36012:r.type===It?33190:r.type===jt?35056:33189:r.type===Lt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Ft&&6402===p&&r.type!==Rt&&r.type!==It&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=It,f=o.convert(r.type)),r.format===zt&&6402===p&&(p=34041,r.type!==jt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=jt,f=o.convert(r.type))),y&&(v?n.texStorage2D(3553,1,p,i.width,i.height):n.texImage2D(3553,0,p,i.width,i.height,0,h,f,null));else if(r.isDataTexture)if(g.length>0&&u){v&&y&&n.texStorage2D(3553,E,p,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)m=g[e],v?n.texSubImage2D(3553,e,0,0,m.width,m.height,h,f,m.data):n.texImage2D(3553,e,p,m.width,m.height,0,h,f,m.data);r.generateMipmaps=!1}else v?(y&&n.texStorage2D(3553,E,p,i.width,i.height),n.texSubImage2D(3553,0,0,0,i.width,i.height,h,f,i.data)):n.texImage2D(3553,0,p,i.width,i.height,0,h,f,i.data);else if(r.isCompressedTexture){v&&y&&n.texStorage2D(3553,E,p,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)m=g[e],r.format!==Bt?null!==h?v?n.compressedTexSubImage2D(3553,e,0,0,m.width,m.height,h,m.data):n.compressedTexImage2D(3553,e,p,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):v?n.texSubImage2D(3553,e,0,0,m.width,m.height,h,f,m.data):n.texImage2D(3553,e,p,m.width,m.height,0,h,f,m.data)}else if(r.isDataArrayTexture)v?(y&&n.texStorage3D(35866,E,p,i.width,i.height,i.depth),n.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,h,f,i.data)):n.texImage3D(35866,0,p,i.width,i.height,i.depth,0,h,f,i.data);else if(r.isData3DTexture)v?(y&&n.texStorage3D(32879,E,p,i.width,i.height,i.depth),n.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,h,f,i.data)):n.texImage3D(32879,0,p,i.width,i.height,i.depth,0,h,f,i.data);else if(r.isFramebufferTexture){if(y)if(v)n.texStorage2D(3553,E,p,i.width,i.height);else{let e=i.width,t=i.height;for(let r=0;r<E;r++)n.texImage2D(3553,r,p,e,t,0,h,f,null),e>>=1,t>>=1}}else if(g.length>0&&u){v&&y&&n.texStorage2D(3553,E,p,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)m=g[e],v?n.texSubImage2D(3553,e,0,0,h,f,m):n.texImage2D(3553,e,p,h,f,m);r.generateMipmaps=!1}else v?(y&&n.texStorage2D(3553,E,p,i.width,i.height),n.texSubImage2D(3553,0,0,0,h,f,i)):n.texImage2D(3553,0,p,h,f,i);w(r,u)&&S(a),c.__currentVersion=c.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function N(t,i,a,s,l){let c=o.convert(a.format,a.encoding),u=o.convert(a.type),d=_(a.internalFormat,c,u,a.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,d,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,d,i.width,i.height,0,c,u,null)),n.bindFramebuffer(36160,t),z(i)?f.framebufferTexture2DMultisampleEXT(36160,s,l,r.get(a).__webglTexture,0,F(i)):e.framebufferTexture2D(36160,s,l,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function j(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||z(n)){let t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Lt?i=36012:t.type===It&&(i=33190));let r=F(n);z(n)?f.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){let i=F(n);r&&!1===z(n)?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):z(n)?f.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{let t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){let a=t[i],s=o.convert(a.format,a.encoding),l=o.convert(a.type),c=_(a.internalFormat,s,l,a.encoding),u=F(n);r&&!1===z(n)?e.renderbufferStorageMultisample(36161,u,c,n.width,n.height):z(n)?f.renderbufferStorageMultisampleEXT(36161,u,c,n.width,n.height):e.renderbufferStorage(36161,c,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function B(t){let i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(i.depthTexture).__webglTexture||i.depthTexture.image.width!==i.width||i.depthTexture.image.height!==i.height)&&(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),D(i.depthTexture,0);let o=r.get(i.depthTexture).__webglTexture,a=F(i);if(i.depthTexture.format===Ft)z(i)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==zt)throw new Error("Unknown depthTexture format");z(i)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),j(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),j(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function F(e){return Math.min(h,e.samples)}function z(e){let n=r.get(e);return l&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function U(e,n){let r=e.encoding,i=e.format,o=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===An||r!==gn&&(r===vn?!1===l?!0===t.has("EXT_sRGB")&&i===Bt?(e.format=An,e.minFilter=Dt,e.generateMipmaps=!1):n=tr.sRGBToLinear(n):(i!==Bt||o!==Ot)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){let e=P;return e>=c&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+c),P+=1,e},this.resetTextureUnits=function(){P=0},this.setTexture2D=D,this.setTexture2DArray=function(e,t){let i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){let i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(t,i){let a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;let a=I(t,r),s=r.source;if(n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),s.version!==s.__currentVersion||!0===a){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);let t=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,c=[];for(let e=0;e<6;e++)c[e]=t||i?i?r.image[e].image:r.image[e]:x(r.image[e],!1,!0,u),c[e]=U(r,c[e]);let d,h=c[0],f=b(h)||l,p=o.convert(r.format,r.encoding),m=o.convert(r.type),g=_(r.internalFormat,p,m,r.encoding),v=l&&!0!==r.isVideoTexture,y=void 0===s.__currentVersion||!0===a,E=A(r,h,f);if(R(34067,r,f),t){v&&y&&n.texStorage2D(34067,E,g,h.width,h.height);for(let e=0;e<6;e++){d=c[e].mipmaps;for(let t=0;t<d.length;t++){let i=d[t];r.format!==Bt?null!==p?v?n.compressedTexSubImage2D(34069+e,t,0,0,i.width,i.height,p,i.data):n.compressedTexImage2D(34069+e,t,g,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v?n.texSubImage2D(34069+e,t,0,0,i.width,i.height,p,m,i.data):n.texImage2D(34069+e,t,g,i.width,i.height,0,p,m,i.data)}}}else{d=r.mipmaps,v&&y&&(d.length>0&&E++,n.texStorage2D(34067,E,g,c[0].width,c[0].height));for(let e=0;e<6;e++)if(i){v?n.texSubImage2D(34069+e,0,0,0,c[e].width,c[e].height,p,m,c[e].data):n.texImage2D(34069+e,0,g,c[e].width,c[e].height,0,p,m,c[e].data);for(let t=0;t<d.length;t++){let r=d[t].image[e].image;v?n.texSubImage2D(34069+e,t+1,0,0,r.width,r.height,p,m,r.data):n.texImage2D(34069+e,t+1,g,r.width,r.height,0,p,m,r.data)}}else{v?n.texSubImage2D(34069+e,0,0,0,p,m,c[e]):n.texImage2D(34069+e,0,g,p,m,c[e]);for(let t=0;t<d.length;t++){let r=d[t];v?n.texSubImage2D(34069+e,t+1,0,0,p,m,r.image[e]):n.texImage2D(34069+e,t+1,g,p,m,r.image[e])}}}w(r,f)&&S(34067),s.__currentVersion=s.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))},this.rebindTextures=function(e,t,n){let i=r.get(e);void 0!==t&&N(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&B(e)},this.setupRenderTarget=function(t){let s=t.texture,c=r.get(t),u=r.get(s);t.addEventListener("dispose",M),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=s.version,a.memory.textures++);let d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,f=b(t)||l;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),h)if(i.drawBuffers){let n=t.texture;for(let t=0,i=n.length;t<i;t++){let i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&t.samples>0&&!1===z(t)){let r=h?s:[s];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){let i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);let a=o.convert(i.format,i.encoding),s=o.convert(i.type),l=_(i.internalFormat,a,s,i.encoding),u=F(t);e.renderbufferStorageMultisample(36161,u,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),j(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(d){n.bindTexture(34067,u.__webglTexture),R(34067,s,f);for(let e=0;e<6;e++)N(c.__webglFramebuffer[e],t,s,36064,34069+e);w(s,f)&&S(34067),n.unbindTexture()}else if(h){let e=t.texture;for(let i=0,o=e.length;i<o;i++){let o=e[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),R(3553,o,f),N(c.__webglFramebuffer,t,o,36064+i,3553),w(o,f)&&S(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,u.__webglTexture),R(e,s,f),N(c.__webglFramebuffer,t,s,36064,e),w(s,f)&&S(e),n.unbindTexture()}t.depthBuffer&&B(t)},this.updateRenderTargetMipmap=function(e){let t=b(e)||l,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,a=i.length;o<a;o++){let a=i[o];if(w(a,t)){let t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),S(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(l&&t.samples>0&&!1===z(t)){let i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=t.width,a=t.height,s=16384,l=[],c=t.stencilBuffer?33306:36096,u=r.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(let t=0;t<i.length;t++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),t.depthBuffer&&l.push(c);let h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),d&&e.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),d){let t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728),p&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),d)for(let t=0;t<i.length;t++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,u.__webglColorRenderbuffer[t]);let o=r.get(i[t]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,o,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=B,this.setupFrameBufferTexture=N,this.useMultisampledRTT=z}function Xs(e,t,n){let r=n.isWebGL2;return{convert:function(n){let i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===Ot)return 5121;if(1017===n)return 32819;if(1018===n)return 32820;if(1010===n)return 5120;if(1011===n)return 5122;if(n===Rt)return 5123;if(1013===n)return 5124;if(n===It)return 5125;if(n===Lt)return 5126;if(n===Nt)return r?5131:(i=t.get("OES_texture_half_float"),null!==i?i.HALF_FLOAT_OES:null);if(1021===n)return 6406;if(n===Bt)return 6408;if(1024===n)return 6409;if(1025===n)return 6410;if(n===Ft)return 6402;if(n===zt)return 34041;if(1028===n)return 6403;if(1022===n)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===An)return i=t.get("EXT_sRGB"),null!==i?i.SRGB_ALPHA_EXT:null;if(1029===n)return 36244;if(1030===n)return 33319;if(1031===n)return 33320;if(1033===n)return 36249;if(n===Ut||n===Gt||n===Vt||n===Ht)if(o===vn){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(n===Ut)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Gt)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Vt)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Ht)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(n===Ut)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Gt)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Vt)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Ht)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Wt||n===qt||n===Yt||n===Xt){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(n===Wt)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===qt)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Yt)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Xt)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return i=t.get("WEBGL_compressed_texture_etc1"),null!==i?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Qt||n===Kt){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(n===Qt)return o===vn?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===Kt)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===Zt||n===Jt||n===$t||n===en||n===tn||n===nn||n===rn||n===on||n===an||n===sn||n===ln||n===cn||n===un||n===dn){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(n===Zt)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Jt)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===$t)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===en)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===tn)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===nn)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===rn)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===on)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===an)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===sn)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===ln)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===cn)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===un)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===dn)return o===vn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===hn){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(n===hn)return o===vn?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===jt?r?34042:(i=t.get("WEBGL_depth_texture"),null!==i?i.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}var Qs=class extends fo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}},Ks=class extends hi{constructor(){super(),this.isGroup=!0,this.type="Group"}},Zs={type:"move"},Js=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ks,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ks,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ur,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ur),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ks,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ur,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ur),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null,a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(let o of e.hand.values()){let e=t.getJointPose(o,n);if(void 0===l.joints[o.jointName]){let e=new Ks;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[o.jointName]=e,l.add(e)}let r=l.joints[o.jointName];null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=e.radius),r.visible=null!==e}let r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Zs)))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}},$s=class extends or{constructor(e,t,n,r,i,o,a,s,l,c){if((c=void 0!==c?c:Ft)!==Ft&&c!==zt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ft&&(n=It),void 0===n&&c===zt&&(n=jt),super(null,r,i,o,a,s,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:Pt,this.minFilter=void 0!==s?s:Pt,this.flipY=!1,this.generateMipmaps=!1}},el=class extends En{constructor(e,t){super();let n=this,r=null,i=1,o=null,a="local-floor",s=null,l=null,c=null,u=null,d=null,h=null,f=t.getContextAttributes(),p=null,m=null,g=[],v=[],y=new fo;y.layers.enable(1),y.viewport=new ar;let x=new fo;x.layers.enable(2),x.viewport=new ar;let b=[y,x],w=new Qs;w.layers.enable(1),w.layers.enable(2);let S=null,_=null;function A(e){let t=v.indexOf(e.inputSource);if(-1===t)return;let n=g[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function E(){r.removeEventListener("select",A),r.removeEventListener("selectstart",A),r.removeEventListener("selectend",A),r.removeEventListener("squeeze",A),r.removeEventListener("squeezestart",A),r.removeEventListener("squeezeend",A),r.removeEventListener("end",E),r.removeEventListener("inputsourceschange",C);for(let e=0;e<g.length;e++){let t=v[e];null!==t&&(v[e]=null,g[e].disconnect(t))}S=null,_=null,e.setRenderTarget(p),d=null,u=null,c=null,r=null,m=null,k.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function C(e){for(let t=0;t<e.removed.length;t++){let n=e.removed[t],r=v.indexOf(n);r>=0&&(v[r]=null,g[r].dispatchEvent({type:"disconnected",data:n}))}for(let t=0;t<e.added.length;t++){let n=e.added[t],r=v.indexOf(n);if(-1===r){for(let e=0;e<g.length;e++){if(e>=v.length){v.push(n),r=e;break}if(null===v[e]){v[e]=n,r=e;break}}if(-1===r)break}let i=g[r];i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new Js,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new Js,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new Js,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s||o},this.setReferenceSpace=function(e){s=e},this.getBaseLayer=function(){return null!==u?u:d},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(p=e.getRenderTarget(),r.addEventListener("select",A),r.addEventListener("selectstart",A),r.addEventListener("selectend",A),r.addEventListener("squeeze",A),r.addEventListener("squeezestart",A),r.addEventListener("squeezeend",A),r.addEventListener("end",E),r.addEventListener("inputsourceschange",C),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){let n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),m=new sr(d.framebufferWidth,d.framebufferHeight,{format:Bt,type:Ot,encoding:e.outputEncoding})}else{let n=null,o=null,a=null;f.depth&&(a=f.stencil?35056:33190,n=f.stencil?zt:Ft,o=f.stencil?jt:It);let s={colorFormat:32856,depthFormat:a,scaleFactor:i};c=new XRWebGLBinding(r,t),u=c.createProjectionLayer(s),r.updateRenderState({layers:[u]}),m=new sr(u.textureWidth,u.textureHeight,{format:Bt,type:Ot,depthTexture:new $s(u.textureWidth,u.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),s=null,o=await r.requestReferenceSpace(a),k.setContext(r),k.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};let M=new ur,T=new ur;function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;w.near=x.near=y.near=e.near,w.far=x.far=y.far=e.far,(S!==w.near||_!==w.far)&&(r.updateRenderState({depthNear:w.near,depthFar:w.far}),S=w.near,_=w.far);let t=e.parent,n=w.cameras;P(w,t);for(let r=0;r<n.length;r++)P(n[r],t);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),e.position.copy(w.position),e.quaternion.copy(w.quaternion),e.scale.copy(w.scale),e.matrix.copy(w.matrix),e.matrixWorld.copy(w.matrixWorld);let i=e.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(!0);2===n.length?function(e,t,n){M.setFromMatrixPosition(t.matrixWorld),T.setFromMatrixPosition(n.matrixWorld);let r=M.distanceTo(T),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],d=(o[8]+1)/o[0],h=a*u,f=a*d,p=r/(-u+d),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();let g=a+p,v=s+p,y=h-m,x=f+(r-m),b=l*s/v*g,w=c*s/v*g;e.projectionMatrix.makePerspective(y,x,b,w,g,v)}(w,y,x):w.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(e){null!==u&&(u.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)};let D=null;let k=new Eo;k.setAnimationLoop((function(t,n){if(l=n.getViewerPose(s||o),h=n,null!==l){let t=l.views;null!==d&&(e.setRenderTargetFramebuffer(m,d.framebuffer),e.setRenderTarget(m));let n=!1;t.length!==w.cameras.length&&(w.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){let i=t[r],o=null;if(null!==d)o=d.getViewport(i);else{let t=c.getViewSubImage(u,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(m,t.colorTexture,u.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(m))}let a=b[r];void 0===a&&(a=new fo,a.layers.enable(r),a.viewport=new ar,b[r]=a),a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&w.matrix.copy(a.matrix),!0===n&&w.cameras.push(a)}}for(let e=0;e<g.length;e++){let t=v[e],r=g[e];null!==t&&void 0!==r&&r.update(t,n,s||o)}D&&D(t,n),h=null})),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}};function tl(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,1===r.side&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),1===r.side&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);let i,o,a=t.get(r).envMap;if(a&&(n.envMap.value=a,n.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;let t=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?i=r.map:r.specularMap?i=r.specularMap:r.displacementMap?i=r.displacementMap:r.normalMap?i=r.normalMap:r.bumpMap?i=r.bumpMap:r.roughnessMap?i=r.roughnessMap:r.metalnessMap?i=r.metalnessMap:r.alphaMap?i=r.alphaMap:r.emissiveMap?i=r.emissiveMap:r.clearcoatMap?i=r.clearcoatMap:r.clearcoatNormalMap?i=r.clearcoatNormalMap:r.clearcoatRoughnessMap?i=r.clearcoatRoughnessMap:r.iridescenceMap?i=r.iridescenceMap:r.iridescenceThicknessMap?i=r.iridescenceThicknessMap:r.specularIntensityMap?i=r.specularIntensityMap:r.specularColorMap?i=r.specularColorMap:r.transmissionMap?i=r.transmissionMap:r.thicknessMap?i=r.thicknessMap:r.sheenColorMap?i=r.sheenColorMap:r.sheenRoughnessMap&&(i=r.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),n.uvTransform.value.copy(i.matrix)),r.aoMap?o=r.aoMap:r.lightMap&&(o=r.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uv2Transform.value.copy(o.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,a)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function nl(){let e=Gn("canvas");return e.style.display="block",e}function rl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;let t,n=void 0!==e.canvas?e.canvas:nl(),r=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=null!==r?r.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let d=null,h=null,f=[],p=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=gn,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});let m=this,g=!1,v=0,y=0,x=null,b=-1,w=null,S=new ar,_=new ar,A=null,E=n.width,C=n.height,M=1,T=null,P=null,D=new ar(0,0,E,C),k=new ar(0,0,E,C),O=!1,R=new Ao,I=!1,L=!1,N=null,j=new Ur,B=new jn,F=new ur,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===x?M:1}let G,V,H,W,q,Y,X,Q,K,Z,J,$,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,de=r;function he(e,t){for(let r=0;r<e.length;r++){let i=e[r],o=n.getContext(i,t);if(null!==o)return o}return null}try{let e={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r".concat(vt)),n.addEventListener("webglcontextlost",me,!1),n.addEventListener("webglcontextrestored",ge,!1),n.addEventListener("webglcontextcreationerror",ve,!1),null===de){let t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),de=he(t,e),null===de)throw he(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===de.getShaderPrecisionFormat&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(aH){throw console.error("THREE.WebGLRenderer: "+aH.message),aH}function fe(){G=new Jo(de),V=new Io(de,G,e),G.init(V),ce=new Xs(de,G,V),H=new qs(de,G,V),W=new ta,q=new Os,Y=new Ys(de,G,H,q,V,ce,W),X=new No(m),Q=new Zo(m),K=new Co(de,V),ue=new Oo(de,G,K,V),Z=new $o(de,K,W,ue),J=new aa(de,Z,K,W),ae=new oa(de,V,Y),re=new Lo(q),$=new ks(m,X,Q,G,V,ue,re),ee=new tl(m,q),te=new Ns,ne=new Gs(G,V),oe=new ko(m,X,H,J,t,s),ie=new Ws(m,J,V),se=new Ro(de,G,W,V),le=new ea(de,G,W,V),W.programs=$.programs,m.capabilities=V,m.extensions=G,m.properties=q,m.renderLists=te,m.shadowMap=ie,m.state=H,m.info=W}fe();let pe=new el(m,de);function me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let e=W.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;fe(),W.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function ve(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function ye(e){let t=e.target;t.removeEventListener("dispose",ye),xe(t)}function xe(e){be(e),q.remove(e)}function be(e){let t=q.get(e).programs;void 0!==t&&(t.forEach((function(e){$.releaseProgram(e)})),e.isShaderMaterial&&$.releaseShaderCache(e))}this.xr=pe,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){let e=G.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=G.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return M},this.setPixelRatio=function(e){void 0!==e&&(M=e,this.setSize(E,C,!1))},this.getSize=function(e){return e.set(E,C)},this.setSize=function(e,t,r){pe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=e,C=t,n.width=Math.floor(e*M),n.height=Math.floor(t*M),!1!==r&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(E*M,C*M).floor()},this.setDrawingBufferSize=function(e,t,r){E=e,C=t,M=r,n.width=Math.floor(e*r),n.height=Math.floor(t*r),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(S)},this.getViewport=function(e){return e.copy(D)},this.setViewport=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),H.viewport(S.copy(D).multiplyScalar(M).floor())},this.getScissor=function(e){return e.copy(k)},this.setScissor=function(e,t,n,r){e.isVector4?k.set(e.x,e.y,e.z,e.w):k.set(e,t,n,r),H.scissor(_.copy(k).multiplyScalar(M).floor())},this.getScissorTest=function(){return O},this.setScissorTest=function(e){H.setScissorTest(O=e)},this.setOpaqueSort=function(e){T=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(oe.getClearColor())},this.setClearColor=function(){oe.setClearColor.apply(oe,arguments)},this.getClearAlpha=function(){return oe.getClearAlpha()},this.setClearAlpha=function(){oe.setClearAlpha.apply(oe,arguments)},this.clear=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),de.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",me,!1),n.removeEventListener("webglcontextrestored",ge,!1),n.removeEventListener("webglcontextcreationerror",ve,!1),te.dispose(),ne.dispose(),q.dispose(),X.dispose(),Q.dispose(),J.dispose(),ue.dispose(),$.dispose(),pe.dispose(),pe.removeEventListener("sessionstart",_e),pe.removeEventListener("sessionend",Ae),N&&(N.dispose(),N=null),Ee.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=z);let a=i.isMesh&&i.matrixWorld.determinant()<0,s=Re(e,t,n,r,i);H.setMaterial(r,a);let l=n.index,c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u=1;!0===r.wireframe&&(l=Z.getWireframeAttribute(n),u=2),ue.setup(i,r,s,n,l);let d,h=se;null!==l&&(d=K.get(l),h=le,h.setIndex(d));let f=null!==l?l.count:c.count,p=n.drawRange.start*u,m=n.drawRange.count*u,g=null!==o?o.start*u:0,v=null!==o?o.count*u:1/0,y=Math.max(p,g),x=Math.min(f,p+m,g+v)-1,b=Math.max(0,x-y+1);if(0!==b){if(i.isMesh)!0===r.wireframe?(H.setLineWidth(r.wireframeLinewidth*U()),h.setMode(1)):h.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),H.setLineWidth(e*U()),i.isLineSegments?h.setMode(1):i.isLineLoop?h.setMode(2):h.setMode(3)}else i.isPoints?h.setMode(0):i.isSprite&&h.setMode(4);if(i.isInstancedMesh)h.renderInstances(y,b,i.count);else if(n.isInstancedBufferGeometry){let e=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(y,b,e)}else h.render(y,b)}},this.compile=function(e,t){h=ne.get(e),h.init(),p.push(h),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(m.physicallyCorrectLights),e.traverse((function(t){let n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){ke(n[r],e,t)}else ke(n,e,t)})),p.pop(),h=null};let we=null;function Se(e){we&&we(e)}function _e(){Ee.stop()}function Ae(){Ee.start()}let Ee=new Eo;function Ce(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||R.intersectsSprite(e)){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);let t=J.update(e),i=e.material;i.visible&&d.push(e,t,i,n,F.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||R.intersectsObject(e))){r&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);let t=J.update(e),i=e.material;if(Array.isArray(i)){let r=t.groups;for(let o=0,a=r.length;o<a;o++){let a=r[o],s=i[a.materialIndex];s&&s.visible&&d.push(e,t,s,n,F.z,a)}}else i.visible&&d.push(e,t,i,n,F.z,null)}let i=e.children;for(let o=0,a=i.length;o<a;o++)Ce(i[o],t,n,r)}function Me(e,t,n,r){let i=e.opaque,o=e.transmissive,a=e.transparent;h.setupLightsView(n),o.length>0&&Te(i,t,n),r&&H.viewport(S.copy(r)),i.length>0&&Pe(i,t,n),o.length>0&&Pe(o,t,n),a.length>0&&Pe(a,t,n),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1)}function Te(e,t,n){let r=V.isWebGL2;null===N&&(N=new sr(1,1,{generateMipmaps:!0,type:G.has("EXT_color_buffer_half_float")?Nt:Ot,minFilter:kt,samples:r&&!0===a?4:0})),m.getDrawingBufferSize(B),r?N.setSize(B.x,B.y):N.setSize(Ln(B.x),Ln(B.y));let i=m.getRenderTarget();m.setRenderTarget(N),m.clear();let o=m.toneMapping;m.toneMapping=0,Pe(e,t,n),m.toneMapping=o,Y.updateMultisampleRenderTarget(N),Y.updateRenderTargetMipmap(N),m.setRenderTarget(i)}function Pe(e,t,n){let r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){let o=e[i],a=o.object,s=o.geometry,l=null===r?o.material:r,c=o.group;a.layers.test(n.layers)&&De(a,t,n,s,l,c)}}function De(e,t,n,r,i,o){e.onBeforeRender(m,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(m,t,n,r,e,o),!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,o),i.side=0,i.needsUpdate=!0,m.renderBufferDirect(n,t,r,i,e,o),i.side=2):m.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(m,t,n,r,i,o)}function ke(e,t,n){!0!==t.isScene&&(t=z);let r=q.get(e),i=h.state.lights,o=h.state.shadowsArray,a=i.state.version,s=$.getParameters(e,i.state,o,t,n),l=$.getProgramCacheKey(s),c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Q:X).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",ye),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return Oe(e,s),u}else s.uniforms=$.getUniforms(e),e.onBuild(n,s,m),e.onBeforeCompile(s,m),u=$.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;let d=r.uniforms;(!e.isShaderMaterial&&!e.isRawShaderMaterial||!0===e.clipping)&&(d.clippingPlanes=re.uniform),Oe(e,s),r.needsLights=Le(e),r.lightsStateVersion=a,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotShadowMatrix.value=i.state.spotShadowMatrix,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);let f=u.getUniforms(),p=us.seqWithValue(f.seq,d);return r.currentProgram=u,r.uniformsList=p,u}function Oe(e,t){let n=q.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function Re(e,t,n,r,i){!0!==t.isScene&&(t=z),Y.resetTextureUnits();let o=t.fog,a=r.isMeshStandardMaterial?t.environment:null,s=null===x?m.outputEncoding:!0===x.isXRRenderTarget?x.texture.encoding:gn,l=(r.isMeshStandardMaterial?Q:X).get(r.envMap||a),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,d=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,g=r.toneMapped?m.toneMapping:0,v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==v?v.length:0,S=q.get(r),_=h.state.lights;if(!0===I&&(!0===L||e!==w)){let t=e===w&&r.id===b;re.setState(r,e,t)}let A=!1;r.version===S.__version?(S.needsLights&&S.lightsStateVersion!==_.state.version||S.outputEncoding!==s||i.isInstancedMesh&&!1===S.instancing||!i.isInstancedMesh&&!0===S.instancing||i.isSkinnedMesh&&!1===S.skinning||!i.isSkinnedMesh&&!0===S.skinning||S.envMap!==l||!0===r.fog&&S.fog!==o||void 0!==S.numClippingPlanes&&(S.numClippingPlanes!==re.numPlanes||S.numIntersection!==re.numIntersection)||S.vertexAlphas!==c||S.vertexTangents!==u||S.morphTargets!==d||S.morphNormals!==f||S.morphColors!==p||S.toneMapping!==g||!0===V.isWebGL2&&S.morphTargetsCount!==y)&&(A=!0):(A=!0,S.__version=r.version);let E=S.currentProgram;!0===A&&(E=ke(r,t,i));let T=!1,P=!1,D=!1,k=E.getUniforms(),O=S.uniforms;if(H.useProgram(E.program)&&(T=!0,P=!0,D=!0),r.id!==b&&(b=r.id,P=!0),T||w!==e){if(k.setValue(de,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&k.setValue(de,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,P=!0,D=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){let t=k.map.cameraPosition;void 0!==t&&t.setValue(de,F.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&k.setValue(de,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&k.setValue(de,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){k.setOptional(de,i,"bindMatrix"),k.setOptional(de,i,"bindMatrixInverse");let e=i.skeleton;e&&(V.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),k.setValue(de,"boneTexture",e.boneTexture,Y),k.setValue(de,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let R=n.morphAttributes;return(void 0!==R.position||void 0!==R.normal||void 0!==R.color&&!0===V.isWebGL2)&&ae.update(i,n,r,E),(P||S.receiveShadow!==i.receiveShadow)&&(S.receiveShadow=i.receiveShadow,k.setValue(de,"receiveShadow",i.receiveShadow)),P&&(k.setValue(de,"toneMappingExposure",m.toneMappingExposure),S.needsLights&&Ie(O,D),o&&!0===r.fog&&ee.refreshFogUniforms(O,o),ee.refreshMaterialUniforms(O,r,M,C,N),us.upload(de,S.uniformsList,O,Y)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(us.upload(de,S.uniformsList,O,Y),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&k.setValue(de,"center",i.center),k.setValue(de,"modelViewMatrix",i.modelViewMatrix),k.setValue(de,"normalMatrix",i.normalMatrix),k.setValue(de,"modelMatrix",i.matrixWorld),E}function Ie(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Le(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Ee.setAnimationLoop(Se),typeof self<"u"&&Ee.setContext(self),this.setAnimationLoop=function(e){we=e,pe.setAnimationLoop(e),null===e?Ee.stop():Ee.start()},pe.addEventListener("sessionstart",_e),pe.addEventListener("sessionend",Ae),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===pe.enabled&&!0===pe.isPresenting&&(!0===pe.cameraAutoUpdate&&pe.updateCamera(t),t=pe.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,x),h=ne.get(e,p.length),h.init(),p.push(h),j.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),R.setFromProjectionMatrix(j),L=this.localClippingEnabled,I=re.init(this.clippingPlanes,L,t),d=te.get(e,f.length),d.init(),f.push(d),Ce(e,t,0,m.sortObjects),d.finish(),!0===m.sortObjects&&d.sort(T,P),!0===I&&re.beginShadows();let n=h.state.shadowsArray;if(ie.render(n,e,t),!0===I&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),oe.render(d,e),h.setupLights(m.physicallyCorrectLights),t.isArrayCamera){let n=t.cameras;for(let t=0,r=n.length;t<r;t++){let r=n[t];Me(d,e,r,r.viewport)}}else Me(d,e,t);null!==x&&(Y.updateMultisampleRenderTarget(x),Y.updateRenderTargetMipmap(x)),!0===e.isScene&&e.onAfterRender(m,e,t),ue.resetDefaultState(),b=-1,w=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(e,t,n){q.get(e.texture).__webglTexture=t,q.get(e.depthTexture).__webglTexture=n;let r=q.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===G.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){let n=q.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;x=e,v=t,y=n;let r=!0;if(e){let t=q.get(e);void 0!==t.__useDefaultFramebuffer?(H.bindFramebuffer(36160,null),r=!1):void 0===t.__webglFramebuffer?Y.setupRenderTarget(e):t.__hasExternalTextures&&Y.rebindTextures(e,q.get(e.texture).__webglTexture,q.get(e.depthTexture).__webglTexture)}let i=null,o=!1,a=!1;if(e){let n=e.texture;(n.isData3DTexture||n.isDataArrayTexture)&&(a=!0);let r=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=r[t],o=!0):i=V.isWebGL2&&e.samples>0&&!1===Y.useMultisampledRTT(e)?q.get(e).__webglMultisampledFramebuffer:r,S.copy(e.viewport),_.copy(e.scissor),A=e.scissorTest}else S.copy(D).multiplyScalar(M).floor(),_.copy(k).multiplyScalar(M).floor(),A=O;if(H.bindFramebuffer(36160,i)&&V.drawBuffers&&r&&H.drawBuffers(e,i),H.viewport(S),H.scissor(_),H.setScissorTest(A),o){let r=q.get(e.texture);de.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(a){let r=q.get(e.texture),i=t||0;de.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}b=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){H.bindFramebuffer(36160,s);try{let a=e.texture,s=a.format,l=a.type;if(s!==Bt&&ce.convert(s)!==de.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");let c=l===Nt&&(G.has("EXT_color_buffer_half_float")||V.isWebGL2&&G.has("EXT_color_buffer_float"));if(l!==Ot&&ce.convert(l)!==de.getParameter(35738)&&(l!==Lt||!(V.isWebGL2||G.has("OES_texture_float")||G.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&de.readPixels(t,n,r,i,ce.convert(s),ce.convert(l),o)}finally{let e=null!==x?q.get(x).__webglFramebuffer:null;H.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);Y.setTexture2D(t,0),de.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,o),H.unbindTexture()},this.copyTextureToTexture=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,o=t.image.height,a=ce.convert(n.format),s=ce.convert(n.type);Y.setTexture2D(n,0),de.pixelStorei(37440,n.flipY),de.pixelStorei(37441,n.premultiplyAlpha),de.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?de.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?de.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):de.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&de.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");let o,a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,c=ce.convert(r.format),u=ce.convert(r.type);if(r.isData3DTexture)Y.setTexture3D(r,0),o=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Y.setTexture2DArray(r,0),o=35866}de.pixelStorei(37440,r.flipY),de.pixelStorei(37441,r.premultiplyAlpha),de.pixelStorei(3317,r.unpackAlignment);let d=de.getParameter(3314),h=de.getParameter(32878),f=de.getParameter(3316),p=de.getParameter(3315),g=de.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;de.pixelStorei(3314,v.width),de.pixelStorei(32878,v.height),de.pixelStorei(3316,e.min.x),de.pixelStorei(3315,e.min.y),de.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?de.texSubImage3D(o,i,t.x,t.y,t.z,a,s,l,c,u,v.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),de.compressedTexSubImage3D(o,i,t.x,t.y,t.z,a,s,l,c,v.data)):de.texSubImage3D(o,i,t.x,t.y,t.z,a,s,l,c,u,v),de.pixelStorei(3314,d),de.pixelStorei(32878,h),de.pixelStorei(3316,f),de.pixelStorei(3315,p),de.pixelStorei(32877,g),0===i&&r.generateMipmaps&&de.generateMipmap(o),H.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?Y.setTextureCube(e,0):e.isData3DTexture?Y.setTexture3D(e,0):e.isDataArrayTexture?Y.setTexture2DArray(e,0):Y.setTexture2D(e,0),H.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,H.reset(),ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends rl{}).prototype.isWebGL1Renderer=!0;var il=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new $n(e),this.near=t,this.far=n}clone(){return new il(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},ol=class extends hi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}},al=new ur,sl=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)al.fromBufferAttribute(this,t),al.applyMatrix4(e),this.setXYZ(t,al.x,al.y,al.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)al.fromBufferAttribute(this,t),al.applyNormalMatrix(e),this.setXYZ(t,al.x,al.y,al.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)al.fromBufferAttribute(this,t),al.transformDirection(e),this.setXYZ(t,al.x,al.y,al.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Pi(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new sl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},ll=class extends Pi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},cl=class extends Ei{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new $n(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},ul=new ur,dl=new ur,hl=new Ur,fl=new zr,pl=new Or,ml=class extends hi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cl;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)ul.fromBufferAttribute(t,e-1),dl.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=ul.distanceTo(dl);e.setAttribute("lineDistance",new Oi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),pl.copy(n.boundingSphere),pl.applyMatrix4(r),pl.radius+=i,!1===e.ray.intersectsSphere(pl))return;hl.copy(r).invert(),fl.copy(e.ray).applyMatrix4(hl);let a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new ur,c=new ur,u=new ur,d=new ur,h=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f){for(let n=Math.max(0,o.start),r=Math.min(f.count,o.start+o.count)-1;n<r;n+=h){let r=f.getX(n),i=f.getX(n+1);if(l.fromBufferAttribute(p,r),c.fromBufferAttribute(p,i),fl.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);let o=e.ray.origin.distanceTo(d);o<e.near||o>e.far||t.push({distance:o,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=h){if(l.fromBufferAttribute(p,n),c.fromBufferAttribute(p,n+1),fl.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);let r=e.ray.origin.distanceTo(d);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}},gl=new ur,vl=new ur,yl=class extends ml{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)gl.fromBufferAttribute(t,e),vl.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+gl.distanceTo(vl);e.setAttribute("lineDistance",new Oi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},xl=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t,n=[],r=this.getPoint(0),i=0;n.push(0);for(let o=1;o<=e;o++)t=this.getPoint(o/e),i+=t.distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];let a,s=0,l=o-1;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),a=r[i]-n,a<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,r[i]===n)return i/(o-1);let c=r[i];return(i+(n-c)/(r[i+1]-c))/(o-1)}getTangent(e,t){let n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);let i=this.getPoint(n),o=this.getPoint(r),a=t||(i.isVector2?new jn:new ur);return a.copy(o).sub(i).normalize(),a}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){let n=new ur,r=[],i=[],o=[],a=new ur,s=new Ur;for(let h=0;h<=e;h++){let t=h/e;r[h]=this.getTangentAt(t,new ur)}i[0]=new ur,o[0]=new ur;let l=Number.MAX_VALUE,c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let h=1;h<=e;h++){if(i[h]=i[h-1].clone(),o[h]=o[h-1].clone(),a.crossVectors(r[h-1],r[h]),a.length()>Number.EPSILON){a.normalize();let e=Math.acos(kn(r[h-1].dot(r[h]),-1,1));i[h].applyMatrix4(s.makeRotationAxis(a,e))}o[h].crossVectors(r[h],i[h])}if(!0===t){let t=Math.acos(kn(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},bl=class extends xl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e,t){let n=t||new jn,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0===this.aClockwise&&!o&&(i===r?i=-r:i-=r);let a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=l-this.aY;s=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}};function wl(){let e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){let l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;l*=a,c*=a,i(t,n,l,c)},calc:function(i){let o=i*i;return e+t*i+n*o+r*(o*i)}}}var Sl=new ur,_l=new wl,Al=new wl,El=new wl;function Cl(e,t,n,r,i){let o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Ml(e,t,n,r){return function(e,t){let n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Tl(e,t,n,r,i){return function(e,t){let n=1-e;return n*n*n*t}(e,t)+function(e,t){let n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}var Pl=class extends xl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new jn,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new jn;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return t.set(Tl(e,n.x,r.x,i.x,o.x),Tl(e,n.y,r.y,i.y,o.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Dl=class extends xl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let n=t||new jn;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},kl=class extends xl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ur,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ur;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ur;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Ol=class extends xl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new jn;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn,n=this.v0,r=this.v1,i=this.v2;return t.set(Ml(e,n.x,r.x,i.x),Ml(e,n.y,r.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Rl=class extends xl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn,n=this.points,r=(n.length-1)*e,i=Math.floor(r),o=r-i,a=n[0===i?i:i-1],s=n[i],l=n[i>n.length-2?n.length-1:i+1],c=n[i>n.length-3?n.length-1:i+2];return t.set(Cl(o,a.x,s.x,l.x,c.x),Cl(o,a.y,s.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push((new jn).fromArray(n))}return this}},Il=Object.freeze({__proto__:null,ArcCurve:class extends bl{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends xl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ur,i=this.points,o=i.length,a=(o-(this.closed?0:1))*e,s=Math.floor(a),l=a-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/o)+1)*o:0===l&&s===o-1&&(s=o-2,l=1),this.closed||s>0?t=i[(s-1)%o]:(Sl.subVectors(i[0],i[1]).add(i[0]),t=Sl);let c=i[s%o],u=i[(s+1)%o];if(this.closed||s+2<o?n=i[(s+2)%o]:(Sl.subVectors(i[o-1],i[o-2]).add(i[o-1]),n=Sl),"centripetal"===this.curveType||"chordal"===this.curveType){let e="chordal"===this.curveType?.5:.25,r=Math.pow(t.distanceToSquared(c),e),i=Math.pow(c.distanceToSquared(u),e),o=Math.pow(u.distanceToSquared(n),e);i<1e-4&&(i=1),r<1e-4&&(r=i),o<1e-4&&(o=i),_l.initNonuniformCatmullRom(t.x,c.x,u.x,n.x,r,i,o),Al.initNonuniformCatmullRom(t.y,c.y,u.y,n.y,r,i,o),El.initNonuniformCatmullRom(t.z,c.z,u.z,n.z,r,i,o)}else"catmullrom"===this.curveType&&(_l.initCatmullRom(t.x,c.x,u.x,n.x,this.tension),Al.initCatmullRom(t.y,c.y,u.y,n.y,this.tension),El.initCatmullRom(t.z,c.z,u.z,n.z,this.tension));return r.set(_l.calc(l),Al.calc(l),El.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push((new ur).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:Pl,CubicBezierCurve3:class extends xl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ur,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ur,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ur,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ur;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ur,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return t.set(Tl(e,n.x,r.x,i.x,o.x),Tl(e,n.y,r.y,i.y,o.y),Tl(e,n.z,r.z,i.z,o.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:bl,LineCurve:Dl,LineCurve3:kl,QuadraticBezierCurve:Ol,QuadraticBezierCurve3:class extends xl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ur,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ur,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ur;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ur,n=this.v0,r=this.v1,i=this.v2;return t.set(Ml(e,n.x,r.x,i.x),Ml(e,n.y,r.y,i.y),Ml(e,n.z,r.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:Rl}),Ll=class extends xl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Dl(t,e))}getPoint(e,t){let n=e*this.getLength(),r=this.getCurveLengths(),i=0;for(;i<r.length;){if(r[i]>=n){let e=r[i]-n,o=this.curves[i],a=o.getLength(),s=0===a?0:1-e/a;return o.getPointAt(s,t)}i++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[];for(let r=0,i=this.curves;r<i.length;r++){let o=i[r],a=o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a);for(let t=0;t<s.length;t++){let r=s[t];e&&e.equals(r)||(n.push(r),e=r)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){let n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push((new Il[n.type]).fromJSON(n))}return this}},Nl=class extends Ll{constructor(e){super(),this.type="Path",this.currentPoint=new jn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new Dl(this.currentPoint.clone(),new jn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){let i=new Ol(this.currentPoint.clone(),new jn(e,t),new jn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,o){let a=new Pl(this.currentPoint.clone(),new jn(e,t),new jn(n,r),new jn(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),n=new Rl(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,o){let a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}ellipse(e,t,n,r,i,o,a,s){let l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,o,a,s),this}absellipse(e,t,n,r,i,o,a,s){let l=new bl(e,t,n,r,i,o,a,s);if(this.curves.length>0){let e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);let c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},jl=class extends zi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new jn(0,.5),new jn(.5,0),new jn(0,-.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=kn(r,0,2*Math.PI);let i=[],o=[],a=[],s=[],l=[],c=1/t,u=new ur,d=new jn,h=new ur,f=new ur,p=new ur,m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-m,h.z=0*g,p.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case e.length-1:s.push(p.x,p.y,p.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-m,h.z=0*g,f.copy(h),h.x+=p.x,h.y+=p.y,h.z+=p.z,h.normalize(),s.push(h.x,h.y,h.z),p.copy(f)}for(let v=0;v<=t;v++){let i=n+v*c*r,h=Math.sin(i),f=Math.cos(i);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*h,u.y=e[n].y,u.z=e[n].x*f,o.push(u.x,u.y,u.z),d.x=v/t,d.y=n/(e.length-1),a.push(d.x,d.y);let r=s[3*n+0]*h,i=s[3*n+1],c=s[3*n+0]*f;l.push(r,i,c)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){let n=t+v*e.length,r=n,o=n+e.length,a=n+e.length+1,s=n+1;i.push(r,o,s),i.push(a,s,o)}this.setIndex(i),this.setAttribute("position",new Oi(o,3)),this.setAttribute("uv",new Oi(a,2)),this.setAttribute("normal",new Oi(l,3))}static fromJSON(e){return new jl(e.points,e.segments,e.phiStart,e.phiLength)}},Bl=class extends zi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};let l=this;r=Math.floor(r),i=Math.floor(i);let c=[],u=[],d=[],h=[],f=0,p=[],m=n/2,g=0;function v(n){let i=f,o=new jn,p=new ur,v=0,y=!0===n?e:t,x=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*x,0),d.push(0,x,0),h.push(.5,.5),f++;let b=f;for(let e=0;e<=r;e++){let t=e/r*s+a,n=Math.cos(t),i=Math.sin(t);p.x=y*i,p.y=m*x,p.z=y*n,u.push(p.x,p.y,p.z),d.push(0,x,0),o.x=.5*n+.5,o.y=.5*i*x+.5,h.push(o.x,o.y),f++}for(let e=0;e<r;e++){let t=i+e,r=b+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}(function(){let o=new ur,v=new ur,y=0,x=(t-e)/n;for(let l=0;l<=i;l++){let c=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){let t=e/r,i=t*s+a,l=Math.sin(i),p=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*p,u.push(v.x,v.y,v.z),o.set(l,x,p).normalize(),d.push(o.x,o.y,o.z),h.push(t,1-g),c.push(f++)}p.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){let n=p[t][e],r=p[t+1][e],i=p[t+1][e+1],o=p[t][e+1];c.push(n,r,o),c.push(r,i,o),y+=6}l.addGroup(g,y,0),g+=y})(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Oi(u,3)),this.setAttribute("normal",new Oi(d,3)),this.setAttribute("uv",new Oi(h,2))}static fromJSON(e){return new Bl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Fl=class extends Bl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Fl(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},zl=class extends zi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};let i=[],o=[];function a(e,t,n,r){let i=r+1,o=[];for(let a=0;a<=i;a++){o[a]=[];let r=e.clone().lerp(n,a/i),s=t.clone().lerp(n,a/i),l=i-a;for(let e=0;e<=l;e++)o[a][e]=0===e&&a===i?r:r.clone().lerp(s,e/l)}for(let a=0;a<i;a++)for(let e=0;e<2*(i-a)-1;e++){let t=Math.floor(e/2);e%2===0?(s(o[a][t+1]),s(o[a+1][t]),s(o[a][t])):(s(o[a][t+1]),s(o[a+1][t+1]),s(o[a+1][t]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){let r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}function d(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}(function(e){let n=new ur,r=new ur,i=new ur;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),a(n,r,i,e)})(r),function(e){let t=new ur;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){let e=new ur;for(let t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];let n=u(e)/2/Math.PI+.5,r=d(e)/Math.PI+.5;o.push(n,1-r)}(function(){let e=new ur,t=new ur,n=new ur,r=new ur,a=new jn,s=new jn,l=new jn;for(let d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),a.set(o[h+0],o[h+1]),s.set(o[h+2],o[h+3]),l.set(o[h+4],o[h+5]),r.copy(e).add(t).add(n).divideScalar(3);let f=u(r);c(a,h+0,e,f),c(s,h+2,t,f),c(l,h+4,n,f)}})(),function(){for(let e=0;e<o.length;e+=6){let t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Oi(i,3)),this.setAttribute("normal",new Oi(i.slice(),3)),this.setAttribute("uv",new Oi(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new zl(e.vertices,e.indices,e.radius,e.details)}},Ul=class extends zl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ul(e.radius,e.detail)}},Gl=class extends Nl{constructor(e){super(e),this.uuid=Dn(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){let n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push((new Nl).fromJSON(n))}return this}},Vl=function(e,t){let n,r,i,o,a,s,l,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,u=t&&t.length,d=u?t[0]*c:e.length,h=Hl(e,0,d,c,!0),f=[];if(!h||h.next===h.prev)return f;if(u&&(h=Zl(e,t,h,c)),e.length>80*c){n=i=e[0],r=o=e[1];for(let t=c;t<d;t+=c)a=e[t],s=e[t+1],a<n&&(n=a),s<r&&(r=s),a>i&&(i=a),s>o&&(o=s);l=Math.max(i-n,o-r),l=0!==l?1/l:0}return ql(h,f,c,n,r,l),f};function Hl(e,t,n,r,i){let o,a;if(i===function(e,t,n,r){let i=0;for(let o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=hc(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=hc(o,e[o],e[o+1],a);return a&&ac(a,a.next)&&(fc(a),a=a.next),a}function Wl(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!ac(r,r.next)&&0!==oc(r.prev,r,r.next))r=r.next;else{if(fc(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function ql(e,t,n,r,i,o,a){if(!e)return;!a&&o&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=tc(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ,r);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);let s,l,c=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Xl(e,r,i,o):Yl(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),fc(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?ql(e=Ql(Wl(e),t,n),t,n,r,i,o,2):2===a&&Kl(e,t,n,r,i,o):ql(Wl(e),t,n,r,i,o,1);break}}function Yl(e){let t=e.prev,n=e,r=e.next;if(oc(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(rc(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&oc(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Xl(e,t,n,r){let i=e.prev,o=e,a=e.next;if(oc(i,o,a)>=0)return!1;let s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,d=tc(s,l,t,n,r),h=tc(c,u,t,n,r),f=e.prevZ,p=e.nextZ;for(;f&&f.z>=d&&p&&p.z<=h;){if(f!==e.prev&&f!==e.next&&rc(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&oc(f.prev,f,f.next)>=0||(f=f.prevZ,p!==e.prev&&p!==e.next&&rc(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&oc(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==e.prev&&f!==e.next&&rc(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&oc(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&rc(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&oc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Ql(e,t,n){let r=e;do{let i=r.prev,o=r.next.next;!ac(i,o)&&sc(i,r,r.next,o)&&uc(i,o)&&uc(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),fc(r),fc(r.next),r=e=o),r=r.next}while(r!==e);return Wl(r)}function Kl(e,t,n,r,i,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&ic(a,e)){let s=dc(a,e);return a=Wl(a,a.next),s=Wl(s,s.next),ql(a,t,n,r,i,o),void ql(s,t,n,r,i,o)}e=e.next}a=a.next}while(a!==e)}function Zl(e,t,n,r){let i,o,a,s,l,c=[];for(i=0,o=t.length;i<o;i++)a=t[i]*r,s=i<o-1?t[i+1]*r:e.length,l=Hl(e,a,s,r,!1),l===l.next&&(l.steiner=!0),c.push(nc(l));for(c.sort(Jl),i=0;i<c.length;i++)$l(c[i],n),n=Wl(n,n.next);return n}function Jl(e,t){return e.x-t.x}function $l(e,t){if(t=function(e,t){let n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){let e=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=i&&e>a){if(a=e,e===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n;let s,l=n,c=n.x,u=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&rc(o<u?i:a,o,c,u,o<u?a:i,o,r.x,r.y)&&(s=Math.abs(o-r.y)/(i-r.x),uc(r,e)&&(s<d||s===d&&(r.x>n.x||r.x===n.x&&ec(n,r)))&&(n=r,d=s)),r=r.next}while(r!==l);return n}(e,t),t){let n=dc(t,e);Wl(t,t.next),Wl(n,n.next)}}function ec(e,t){return oc(e.prev,e,t.prev)<0&&oc(t.next,e,e.next)<0}function tc(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function nc(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function rc(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function ic(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&sc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(uc(e,t)&&uc(t,e)&&function(e,t){let n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(oc(e.prev,e,t.prev)||oc(e,t.prev,t))||ac(e,t)&&oc(e.prev,e,e.next)>0&&oc(t.prev,t,t.next)>0)}function oc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function ac(e,t){return e.x===t.x&&e.y===t.y}function sc(e,t,n,r){let i=cc(oc(e,t,n)),o=cc(oc(e,t,r)),a=cc(oc(n,r,e)),s=cc(oc(n,r,t));return!!(i!==o&&a!==s||0===i&&lc(e,n,t)||0===o&&lc(e,r,t)||0===a&&lc(n,e,r)||0===s&&lc(n,t,r))}function lc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function cc(e){return e>0?1:e<0?-1:0}function uc(e,t){return oc(e.prev,e,e.next)<0?oc(e,t,e.next)>=0&&oc(e,e.prev,t)>=0:oc(e,t,e.prev)<0||oc(e,e.next,t)<0}function dc(e,t){let n=new pc(e.i,e.x,e.y),r=new pc(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function hc(e,t,n,r){let i=new pc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function fc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function pc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var mc=class{static area(e){let t=e.length,n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return mc.area(e)<0}static triangulateShape(e,t){let n=[],r=[],i=[];gc(e),vc(n,e);let o=e.length;t.forEach(gc);for(let s=0;s<t.length;s++)r.push(o),o+=t[s].length,vc(n,t[s]);let a=Vl(n,r);for(let s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}};function gc(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function vc(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var yc=class extends zl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yc(e.radius,e.detail)}},xc=class extends zi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let s=Math.min(o+a,Math.PI),l=0,c=[],u=new ur,d=new ur,h=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){let h=[],v=g/n,y=0;0==g&&0==o?y=.5/t:g==n&&s==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){let s=n/t;u.x=-e*Math.cos(r+s*i)*Math.sin(o+v*a),u.y=e*Math.cos(o+v*a),u.z=e*Math.sin(r+s*i)*Math.sin(o+v*a),f.push(u.x,u.y,u.z),d.copy(u).normalize(),p.push(d.x,d.y,d.z),m.push(s+y,1-v),h.push(l++)}c.push(h)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){let t=c[g][e+1],r=c[g][e],i=c[g+1][e],a=c[g+1][e+1];(0!==g||o>0)&&h.push(t,r,a),(g!==n-1||s<Math.PI)&&h.push(r,i,a)}this.setIndex(h),this.setAttribute("position",new Oi(f,3)),this.setAttribute("normal",new Oi(p,3)),this.setAttribute("uv",new Oi(m,2))}static fromJSON(e){return new xc(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},bc=class extends zi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);let a=[],s=[],l=[],c=[],u=new ur,d=new ur,h=new ur,f=new ur,p=new ur,m=new ur,g=new ur;for(let y=0;y<=n;++y){let a=y/n*i*Math.PI*2;v(a,i,o,e,h),v(a+.01,i,o,e,f),m.subVectors(f,h),g.addVectors(f,h),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=r;++e){let i=e/r*Math.PI*2,o=-t*Math.cos(i),a=t*Math.sin(i);u.x=h.x+(o*g.x+a*p.x),u.y=h.y+(o*g.y+a*p.y),u.z=h.z+(o*g.z+a*p.z),s.push(u.x,u.y,u.z),d.subVectors(u,h).normalize(),l.push(d.x,d.y,d.z),c.push(y/n),c.push(e/r)}}for(let y=1;y<=n;y++)for(let e=1;e<=r;e++){let t=(r+1)*(y-1)+(e-1),n=(r+1)*y+(e-1),i=(r+1)*y+e,o=(r+1)*(y-1)+e;a.push(t,n,o),a.push(n,i,o)}function v(e,t,n,r,i){let o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new Oi(s,3)),this.setAttribute("normal",new Oi(l,3)),this.setAttribute("uv",new Oi(c,2))}static fromJSON(e){return new bc(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},wc={arraySlice:function(e,t,n){return wc.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){let t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){let r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){let r=n[o]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)},subclip:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,o=e.clone();o.name=t;let a=[];for(let l=0;l<o.tracks.length;++l){let e=o.tracks[l],t=e.getValueSize(),s=[],c=[];for(let o=0;o<e.times.length;++o){let a=e.times[o]*i;if(!(a<n||a>=r)){s.push(e.times[o]);for(let n=0;n<t;++n)c.push(e.values[o*t+n])}}0!==s.length&&(e.times=wc.convertArray(s,e.times.constructor),e.values=wc.convertArray(c,e.values.constructor),a.push(e))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);let i=n.tracks.length,o=t/r;for(let a=0;a<i;++a){let t=n.tracks[a],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;let i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)continue;let s=0,l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0,u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);let d,h=t.times.length-1;if(o<=t.times[0]){let e=s,n=l-s;d=wc.arraySlice(t.values,e,n)}else if(o>=t.times[h]){let e=h*l+s,n=e+l-s;d=wc.arraySlice(t.values,e,n)}else{let e=t.createInterpolant(),n=s,r=l-s;e.evaluate(o),d=wc.arraySlice(e.resultBuffer,n,r)}"quaternion"===r&&(new cr).fromArray(d).normalize().conjugate().toArray(d);let f=i.times.length;for(let e=0;e<f;++e){let t=e*u+c;if("quaternion"===r)cr.multiplyQuaternionsFlat(i.values,t,d,0,i.values,t);else{let e=u-2*c;for(let n=0;n<e;++n)i.values[t+n]-=d[n]}}}return e.blendMode=2501,e}},Sc=class{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{let a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){let r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let o=0;o!==r;++o)t[o]=n[i+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},_c=class extends Sc{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){let r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}let l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){let i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-d*m+2*d*p-d*f,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*m+(1.5+h)*p+.5*f,x=h*m-h*p;for(let b=0;b!==a;++b)i[b]=g*o[c+b]+v*o[l+b]+y*o[s+b]+x*o[u+b];return i}},Ac=class extends Sc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c;for(let d=0;d!==a;++d)i[d]=o[l+d]*u+o[s+d]*c;return i}},Ec=class extends Sc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}},Cc=class{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wc.convertArray(t,this.TimeBufferType),this.values=wc.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:wc.convertArray(e.times,Array),values:wc.convertArray(e.values,Array)};let n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new Ec(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Ac(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new _c(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case fn:t=this.InterpolantFactoryMethodDiscrete;break;case pn:t=this.InterpolantFactoryMethodLinear;break;case mn:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return fn;case this.InterpolantFactoryMethodLinear:return pn;case this.InterpolantFactoryMethodSmooth:return mn}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){let n=this.times,r=n.length,i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);let e=this.getValueSize();this.times=wc.arraySlice(n,i,o),this.values=wc.arraySlice(this.values,i*e,o*e)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==i;a++){let t=n[a];if("number"==typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,o),e=!1;break}o=t}if(void 0!==r&&wc.isTypedArray(r))for(let a=0,s=r.length;a!==s;++a){let t=r[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){let e=wc.arraySlice(this.times),t=wc.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===mn,i=e.length-1,o=1;for(let a=1;a<i;++a){let i=!1,s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{let e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){let n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];let r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=wc.arraySlice(e,0,o),this.values=wc.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){let e=wc.arraySlice(this.times,0),t=wc.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}};Cc.prototype.TimeBufferType=Float32Array,Cc.prototype.ValueBufferType=Float32Array,Cc.prototype.DefaultInterpolation=pn;var Mc=class extends Cc{};Mc.prototype.ValueTypeName="bool",Mc.prototype.ValueBufferType=Array,Mc.prototype.DefaultInterpolation=fn,Mc.prototype.InterpolantFactoryMethodLinear=void 0,Mc.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends Cc{}).prototype.ValueTypeName="color";(class extends Cc{}).prototype.ValueTypeName="number";var Tc=class extends Sc{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t),l=e*a;for(let c=l+a;l!==c;l+=4)cr.slerpFlat(i,0,o,l-a,o,l,s);return i}},Pc=class extends Cc{InterpolantFactoryMethodLinear(e){return new Tc(this.times,this.values,this.getValueSize(),e)}};Pc.prototype.ValueTypeName="quaternion",Pc.prototype.DefaultInterpolation=pn,Pc.prototype.InterpolantFactoryMethodSmooth=void 0;var Dc=class extends Cc{};Dc.prototype.ValueTypeName="string",Dc.prototype.ValueBufferType=Array,Dc.prototype.DefaultInterpolation=fn,Dc.prototype.InterpolantFactoryMethodLinear=void 0,Dc.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends Cc{}).prototype.ValueTypeName="vector";var kc={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Oc=class{constructor(e,t,n){let r,i=this,o=!1,a=0,s=0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==i.onStart&&i.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,s),a===s&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){let t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){let n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}},Rc=new Oc,Ic=class{constructor(e){this.manager=void 0!==e?e:Rc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Lc={},Nc=class extends Ic{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=kc.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==Lc[e])return void Lc[e].push({onLoad:t,onProgress:n,onError:r});Lc[e]=[],Lc[e].push({onLoad:t,onProgress:n,onError:r});let o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===t.body||void 0===t.body.getReader)return t;let n=Lc[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),o=i?parseInt(i):0,a=0!==o,s=0,l=new ReadableStream({start(e){!function t(){r.read().then((r=>{let{done:i,value:l}=r;if(i)e.close();else{s+=l.byteLength;let r=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let e=0,t=n.length;e<t;e++){let t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(l),t()}}))}()}});return new Response(l)}throw Error('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText))})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{let t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{kc.add(e,t);let n=Lc[e];delete Lc[e];for(let e=0,r=n.length;e<r;e++){let r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{let n=Lc[e];if(void 0===n)throw this.manager.itemError(e),t;delete Lc[e];for(let e=0,r=n.length;e<r;e++){let r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},jc=class extends hi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new $n(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}},Bc=class extends jc{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(hi.DefaultUp),this.updateMatrix(),this.groundColor=new $n(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},Fc=new Ur,zc=new ur,Uc=new ur,Gc=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new jn(512,512),this.map=null,this.mapPass=null,this.matrix=new Ur,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ao,this._frameExtents=new jn(1,1),this._viewportCount=1,this._viewports=[new ar(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;zc.setFromMatrixPosition(e.matrixWorld),t.position.copy(zc),Uc.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Uc),t.updateMatrixWorld(),Fc.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Fc),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){let e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},Vc=class extends Gc{constructor(){super(new fo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,n=2*Pn*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(n!==t.fov||r!==t.aspect||i!==t.far)&&(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Hc=class extends jc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hi.DefaultUp),this.updateMatrix(),this.target=new hi,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.shadow=new Vc}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Wc=new Ur,qc=new ur,Yc=new ur,Xc=class extends Gc{constructor(){super(new fo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new jn(4,2),this._viewportCount=6,this._viewports=[new ar(2,1,1,1),new ar(0,1,1,1),new ar(3,1,1,1),new ar(1,1,1,1),new ar(3,0,1,1),new ar(1,0,1,1)],this._cubeDirections=[new ur(1,0,0),new ur(-1,0,0),new ur(0,0,1),new ur(0,0,-1),new ur(0,1,0),new ur(0,-1,0)],this._cubeUps=[new ur(0,1,0),new ur(0,1,0),new ur(0,1,0),new ur(0,1,0),new ur(0,0,1),new ur(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),qc.setFromMatrixPosition(e.matrixWorld),n.position.copy(qc),Yc.copy(n.position),Yc.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Yc),n.updateMatrixWorld(),r.makeTranslation(-qc.x,-qc.y,-qc.z),Wc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wc)}},Qc=class extends jc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Xc}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},Kc=class extends Gc{constructor(){super(new jo(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Zc=class extends jc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hi.DefaultUp),this.updateMatrix(),this.target=new hi,this.shadow=new Kc}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Jc=class extends zi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){let e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},$c=class extends Ic{constructor(e){super(e)}load(e,t,n,r){let i=this,o=new Nc(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(KR){r?r(KR):console.error(KR),i.manager.itemError(e)}}),n,r)}parse(e){let t={},n={};function r(e,r){if(void 0!==t[r])return t[r];let i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];let r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),a=Un(i.type,o),s=new class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Sn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Dn()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}(a,i.stride);return s.uuid=i.uuid,t[r]=s,s}let i=e.isInstancedBufferGeometry?new Jc:new zi,o=e.data.index;if(void 0!==o){let e=Un(o.type,o.array);i.setIndex(new Pi(e,1))}let a=e.data.attributes;for(let u in a){let t,n=a[u];if(n.isInterleavedBufferAttribute){let i=r(e.data,n.data);t=new sl(i,n.itemSize,n.offset,n.normalized)}else{let e=Un(n.type,n.array);t=new(n.isInstancedBufferAttribute?ll:Pi)(e,n.itemSize,n.normalized)}void 0!==n.name&&(t.name=n.name),void 0!==n.usage&&t.setUsage(n.usage),void 0!==n.updateRange&&(t.updateRange.offset=n.updateRange.offset,t.updateRange.count=n.updateRange.count),i.setAttribute(u,t)}let s=e.data.morphAttributes;if(s)for(let u in s){let t=s[u],n=[];for(let i=0,o=t.length;i<o;i++){let o,a=t[i];if(a.isInterleavedBufferAttribute){let t=r(e.data,a.data);o=new sl(t,a.itemSize,a.offset,a.normalized)}else{let e=Un(a.type,a.array);o=new Pi(e,a.itemSize,a.normalized)}void 0!==a.name&&(o.name=a.name),n.push(o)}i.morphAttributes[u]=n}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);let l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,d=l.length;u!==d;++u){let e=l[u];i.addGroup(e.start,e.count,e.materialIndex)}let c=e.data.boundingSphere;if(void 0!==c){let e=new ur;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new Or(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}};function eu(){return(typeof performance>"u"?Date:performance).now()}var tu="\\[\\]\\.:\\/",nu=new RegExp("["+tu+"]","g"),ru="[^"+tu+"]",iu="[^"+tu.replace("\\.","")+"]",ou=/((?:WC+[\/:])*)/.source.replace("WC",ru),au=/(WCOD+)?/.source.replace("WCOD",iu),su=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ru),lu=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ru),cu=new RegExp("^"+ou+au+su+lu+"$"),uu=["material","materials","bones"],du=class{constructor(e,t,n){this.path=t,this.parsedPath=n||du.parseTrackName(t),this.node=du.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new du.Composite(e,t,n):new du(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(nu,"")}static parseTrackName(e){let t=cu.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){let e=n.nodeName.substring(r+1);-1!==uu.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){let n=function(e){for(let r=0;r<e.length;r++){let i=e[r];if(i.name===t||i.uuid===t)return i;let o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=du.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}let o=e[r];if(void 0===o){let n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};du.Composite=class{constructor(e,t,n){let r=n||du.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},du.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},du.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},du.prototype.GetterByBindingType=[du.prototype._getValue_direct,du.prototype._getValue_array,du.prototype._getValue_arrayElement,du.prototype._getValue_toArray],du.prototype.SetterByBindingTypeAndVersioning=[[du.prototype._setValue_direct,du.prototype._setValue_direct_setNeedsUpdate,du.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[du.prototype._setValue_array,du.prototype._setValue_array_setNeedsUpdate,du.prototype._setValue_array_setMatrixWorldNeedsUpdate],[du.prototype._setValue_arrayElement,du.prototype._setValue_arrayElement_setNeedsUpdate,du.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[du.prototype._setValue_fromArray,du.prototype._setValue_fromArray_setNeedsUpdate,du.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var hu=class{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new hu(void 0===this.value.clone?this.value:this.value.clone())}},fu=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new zr(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Jr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return mu(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(pu),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let r=0,i=e.length;r<i;r++)mu(e[r],this,n,t);return n.sort(pu),n}};function pu(e,t){return e.distance-t.distance}function mu(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){let r=e.children;for(let e=0,i=r.length;e<i;e++)mu(r[e],t,n,!0)}}var gu=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(kn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},vu=new jn,yu=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=vu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return vu.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},xu=new ur,bu=new ur,wu=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ur,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ur;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){xu.subVectors(e,this.start),bu.subVectors(this.end,this.start);let n=bu.dot(bu),r=bu.dot(xu)/n;return t&&(r=kn(r,0,1)),r}closestPointToPoint(e,t,n){let r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},Su=new ur,_u=class extends hi{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;let n=new zi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){let e=o/s*Math.PI*2,t=a/s*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new Oi(r,3));let i=new cl({fog:!1,toneMapped:!1});this.cone=new yl(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Su.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Su),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Au=class extends io{constructor(e,t,n){super(new xc(t,4,2),new Ci({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},Eu=new ur,Cu=new ur,Mu=new ur,Tu=class extends hi{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new zi;r.setAttribute("position",new Oi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let i=new cl({fog:!1,toneMapped:!1});this.lightPlane=new ml(r,i),this.add(this.lightPlane),r=new zi,r.setAttribute("position",new Oi([0,0,0,0,0,1],3)),this.targetLine=new ml(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Eu.setFromMatrixPosition(this.light.matrixWorld),Cu.setFromMatrixPosition(this.light.target.matrixWorld),Mu.subVectors(Cu,Eu),this.lightPlane.lookAt(Cu),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Cu),this.targetLine.scale.z=Mu.length()}},Pu=new ur,Du=new ho,ku=class extends yl{constructor(e){let t=new zi,n=new cl({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={};function a(e,t){s(e),s(t)}function s(e){r.push(0,0,0),i.push(0,0,0),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new Oi(r,3)),t.setAttribute("color",new Oi(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();let l=new $n(16755200),c=new $n(16711680),u=new $n(43775),d=new $n(16777215),h=new $n(3355443);this.setColors(l,c,u,d,h)}setColors(e,t,n,r,i){let o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,i.r,i.g,i.b),o.setXYZ(41,i.r,i.g,i.b),o.setXYZ(42,i.r,i.g,i.b),o.setXYZ(43,i.r,i.g,i.b),o.setXYZ(44,i.r,i.g,i.b),o.setXYZ(45,i.r,i.g,i.b),o.setXYZ(46,i.r,i.g,i.b),o.setXYZ(47,i.r,i.g,i.b),o.setXYZ(48,i.r,i.g,i.b),o.setXYZ(49,i.r,i.g,i.b),o.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap;Du.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ou("c",t,e,Du,0,0,-1),Ou("t",t,e,Du,0,0,1),Ou("n1",t,e,Du,-1,-1,-1),Ou("n2",t,e,Du,1,-1,-1),Ou("n3",t,e,Du,-1,1,-1),Ou("n4",t,e,Du,1,1,-1),Ou("f1",t,e,Du,-1,-1,1),Ou("f2",t,e,Du,1,-1,1),Ou("f3",t,e,Du,-1,1,1),Ou("f4",t,e,Du,1,1,1),Ou("u1",t,e,Du,.7,1.1,-1),Ou("u2",t,e,Du,-.7,1.1,-1),Ou("u3",t,e,Du,0,2,-1),Ou("cf1",t,e,Du,-1,0,1),Ou("cf2",t,e,Du,1,0,1),Ou("cf3",t,e,Du,0,-1,1),Ou("cf4",t,e,Du,0,1,1),Ou("cn1",t,e,Du,-1,0,-1),Ou("cn2",t,e,Du,1,0,-1),Ou("cn3",t,e,Du,0,-1,-1),Ou("cn4",t,e,Du,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Ou(e,t,n,r,i,o,a){Pu.set(i,o,a).unproject(r);let s=t[e];if(void 0!==s){let e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],Pu.x,Pu.y,Pu.z)}}var Ru=class extends yl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960,n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new zi;r.setIndex(new Pi(n,1)),r.setAttribute("position",new Oi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new cl({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}},Iu=class extends yl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new zi;n.setAttribute("position",new Oi(t,3)),n.setAttribute("color",new Oi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new cl({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){let r=new $n,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},{floatView:Lu,uint32View:Nu,baseTable:ju,shiftTable:Bu,mantissaTable:Fu,exponentTable:zu,offsetTable:Uu}=function(){let e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){let e=l-127;e<-27?(r[l]=0,r[256|l]=32768,i[l]=24,i[256|l]=24):e<-14?(r[l]=1024>>-e-14,r[256|l]=1024>>-e-14|32768,i[l]=-e-1,i[256|l]=-e-1):e<=15?(r[l]=e+15<<10,r[256|l]=e+15<<10|32768,i[l]=13,i[256|l]=13):e<128?(r[l]=31744,r[256|l]=64512,i[l]=24,i[256|l]=24):(r[l]=31744,r[256|l]=64512,i[l]=13,i[256|l]=13)}let o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,o[l]=e|t}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(s[l]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:a,offsetTable:s}}();var Gu=class extends sr{constructor(e,t,n){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,n),this.samples=4}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:vt}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=vt);var Vu=".",Hu=Symbol("target"),Wu=Symbol("unsubscribe");function qu(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function Yu(e){return("object"==typeof e?null===e:"function"!=typeof e)||e instanceof RegExp}var Xu=Array.isArray;function Qu(e){return"symbol"==typeof e}var Ku={after:(e,t)=>Xu(e)?e.slice(t.length):""===t?e:e.slice(t.length+1),concat:(e,t)=>Xu(e)?(e=[...e],t&&e.push(t),e):t&&void 0!==t.toString?(""!==e&&(e+=Vu),Qu(t)?e+t.toString():e+t):e,initial:e=>{if(Xu(e))return e.slice(0,-1);if(""===e)return e;let t=e.lastIndexOf(Vu);return-1===t?"":e.slice(0,t)},last:e=>{if(Xu(e))return e[e.length-1]||"";if(""===e)return e;let t=e.lastIndexOf(Vu);return-1===t?e:e.slice(t+1)},walk:(e,t)=>{if(Xu(e))for(let n of e)t(n);else if(""!==e){let n=0,r=e.indexOf(Vu);if(-1===r)t(e);else for(;n<e.length;)-1===r&&(r=e.length),t(e.slice(n,r)),n=r+1,r=e.indexOf(Vu,n)}},get(e,t){return this.walk(t,(t=>{e&&(e=e[t])})),e}},Zu=Ku;function Ju(e){return"object"==typeof e&&"function"==typeof e.next}function $u(e,t,n,r,i){let o=e.next;if("entries"===t.name)e.next=function(){let e=o.call(this);return!1===e.done&&(e.value[0]=i(e.value[0],t,e.value[0],r),e.value[1]=i(e.value[1],t,e.value[0],r)),e};else if("values"===t.name){let a=n[Hu].keys();e.next=function(){let e=o.call(this);return!1===e.done&&(e.value=i(e.value,t,a.next().value,r)),e}}else e.next=function(){let e=o.call(this);return!1===e.done&&(e.value=i(e.value,t,e.value,r)),e};return e}function ed(e,t,n){return e.isUnsubscribed||t.ignoreSymbols&&Qu(n)||t.ignoreUnderscores&&"_"===n.charAt(0)||"ignoreKeys"in t&&t.ignoreKeys.includes(n)}var td=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return void 0===this._descriptorCache&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let n=this._getProperties(e),r=n[t];return void 0===r&&(r=Reflect.getOwnPropertyDescriptor(e,t),n[t]=r),r}getProxy(e,t,n,r){if(this.isUnsubscribed)return e;let i=e[r],o=i||e;this._pathCache.set(o,t);let a=this._proxyCache.get(o);return void 0===a&&(a=void 0===i?new Proxy(e,n):e,this._proxyCache.set(o,a)),a}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,Zu.get(t,this.getPath(e)))}defineProperty(e,t,n){return!!Reflect.defineProperty(e,t,n)&&(this.isUnsubscribed||(this._getProperties(e)[t]=n),!0)}setProperty(e,t,n,r,i){if(!this._equals(i,n)||!(t in e)){let i=this._getOwnPropertyDescriptor(e,t);return void 0!==i&&"set"in i?Reflect.set(e,t,n,r):Reflect.set(e,t,n)}return!0}deleteProperty(e,t,n){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let r=this._getDescriptorCache().get(e);r&&(delete r[t],this._pathCache.delete(n))}return!0}return!1}isSameDescriptor(e,t,n){let r=this._getOwnPropertyDescriptor(t,n);return void 0!==e&&void 0!==r&&Object.is(e.value,r.value)&&(e.writable||!1)===(r.writable||!1)&&(e.enumerable||!1)===(r.enumerable||!1)&&(e.configurable||!1)===(r.configurable||!1)&&e.get===r.get&&e.set===r.set}isGetInvariant(e,t){let n=this._getOwnPropertyDescriptor(e,t);return void 0!==n&&!0!==n.configurable&&!0!==n.writable}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function nd(e){return"[object Object]"===toString.call(e)}function rd(){return!0}function id(e,t){return e.length!==t.length||e.some(((e,n)=>t[n]!==e))}var od=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),ad=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),sd={push:rd,pop:rd,shift:rd,unshift:rd,copyWithin:id,reverse:id,sort:id,splice:id,flat:id,fill:id},ld=new Set([...od,...ad,...Object.keys(sd)]);function cd(e,t){if(e.size!==t.size)return!0;for(let n of e)if(!t.has(n))return!0;return!1}var ud=["keys","values","entries"],dd=new Set(["has","toString"]),hd={add:cd,clear:cd,delete:cd,forEach:cd},fd=new Set([...dd,...Object.keys(hd),...ud]);function pd(e,t){if(e.size!==t.size)return!0;let n;for(let[r,i]of e)if(n=t.get(r),n!==i||void 0===n&&!t.has(r))return!0;return!1}var md=new Set([...dd,"get"]),gd={set:pd,clear:pd,delete:pd,forEach:pd},vd=new Set([...md,...Object.keys(gd),...ud]),yd=class{constructor(e,t,n,r){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=r,this._changes=r?[]:null,this.clone=void 0===t?e:this._shallowClone(e)}static isHandledMethod(e){return od.has(e)}_shallowClone(e){let t=e;if(nd(e))t={...e};else if(Xu(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map((e=>this._shallowClone(e))));else if(e instanceof Map){t=new Map;for(let[n,r]of e.entries())t.set(n,this._shallowClone(r))}return this._clonedCache.add(t),t}preferredThisArg(e,t,n,r){return e?(Xu(r)?this._onIsChanged=sd[t]:r instanceof Set?this._onIsChanged=hd[t]:r instanceof Map&&(this._onIsChanged=gd[t]),r):n}update(e,t,n){let r=Zu.after(e,this._path);if("length"!==t){let e=this.clone;Zu.walk(r,(t=>{e&&e[t]&&(this._clonedCache.has(e[t])||(e[t]=this._shallowClone(e[t])),e=e[t])})),this._hasOnValidate&&this._changes.push({path:r,property:t,previous:n}),e&&e[t]&&(e[t]=n)}this._isChanged=!0}undo(e){let t;for(let n=this._changes.length-1;-1!==n;n--)t=this._changes[n],Zu.get(e,t.path)[t.property]=t.previous}isChanged(e){return void 0===this._onIsChanged?this._isChanged:this._onIsChanged(this.clone,e)}},xd=class extends yd{static isHandledMethod(e){return ld.has(e)}},bd=class extends yd{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},wd=class extends yd{static isHandledMethod(e){return fd.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},Sd=class extends yd{static isHandledMethod(e){return vd.has(e)}undo(e){for(let[t,n]of this.clone.entries())e.set(t,n);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},_d=class extends yd{constructor(e,t,n,r){super(void 0,t,n,r),this._arg1=n[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},Ad=class extends yd{constructor(e,t,n,r){super(void 0,t,n,r),this._weakKey=n[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},Ed=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return nd(e)||Xu(e)||qu(e)}static isHandledMethod(e,t){return nd(e)?yd.isHandledMethod(t):Xu(e)?xd.isHandledMethod(t):e instanceof Set?wd.isHandledMethod(t):e instanceof Map?Sd.isHandledMethod(t):qu(e)}get isCloning(){return this._stack.length>0}start(e,t,n){let r=yd;Xu(e)?r=xd:e instanceof Date?r=bd:e instanceof Set?r=wd:e instanceof Map?r=Sd:e instanceof WeakSet?r=_d:e instanceof WeakMap&&(r=Ad),this._stack.push(new r(e,t,n,this._hasOnValidate))}update(e,t,n){this._stack[this._stack.length-1].update(e,t,n)}preferredThisArg(e,t,n){let{name:r}=e,i=Ed.isHandledMethod(n,r);return this._stack[this._stack.length-1].preferredThisArg(i,r,t,n)}isChanged(e,t,n){return this._stack[this._stack.length-1].isChanged(e,t,n)}undo(e){void 0!==this._previousClone&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},Cd={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},Md=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n={...Cd,...n};let r=Symbol("ProxyTarget"),{equals:i,isShallow:o,ignoreDetached:a,details:s}=n,l=new td(i),c="function"==typeof n.onValidate,u=new Ed(c),d=(e,t,r,i,o)=>!c||u.isCloning||!0===n.onValidate(Zu.concat(l.getPath(e),t),r,i,o),h=(t,r,i,o)=>{!ed(l,n,r)&&(!a||!l.isDetached(t,e))&&f(l.getPath(t),r,i,o)},f=(e,n,r,i,o)=>{u.isCloning?u.update(e,n,i):t(Zu.concat(e,n),r,i,o)},p=e=>e&&(e[r]||e),m=(t,i,s,c)=>Yu(t)||"constructor"===s||o&&!Ed.isHandledMethod(i,s)||ed(l,n,s)||l.isGetInvariant(i,s)||a&&l.isDetached(i,e)?t:(void 0===c&&(c=l.getPath(i)),l.getProxy(t,Zu.concat(c,s),g,r)),g={get(e,t,n){if(Qu(t)){if(t===r||t===Hu)return e;if(t===Wu&&!l.isUnsubscribed&&0===l.getPath(e).length)return l.unsubscribe(),e}let i=qu(e)?Reflect.get(e,t):Reflect.get(e,t,n);return m(i,e,t)},set(e,t,n,o){n=p(n);let a=e[r]||e,s=a[t];if(i(s,n)&&t in e)return!0;let c=d(e,t,n,s);return c&&l.setProperty(a,t,n,o,s)?(h(e,t,e[t],s),!0):!c},defineProperty(e,t,n){if(!l.isSameDescriptor(n,e,t)){let r=e[t];d(e,t,n.value,r)&&l.defineProperty(e,t,n,r)&&h(e,t,n.value,r)}return!0},deleteProperty(e,t){if(!Reflect.has(e,t))return!0;let n=Reflect.get(e,t),r=d(e,t,void 0,n);return r&&l.deleteProperty(e,t,n)?(h(e,t,void 0,n),!0):!r},apply(t,n,o){let a=n[r]||n;if(l.isUnsubscribed)return Reflect.apply(t,a,o);if((!1===s||!0!==s&&!s.includes(t.name))&&Ed.isHandledType(a)){let r=Zu.initial(l.getPath(t)),s=Ed.isHandledMethod(a,t.name);u.start(a,r,o);let c=Reflect.apply(t,u.preferredThisArg(t,n,a),s?o.map((e=>p(e))):o),h=u.isChanged(a,i),v=u.stop();if(Ed.isHandledType(c)&&s&&(n instanceof Map&&"get"===t.name&&(r=Zu.concat(r,o[0])),c=l.getProxy(c,r,g)),h){let n={name:t.name,args:o,result:c},i=u.isCloning?Zu.initial(r):r,s=u.isCloning?Zu.last(r):"";d(Zu.get(e,i),s,a,v,n)?f(i,s,a,v,n):u.undo(a)}return(n instanceof Map||n instanceof Set)&&Ju(c)?$u(c,t,n,r,m):c}return Reflect.apply(t,n,o)}},v=l.getProxy(e,n.pathAsArray?[]:"",g);return t=t.bind(v),c&&(n.onValidate=n.onValidate.bind(v)),v};Md.target=e=>e&&e[Hu]||e,Md.unsubscribe=e=>e[Wu]||e;var Td=Md,Pd="object"==typeof global&&global&&global.Object===Object&&global,Dd="object"==typeof self&&self&&self.Object===Object&&self,kd=Pd||Dd||Function("return this")(),Od=kd.Symbol,Rd=Object.prototype,Id=Rd.hasOwnProperty,Ld=Rd.toString,Nd=Od?Od.toStringTag:void 0;var jd=function(e){var t=Id.call(e,Nd),n=e[Nd];try{e[Nd]=void 0;var r=!0}catch{}var i=Ld.call(e);return r&&(t?e[Nd]=n:delete e[Nd]),i},Bd=Object.prototype.toString;var Fd=function(e){return Bd.call(e)},zd=Od?Od.toStringTag:void 0;var Ud=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":zd&&zd in Object(e)?jd(e):Fd(e)};var Gd=function(e){return null!=e&&"object"==typeof e};var Vd=function(e){return"symbol"==typeof e||Gd(e)&&"[object Symbol]"==Ud(e)};var Hd=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},Wd=Array.isArray,qd=Od?Od.prototype:void 0,Yd=qd?qd.toString:void 0;var Xd=function e(t){if("string"==typeof t)return t;if(Wd(t))return Hd(t,e)+"";if(Vd(t))return Yd?Yd.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n},Qd=/\s/;var Kd=function(e){for(var t=e.length;t--&&Qd.test(e.charAt(t)););return t},Zd=/^\s+/;var Jd=function(e){return e&&e.slice(0,Kd(e)+1).replace(Zd,"")};var $d=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},eh=/^[-+]0x[0-9a-f]+$/i,th=/^0b[01]+$/i,nh=/^0o[0-7]+$/i,rh=parseInt;var ih=function(e){if("number"==typeof e)return e;if(Vd(e))return NaN;if($d(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=$d(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jd(e);var n=th.test(e);return n||nh.test(e)?rh(e.slice(2),n?2:8):eh.test(e)?NaN:+e};var oh=function(e){return e};var ah=function(e){if(!$d(e))return!1;var t=Ud(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},sh=kd["__core-js_shared__"],lh=function(){var e=/[^.]+$/.exec(sh&&sh.keys&&sh.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var ch=function(e){return!!lh&&lh in e},uh=Function.prototype.toString;var dh=function(e){if(null!=e){try{return uh.call(e)}catch{}try{return e+""}catch{}}return""},hh=/^\[object .+?Constructor\]$/,fh=Function.prototype,ph=Object.prototype,mh=fh.toString,gh=ph.hasOwnProperty,vh=RegExp("^"+mh.call(gh).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var yh=function(e){return!(!$d(e)||ch(e))&&(ah(e)?vh:hh).test(dh(e))};var xh=function(e,t){return null===e||void 0===e?void 0:e[t]};var bh=function(e,t){var n=xh(e,t);return yh(n)?n:void 0},wh=bh(kd,"WeakMap"),Sh=Object.create,_h=function(){function e(){}return function(t){if(!$d(t))return{};if(Sh)return Sh(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Ah=_h;var Eh=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var Ch=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Mh=Date.now;var Th=function(e){var t=0,n=0;return function(){var r=Mh(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}};var Ph=function(e){return function(){return e}},Dh=function(){try{var e=bh(Object,"defineProperty");return e({},"",{}),e}catch{}}(),kh=Dh,Oh=kh?function(e,t){return kh(e,"toString",{configurable:!0,enumerable:!1,value:Ph(t),writable:!0})}:oh,Rh=Th(Oh);var Ih=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},Lh=/^(?:0|[1-9]\d*)$/;var Nh=function(e,t){var n,r=typeof e;return!!(t=null!==(n=t)&&void 0!==n?n:9007199254740991)&&("number"==r||"symbol"!=r&&Lh.test(e))&&e>-1&&e%1==0&&e<t};var jh=function(e,t,n){"__proto__"==t&&kh?kh(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var Bh=function(e,t){return e===t||e!==e&&t!==t},Fh=Object.prototype.hasOwnProperty;var zh=function(e,t,n){var r=e[t];(!Fh.call(e,t)||!Bh(r,n)||void 0===n&&!(t in e))&&jh(e,t,n)};var Uh=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?jh(n,s,l):zh(n,s,l)}return n},Gh=Math.max;var Vh=function(e,t,n){return t=Gh(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Gh(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),Eh(e,this,s)}};var Hh=function(e,t){return Rh(Vh(e,t,oh),e+"")};var Wh=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var qh=function(e){return null!=e&&Wh(e.length)&&!ah(e)};var Yh=function(e,t,n){if(!$d(n))return!1;var r=typeof t;return!!("number"==r?qh(n)&&Nh(t,n.length):"string"==r&&t in n)&&Bh(n[t],e)};var Xh=function(e){return Hh((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&Yh(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))},Qh=Object.prototype;var Kh=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Qh)};var Zh=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var Jh=function(e){return Gd(e)&&"[object Arguments]"==Ud(e)},$h=Object.prototype,ef=$h.hasOwnProperty,tf=$h.propertyIsEnumerable,nf=Jh(function(){return arguments}())?Jh:function(e){return Gd(e)&&ef.call(e,"callee")&&!tf.call(e,"callee")},rf=nf;var of=function(){return!1},af="object"==typeof exports&&exports&&!exports.nodeType&&exports,sf=af&&"object"==typeof module&&module&&!module.nodeType&&module,lf=sf&&sf.exports===af?kd.Buffer:void 0,cf=(lf?lf.isBuffer:void 0)||of,uf={};uf["[object Float32Array]"]=uf["[object Float64Array]"]=uf["[object Int8Array]"]=uf["[object Int16Array]"]=uf["[object Int32Array]"]=uf["[object Uint8Array]"]=uf["[object Uint8ClampedArray]"]=uf["[object Uint16Array]"]=uf["[object Uint32Array]"]=!0,uf["[object Arguments]"]=uf["[object Array]"]=uf["[object ArrayBuffer]"]=uf["[object Boolean]"]=uf["[object DataView]"]=uf["[object Date]"]=uf["[object Error]"]=uf["[object Function]"]=uf["[object Map]"]=uf["[object Number]"]=uf["[object Object]"]=uf["[object RegExp]"]=uf["[object Set]"]=uf["[object String]"]=uf["[object WeakMap]"]=!1;var df=function(e){return Gd(e)&&Wh(e.length)&&!!uf[Ud(e)]};var hf=function(e){return function(t){return e(t)}},ff="object"==typeof exports&&exports&&!exports.nodeType&&exports,pf=ff&&"object"==typeof module&&module&&!module.nodeType&&module,mf=pf&&pf.exports===ff&&Pd.process,gf=function(){try{return pf&&pf.require&&pf.require("util").types||mf&&mf.binding&&mf.binding("util")}catch{}}(),vf=gf&&gf.isTypedArray,yf=vf?hf(vf):df,xf=Object.prototype.hasOwnProperty;var bf=function(e,t){var n=Wd(e),r=!n&&rf(e),i=!n&&!r&&cf(e),o=!n&&!r&&!i&&yf(e),a=n||r||i||o,s=a?Zh(e.length,String):[],l=s.length;for(var c in e)(t||xf.call(e,c))&&(!a||!("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Nh(c,l)))&&s.push(c);return s};var wf=function(e,t){return function(n){return e(t(n))}},Sf=wf(Object.keys,Object),_f=Object.prototype.hasOwnProperty;var Af=function(e){if(!Kh(e))return Sf(e);var t=[];for(var n in Object(e))_f.call(e,n)&&"constructor"!=n&&t.push(n);return t};var Ef=function(e){return qh(e)?bf(e):Af(e)};var Cf=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},Mf=Object.prototype.hasOwnProperty;var Tf=function(e){if(!$d(e))return Cf(e);var t=Kh(e),n=[];for(var r in e)"constructor"==r&&(t||!Mf.call(e,r))||n.push(r);return n};var Pf=function(e){return qh(e)?bf(e,!0):Tf(e)},Df=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kf=/^\w*$/;var Of=function(e,t){if(Wd(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Vd(e))||(kf.test(e)||!Df.test(e)||null!=t&&e in Object(t))},Rf=bh(Object,"create");var If=function(){this.__data__=Rf?Rf(null):{},this.size=0};var Lf=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Nf=Object.prototype.hasOwnProperty;var jf=function(e){var t=this.__data__;if(Rf){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Nf.call(t,e)?t[e]:void 0},Bf=Object.prototype.hasOwnProperty;var Ff=function(e){var t=this.__data__;return Rf?void 0!==t[e]:Bf.call(t,e)};var zf=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Rf&&void 0===t?"__lodash_hash_undefined__":t,this};function Uf(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Uf.prototype.clear=If,Uf.prototype.delete=Lf,Uf.prototype.get=jf,Uf.prototype.has=Ff,Uf.prototype.set=zf;var Gf=Uf;var Vf=function(){this.__data__=[],this.size=0};var Hf=function(e,t){for(var n=e.length;n--;)if(Bh(e[n][0],t))return n;return-1},Wf=Array.prototype.splice;var qf=function(e){var t=this.__data__,n=Hf(t,e);return!(n<0)&&(n==t.length-1?t.pop():Wf.call(t,n,1),--this.size,!0)};var Yf=function(e){var t=this.__data__,n=Hf(t,e);return n<0?void 0:t[n][1]};var Xf=function(e){return Hf(this.__data__,e)>-1};var Qf=function(e,t){var n=this.__data__,r=Hf(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Kf(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Kf.prototype.clear=Vf,Kf.prototype.delete=qf,Kf.prototype.get=Yf,Kf.prototype.has=Xf,Kf.prototype.set=Qf;var Zf=Kf,Jf=bh(kd,"Map");var $f=function(){this.size=0,this.__data__={hash:new Gf,map:new(Jf||Zf),string:new Gf}};var ep=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var tp=function(e,t){var n=e.__data__;return ep(t)?n["string"==typeof t?"string":"hash"]:n.map};var np=function(e){var t=tp(this,e).delete(e);return this.size-=t?1:0,t};var rp=function(e){return tp(this,e).get(e)};var ip=function(e){return tp(this,e).has(e)};var op=function(e,t){var n=tp(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function ap(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ap.prototype.clear=$f,ap.prototype.delete=np,ap.prototype.get=rp,ap.prototype.has=ip,ap.prototype.set=op;var sp=ap;function lp(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(lp.Cache||sp),n}lp.Cache=sp;var cp=lp;var up=function(e){var t=cp(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t},dp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hp=/\\(\\)?/g,fp=up((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(dp,(function(e,n,r,i){t.push(r?i.replace(hp,"$1"):n||e)})),t})),pp=fp;var mp=function(e){return null==e?"":Xd(e)};var gp=function(e,t){return Wd(e)?e:Of(e,t)?[e]:pp(mp(e))};var vp=function(e){if("string"==typeof e||Vd(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var yp=function(e,t){for(var n=0,r=(t=gp(t,e)).length;null!=e&&n<r;)e=e[vp(t[n++])];return n&&n==r?e:void 0};var xp=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},bp=Od?Od.isConcatSpreadable:void 0;var wp=function(e){return Wd(e)||rf(e)||!!(bp&&e&&e[bp])};var Sp=function e(t,n,r,i,o){var a=-1,s=t.length;for(r||(r=wp),o||(o=[]);++a<s;){var l=t[a];n>0&&r(l)?n>1?e(l,n-1,r,i,o):xp(o,l):i||(o[o.length]=l)}return o};var _p=function(e){return(null==e?0:e.length)?Sp(e,1):[]};var Ap=function(e){return Rh(Vh(e,void 0,_p),e+"")},Ep=wf(Object.getPrototypeOf,Object),Cp=Function.prototype,Mp=Object.prototype,Tp=Cp.toString,Pp=Mp.hasOwnProperty,Dp=Tp.call(Object);var kp=function(e){if(!Gd(e)||"[object Object]"!=Ud(e))return!1;var t=Ep(e);if(null===t)return!0;var n=Pp.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Tp.call(n)==Dp};var Op=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};var Rp=function(){this.__data__=new Zf,this.size=0};var Ip=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var Lp=function(e){return this.__data__.get(e)};var Np=function(e){return this.__data__.has(e)};var jp=function(e,t){var n=this.__data__;if(n instanceof Zf){var r=n.__data__;if(!Jf||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new sp(r)}return n.set(e,t),this.size=n.size,this};function Bp(e){var t=this.__data__=new Zf(e);this.size=t.size}Bp.prototype.clear=Rp,Bp.prototype.delete=Ip,Bp.prototype.get=Lp,Bp.prototype.has=Np,Bp.prototype.set=jp;var Fp=Bp;var zp=function(e,t){return e&&Uh(t,Ef(t),e)};var Up=function(e,t){return e&&Uh(t,Pf(t),e)},Gp="object"==typeof exports&&exports&&!exports.nodeType&&exports,Vp=Gp&&"object"==typeof module&&module&&!module.nodeType&&module,Hp=Vp&&Vp.exports===Gp?kd.Buffer:void 0,Wp=Hp?Hp.allocUnsafe:void 0;var qp=function(e,t){if(t)return e.slice();var n=e.length,r=Wp?Wp(n):new e.constructor(n);return e.copy(r),r};var Yp=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o};var Xp=function(){return[]},Qp=Object.prototype.propertyIsEnumerable,Kp=Object.getOwnPropertySymbols,Zp=Kp?function(e){return null==e?[]:(e=Object(e),Yp(Kp(e),(function(t){return Qp.call(e,t)})))}:Xp,Jp=Zp;var $p=function(e,t){return Uh(e,Jp(e),t)},em=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)xp(t,Jp(e)),e=Ep(e);return t}:Xp,tm=em;var nm=function(e,t){return Uh(e,tm(e),t)};var rm=function(e,t,n){var r=t(e);return Wd(e)?r:xp(r,n(e))};var im=function(e){return rm(e,Ef,Jp)};var om=function(e){return rm(e,Pf,tm)},am=bh(kd,"DataView"),sm=bh(kd,"Promise"),lm=bh(kd,"Set"),cm="[object Map]",um="[object Promise]",dm="[object Set]",hm="[object WeakMap]",fm="[object DataView]",pm=dh(am),mm=dh(Jf),gm=dh(sm),vm=dh(lm),ym=dh(wh),xm=Ud;(am&&xm(new am(new ArrayBuffer(1)))!=fm||Jf&&xm(new Jf)!=cm||sm&&xm(sm.resolve())!=um||lm&&xm(new lm)!=dm||wh&&xm(new wh)!=hm)&&(xm=function(e){var t=Ud(e),n="[object Object]"==t?e.constructor:void 0,r=n?dh(n):"";if(r)switch(r){case pm:return fm;case mm:return cm;case gm:return um;case vm:return dm;case ym:return hm}return t});var bm=xm,wm=Object.prototype.hasOwnProperty;var Sm=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&wm.call(e,"index")&&(n.index=e.index,n.input=e.input),n},_m=kd.Uint8Array;var Am=function(e){var t=new e.constructor(e.byteLength);return new _m(t).set(new _m(e)),t};var Em=function(e,t){var n=t?Am(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Cm=/\w*$/;var Mm=function(e){var t=new e.constructor(e.source,Cm.exec(e));return t.lastIndex=e.lastIndex,t},Tm=Od?Od.prototype:void 0,Pm=Tm?Tm.valueOf:void 0;var Dm=function(e){return Pm?Object(Pm.call(e)):{}};var km=function(e,t){var n=t?Am(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var Om=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Am(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Em(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return km(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Mm(e);case"[object Symbol]":return Dm(e)}};var Rm=function(e){return"function"!=typeof e.constructor||Kh(e)?{}:Ah(Ep(e))};var Im=function(e){return Gd(e)&&"[object Map]"==bm(e)},Lm=gf&&gf.isMap,Nm=Lm?hf(Lm):Im;var jm=function(e){return Gd(e)&&"[object Set]"==bm(e)},Bm=gf&&gf.isSet,Fm=Bm?hf(Bm):jm,zm="[object Arguments]",Um="[object Function]",Gm="[object Object]",Vm={};Vm[zm]=Vm["[object Array]"]=Vm["[object ArrayBuffer]"]=Vm["[object DataView]"]=Vm["[object Boolean]"]=Vm["[object Date]"]=Vm["[object Float32Array]"]=Vm["[object Float64Array]"]=Vm["[object Int8Array]"]=Vm["[object Int16Array]"]=Vm["[object Int32Array]"]=Vm["[object Map]"]=Vm["[object Number]"]=Vm[Gm]=Vm["[object RegExp]"]=Vm["[object Set]"]=Vm["[object String]"]=Vm["[object Symbol]"]=Vm["[object Uint8Array]"]=Vm["[object Uint8ClampedArray]"]=Vm["[object Uint16Array]"]=Vm["[object Uint32Array]"]=!0,Vm["[object Error]"]=Vm[Um]=Vm["[object WeakMap]"]=!1;var Hm=function e(t,n,r,i,o,a){var s,l=1&n,c=2&n,u=4&n;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!$d(t))return t;var d=Wd(t);if(d){if(s=Sm(t),!l)return Ch(t,s)}else{var h=bm(t),f=h==Um||"[object GeneratorFunction]"==h;if(cf(t))return qp(t,l);if(h==Gm||h==zm||f&&!o){if(s=c||f?{}:Rm(t),!l)return c?nm(t,Up(s,t)):$p(t,zp(s,t))}else{if(!Vm[h])return o?t:{};s=Om(t,h,l)}}a||(a=new Fp);var p=a.get(t);if(p)return p;a.set(t,s),Fm(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,a))})):Nm(t)&&t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))}));var m=d?void 0:(u?c?om:im:c?Pf:Ef)(t);return Ih(m||t,(function(i,o){m&&(i=t[o=i]),zh(s,o,e(i,n,r,o,t,a))})),s};var Wm=function(e){return Hm(e,5)};var qm=function(e,t){return null!=e&&t in Object(e)};var Ym=function(e,t,n){for(var r=-1,i=(t=gp(t,e)).length,o=!1;++r<i;){var a=vp(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Wh(i)&&Nh(a,i)&&(Wd(e)||rf(e))};var Xm=function(e,t){return null!=e&&Ym(e,t,qm)};var Qm=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}},Km=Qm(),Zm=function(){return kd.Date.now()},Jm=Math.max,$m=Math.min;var eg=function(e,t,n){var r,i,o,a,s,l,c=0,u=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function p(e){return c=e,s=setTimeout(g,t),u?f(e):a}function m(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=o}function g(){var e=Zm();if(m(e))return v(e);s=setTimeout(g,function(e){var n=t-(e-l);return d?$m(n,o-(e-c)):n}(e))}function v(e){return s=void 0,h&&r?f(e):(r=i=void 0,a)}function y(){var e=Zm(),n=m(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return p(l);if(d)return clearTimeout(s),s=setTimeout(g,t),f(l)}return void 0===s&&(s=setTimeout(g,t)),a}return t=ih(t)||0,$d(n)&&(u=!!n.leading,o=(d="maxWait"in n)?Jm(ih(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},y.flush=function(){return void 0===s?a:v(Zm())},y};var tg=function(e,t,n){(void 0!==n&&!Bh(e[t],n)||void 0===n&&!(t in e))&&jh(e,t,n)};var ng=function(e){return Gd(e)&&qh(e)};var rg=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var ig=function(e){return Uh(e,Pf(e))};var og=function(e,t,n,r,i,o,a){var s=rg(e,n),l=rg(t,n),c=a.get(l);if(c)tg(e,n,c);else{var u=o?o(s,l,n+"",e,t,a):void 0,d=void 0===u;if(d){var h=Wd(l),f=!h&&cf(l),p=!h&&!f&&yf(l);u=l,h||f||p?Wd(s)?u=s:ng(s)?u=Ch(s):f?(d=!1,u=qp(l,!0)):p?(d=!1,u=km(l,!0)):u=[]:kp(l)||rf(l)?(u=s,rf(s)?u=ig(s):(!$d(s)||ah(s))&&(u=Rm(l))):d=!1}d&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),tg(e,n,u)}};var ag=function e(t,n,r,i,o){t!==n&&Km(n,(function(a,s){if(o||(o=new Fp),$d(a))og(t,n,s,r,e,i,o);else{var l=i?i(rg(t,s),a,s+"",t,n,o):void 0;void 0===l&&(l=a),tg(t,s,l)}}),Pf)};var sg=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var lg=function(e,t){return t.length<2?e:yp(e,Op(t,0,-1))},cg=Xh((function(e,t,n){ag(e,t,n)})),ug=cg;var dg=function(e,t){return t=gp(t,e),null==(e=lg(e,t))||delete e[vp(sg(t))]};var hg=function(e){return kp(e)?void 0:e},fg=Ap((function(e,t){var n={};if(null==e)return n;var r=!1;t=Hd(t,(function(t){return t=gp(t,e),r||(r=t.length>1),t})),Uh(e,om(e),n),r&&(n=Hm(n,7,hg));for(var i=t.length;i--;)dg(n,t[i]);return n})),pg=fg;var mg=function(e,t,n,r){if(!$d(e))return e;for(var i=-1,o=(t=gp(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=vp(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=$d(u)?u:Nh(t[i+1])?[]:{})}zh(s,l,c),s=s[l]}return e};var gg=function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=yp(e,a);n(s,a)&&mg(o,gp(a,e),s)}return o};var vg,yg=function(e,t){return gg(e,t,(function(t,n){return Xm(e,n)}))},xg=Ap((function(e,t){return null==e?{}:yg(e,t)})),bg=xg,wg=new Promise((e=>{vg=e})),Sg=!1;async function _g(){if(Sg)return;let e=await n.e(227).then(n.bind(n,227));await e.init(),vg(e),Sg=!0}var Ag=class{modifyById(e,t){let n=this;if(void 0===n[e])throw new Error("not expected");{let r={...n,[e]:t};return Object.setPrototypeOf(r,Ag.prototype),r}}add(e,t){var n,r;return null!==(n=null===(r=this.runOp({type:1,id:e,data:t}))||void 0===r?void 0:r.data)&&void 0!==n?n:this}runOp(e){let t=this;if(1===e.type){let n,r=t[e.id];n=void 0===r?{type:2,id:e.id}:{type:1,id:e.id,data:r};let{id:i,data:o}=e,a={...t,[i]:o};return Object.setPrototypeOf(a,Ag.prototype),{data:a,actual:e,reverse:n}}if(2===e.type){let{id:n}=e,r=t[n];if(void 0===r)return null;{let i={...t};return Object.setPrototypeOf(i,Ag.prototype),delete i[n],{data:i,actual:e,reverse:{type:1,id:n,data:r}}}}throw new Error("illegal arg")}};function Eg(e){if(void 0!==e.deepFreeze)return void e.deepFreeze(e);let t=Object.getOwnPropertyNames(e);for(let n of t){let t=e[n];t&&"object"==typeof t&&Eg(t)}return Object.freeze(e)}var Cg=class extends Error{};function Mg(e,t,n){if(void 0===e?void 0===t?(e=0,t=10):e=t-10:void 0===t&&(t=e+10),e>t){let n=e;e=t,t=n}let r=[],i=1/(n+1);for(let o=0;o<n;o++){let n=e+(t-e)*(o+.75+.5*Math.random())*i;r.push(n)}return r}function Tg(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function Pg(e,t){for(let n of e)t(n.id,n.data),Pg(n.children,t)}function Dg(e,t){t(e.id,e.data);for(let n of e.children)Dg(n,t)}var kg,Og=class extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,Og.prototype)}deepFreeze(){let e=0;for(;e<this.length;)Eg(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let n of e.children)this.fillCaches0(n,e.id)}fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}isDescendantOf(e,t){for(;e;){let n=this.parent(e);if(n===t)return!0;e=n}return!1}data(e){var t;return null===(t=this.get(e))||void 0===t?void 0:t.data}has(e){return void 0!==this.childrenOf(e)}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return null===e?this:null===(t=this.get(e))||void 0===t?void 0:t.children}traverseFrom(e,t){if(null===e)this.traverse(t);else{let n=this.get(e);n&&Dg(n,t)}}traverse(e){Pg(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return null===e?this:this.get(e).children}modifyById(e,t){if(void 0===this.get(e))throw new Error("not expected");{let n=this.parent(e),r=this.childrenArray(n),i=r.findIndex((t=>t.id===e));if(i<0)throw new Error("not expected");let o=r[i];return r=[...r],r[i]={...o,data:t},this.modifyArrayBy(n,r)}}modifyArrayBy(e,t){let n=e,r=t;for(;null!==n;){let e=r,t=n;if(n=this.parent(n),void 0===n)throw new Error;r=this.childrenArray(n);let i=r.findIndex((e=>e.id===t));if(i<0)throw new Error;r=[...r],r[i]={...r[i],children:e}}Object.setPrototypeOf(r,Og.prototype);let i=r;return i.fillCaches(),i}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}}checkDuplicatedIdRec(e){let{id:t,children:n}=e;if(void 0!==this.get(t))return!0;for(let r of n)if(this.checkDuplicatedIdRec(r))return!0;return!1}addOp(e){let{parent:t,fi:n,id:r,data:i,children:o}=e;if(null!==t&&void 0===this.get(t))return null;if(this.checkDuplicatedIdRec(e))return null;{let a=t,s=this.childrenArray(a),l={fi:n,id:r,data:i,children:o};return s=[...s,l],s.sort(((e,t)=>e.fi-t.fi)),e.localIndex=s.indexOf(l),{data:this.modifyArrayBy(a,s),actual:e,reverse:{type:8,id:r}}}}deleteOp(e){let{id:t}=e;if(null===this.get(t))return null;{let n=this.parent(t);if(void 0===n)return null;let r=this.childrenArray(n),i=r.findIndex((e=>e.id===t));e.localIndex=i,r=[...r];let o=r.splice(i,1)[0];return{data:this.modifyArrayBy(n,r),actual:e,reverse:{type:7,...o,parent:n}}}}moveOp(e){let{parent:t,fi:n,id:r}=e;if(null!==t&&void 0===this.get(t))return this.deleteOp({type:8,id:r});if(null!==t){let e=t;for(;null!==e;){if(void 0===e)throw new Error;if(e===r)throw new Cg("cyclic tree");e=this.parent(e)}}let i=this.parent(r);if(void 0===i)return null;let o=i,a=this.childrenArray(i),s=a.findIndex((e=>e.id===r));a=[...a];let l=a.splice(s,1)[0],c=this.modifyArrayBy(i,a);i=t,a=c.childrenArray(i);let u=l.fi;return l={...l,fi:n},a=[...a,l],a.sort(((e,t)=>e.fi-t.fi)),e.localIndex=a.indexOf(l),c=c.modifyArrayBy(i,a),{data:c,actual:e,reverse:{type:9,parent:o,fi:u,id:r}}}previous(e,t){if(null===t){let t=this.childrenArray(e);return 0===t.length?null:t[t.length-1].id}let n=null;for(let r of this.childrenArray(e)){if(r.id===t)return n;n=r.id}return null}traverseSortNext(e){let t=this.parent(e);if(void 0!==t){let n=this.childrenArray(t),r=n.findIndex((t=>t.id===e))+1;if(r<n.length)return n[r].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(void 0!==t){let n=this.childrenArray(t),r=n.findIndex((t=>t.id===e))-1;return r>=0?this.traverseSortPrevious(n[r].id):t}}getAllSorted(e){let t=[];for(let n of e){let e=this.getWithSortKey(n.id);void 0!==e&&t.push({...n,...e})}t.sort(((e,t)=>function(e,t){let n=0;for(;n<e.length&&n<t.length;){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1;n+=1}return n!==t.length?-1:n!==e.length?1:0}(e.sortKey,t.sortKey)));for(let n of t)delete n.sortKey;return t}getWithSortKey(e){var t=e;let n=[],r=this.get(t),i=r;if(void 0!==r){for(;t;)n.splice(0,0,r.fi),null!==(t=this.parent(t))&&(r=this.get(t));return{...i,sortKey:n}}}insertBeforeHelper(e,t,n){return this.insertAfterHelper(e,this.previous(e,t),n)}insertAfterHelper(e,t,n){let r=this.childrenArray(e);if(null===t){if(0===r.length)return Mg(0,n,n);{let e=r[0].fi;return Mg(e-n,e,n)}}{let i=this.get(t);if(void 0===i||this.parent(t)!==e)throw new Error("illegal args");let o=r.find((e=>e.fi>i.fi));if(void 0===o){let e=r[r.length-1].fi;return Mg(e,e+n,n)}return Mg(i.fi,o.fi,n)}}};(e=>{e.runOp=function(e,t){if(Array.isArray(e)){let n=t.props,r={},i=[...e],o=!1;if(n)for(let e of Object.keys(n)){let t=parseInt(e);if(isNaN(t))throw new Error("wrong index");r[e]=i[t],i[t]=n[e],o=!0}return o?{data:i,actual:t,reverse:{type:0,props:r}}:null}{let n=t.props,r={},i={...e},o=!1;if(n)for(let e of Object.keys(n)){r[e]=i[e];let t=n[e];void 0===t?delete i[e]:i[e]=t,o=!0}return o?{data:i,actual:t,reverse:{type:0,props:r}}:null}}})(kg||(kg={}));var Rg,Ig,Lg,Ng,jg=class extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,jg.prototype)}deepFreeze(){let e=0;for(;e<this.length;)Eg(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return null===(t=this.get(e))||void 0===t?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(void 0===this.get(e))throw new Error("not expected");{let n=this,r=n.findIndex((t=>t.id===e));if(r<0)throw new Error("not expected");let i=n[r];return n=[...n],n[r]={...i,data:t},this.modifyArrayBy(n)}}modifyArrayBy(e){Object.setPrototypeOf(e,jg.prototype);let t=e;return typeof process<"u"||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}}addOp(e){let{fi:t,id:n,data:r}=e,i=this,o={fi:t,id:n,data:r};return i=[...i,o],i.sort(((e,t)=>e.fi-t.fi)),e.localIndex=i.indexOf(o),{data:this.modifyArrayBy(i),actual:e,reverse:{type:5,id:n}}}deleteOp(e){let{id:t}=e,n=this,r=n.findIndex((e=>e.id===t));if(-1===r)return null;e.localIndex=r,n=[...n];let i=n.splice(r,1)[0];return{data:this.modifyArrayBy(n),actual:e,reverse:{type:4,...i}}}moveOp(e){let{fi:t,id:n}=e,r=this;r=[...r];let i=r.findIndex((e=>e.id===n));if(-1===i)return null;let o=r[i].fi,a={...r[i],fi:t};return r[i]=a,r.sort(((e,t)=>e.fi-t.fi)),e.localIndex=r.indexOf(a),{data:this.modifyArrayBy(r),actual:e,reverse:{type:6,fi:o,id:n}}}previous(e){if(null===e)return 0===this.length?null:this[this.length-1].id;let t=null;for(let n of this){if(n.id===e)return t;t=n.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let n=this;if(null===e){if(0===n.length)return Mg(0,t,t);{let e=n[0].fi;return Mg(e-t,e,t)}}{let r=this.get(e);if(void 0===r)throw new Error("illegal args");let i=n.find((e=>e.fi>r.fi));if(void 0===i){let e=n[n.length-1].fi;return Mg(e,e+t,t)}return Mg(r.fi,i.fi,t)}}},Bg=class{unusedFun(e){}runOp(e){let t=[],n=this,r=0,i={};for(;r<e.path.length;){if(t.push(n),n=void 0===n?void 0:n[e.path[r]],n instanceof Og||n instanceof jg)return null;r+=1}n={...n};for(let[o,a]of Object.entries(e.props)){let e=n[o];i[o]=e,void 0===a?delete n[o]:n[o]=a}for(;r>0;)0===Object.keys(n).length?(n={...t[r-1]},delete n[e.path[r-1]]):n={...t[r-1],[e.path[r-1]]:n},r-=1;return{data:Object.setPrototypeOf(n,Bg.prototype),actual:e,reverse:{...e,props:i}}}};function Fg(e,t){if(void 0===t)return;let n=!1,r=e.map((e=>{let r=e.id,i=zg(e.data,t[r]);n=n||void 0!==i,void 0===i&&(i=e.data);let o=Fg(e.children,t);return void 0!==o?n=!0:o=e.children,{...e,id:r,data:i,children:o}}));return n?r:void 0}function zg(e,t){if(void 0!==t){if(t instanceof jg||t instanceof Og||"string"==typeof t||"number"==typeof t||null===t)return t;if(e instanceof Og){let n=Fg(e,t);return void 0!==n&&Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}if(e instanceof jg)return function(e,t){if(void 0===t)return;let n=!1,r=e.map((e=>{let r=e.id,i=zg(e.data,t[r]);return n=n||void 0!==i,void 0===i&&(i=e.data),{...e,id:r,data:i}}));return n?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}(e,t);if(Array.isArray(e)){let n=!1,r=e.map(((e,r)=>{let i=zg(e,t[r]);return n=n||void 0!==i,void 0===i&&(i=e),i}));return n?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}if(e&&"object"==typeof e){let n={},r=!1;for(let[i,o]of Object.entries(e)){let e=zg(o,t[i]);r=r||void 0!==e,void 0===e&&(e=o),n[i]=e}return r?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}return null!==t&&void 0!==t?t:e}}function Ug(e,t){var n;let r={cur:[],result:[],len:0};return[e=null!==(n=Wg(e,t,r))&&void 0!==n?n:e,r.result]}function Gg(e,t){return null===e?null:(e.cur[e.len]=t,e.len+=1,e)}function Vg(e){e&&(e.len-=1)}function Hg(e,t,n){let r=!1,i=e.map((e=>{let i=e.id,o=t[i];if(void 0!==o&&"string"==typeof o&&(r=!0,i=o,null!==n))throw new Error("not supported");let a=Wg(e.data,t,Gg(n,i));Vg(n),r=r||void 0!==a,void 0===a&&(a=e.data);let s=Hg(e.children,t,n);return void 0!==s?r=!0:s=e.children,{...e,id:i,data:a,children:s}}));if(r)return i}function Wg(e,t,n){if(e instanceof Og){let r=Hg(e,t,n);return void 0!==r&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}if(e instanceof jg)return function(e,t,n){let r=!1,i=e.map((e=>{let i=e.id,o=t[i];if(void 0!==o&&"string"==typeof o&&(r=!0,i=o,null!==n))throw new Error("not supported");let a=Wg(e.data,t,Gg(n,i));return Vg(n),r=r||void 0!==a,void 0===a&&(a=e.data),{...e,id:i,data:a}}));if(r)return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}(e,t,n);if(Array.isArray(e)){let r=!1,i=e.map(((e,i)=>{let o=Wg(e,t,Gg(n,i));return Vg(n),r=r||void 0!==o,void 0===o&&(o=e),o}));return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}if(e&&"object"==typeof e){let r={},i=!1;for(let[o,a]of Object.entries(e))if("name"!==o&&"text"!==o){let e=t[o];if("string"==typeof e){if(null!==n)throw new Error("not supported");i=!0,o=e}let s=Wg(a,t,Gg(n,o));Vg(n),i=i||void 0!==s,void 0===s&&(s=a),r[o]=s}else r[o]=a;return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}if("string"==typeof e){let r=t[e];if(void 0!==r){if(36!==e.length)throw new Error("for now you should only call this method when the key is a uuid");!function(e){if(null===e)return null;e.result.push(e.cur.slice(0,e.len))}(n)}return r}}(e=>{e.apply=function(e,t){var n;return null!==(n=zg(e,t))&&void 0!==n?n:e},e.filterOp=function(e,t){if(0!==t.type){if(1!==t.type&&4!==t.type&&7!==t.type)return t;{let n=iv.zoom(e,[...t.path,t.id]);if(void 0===n)return t;if("string"==typeof n||"number"==typeof n||Tg(n))return;if(n&&"object"==typeof n){let e={...t.data,...n};return{...t,data:e}}}}else{let n=0,r=t.path,i=e;for(;n<r.length&&void 0!==i;){if(i=iv.zoomOnce(i,r[n]),i instanceof Og||i instanceof jg)return;n+=1}if(void 0===i)return t;if("string"==typeof i||"number"==typeof i||Tg(i))return;if(i&&"object"==typeof i){let e={...t.props};for(let t of Object.keys(i))delete e[t];return{...t,props:e}}}}})(Rg||(Rg={})),(e=>{e.replaceProps=function(e,t){let n=iv.zoom(t,e.path);if("object"==typeof n){let t={};for(let r of Object.keys(e.props))t[r]=n[r];return{...e,props:t}}return{...e,props:{}}}})(Ig||(Ig={})),(e=>{function t(e,t){let n=t.path;for(var r=[];;){let a;if(e instanceof Bg&&0===t.type&&(a=e.runOp({...t,path:n.slice(r.length)}),null===a&&(a=void 0)),r.length===n.length&&(a=e instanceof Og||e instanceof jg||e instanceof Ag?e.runOp(t):kg.runOp(e,t)),void 0!==a){if(null!==a){let e=a.data;for(let t=r.length-1;t>=0;t--){let i=n[t],o=r[t];if(o instanceof Og){if("number"==typeof i)throw new Error("illegal arg");e=o.modifyById(i,e)}else if(o instanceof jg){if("number"==typeof i)throw new Error("illegal arg");e=o.modifyById(i,e)}else if(o instanceof Ag){if("number"==typeof i)throw new Error("illegal arg");e=o.modifyById(i,e)}else if(o instanceof Bg){let t={...o,[i]:e};e=Object.setPrototypeOf(t,Bg.prototype)}else{if("object"!=typeof o)return null;if(Array.isArray(o)){if("string"==typeof i&&(i=parseInt(i),isNaN(i)))throw new Error("Invalid path");let t=e;e=[...o],e[i]=t}else e={...o,[i]:e}}}return{data:e,actual:{...a.actual,path:n},reverse:{...a.reverse,path:n}}}return null}let s,l=n[r.length];if(e instanceof Og){var i;if("number"==typeof l)throw new Error("");s=null===(i=e.get(l))||void 0===i?void 0:i.data}else if(e instanceof jg){var o;if("number"==typeof l)throw new Error("");s=null===(o=e.get(l))||void 0===o?void 0:o.data}else null!==e&&(s=e[l]);if(void 0===s)return null;r.push(e),e=s}}function n(e,t){for(let n=0;n<e.length&&n<t.length;n++)if(e[n]!==t[n])return!0;return!1}function r(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}e.drop=function(e,t){return{...e,path:e.path.slice(t)}},e.applySimple=function(e,n){var r,i;return null!==(r=null===(i=t(e,n))||void 0===i?void 0:i.data)&&void 0!==r?r:e},e.apply=t,e.pathDisjoint=n,e.pathEq=r,e.commutative=function(e,t){return n(e.path,t.path)},e.subsumed=function(e,t){return!(0!==e.type||0!==t.type||!r(e.path,t.path))&&Object.keys(e.props).every((e=>void 0!==t.props[e]))}})(Lg||(Lg={})),(e=>{function t(e,t){var n=e;let r=[],i=[];for(let o of t)try{if(3===o.type){let e=iv.zoom(n,[...o.path,o.id]),t=Lg.apply(n,{...o,type:2});if(null!==t){n=t.data;let[a,s]=Ug(n,{[o.id]:e});n=a;for(let t of s){let n=t[t.length-1];t.splice(t.length-1,1),r.push({type:0,path:t,props:{[n]:e}}),i.push({type:0,path:t,props:{[n]:o.id}})}i.push(t.reverse),r.push(t.actual)}}else{let e=Lg.apply(n,o);null!==e&&(r.push(e.actual),n=e.data,i.push(e.reverse))}}catch($R){if($R instanceof Cg)return null;throw $R}return{data:n,actual:r,reverse:i.reverse()}}e.empty=function(){return[]},e.removePrefix=function(e,t){let n=[];for(let r of e){let[e,...i]=r.path;e===t&&n.push({...r,path:i})}return n},e.addPrefix=function(e,t){return e.map((e=>({...e,path:[t,...e.path]})))},e.concat=function(e,t){return[...e,...t]},e.compress=function(e,t){return[...e.filter((e=>!t.some((t=>Lg.subsumed(e,t))))),...t]},e.commutative=function(e,t){return e.every((e=>t.every((t=>Lg.commutative(e,t)))))},e.applyAll=function(e,n){for(let r of n){let n=t(e,r);null!==n&&(e=n.data)}return e},e.apply=t})(Ng||(Ng={}));var qg=Symbol(),Yg=Symbol(),Xg=class{reportOp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this;if(null===t)return;r._current=t.data;let i=n;for(;!(r instanceof ov);){let e=r._path,t=r._current;if(""!==e&&i.splice(0,0,e),r=r._parent,null===r)return;r.update(e,t)}r.push(i,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let n=t[Yg];n&&n(),delete this._children[e]}}}},Qg=class extends Xg{constructor(e,t,n){super(),this._parent=e,this._path=t,this._current=n}update(e,t){if(Array.isArray(this._current)){if("string"==typeof e&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,kg.runOp(this._current,e),e.path)}},Kg=class extends Xg{constructor(e,t,n){super(),this._parent=e,this._path=t,this._current=n}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,Ag.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},Zg={get(e,t){if(t===Yg)return()=>{e._parent=null};if(t===qg)return e._current;let{_current:n,_children:r}=e;if("push"===t&&Array.isArray(n))throw new Error("not supported to expand array");let i=void 0===r?void 0:r[t];if(void 0!==i)return i;let o=n[t],a=av(e,t,o);return a!==o?(void 0===r&&(r={},e._children=r),r[t]=a,a):o},has:(e,t)=>t in e._current,ownKeys:e=>Reflect.ownKeys(e._current),defineProperty(){throw Error("not supported")},getPrototypeOf:e=>Object.getPrototypeOf(e._current),setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let n=e._current,r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:!0,enumerable:r.enumerable,value:n[t]}}},Jg={...Zg,set(e,t,n){var r;let i={type:0,props:{[t]:null!==(r=cv(n))&&void 0!==r?r:n}};return e.deleteChildren(t),e.runOp(i),!0},deleteProperty(e,t){let n={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(n),!0}},$g={...Zg,set(e,t,n){return void 0===n?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:n})),!0},deleteProperty:(e,t)=>(e.runOp({type:2,id:t}),!0)},ev=class extends Xg{constructor(e,t,n){super(),this._children={},this._parent=e,this._path=t,this._current=n,this[Yg]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse(((t,n)=>{e(t,this.data(t))}))}data(e){var t;let{_current:n,_children:r}=this,i=void 0===r?void 0:r[e];if(void 0!==i)return i;let o=null===(t=n.get(e))||void 0===t?void 0:t.data,a=av(this,e,o);return a!==o?(void 0===r&&(r={},this._children=r),r[e]=a,a):o}add(e,t,n,r,i){this.runOp({type:7,parent:e,fi:t,id:n,data:r,children:i})}move(e,t,n){this.runOp({type:9,parent:e,fi:t,id:n})}insertAfter(e,t,n){let r=this._current.insertAfterHelper(e,t,n.length);for(let i=0;i<n.length;i++){let t=n[i];this.add(e,r[i],t.id,t.data,t.children)}}insertBefore(e,t,n){let r=this._current.insertBeforeHelper(e,t,n.length);for(let i=0;i<n.length;i++){let t=n[i];this.add(e,r[i],t.id,t.data,t.children)}}moveAfter(e,t,n){let r=this._current.insertAfterHelper(e,t,n.length);for(let i=0;i<n.length;i++){let t=n[i];this.move(e,r[i],t)}}moveBefore(e,t,n){let r=this._current.insertBeforeHelper(e,t,n.length);for(let i=0;i<n.length;i++){let t=n[i];this.move(e,r[i],t)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},tv=class extends Xg{constructor(e,t,n){super(),this._parent=e,this._path=t,this._current=n,this[Yg]=()=>{this._parent=null}}feedOp(e){let{path:t,...n}=e;this.reportOp(n,Lg.apply(this._current,e),t)}},nv=class extends Xg{constructor(e,t,n){super(),this._children={},this._parent=e,this._path=t,this._current=n,this[Yg]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let n=0;n<t;n++){let t=this._current[n].id,r=this._current[n].fi;e(this.data(this._current[n].id),t,r)}}find(e){let t=this.length;for(let n=0;n<t;n++){let t=this._current[n].id;if(e(this.data(t),t))return this.get(t)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var t;let{_current:n,_children:r}=this,i=void 0===r?void 0:r[e];if(void 0!==i)return i;let o=null===(t=n.get(e))||void 0===t?void 0:t.data,a=av(this,e,o);return a!==o?(void 0===r&&(r={},this._children=r),r[e]=a,a):o}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,n){this.runOp({type:4,fi:e,id:t,data:n})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let n=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let e=t[r];this.add(n[r],e.id,e.data)}}insertBefore(e,t){let n=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let e=t[r];this.add(n[r],e.id,e.data)}}moveAfter(e,t){let n=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let e=t[r];this.move(n[r],e)}}moveBefore(e,t){let n=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let e=t[r];this.move(n[r],e)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function rv(e,t,n){if(e.length>0){let r=e[e.length-1];if(0===r.type&&0===t.type&&iv.equal(r.path,n))return void Object.assign(r.props,t.props)}e.push({...t,path:n})}var iv,ov=class{constructor(e){this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(""!==e)throw new Error("");this._current=t}push(e,t,n,r){rv(this.ts,t,e),rv(this.actual,n,e),rv(this.reverse,r,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function av(e,t,n){return n instanceof Og?new ev(e,t,n):n instanceof jg?new nv(e,t,n):n instanceof Bg?new tv(e,t,n):n instanceof Ag?new Proxy(new Kg(e,t,n),$g):null!==n&&"object"==typeof n?Tg(n)?n:new Proxy(new Qg(e,t,n),Jg):n}function sv(e){let t=new ov(e);return[av(t,"",e),t]}function lv(e,t){let[n,r]=sv(e);return t(n),r.result()}function cv(e){return e instanceof ev||e instanceof nv||e instanceof tv?e._current:null!==e&&"object"==typeof e?e[qg]:e}(e=>{function t(e,t){return(e instanceof Og||e instanceof ev)&&"string"==typeof t||(e instanceof jg||e instanceof nv)&&"string"==typeof t?e.data(t):"number"==typeof t&&Array.isArray(e)||"string"==typeof t&&"object"==typeof e?e[t]:void 0}function n(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(;r<n.length&&void 0!==e;)e=t(e,n[r]),r+=1;return e}e.equal=function(e,t){if(t.length!==e.length)return!1;for(var n=0;n<e.length;){if(e[n]!==t[n])return!1;n+=1}return!0},e.removeOverridden=function(e,t,r){let i=n(r,e);if(void 0!==i&&"object"==typeof i&&null!==i){let e={...t};return Object.keys(i).forEach((t=>{delete e[t]})),e}return t},e.zoomOnce=t,e.zoom=n})(iv||(iv={}));var uv,dv=class{},hv=class extends dv{constructor(e){super(),this.id=e}},fv=class extends dv{constructor(e){super(),this.data=e}};try{uv=new TextDecoder}catch{}var pv,mv,gv,vv,yv,xv,bv,wv=0,Sv=[],_v=Sv,Av=0,Ev={},Cv=0,Mv=0,Tv=[],Pv={useRecords:!1,mapsAsObjects:!0},Dv=class{},kv=new Dv;kv.name="MessagePack 0xC1";var Ov=!1,Rv=class{constructor(e){e&&(!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(pv)return iy((()=>(oy(),this?this.unpack(e,t):Rv.prototype.unpack.call(Pv,e,t))));mv=t>-1?t:e.length,wv=0,Av=0,Mv=0,vv=null,_v=Sv,yv=null,pv=e;try{bv=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(JR){throw pv=null,e instanceof Uint8Array?JR:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}if(this instanceof Rv){if(Ev=this,this.structures)return gv=this.structures,Iv();(!gv||gv.length>0)&&(gv=[])}else Ev=Pv,(!gv||gv.length>0)&&(gv=[]);return Iv()}unpackMultiple(e,t){let n,r=0;try{Ov=!0;let i=e.length,o=this?this.unpack(e,i):ly.unpack(e,i);if(!t){for(n=[o];wv<i;)r=wv,n.push(Iv());return n}for(t(o);wv<i;)if(r=wv,!1===t(Iv()))return}catch(i){throw i.lastPosition=r,i.values=n,i}finally{Ov=!1,oy()}}_mergeStructures(e,t){for(let n=0,r=(e=e||[]).length;n<r;n++){let t=e[n];t&&(t.isShared=!0,n>=32&&(t.highByte=n-32>>5))}e.sharedLength=e.length;for(let n in t||[])if(n>=0){let r=e[n],i=t[n];i&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[n]=r),e[n]=i)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function Iv(){try{if(!Ev.trusted&&!Ov){let e=gv.sharedLength||0;e<gv.length&&(gv.length=e)}let e=Nv();if(wv==mv)gv.restoreStructures&&Lv(),gv=null,pv=null,xv&&(xv=null);else{if(wv>mv){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}if(!Ov)throw new Error("Data read, but end of buffer not reached")}return e}catch(lG){throw gv.restoreStructures&&Lv(),oy(),(lG instanceof RangeError||lG.message.startsWith("Unexpected end of buffer"))&&(lG.incomplete=!0),lG}}function Lv(){for(let e in gv.restoreStructures)gv[e]=gv.restoreStructures[e];gv.restoreStructures=null}function Nv(){let e=pv[wv++];if(e<160){if(e<128){if(e<64)return e;{let t=gv[63&e]||Ev.getStructures&&zv()[63&e];return t?(t.read||(t.read=Bv(t,63&e)),t.read()):e}}if(e<144){if(e-=128,Ev.mapsAsObjects){let t={};for(let n=0;n<e;n++)t[ey()]=Nv();return t}{let t=new Map;for(let n=0;n<e;n++)t.set(Nv(),Nv());return t}}{e-=144;let t=new Array(e);for(let n=0;n<e;n++)t[n]=Nv();return t}}if(e<192){let t=e-160;if(Mv>=wv)return vv.slice(wv-Cv,(wv+=t)-Cv);if(0==Mv&&mv<140){let e=t<16?Kv(t):Qv(t);if(null!=e)return e}return Uv(t)}{let t;switch(e){case 192:return null;case 193:return yv?(t=Nv(),t>0?yv[1].slice(yv.position1,yv.position1+=t):yv[0].slice(yv.position0,yv.position0-=t)):kv;case 194:return!1;case 195:return!0;case 196:return Zv(pv[wv++]);case 197:return t=bv.getUint16(wv),wv+=2,Zv(t);case 198:return t=bv.getUint32(wv),wv+=4,Zv(t);case 199:return Jv(pv[wv++]);case 200:return t=bv.getUint16(wv),wv+=2,Jv(t);case 201:return t=bv.getUint32(wv),wv+=4,Jv(t);case 202:if(t=bv.getFloat32(wv),Ev.useFloat32>2){let e=ay[(127&pv[wv])<<1|pv[wv+1]>>7];return wv+=4,(e*t+(t>0?.5:-.5)>>0)/e}return wv+=4,t;case 203:return t=bv.getFloat64(wv),wv+=8,t;case 204:return pv[wv++];case 205:return t=bv.getUint16(wv),wv+=2,t;case 206:return t=bv.getUint32(wv),wv+=4,t;case 207:return Ev.int64AsNumber?(t=4294967296*bv.getUint32(wv),t+=bv.getUint32(wv+4)):t=bv.getBigUint64(wv),wv+=8,t;case 208:return bv.getInt8(wv++);case 209:return t=bv.getInt16(wv),wv+=2,t;case 210:return t=bv.getInt32(wv),wv+=4,t;case 211:return Ev.int64AsNumber?(t=4294967296*bv.getInt32(wv),t+=bv.getUint32(wv+4)):t=bv.getBigInt64(wv),wv+=8,t;case 212:if(t=pv[wv++],114==t)return ty(63&pv[wv++]);{let e=Tv[t];if(e)return e.read?(wv++,e.read(Nv())):e.noBuffer?(wv++,e()):e(pv.subarray(wv,++wv));throw new Error("Unknown extension "+t)}case 213:return t=pv[wv],114==t?(wv++,ty(63&pv[wv++],pv[wv++])):Jv(2);case 214:return Jv(4);case 215:return Jv(8);case 216:return Jv(16);case 217:return t=pv[wv++],Mv>=wv?vv.slice(wv-Cv,(wv+=t)-Cv):Gv(t);case 218:return t=bv.getUint16(wv),Mv>=(wv+=2)?vv.slice(wv-Cv,(wv+=t)-Cv):Vv(t);case 219:return t=bv.getUint32(wv),Mv>=(wv+=4)?vv.slice(wv-Cv,(wv+=t)-Cv):Hv(t);case 220:return t=bv.getUint16(wv),wv+=2,qv(t);case 221:return t=bv.getUint32(wv),wv+=4,qv(t);case 222:return t=bv.getUint16(wv),wv+=2,Yv(t);case 223:return t=bv.getUint32(wv),wv+=4,Yv(t);default:if(e>=224)return e-256;if(void 0===e){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}throw new Error("Unknown MessagePack token "+e)}}}var jv=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Bv(e,t){function n(){if(n.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map((e=>jv.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()")).join(",")+"}}")(Nv);return 0===e.highByte&&(e.read=Fv(t,e.read)),n()}let r={};for(let t=0,n=e.length;t<n;t++){r[e[t]]=Nv()}return r}return n.count=0,0===e.highByte?Fv(t,n):n}var Fv=(e,t)=>function(){let n=pv[wv++];if(0===n)return t();let r=e<32?-(e+(n<<5)):e+(n<<5),i=gv[r]||zv()[r];if(!i)throw new Error("Record id is not defined for "+r);return i.read||(i.read=Bv(i,e)),i.read()};function zv(){let e=iy((()=>(pv=null,Ev.getStructures())));return gv=Ev._mergeStructures(e,gv)}var Uv=Wv,Gv=Wv,Vv=Wv,Hv=Wv;function Wv(e){let t;if(e<16&&(t=Kv(e)))return t;if(e>64&&uv)return uv.decode(pv.subarray(wv,wv+=e));let n=wv+e,r=[];for(t="";wv<n;){let e=pv[wv++];if(0===(128&e))r.push(e);else if(192===(224&e)){let t=63&pv[wv++];r.push((31&e)<<6|t)}else if(224===(240&e)){let t=63&pv[wv++],n=63&pv[wv++];r.push((31&e)<<12|t<<6|n)}else if(240===(248&e)){let t=(7&e)<<18|(63&pv[wv++])<<12|(63&pv[wv++])<<6|63&pv[wv++];t>65535&&(t-=65536,r.push(t>>>10&1023|55296),t=56320|1023&t),r.push(t)}else r.push(e);r.length>=4096&&(t+=Xv.apply(String,r),r.length=0)}return r.length>0&&(t+=Xv.apply(String,r)),t}function qv(e){let t=new Array(e);for(let n=0;n<e;n++)t[n]=Nv();return t}function Yv(e){if(Ev.mapsAsObjects){let t={};for(let n=0;n<e;n++)t[ey()]=Nv();return t}{let t=new Map;for(let n=0;n<e;n++)t.set(Nv(),Nv());return t}}var Xv=String.fromCharCode;function Qv(e){let t=wv,n=new Array(e);for(let r=0;r<e;r++){let e=pv[wv++];if((128&e)>0)return void(wv=t);n[r]=e}return Xv.apply(String,n)}function Kv(e){if(e<4){if(e<2){if(0===e)return"";{let e=pv[wv++];return(128&e)>1?void(wv-=1):Xv(e)}}{let t=pv[wv++],n=pv[wv++];if((128&t)>0||(128&n)>0)return void(wv-=2);if(e<3)return Xv(t,n);let r=pv[wv++];return(128&r)>0?void(wv-=3):Xv(t,n,r)}}{let t=pv[wv++],n=pv[wv++],r=pv[wv++],i=pv[wv++];if((128&t)>0||(128&n)>0||(128&r)>0||(128&i)>0)return void(wv-=4);if(e<6){if(4===e)return Xv(t,n,r,i);{let e=pv[wv++];return(128&e)>0?void(wv-=5):Xv(t,n,r,i,e)}}if(e<8){let o=pv[wv++],a=pv[wv++];if((128&o)>0||(128&a)>0)return void(wv-=6);if(e<7)return Xv(t,n,r,i,o,a);let s=pv[wv++];return(128&s)>0?void(wv-=7):Xv(t,n,r,i,o,a,s)}{let o=pv[wv++],a=pv[wv++],s=pv[wv++],l=pv[wv++];if((128&o)>0||(128&a)>0||(128&s)>0||(128&l)>0)return void(wv-=8);if(e<10){if(8===e)return Xv(t,n,r,i,o,a,s,l);{let e=pv[wv++];return(128&e)>0?void(wv-=9):Xv(t,n,r,i,o,a,s,l,e)}}if(e<12){let c=pv[wv++],u=pv[wv++];if((128&c)>0||(128&u)>0)return void(wv-=10);if(e<11)return Xv(t,n,r,i,o,a,s,l,c,u);let d=pv[wv++];return(128&d)>0?void(wv-=11):Xv(t,n,r,i,o,a,s,l,c,u,d)}{let c=pv[wv++],u=pv[wv++],d=pv[wv++],h=pv[wv++];if((128&c)>0||(128&u)>0||(128&d)>0||(128&h)>0)return void(wv-=12);if(e<14){if(12===e)return Xv(t,n,r,i,o,a,s,l,c,u,d,h);{let e=pv[wv++];return(128&e)>0?void(wv-=13):Xv(t,n,r,i,o,a,s,l,c,u,d,h,e)}}{let f=pv[wv++],p=pv[wv++];if((128&f)>0||(128&p)>0)return void(wv-=14);if(e<15)return Xv(t,n,r,i,o,a,s,l,c,u,d,h,f,p);let m=pv[wv++];return(128&m)>0?void(wv-=15):Xv(t,n,r,i,o,a,s,l,c,u,d,h,f,p,m)}}}}}function Zv(e){return Ev.copyBuffers?Uint8Array.prototype.slice.call(pv,wv,wv+=e):pv.subarray(wv,wv+=e)}function Jv(e){let t=pv[wv++];if(Tv[t])return Tv[t](pv.subarray(wv,wv+=e));throw new Error("Unknown extension type "+t)}var $v=new Array(4096);function ey(){let e=pv[wv++];if(!(e>=160&&e<192))return wv--,Nv();if(e-=160,Mv>=wv)return vv.slice(wv-Cv,(wv+=e)-Cv);if(!(0==Mv&&mv<180))return Uv(e);let t,n=4095&(e<<5^(e>1?bv.getUint16(wv):e>0?pv[wv]:0)),r=$v[n],i=wv,o=wv+e-3,a=0;if(r&&r.bytes==e){for(;i<o;){if(t=bv.getUint32(i),t!=r[a++]){i=1879048192;break}i+=4}for(o+=3;i<o;)if(t=pv[i++],t!=r[a++]){i=1879048192;break}if(i===o)return wv=i,r.string;o-=3,i=wv}for(r=[],$v[n]=r,r.bytes=e;i<o;)t=bv.getUint32(i),r.push(t),i+=4;for(o+=3;i<o;)t=pv[i++],r.push(t);let s=e<16?Kv(e):Qv(e);return r.string=null!=s?s:Uv(e)}var ty=(e,t)=>{var n=Nv();let r=e;void 0!==t&&(e=e<32?-((t<<5)+e):(t<<5)+e,n.highByte=t);let i=gv[e];return i&&i.isShared&&((gv.restoreStructures||(gv.restoreStructures=[]))[e]=i),gv[e]=n,n.read=Bv(n,r),n.read()},ny="object"==typeof self?self:global;Tv[0]=()=>{},Tv[0].noBuffer=!0,Tv[101]=()=>{let e=Nv();return(ny[e[0]]||Error)(e[1])},Tv[105]=e=>{let t=bv.getUint32(wv-4);xv||(xv=new Map);let n,r=pv[wv];n=r>=144&&r<160||220==r||221==r?[]:{};let i={target:n};xv.set(t,i);let o=Nv();return i.used?Object.assign(n,o):(i.target=o,o)},Tv[112]=e=>{let t=bv.getUint32(wv-4),n=xv.get(t);return n.used=!0,n.target},Tv[115]=()=>new Set(Nv());var ry=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map((e=>e+"Array"));function iy(e){let t=mv,n=wv,r=Av,i=Cv,o=Mv,a=vv,s=_v,l=xv,c=yv,u=new Uint8Array(pv.slice(0,mv)),d=gv,h=gv.slice(0,gv.length),f=Ev,p=Ov,m=e();return mv=t,wv=n,Av=r,Cv=i,Mv=o,vv=a,_v=s,xv=l,yv=c,pv=u,Ov=p,(gv=d).splice(0,gv.length,...h),Ev=f,bv=new DataView(pv.buffer,pv.byteOffset,pv.byteLength),m}function oy(){pv=null,xv=null,gv=null}Tv[116]=e=>{let t=e[0],n=ry[t];if(!n)throw new Error("Could not find typed array for code "+t);return new ny[n](Uint8Array.prototype.slice.call(e,1).buffer)},Tv[120]=()=>{let e=Nv();return new RegExp(e[0],e[1])},Tv[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],n=wv;wv+=t-4,(yv=[Nv(),Nv()]).position0=0,yv.position1=0;let r=wv;wv=n;try{return Nv()}finally{wv=r}},Tv[255]=e=>4==e.length?new Date(1e3*(16777216*e[0]+(e[1]<<16)+(e[2]<<8)+e[3])):8==e.length?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+1e3*(4294967296*(3&e[3])+16777216*e[4]+(e[5]<<16)+(e[6]<<8)+e[7])):12==e.length?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+1e3*((128&e[4]?-281474976710656:0)+1099511627776*e[6]+4294967296*e[7]+16777216*e[8]+(e[9]<<16)+(e[10]<<8)+e[11])):new Date("invalid");var ay=new Array(147);for(let n=0;n<256;n++)ay[n]=+("1e"+Math.floor(45.15-.30103*n));var sy,ly=new Rv({useRecords:!1}),cy=(ly.unpack,ly.unpackMultiple,ly.unpack,new Float32Array(1));new Uint8Array(cy.buffer,0,4);try{sy=new TextEncoder}catch{}var uy,dy,hy,fy,py,my=typeof Buffer<"u",gy=my?Buffer.allocUnsafeSlow:Uint8Array,vy=my?Buffer:Uint8Array,yy=my?4294967296:2144337920,xy=0,by=null,wy=/[\u0080-\uFFFF]/,Sy=Symbol("record-id"),_y=class extends Rv{constructor(e){super(e),this.offset=0;let t,n,r,i,o,a=0,s=vy.prototype.utf8Write?function(e,t,n){return hy.utf8Write(e,t,n)}:!(!sy||!sy.encodeInto)&&function(e,t){return sy.encodeInto(e,hy.subarray(t)).written},l=this;e||(e={});let c=e&&e.sequential,u=e.structures||e.saveStructures,d=e.maxSharedStructures;if(null==d&&(d=u?32:0),d>8160)throw new Error("Maximum maxSharedStructure is 8160");let h=e.maxOwnStructures;null==h&&(h=u?32:64),c&&!e.saveStructures&&(this.structures=[]);let f=d>32||h+d>64,p=d+64,m=d+h+64;if(m>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],v=0,y=0;this.pack=this.encode=function(e,s){if(hy||(hy=new gy(8192),fy=new DataView(hy.buffer,0,8192),xy=0),(py=hy.length-10)-xy<2048?(hy=new gy(hy.length),fy=new DataView(hy.buffer,0,hy.length),py=hy.length-10,xy=0):xy=xy+7&2147483640,t=xy,o=l.structuredClone?new Map:null,l.bundleStrings?(by=["",""],hy[xy++]=214,hy[xy++]=98,by.position=xy-t,xy+=4):by=null,n=l.structures,n){n.uninitialized&&(n=l._mergeStructures(l.getStructures()));let e=n.sharedLength||0;if(e>d)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+n.sharedLength);if(!n.transitions){n.transitions=Object.create(null);for(let t=0;t<e;t++){let e=n[t];if(!e)continue;let r,i=n.transitions;for(let t=0,n=e.length;t<n;t++){let n=e[t];r=i[n],r||(r=i[n]=Object.create(null)),i=r}i[Sy]=t+64}a=e}c||(n.nextId=e+64)}r&&(r=!1),i=n||[];try{if(x(e),by){fy.setUint32(by.position+t,xy-by.position-t);let e=by;by=null,x(e[0]),x(e[1])}if(l.offset=xy,o&&o.idsToInsert){(xy+=6*o.idsToInsert.length)>py&&w(xy),l.offset=xy;let e=function(e,t){let n,r=6*t.length,i=e.length-r;for(t.sort(((e,t)=>e.offset>t.offset?1:-1));n=t.pop();){let t=n.offset,o=n.id;e.copyWithin(t+r,t,i),r-=6;let a=t+r;e[a++]=214,e[a++]=105,e[a++]=o>>24,e[a++]=o>>16&255,e[a++]=o>>8&255,e[a++]=255&o,i=t}return e}(hy.subarray(t,xy),o.idsToInsert);return o=null,e}return s&Iy?(hy.start=t,hy.end=xy,hy):hy.subarray(t,xy)}finally{if(n){if(y<10&&y++,v>1e4)n.transitions=null,y=0,v=0,g.length>0&&(g=[]);else if(g.length>0&&!c){for(let e=0,t=g.length;e<t;e++)g[e][Sy]=0;g=[]}if(r&&l.saveStructures){let r=n.sharedLength||d;n.length>r&&(n=n.slice(0,r));let i=hy.subarray(t,xy);return!1===l.saveStructures(n,a)?(l._mergeStructures(l.getStructures()),l.pack(e)):(a=r,i)}}s&Ly&&(xy=t)}};let x=e=>{xy>py&&(hy=w(xy));var n,r=typeof e;if("string"===r){let t,r=e.length;if(by&&r>=8&&r<4096){let t=wy.test(e);return by[t?0:1]+=e,hy[xy++]=193,void x(t?-r:r)}t=r<32?1:r<256?2:r<65536?3:5;let i=3*r;if(xy+i>py&&(hy=w(xy+i)),r<64||!s){let i,o,a,s=xy+t;for(i=0;i<r;i++)o=e.charCodeAt(i),o<128?hy[s++]=o:o<2048?(hy[s++]=o>>6|192,hy[s++]=63&o|128):55296===(64512&o)&&56320===(64512&(a=e.charCodeAt(i+1)))?(o=65536+((1023&o)<<10)+(1023&a),i++,hy[s++]=o>>18|240,hy[s++]=o>>12&63|128,hy[s++]=o>>6&63|128,hy[s++]=63&o|128):(hy[s++]=o>>12|224,hy[s++]=o>>6&63|128,hy[s++]=63&o|128);n=s-xy-t}else n=s(e,xy+t,i);n<32?hy[xy++]=160|n:n<256?(t<2&&hy.copyWithin(xy+2,xy+1,xy+1+n),hy[xy++]=217,hy[xy++]=n):n<65536?(t<3&&hy.copyWithin(xy+3,xy+2,xy+2+n),hy[xy++]=218,hy[xy++]=n>>8,hy[xy++]=255&n):(t<5&&hy.copyWithin(xy+5,xy+3,xy+3+n),hy[xy++]=219,fy.setUint32(xy,n),xy+=4),xy+=n}else if("number"===r)if(e>>>0===e)e<64?hy[xy++]=e:e<256?(hy[xy++]=204,hy[xy++]=e):e<65536?(hy[xy++]=205,hy[xy++]=e>>8,hy[xy++]=255&e):(hy[xy++]=206,fy.setUint32(xy,e),xy+=4);else if(e>>0===e)e>=-32?hy[xy++]=256+e:e>=-128?(hy[xy++]=208,hy[xy++]=e+256):e>=-32768?(hy[xy++]=209,fy.setInt16(xy,e),xy+=2):(hy[xy++]=210,fy.setInt32(xy,e),xy+=4);else{let t;if((t=this.useFloat32)>0&&e<4294967296&&e>=-2147483648){let n;if(hy[xy++]=202,fy.setFloat32(xy,e),t<4||(n=e*ay[(127&hy[xy])<<1|hy[xy+1]>>7])>>0===n)return void(xy+=4);xy--}hy[xy++]=203,fy.setFloat64(xy,e),xy+=8}else if("object"===r)if(e){if(o){let n=o.get(e);if(n){if(!n.id){let e=o.idsToInsert||(o.idsToInsert=[]);n.id=e.push(n)}return hy[xy++]=214,hy[xy++]=112,fy.setUint32(xy,n.id),void(xy+=4)}o.set(e,{offset:xy-t})}let r=e.constructor;if(r===Object)b(e,!0);else if(r===Array){(n=e.length)<16?hy[xy++]=144|n:n<65536?(hy[xy++]=220,hy[xy++]=n>>8,hy[xy++]=255&n):(hy[xy++]=221,fy.setUint32(xy,n),xy+=4);for(let t=0;t<n;t++)x(e[t])}else if(r===Map){(n=e.size)<16?hy[xy++]=128|n:n<65536?(hy[xy++]=222,hy[xy++]=n>>8,hy[xy++]=255&n):(hy[xy++]=223,fy.setUint32(xy,n),xy+=4);for(let[t,n]of e)x(t),x(n)}else{for(let t=0,n=uy.length;t<n;t++){if(e instanceof dy[t]){let n=uy[t];if(n.write)return n.type&&(hy[xy++]=212,hy[xy++]=n.type,hy[xy++]=0),void x(n.write.call(this,e));let r,i=hy,o=fy,a=xy;hy=null;try{r=n.pack.call(this,e,(e=>(hy=i,i=null,(xy+=e)>py&&w(xy),{target:hy,targetView:fy,position:xy-e})),x)}finally{i&&(hy=i,fy=o,xy=a,py=hy.length-10)}return void(r&&(r.length+xy>py&&w(r.length+xy),xy=Cy(r,hy,xy,n.type)))}}b(e,!e.hasOwnProperty)}}else hy[xy++]=192;else if("boolean"===r)hy[xy++]=e?195:194;else if("bigint"===r){if(e<BigInt(1)<<BigInt(63)&&e>=-(BigInt(1)<<BigInt(63)))hy[xy++]=211,fy.setBigInt64(xy,e);else if(e<BigInt(1)<<BigInt(64)&&e>0)hy[xy++]=207,fy.setBigUint64(xy,e);else{if(!this.largeBigIntToFloat)throw new RangeError(e+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");hy[xy++]=203,fy.setFloat64(xy,Number(e))}xy+=8}else if("undefined"===r)this.encodeUndefinedAsNil?hy[xy++]=192:(hy[xy++]=212,hy[xy++]=0,hy[xy++]=0);else{if("function"!==r)throw new Error("Unknown type: "+r);x(this.writeFunction&&this.writeFunction())}},b=!1===this.useRecords?this.variableMapSize?e=>{let t,n=Object.keys(e),r=n.length;r<16?hy[xy++]=128|r:r<65536?(hy[xy++]=222,hy[xy++]=r>>8,hy[xy++]=255&r):(hy[xy++]=223,fy.setUint32(xy,r),xy+=4);for(let i=0;i<r;i++)x(t=n[i]),x(e[t])}:(e,n)=>{hy[xy++]=222;let r=xy-t;xy+=2;let i=0;for(let t in e)(n||e.hasOwnProperty(t))&&(x(t),x(e[t]),i++);hy[r+++t]=i>>8,hy[r+t]=255&i}:e=>{let t,n=Object.keys(e),o=i.transitions||(i.transitions=Object.create(null)),a=0;for(let r=0,i=n.length;r<i;r++){let e=n[r];t=o[e],t||(t=o[e]=Object.create(null),a++),o=t}let s=o[Sy];if(s)s>=96&&f?(hy[xy++]=96+(31&(s-=96)),hy[xy++]=s>>5):hy[xy++]=s;else{s=i.nextId,s||(s=64),s<p&&this.shouldShareStructure&&!this.shouldShareStructure(n)?(s=i.nextOwnId,s<m||(s=p),i.nextOwnId=s+1):(s>=m&&(s=p),i.nextId=s+1);let e=n.highByte=s>=96&&f?s-96>>5:-1;o[Sy]=s,i[s-64]=n,s<p?(n.isShared=!0,i.sharedLength=s-63,r=!0,e>=0?(hy[xy++]=96+(31&s),hy[xy++]=e):hy[xy++]=s):(e>=0?(hy[xy++]=213,hy[xy++]=114,hy[xy++]=96+(31&s),hy[xy++]=e):(hy[xy++]=212,hy[xy++]=114,hy[xy++]=s),a&&(v+=y*a),g.length>=h&&(g.shift()[Sy]=0),g.push(o),x(n))}for(let r=0,i=n.length;r<i;r++)x(e[n[r]])},w=e=>{let n;if(e>16777216){if(e-t>yy)throw new Error("Packed buffer would be larger than maximum buffer size");n=Math.min(yy,4096*Math.round(Math.max((e-t)*(e>67108864?1.25:2),4194304)/4096))}else n=1+(Math.max(e-t<<2,hy.length-1)>>12)<<12;let r=new gy(n);return fy=new DataView(r.buffer,0,n),hy.copy?hy.copy(r,0,t,e):r.set(hy.slice(t,e)),xy-=t,t=0,py=r.length-10,hy=r}}useBuffer(e){hy=e,fy=new DataView(hy.buffer,hy.byteOffset,hy.byteLength),xy=0}};function Ay(e,t,n,r){let i=e.byteLength;if(i+1<256){var{target:o,position:a}=n(4+i);o[a++]=199,o[a++]=i+1}else if(i+1<65536){var{target:o,position:a}=n(5+i);o[a++]=200,o[a++]=i+1>>8,o[a++]=i+1&255}else{var{target:o,position:a,targetView:s}=n(7+i);o[a++]=201,s.setUint32(a,i+1),a+=4}o[a++]=116,o[a++]=t,o.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a)}function Ey(e,t){let n=e.byteLength;var r,i;if(n<256){var{target:r,position:i}=t(n+2);r[i++]=196,r[i++]=n}else if(n<65536){var{target:r,position:i}=t(n+3);r[i++]=197,r[i++]=n>>8,r[i++]=255&n}else{var{target:r,position:i,targetView:o}=t(n+5);r[i++]=198,o.setUint32(i,n),i+=4}r.set(e,i)}function Cy(e,t,n,r){let i=e.length;switch(i){case 1:t[n++]=212;break;case 2:t[n++]=213;break;case 4:t[n++]=214;break;case 8:t[n++]=215;break;case 16:t[n++]=216;break;default:i<256?(t[n++]=199,t[n++]=i):i<65536?(t[n++]=200,t[n++]=i>>8,t[n++]=255&i):(t[n++]=201,t[n++]=i>>24,t[n++]=i>>16&255,t[n++]=i>>8&255,t[n++]=255&i)}return t[n++]=r,t.set(e,n),n+=i}function My(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");dy.unshift(e.Class),uy.unshift(e)}!function(e){e.unpack?Tv[e.type]=e.unpack:Tv[e.type]=e}(e)}dy=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,Dv],uy=[{pack(e,t,n){let r=e.getTime()/1e3;if((this.useTimestamp32||0===e.getMilliseconds())&&r>=0&&r<4294967296){let{target:e,targetView:n,position:i}=t(6);e[i++]=214,e[i++]=255,n.setUint32(i,r)}else if(r>0&&r<17179869184){let{target:n,targetView:i,position:o}=t(10);n[o++]=215,n[o++]=255,i.setUint32(o,4e6*e.getMilliseconds()+(r/1e3/4294967296>>0)),i.setUint32(o+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return t(0),n(this.onInvalidDate());let{target:e,targetView:r,position:i}=t(3);e[i++]=212,e[i++]=255,e[i++]=255}else{let{target:n,targetView:i,position:o}=t(15);n[o++]=199,n[o++]=12,n[o++]=255,i.setUint32(o,1e6*e.getMilliseconds()),i.setBigInt64(o+4,BigInt(Math.floor(r)))}}},{pack(e,t,n){let r=Array.from(e),{target:i,position:o}=t(this.structuredClone?3:0);this.structuredClone&&(i[o++]=212,i[o++]=115,i[o++]=0),n(r)}},{pack(e,t,n){let{target:r,position:i}=t(this.structuredClone?3:0);this.structuredClone&&(r[i++]=212,r[i++]=101,r[i++]=0),n([e.name,e.message])}},{pack(e,t,n){let{target:r,position:i}=t(this.structuredClone?3:0);this.structuredClone&&(r[i++]=212,r[i++]=120,r[i++]=0),n([e.source,e.flags])}},{pack(e,t){this.structuredClone?Ay(e,16,t):Ey(my?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let n=e.constructor;n!==vy&&this.structuredClone?Ay(e,ry.indexOf(n.name),t):Ey(e,t)}},{pack(e,t){let{target:n,position:r}=t(1);n[r]=193}}];var Ty,Py=new _y({useRecords:!1}),{NEVER:Dy,ALWAYS:ky,DECIMAL_ROUND:Oy,DECIMAL_FIT:Ry}=(Py.pack,Py.pack,{NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4}),Iy=512,Ly=1024,Ny=new _y({structuredClone:!0});function jy(e){if(Tg(e))return e;if(Array.isArray(e))return e.map(jy);if("object"==typeof e&&null!==e){let t={};for(let n of Object.keys(e).sort())t[n]=jy(e[n]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}return e}My({Class:Ag.prototype.constructor,type:1,write:e=>({...e}),read:e=>(Object.setPrototypeOf(e,Ag.prototype),e)}),My({Class:jg.prototype.constructor,type:2,write:e=>[...e],read:e=>(Object.setPrototypeOf(e,jg.prototype),e)}),My({Class:Og.prototype.constructor,type:3,write:e=>[...e],read:e=>(Object.setPrototypeOf(e,Og.prototype),e)}),My({Class:hv.prototype.constructor,type:4,write:e=>e.id,read:e=>new hv(e)}),My({Class:fv.prototype.constructor,type:5,write:e=>e.data,read:e=>new fv(e)}),My({Class:Bg.prototype.constructor,type:6,write:e=>({...e}),read:e=>(Object.setPrototypeOf(e,Bg.prototype),e)}),(e=>{function t(e){return Ny.pack(e)}e.serialize=t,e.deserialize=function(e){return Ny.unpack(e)},e.checksum=function(e){return function(e){var t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e[n],t&=t;return t}(t(jy(e))).toString()}})(Ty||(Ty={}));var By,Fy,zy,Uy,Gy,Vy,Hy,Wy,qy,Yy,Xy,Qy,Ky,Zy,Jy,$y,ex,tx,nx,rx,ix,ox,ax,sx,lx,cx,ux,dx,hx={LookAt:[],Follow:[],MouseHover:["Transition"],Scroll:["Transition"],Start:["Transition","Audio"],Conditional:["Transition","Audio"],MouseDown:["Transition","Audio","Link"],MouseUp:["Transition","Audio","Link"],KeyDown:["Transition","Audio","Link"],KeyUp:["Transition","Audio","Link"],GameControl:["Transition","Audio"],Collision:["Transition","Audio"]};(e=>{e.is=function(e){return"MouseDown"===e.type||"MouseUp"===e.type||"KeyDown"===e.type||"KeyUp"===e.type},e.defaultData=function(e){return"MouseDown"===e||"MouseUp"===e?{type:e,toggle:!1,actions:new jg}:{type:e,key:void 0,toggle:!1,actions:new jg}}})(By||(By={})),(e=>{e.propertyDefaultData=function(e){return{type:"Property",value:[null!==e&&void 0!==e?e:null,"position","x"]}},e.valueDefaultData={type:"Literal",value:0}})(Fy||(Fy={})),(e=>{e.comparisonDefaultData=function(e){return{type:"Comparison",operator:"==",lOperand:Fy.propertyDefaultData(e),rOperand:{...Fy.valueDefaultData}}},e.distanceDefaultData=function(e){return{type:"Distance",toObject:null!==e&&void 0!==e?e:null,fromObject:null!==e&&void 0!==e?e:null,distance:200}},e.stateDefaultData=function(e,t){return{type:"State",object:null!==e&&void 0!==e?e:null,state:null!==t&&void 0!==t?t:null}}})(zy||(zy={})),(e=>{e.is=function(e){return"Conditional"===e.type},e.defaultData=function(e){return{type:"Conditional",inActions:new jg,outActions:new jg,condition:zy.distanceDefaultData(e)}}})(Uy||(Uy={})),(e=>{e.defaultData={type:"Follow"}})(Gy||(Gy={})),(e=>{e.defaultData=function(){return{type:"LookAt",distance:1e3}}})(Vy||(Vy={})),(e=>{e.is=function(e){return"MouseHover"===e.type},e.defaultData=function(){return{type:"MouseHover",actions:new jg}}})(Hy||(Hy={})),(e=>{e.is=function(e){return"Scroll"===e.type},e.defaultData=function(){return{type:"Scroll",steps:100,actions:new jg}}})(Wy||(Wy={})),(e=>{e.is=function(e){return"Start"===e.type},e.defaultData=function(){return{type:"Start",actions:new jg}}})(qy||(qy={})),(e=>{e.is=function(e){return"Collision"===e.type},e.defaultData=function(){return{type:"Collision",toggle:!1,target:"character",actions:new jg}}})(Yy||(Yy={})),(e=>{e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]},e.lerp=function(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}})(Xy||(Xy={})),(e=>{e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.add=function(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]},e.sub=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},e.lerp=function(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n,e[2]+(t[2]-e[2])*n]}})(Qy||(Qy={})),(e=>{e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.lerp=function(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n,e[2]+(t[2]-e[2])*n,e[3]+(t[3]-e[3])*n]}})(Ky||(Ky={})),(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e.isEqual=function(e,t){for(let n=0;n<16;n++)if(e[n]!==t[n])return!1;return!0},e.simplify=function(t){return null!==t&&void 0!==t?t:e.identity},e.applyMatrix4=function(e,t){let n=t.slice(0);for(var r=0,i=t.length;r<i;r+=3){let i=e[3]*t[r]+e[7]*t[r+1]+e[11]*t[r+2]+e[15];n[r]=(e[0]*t[r]+e[4]*t[r+1]+e[8]*t[r+2]+e[12])/i,n[r+1]=(e[1]*t[r]+e[5]*t[r+1]+e[9]*t[r+2]+e[13])/i,n[r+2]=(e[2]*t[r]+e[6]*t[r+1]+e[10]*t[r+2]+e[14])/i}return n}})(Zy||(Zy={})),(e=>{e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0},e.toRgb255a1=function(e){return{r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b),a:1}},e.clone=function(e){return{r:e.r,g:e.g,b:e.b}},e.fromHex=function(e){return{r:((e=Math.floor(e))>>16&255)/255,g:(e>>8&255)/255,b:(255&e)/255}},e.equals=function(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b},e.lerp=function(e,t,n){return{r:e.r+(t.r-e.r)*n,g:e.g+(t.g-e.g)*n,b:e.b+(t.b-e.b)*n}}})(Jy||(Jy={})),(e=>{e.white={...Jy.white,a:1},e.transparent={...Jy.white,a:0},e.from0to1=function(e){return{r:e[0],g:e[1],b:e[2],a:e[3]}},e.fromHexAndA=function(e,t){return{...Jy.fromHex(e),a:t}},e.toRgb255a1=function(e){return{r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b),a:e.a}},e.equals=function(e,t){return Jy.equals(e,t)&&e.a===t.a},e.lerp=function(e,t,n){return{r:e.r+(t.r-e.r)*n,g:e.g+(t.g-e.g)*n,b:e.b+(t.b-e.b)*n,a:e.a+(t.a-e.a)*n}}})($y||($y={})),(e=>{e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}})(ex||(ex={})),(e=>{e.defaultData={mass:1,stiffness:80,damping:10,velocity:0}})(tx||(tx={})),(e=>{e.defaultData={control1:[.5,.05],control2:[.1,.3]}})(nx||(nx={})),(e=>{e.all=["PerspectiveCamera","OrthographicCamera"],e.is=function(t){return e.all.includes(t)}})(rx||(rx={})),(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:5,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset},e.getZoom=function(e){return"PerspectiveCamera"===e.type?e.perspective.zoom:e.orthographic.zoom}})(ix||(ix={})),(e=>{e.defaultData=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return{type:"radial",hideBase:!1,count:3,radial:{radius:2*Math.max(e[0],e[1]),start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},linear:{scale:[1,1,1],rotation:[0,0,0],position:[e[0]+e[0]*t,0,0]},grid:{count:[2,2,2],size:e.map((e=>e*(1+t))),useCenter:!0}}}})(ox||(ox={})),(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focalLength:2,focusDistance:2,bokehScale:2},noise:{...t,blendFunction:16}}})(ax||(ax={})),(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"],e.is=function(t){return e.all.includes(t)}})(sx||(sx={})),(e=>{e.defaultData=function(e){return function(e){if("PointLight"===e)return{type:e,color:$y.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:1e5};if("SpotLight"===e)return{type:e,color:$y.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,shadowResolution:1024,shadowRadius:1};if("DirectionalLight"===e)return{type:e,color:$y.white,intensity:1,shadows:!0,size:1e3,depth:1e5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}(e)}})(lx||(lx={})),(e=>{e.defaultData={castShadow:!0,receiveShadow:!0},e.equals=function(e,t){return e.castShadow===t.castShadow&&e.receiveShadow===t.receiveShadow}})(cx||(cx={})),(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0},e.equals=function(e,t){return e.flatShading===t.flatShading&&e.side===t.side&&e.wireframe===t.wireframe}})(ux||(ux={})),(e=>{e.defaultData={...ux.defaultData,...cx.defaultData,cloner:null,booleanExclude:null}})(dx||(dx={}));var fx,px,mx,gx,vx,yx,xx,bx,wx,Sx,_x,Ax,Ex,Cx,Mx,Tx,Px,Dx,kx,Ox=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],Rx=["wrapping","image"];function Ix(e,t){return Object.setPrototypeOf(e,t),e}(e=>{e.defaultData=function(e,t){return"light"===e&&t?function(e){switch(e){case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",alpha:.6,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}(t):function(e){switch(e){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"texture",projection:0,texture:{image:"image_0",wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:Jy.fromHex(4737101)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Jy.fromHex(6710886),a:1},colorB:{...Jy.fromHex(6710886),a:1},colorC:{...Jy.fromHex(16777215),a:1},colorD:{...Jy.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:$y.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{type:"toon",alpha:1,visible:!0,mode:0,positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:$y.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{type:"outline",alpha:1,visible:!0,mode:0,outlineColor:$y.fromHexAndA(0,1),contourColor:$y.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}(e)}})(fx||(fx={})),(e=>{function t(e){let t=0;for(let n of e.layers)"alpha"in n.data&&"light"!==n.data.type&&"fresnel"!==n.data.type&&(t+=(1-t)*n.data.alpha);return t<1}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"layer1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"layer2",r=new jg;return r.push({fi:0,data:fx.defaultData("light",e),id:t}),r.push({fi:1,data:fx.defaultData("color"),id:n}),{layers:r}}e.isMergable=function(e){return!e.layers.some((e=>"texture"===e.data.type&&0!==e.data.projection||"depth"===e.data.type&&!e.data.isWorldSpace||"noise"===e.data.type||"displace"===e.data.type))&&!t(e)},e.getHash=function(e){let t="";return e.layers.forEach((e=>{Object.entries(e.data).forEach((e=>{let[n,r]=e;t+="".concat(n).concat(r),Array.isArray(r)?r.forEach((e=>t+="".concat(e))):"object"==typeof r?Object.values(r).forEach((e=>{t+="".concat("number"==typeof e?e.toFixed(4):e)})):t+="".concat(r)}))})),t},e.isTransparent=t,e.defaultEmptyData=function(){return{layers:new jg}},e.defaultData=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"layer1",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"layer2";return n("phong",e,t)},e.defaultTwoLayerData=n,e.defaultTwoLayerTextureData=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"phong",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"layer1",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"layer2",i=fx.defaultData("texture");Object.assign(i.texture,{image:e});let o=new jg;return o.push({fi:0,data:i,id:n}),o.push({fi:1,data:fx.defaultData("light",t),id:r}),{layers:o}}})(px||(px={})),(e=>{e.defaultData=function(){return{points:new jg,roundness:0,shapeHoles:[],isClosed:!1}}})(mx||(mx={})),(e=>{e.is2DParametricMesh=function(e){return"PolygonGeometry"===e||"RectangleGeometry"===e||"StarGeometry"===e||"TriangleGeometry"===e||"EllipseGeometry"===e}})(gx||(gx={})),(e=>{e.defaultData=function(e){if("RectangleGeometry"===e)return{width:320,height:320,type:e,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("VectorGeometry"===e)return{width:1,height:1,type:e,subdivisions:12,shape:mx.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("BooleanGeometry"===e)return{type:e,operation:2,width:0,height:0,depth:0,phongAngle:35};if("TextGeometry"===e)return{type:e,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:"",textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};throw new Error("not implemented")}})(vx||(vx={})),(e=>{e.identity={...ex.identity,hiddenMatrix:Zy.identity},e.fromObject=function(e){return{position:e.position,rotation:e.rotation,scale:e.scale,hiddenMatrix:e.hiddenMatrix}},e.merge=function(e,t){return{position:(null===t||void 0===t?void 0:t.position)||e.position,rotation:(null===t||void 0===t?void 0:t.rotation)||e.rotation,scale:(null===t||void 0===t?void 0:t.scale)||e.scale,hiddenMatrix:(null===t||void 0===t?void 0:t.hiddenMatrix)||e.hiddenMatrix}},e.diff=function(e,t){return{position:Qy.isEqual(e.position,t.position)?null:t.position,rotation:Qy.isEqual(e.rotation,t.rotation)?null:t.rotation,scale:Qy.isEqual(e.scale,t.scale)?null:t.scale,hiddenMatrix:Zy.isEqual(e.hiddenMatrix,t.hiddenMatrix)?null:t.hiddenMatrix}}})(yx||(yx={})),(e=>{e.defaultData={fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]}})(xx||(xx={})),(e=>{e.defaultData={states:new jg,events:new jg,visible:!0,raycastLock:!1,physics:null,...yx.identity}})(bx||(bx={})),(e=>{e.defaultData={type:"Empty",...bx.defaultData}})(wx||(wx={})),(e=>{e.defaultData={type:"Mesh",...bx.defaultData,...dx.defaultData}})(Sx||(Sx={})),(e=>{e.defaultData={...bx.defaultData,...yx.identity,...ix.defaultData}})(_x||(_x={})),(e=>{e.defaultData=function(e){return{...bx.defaultData,...lx.defaultData(e)}}})(Ax||(Ax={})),(e=>{e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Zy.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:xx.defaultData,states:new jg,events:new jg,...ix.defaultData},e.defaultMeshObject={name:"Rectangle",...bx.defaultData,...Sx.defaultData,geometry:vx.defaultData("RectangleGeometry"),material:px.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...bx.defaultData,...Sx.defaultData,geometry:vx.defaultData("BooleanGeometry"),material:px.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...bx.defaultData,...Sx.defaultData,geometry:vx.defaultData("TextGeometry"),material:px.defaultTwoLayerData("phong","layer1","layer2")}})(Ex||(Ex={})),(e=>{function t(e,t){if(void 0===t)return e;let n={...e};return"material"in n&&"material"in t&&t.material&&(n.material=lv(n.material,(e=>{if("string"!=typeof e)for(let[n,r]of Object.entries(t.material.layers)){let t=e.layers.data(n);t&&ug(t,r)}})).data),n.materials&&t.materials&&(n.materials=lv(n.materials,(e=>{for(let o=0;o<n.materials.length;o++){let n=t.materials[o];if("string"!=typeof n)for(let[t,a]of Object.entries(n.layers)){var r,i;let n=null===(r=e[o])||void 0===r||null===(i=r.layers)||void 0===i?void 0:i.data(t);n&&ug(n,a)}}})).data),n}e.patchMaterialState=t,e.patch=function(e,n){if(void 0===n)return e;let r={...e};if(Object.assign(r,yx.merge(r,n)),rx.is(e.type)){var i,o;r.orthographic={...r.orthographic},r.perspective={...r.perspective};let e=n;void 0!==(null===(i=e.orthographic)||void 0===i?void 0:i.zoom)&&(r.orthographic.zoom=e.orthographic.zoom),void 0!==(null===(o=e.perspective)||void 0===o?void 0:o.zoom)&&(r.perspective.zoom=e.perspective.zoom),void 0!==e.isUpVectorFlipped&&(r.isUpVectorFlipped=e.isUpVectorFlipped),void 0!==e.targetOffset&&(r.targetOffset=e.targetOffset)}else if("Mesh"===e.type)r.geometry={...r.geometry},Object.assign(r.geometry,n.geometry),r=t(r,n);else if(sx.is(e.type)){let e=n;void 0!==e.intensity&&(r.intensity=e.intensity),void 0!==e.color&&("string"==typeof e.color?r.color=e.color:r.color=Jy.clone(e.color))}return r}})(Cx||(Cx={})),(e=>{e.defaultData={enabled:!1,useBackgroundColor:!1,color:Jy.white,near:.1,far:2e3}})(Mx||(Mx={})),(e=>{e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3}})(Tx||(Tx={})),(e=>{e.defaultData={orbitControls:Tx.defaultData,playCamera:null,withBackground:!0,preventScroll:!1,settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:1,stopMode:"manual",duration:5e3},web:{compress:!0,preset:1,preload:!0}},stopRaycast:!0,joystickSizeAndXYOffset:Array(12).fill(0).map(((e,t)=>{let n=0,r=0;return t<5?r=-30:t<10&&(r=30),0===t||10===t||5===t?n=30:(4===t||11===t||9===t)&&(n=-30),[120,[n,r],"show"]})),gameControlObject:null}})(Px||(Px={})),(e=>{e.defaultData={ambientLight:{enabled:!0,type:"HemisphereLight",color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75,depth:100,groundColor:{r:.5098039215686274,g:.5098039215686274,b:.5098039215686274},softShadows:!0,softShadowQuality:"low"},usePhysics:!1,gravity:-10,pixelsPerMeter:200}})(Dx||(Dx={})),(e=>{e.defaultData={backgroundColor:$y.fromHexAndA(1908256,1),postprocessing:ax.defaultData,fog:Mx.defaultData,objects:function(){let e=new Og,t=Ex.defaultMeshObject;return e.push({fi:-1,data:{...Ax.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7},id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),e.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:t,children:[]}),e}(),environment:Dx.defaultData,publish:Px.defaultData},e.emptyData=function(){return{backgroundColor:$y.fromHexAndA(1908256,1),postprocessing:ax.defaultData,fog:Mx.defaultData,objects:new Og,environment:Dx.defaultData,publish:Px.defaultData}}})(kx||(kx={}));!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().includes(" electron/");var Lx=!(typeof window>"u")&&window.navigator.platform.toUpperCase().includes("MAC"),Nx=!(typeof window>"u")&&(/iPad|iPhone|iPod/.test(window.navigator.userAgent)||Lx&&"ontouchend"in document),jx=!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Bx=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0),Fx=(()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)})(),zx=Number((()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]})());function Ux(e){return Lx?e.metaKey:e.ctrlKey}var Gx,Vx=[],Hx={},Wx={},qx={};function Yx(e){Vx.includes(e)||Vx.push(e)}function Xx(e){delete Hx[e.pointerId];for(let t=0;t<Vx.length;t++)if(Vx[t].pointerId===e.pointerId){Vx.splice(t,1);break}}function Qx(e){if("touch"!==e.pointerType)return;let t=Hx[e.pointerId];void 0===t&&(t={x:0,y:0},Hx[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function Kx(e){let t=e.pointerId===Vx[0].pointerId?Vx[1]:Vx[0];return Hx[t.pointerId]}function Zx(e){Wx[e.key]=!0,qx[e.key]=void 0===qx[e.key]?1:qx[e.key]+1}function Jx(e){if(Lx&&Wx.Meta)for(let t in Wx)Wx[t]=!1;else Wx[e.key]=!1;qx={}}function $x(e){e.layers.forEach((e=>{if("depth"===e.type&&void 0!==e.colorA){let t=e.colorA,n=e.colorB,r=[[t.r,t.g,t.b,t.a],[n.r,n.g,n.b,n.a]],i=[0,1];for(let e=2;e<10;e++)r.push(r[1]),i.push(1);let o={...bg(cv(e),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,e.near),far:Math.max(0,e.far),colors:r,steps:i,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(e,o)}else if("depth"===e.type&&1===e.gradientType&&(e.near<0||e.far<0)){let t={...cv(e),near:Math.max(e.near,0),far:Math.max(e.far,0)};Object.assign(e,t)}}))}function eb(e,t){Object.values(e.shared.materials).forEach((e=>t(e)))}function tb(e,t){e.scene.objects.traverse(((e,n)=>{"materials"in n?n.materials.forEach((e=>{"string"!=typeof e&&t(e)})):"material"in n&&"string"!=typeof n.material&&t(n.material)}))}function nb(e){void 0===e.layers&&Object.assign(e,px.defaultTwoLayerData("lambert"))}function rb(e){!e.layers||e.layers.forEach((e=>{if("depth"===e.type&&10===e.colors.length){let t=[...e.colors];t.push(e.colors[9]);let n=[...e.steps];n.push(e.steps[9]);let r={...cv(e),colors:t,steps:n};Object.assign(e,r)}}))}function ib(e){e.scene.objects.traverse(((e,t)=>{"materials"in t?t.materials.forEach((e=>{"string"!=typeof e&&rb(e)})):"material"in t&&"string"!=typeof t.material&&rb(t.material)})),Object.values(e.shared.materials).forEach((e=>rb(e)))}function ob(e){e.layers&&e.layers.forEach((e=>{"depth"===e.type&&void 0!==e.num&&(e.colors=e.colors.slice(0,e.num),e.steps=e.steps.slice(0,e.num),delete e.num)}))}function ab(e){var t;let n=null===(t=e.layers.find((e=>"light"===e.type)))||void 0===t?void 0:t.data;if("basic"===(null===n||void 0===n?void 0:n.category)){let e=fx.defaultData("light","phong"),t=n;Object.assign(t,e),t.visible=!1}}(e=>{e.defaultColors=function(){let e={"89b10010-844c-11ec-a8a3-0242ac120002":{r:.5,g:.5,b:.5,a:1,name:"Default Color"}};return Ix(e,Ag.prototype)},e.emptyData=function(){return{materials:new Ag,images:new Ag,colors:new Ag,audios:new Ag,fonts:new Ag,penumbraSize:[.5,.5,.5]}}})(Gx||(Gx={}));var sb,lb;function cb(e){var t;let n=null!==(t=e.schema)&&void 0!==t?t:0;22!==n&&(console.warn("updating from ",n,"to ",22),n<1&&(tb(e,$x),eb(e,$x),e.schema=1),n<2&&(function(e){Object.assign(e.scene.publish,{orbitControls:{...Tx.defaultData,...cv(e.scene.publish.orbitControls)}})}(e),e.schema=2),n<3&&(function(e){function t(e){if(e.layers)for(let t of Object.values(e.layers))if(t)for(let[e,n]of Object.entries(t))if((Ox.includes(e)||"boolean"==typeof n)&&delete t[e],"texture"===e)for(let[t,r]of Object.entries(n))(Rx.includes(t)||"boolean"==typeof r)&&delete n[t]}e.scene.objects.traverse(((e,n)=>{n.states.forEach((e=>{let n=e;n.material?t(n.material):n.materials&&n.materials.forEach((e=>{t(e)}))}))}))}(e),e.schema=3),n<4&&(function(e){e.scene.publish.withBackground=!0}(e),e.schema=4),n<5&&(function(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1}}(e),e.schema=5),n<6&&(function(e){e.scene.objects.traverse(((e,t)=>{let n=t.cloner;n&&(n.radial.scale=n.radial.scale.map((e=>e+1)),n.linear.scale=n.linear.scale.map((e=>e+1)))}))}(e),e.schema=6),n<7&&(function(e){e.scene.objects.traverse(((e,t)=>{let n=t.geometry;n&&("DodecahedronGeometry"===n.type||"IcosahedronGeometry"===n.type)&&(n.detail=Math.round(n.detail))}))}(e),e.schema=7),n<8&&(function(e){e.scene.objects.traverse(((t,n)=>{var r;let i=e.scene.objects.parent(t);"Mesh"===n.type&&(!i||"BooleanGeometry"!==(null===(r=e.scene.objects.data(i).geometry)||void 0===r?void 0:r.type))&&(n.booleanExclude=null)}))}(e),e.schema=8),n<9&&(ib(e),e.schema=9),n<10&&(function(e){e.scene.objects.traverse(((e,t)=>{"Mesh"===t.type&&("BooleanGeometry"===t.geometry.type||"SubdivGeometry"===t.geometry.type)&&(t.geometry.phongAngle=35)}))}(e),e.schema=10),n<11&&(function(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse(((e,t)=>{("DirectionalLight"===t.type||"SpotLight"===t.type)&&(t.shadowResolution=1024,t.shadowRadius=1,t.depth=1e5)})),e.shared.penumbraSize=new Array(5).fill(.5)}(e),e.schema=11),n<12&&(ib(e),e.schema=12),n<13&&(function(e){e.shared.audios=Ix({},Ag.prototype)}(e),e.schema=13),n<14&&(function(e){let t=e.shared.materials;Object.entries(t).forEach((e=>{let[n,r]=e;if(!r.layers){let e={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[n]:e})}}))}(e),e.schema=14),n<15&&(function(e){Object.entries(cv(e.shared.images)).filter((e=>!1===e[1].asset)).map((e=>e[0])).forEach((t=>{delete e.shared.images[t]})),Object.entries(cv(e.shared.audios)).filter((e=>!1===e[1].asset)).map((e=>e[0])).forEach((t=>{delete e.shared.audios[t]}))}(e),e.schema=15),n<16&&(function(e){e.scene.publish.settings.web.preload=!1}(e),e.schema=16),n<17&&(tb(e,ob),eb(e,ob),e.schema=17),n<18&&(tb(e,nb),eb(e,nb),e.schema=18),n<19&&(function(e){Object.assign(e.scene.publish.settings,{video:{...Px.defaultData.settings.video,...cv(e.scene.publish.settings.video)}})}(e),e.schema=19),n<20&&(function(e){e.shared.fonts=Ix({},Ag.prototype)}(e),function(e){let t=[];e.scene.objects.traverse(((n,r)=>{let i=r;if("TextFrame"===i.type){let r=px.defaultTwoLayerData("phong"),o="string"==typeof i.color?e.shared.colors[i.color]:i.color;r.layers[1].data.color={r:o.r,g:o.g,b:o.b},r.layers[1].data.alpha=i.alpha;let a=function(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}(i.font);void 0===e.shared.fonts[a]&&(e.shared.fonts[a]={name:a});let s={name:i.name,...bx.defaultData,...Sx.defaultData,flatShading:!1,wireframe:!1,geometry:{...vx.defaultData("TextGeometry"),width:i.width,height:i.height,font:a,depth:0,horizontalAlign:i.horizontalAlign,verticalAlign:i.verticalAlign,fontSize:1.40625*i.fontSize,lineHeight:i.lineHeight/1.40625,letterSpacing:i.letterSpacing-1,text:i.text,textTransform:i.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:r,states:cv(i.states),events:cv(i.events),visible:i.visible,raycastLock:i.raycastLock,position:i.position,rotation:i.rotation,scale:i.scale,hiddenMatrix:i.hiddenMatrix},l=cv(e.scene.objects).parent(n);e.scene.objects.insertAfter(null!==l&&void 0!==l?l:null,n,[{id:n+"new",data:s,children:[]}]),t.push(n)}})),t.forEach((t=>{e.scene.objects.delete(t)}))}(e),e.schema=20),n<21&&(function(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse(((e,n)=>{n.events.forEach((e=>{if(t[Number(e.type)])if(Object.assign(e,{type:t[Number(e.type)]}),"Audio"===e.type&&"audioEvent"in e&&(Object.assign(e,{playAudio:e.audioEvent}),delete e.audioEvent),"GameControl"===e.type)Object.assign(e,{gameActions:{idle:new jg,move:new jg,jump:new jg}});else{let t=new jg;Object.assign(e,{actions:t}),("MouseDown"===e.type||"MouseUp"===e.type||"KeyDown"===e.type||"KeyUp"===e.type)&&"url"in e&&t.push({fi:0,id:Nn.generateUUID(),data:{type:"Link",url:e.url,delay:0}}),"targets"in e&&(e.targets.forEach(((e,n,r)=>{let i={easing:e.easing,duration:e.duration};6===e.easing?Object.assign(i,bg(e,"mass","stiffness","damping","velocity")):5===e.easing&&Object.assign(i,{control1:{...e.control1},control2:{...e.control2}});let o={repeat:e.repeat?-1:0,delay:e.delay,delayDirection:e.delayDirection,direction:e.cycle&&e.rewind?"pingpong-rewind":e.cycle?"pingpong":"normal"},a={state:e.state,...o,...i},s={allowSlerp:!0,type:"Transition",object:e.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new jg({fi:0,id:Nn.generateUUID(),data:{state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4}},{fi:1,id:Nn.generateUUID(),data:a})};t.push({fi:r,id:n,data:s})})),delete e.targets)}}))}))}(e),function(e){e.scene.objects.traverse(((e,t)=>{function n(e,n){let r=new jg,i=[];if(t.events.forEach(((e,t,o)=>{if("Audio"===e.type&&e.trigger===n){let n;i.push(t),"play"===e.interaction?n={...bg(e,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in e?e.after:void 0,toggle:"after"in e?e.toggle:void 0,type:"Audio"}:("pause"===e.interaction||"stop"===e.interaction)&&(n={...bg(e,"interaction","delay","object","playAudio"),type:"Audio"}),n&&r.push({fi:o,id:t,data:n})}})),i.forEach((e=>t.events.delete(e))),r.length){var o;let n=null===(o=t.events.find((t=>t.type===e)))||void 0===o?void 0:o.data;n?"actions"in n&&n.actions.insertBefore(null,r):t.events.insertBefore(null,[{id:Nn.generateUUID(),data:{type:e,actions:r}}])}}n("Start","start"),n("MouseDown","mouseDown"),n("MouseUp","mouseUp"),n("KeyDown","keyDown"),n("KeyUp","keyUp")}))}(e),e.schema=21),n<22&&(function(e){eb(e,ab),tb(e,ab)}(e),e.schema=22))}function ub(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),o={},a={},s=e[0].morphTargetsRelative,l=new zi,c=0;for(let u=0;u<e.length;++u){let d=e[u],h=0;if(n!==(null!==d.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let e in d.attributes){if(!r.has(e))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+e+'" attribute exists among all geometries, or in none of them.'),null;void 0===o[e]&&(o[e]=[]),o[e].push(d.attributes[e]),h++}if(h!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(s!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let e in d.morphAttributes){if(!i.has(e))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===a[e]&&(a[e]=[]),a[e].push(d.morphAttributes[e])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(d.userData),t){let e;if(n)e=d.index.count;else{if(void 0===d.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;e=d.attributes.position.count}l.addGroup(c,e,u),c+=e}}if(n){let t=0,n=[];for(let r=0;r<e.length;++r){let i=e[r].index;for(let e=0;e<i.count;++e)n.push(i.getX(e)+t);t+=e[r].attributes.position.count}l.setIndex(n)}for(let u in o){let e=db(o[u]);if(!e)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,e)}for(let u in a){let e=a[u][0].length;if(0===e)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let t=0;t<e;++t){let e=[];for(let r=0;r<a[u].length;++r)e.push(a[u][r][t]);let n=db(e);if(!n)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(n)}}return l}function db(e){let t,n,r,i=0;for(let s=0;s<e.length;++s){let o=e[s];if(o.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=o.array.constructor),t!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=o.itemSize),n!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===r&&(r=o.normalized),r!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=o.array.length}let o=new t(i),a=0;for(let s=0;s<e.length;++s)o.set(e[s].array,a),a+=e[s].array.length;return new Pi(o,n,r)}(e=>{e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="}})(sb||(sb={})),(e=>{e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",speedTranslate:1e3,speedRotate:100,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","\u25b2"],["rotPosY","\u25c0"],["rotNegX","\u25bc"],["rotNegY","\u25b6"],["jump","Space"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:-3e3,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new jg,move:new jg,jump:new jg}}})(lb||(lb={}));var hb=Math.pow(2,-24),fb=class{constructor(){}};function pb(e,t,n){return n.min.x=t[e],n.min.y=t[e+1],n.min.z=t[e+2],n.max.x=t[e+3],n.max.y=t[e+4],n.max.z=t[e+5],n}function mb(e){let t=-1,n=-1/0;for(let r=0;r<3;r++){let i=e[r+3]-e[r];i>n&&(n=i,t=r)}return t}function gb(e,t){t.set(e)}function vb(e,t,n){let r,i;for(let o=0;o<3;o++){let a=o+3;r=e[o],i=t[o],n[o]=r<i?r:i,r=e[a],i=t[a],n[a]=r>i?r:i}}function yb(e,t,n){for(let r=0;r<3;r++){let i=t[e+2*r],o=t[e+2*r+1],a=i-o,s=i+o;a<n[r]&&(n[r]=a),s>n[r+3]&&(n[r+3]=s)}}function xb(e){let t=e[3]-e[0],n=e[4]-e[1],r=e[5]-e[2];return 2*(t*n+n*r+r*t)}function bb(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=1/0,a=1/0,s=1/0,l=-1/0,c=-1/0,u=-1/0,d=1/0,h=1/0,f=1/0,p=-1/0,m=-1/0,g=-1/0,v=null!==i;for(let y=6*t,x=6*(t+n);y<x;y+=6){let t=e[y+0],n=e[y+1],r=t-n,i=t+n;r<o&&(o=r),i>l&&(l=i),v&&t<d&&(d=t),v&&t>p&&(p=t);let x=e[y+2],b=e[y+3],w=x-b,S=x+b;w<a&&(a=w),S>c&&(c=S),v&&x<h&&(h=x),v&&x>m&&(m=x);let _=e[y+4],A=e[y+5],E=_-A,C=_+A;E<s&&(s=E),C>u&&(u=C),v&&_<f&&(f=_),v&&_>g&&(g=_)}r[0]=o,r[1]=a,r[2]=s,r[3]=l,r[4]=c,r[5]=u,v&&(i[0]=d,i[1]=h,i[2]=f,i[3]=p,i[4]=m,i[5]=g)}function wb(e,t,n,r,i){let o=n,a=n+r-1,s=i.pos,l=2*i.axis;for(;;){for(;o<=a&&t[6*o+l]<s;)o++;for(;o<=a&&t[6*a+l]>=s;)a--;if(!(o<a))return o;for(let n=0;n<3;n++){let r=e[3*o+n];e[3*o+n]=e[3*a+n],e[3*a+n]=r;let i=t[6*o+2*n+0];t[6*o+2*n+0]=t[6*a+2*n+0],t[6*a+2*n+0]=i;let s=t[6*o+2*n+1];t[6*o+2*n+1]=t[6*a+2*n+1],t[6*a+2*n+1]=s}o++,a--}}var Sb=32,_b=(e,t)=>e.candidate-t.candidate,Ab=new Array(Sb).fill().map((()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0}))),Eb=new Float32Array(6);function Cb(e,t,n,r,i,o){let a=-1,s=0;if(0===o)a=mb(t),-1!==a&&(s=(t[a]+t[a+3])/2);else if(1===o)a=mb(e),-1!==a&&(s=function(e,t,n,r){let i=0;for(let o=t,a=t+n;o<a;o++)i+=e[6*o+2*r];return i/n}(n,r,i,a));else if(2===o){let o=xb(e),l=1.25*i,c=6*r,u=6*(r+i);for(let e=0;e<3;e++){let r=t[e],d=(t[e+3]-r)/Sb;if(i<8){let t=[...Ab];t.length=i;let r=0;for(let i=c;i<u;i+=6,r++){let o=t[r];o.candidate=n[i+2*e],o.count=0;let{bounds:a,leftCacheBounds:s,rightCacheBounds:l}=o;for(let e=0;e<3;e++)l[e]=1/0,l[e+3]=-1/0,s[e]=1/0,s[e+3]=-1/0,a[e]=1/0,a[e+3]=-1/0;yb(i,n,a)}t.sort(_b);let d=i;for(let e=0;e<d;e++){let n=t[e];for(;e+1<d&&t[e+1].candidate===n.candidate;)t.splice(e+1,1),d--}for(let i=c;i<u;i+=6){let r=n[i+2*e];for(let e=0;e<d;e++){let o=t[e];r>=o.candidate?yb(i,n,o.rightCacheBounds):(yb(i,n,o.leftCacheBounds),o.count++)}}for(let n=0;n<d;n++){let r=t[n],c=r.count,u=i-r.count,d=r.leftCacheBounds,h=r.rightCacheBounds,f=0;0!==c&&(f=xb(d)/o);let p=0;0!==u&&(p=xb(h)/o);let m=1+1.25*(f*c+p*u);m<l&&(a=e,l=m,s=r.candidate)}}else{for(let e=0;e<Sb;e++){let t=Ab[e];t.count=0,t.candidate=r+d+e*d;let n=t.bounds;for(let e=0;e<3;e++)n[e]=1/0,n[e+3]=-1/0}for(let i=c;i<u;i+=6){let t=~~((n[i+2*e]-r)/d);t>=Sb&&(t=31);let o=Ab[t];o.count++,yb(i,n,o.bounds)}let t=Ab[31];gb(t.bounds,t.rightCacheBounds);for(let e=30;e>=0;e--){let t=Ab[e],n=Ab[e+1];vb(t.bounds,n.rightCacheBounds,t.rightCacheBounds)}let h=0;for(let n=0;n<31;n++){let t=Ab[n],r=t.count,c=t.bounds,u=Ab[n+1].rightCacheBounds;0!==r&&(0===h?gb(c,Eb):vb(c,Eb,Eb)),h+=r;let d=0,f=0;0!==h&&(d=xb(Eb)/o);let p=i-h;0!==p&&(f=xb(u)/o);let m=1+1.25*(d*h+f*p);m<l&&(a=e,l=m,s=t.candidate)}}}}else console.warn("MeshBVH: Invalid build strategy value ".concat(o," used."));return{axis:a,pos:s}}function Mb(e,t){function n(e){h&&h(e/f)}function r(t,i,h){let f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!p&&m>=l&&(p=!0,c&&(console.warn("MeshBVH: Max depth of ".concat(l," reached when generating BVH. Consider increasing maxDepth.")),console.warn(e))),h<=u||m>=l)return n(i+h),t.offset=i,t.count=h,t;let g=Cb(t.boundingData,f,a,i,h,d);if(-1===g.axis)return n(i+h),t.offset=i,t.count=h,t;let v=wb(s,a,i,h,g);if(v===i||v===i+h)n(i+h),t.offset=i,t.count=h;else{t.splitAxis=g.axis;let e=new fb,n=i,s=v-i;t.left=e,e.boundingData=new Float32Array(6),bb(a,n,s,e.boundingData,o),r(e,n,s,o,m+1);let l=new fb,c=v,u=h-s;t.right=l,l.boundingData=new Float32Array(6),bb(a,c,u,l.boundingData,o),r(l,c,u,o,m+1)}return t}!function(e,t){if(!e.index){let n,r=e.attributes.position.count,i=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;n=r>65535?new Uint32Array(new i(4*r)):new Uint16Array(new i(2*r)),e.setIndex(new Pi(n,1));for(let e=0;e<r;e++)n[e]=e}}(e,t);let i=new Float32Array(6),o=new Float32Array(6),a=function(e,t){let n=e.attributes.position,r=n.array,i=e.index.array,o=i.length/3,a=new Float32Array(6*o),s=n.offset||0,l=3;n.isInterleavedBufferAttribute&&(l=n.data.stride);for(let c=0;c<o;c++){let e=3*c,n=6*c,o=i[e+0]*l+s,u=i[e+1]*l+s,d=i[e+2]*l+s;for(let i=0;i<3;i++){let e=r[o+i],s=r[u+i],l=r[d+i],c=e;s<c&&(c=s),l<c&&(c=l);let h=e;s>h&&(h=s),l>h&&(h=l);let f=(h-c)/2,p=2*i;a[n+p+0]=c+f,a[n+p+1]=f+(Math.abs(c)+f)*hb,c<t[i]&&(t[i]=c),h>t[i+3]&&(t[i+3]=h)}}return a}(e,i),s=e.index.array,l=t.maxDepth,c=t.verbose,u=t.maxLeafTris,d=t.strategy,h=t.onProgress,f=e.index.count/3,p=!1,m=[],g=function(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],n=new Set;for(let i of e.groups)n.add(i.start),n.add(i.start+i.count);let r=Array.from(n.values()).sort(((e,t)=>e-t));for(let i=0;i<r.length-1;i++){let e=r[i],n=r[i+1];t.push({offset:e/3,count:(n-e)/3})}return t}(e);if(1===g.length){let e=g[0],t=new fb;t.boundingData=i,function(e,t,n,r){let i=1/0,o=1/0,a=1/0,s=-1/0,l=-1/0,c=-1/0;for(let u=6*t,d=6*(t+n);u<d;u+=6){let t=e[u+0];t<i&&(i=t),t>s&&(s=t);let n=e[u+2];n<o&&(o=n),n>l&&(l=n);let r=e[u+4];r<a&&(a=r),r>c&&(c=r)}r[0]=i,r[1]=o,r[2]=a,r[3]=s,r[4]=l,r[5]=c}(a,e.offset,e.count,o),r(t,e.offset,e.count,o),m.push(t)}else for(let v of g){let e=new fb;e.boundingData=new Float32Array(6),bb(a,v.offset,v.count,e.boundingData,o),r(e,v.offset,v.count,o),m.push(e)}return m}var Tb=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let n=1/0,r=-1/0;for(let i=0,o=e.length;i<o;i++){let o=e[i][t];n=o<n?o:n,r=o>r?o:r}this.min=n,this.max=r}setFromPoints(e,t){let n=1/0,r=-1/0;for(let i=0,o=t.length;i<o;i++){let o=t[i],a=e.dot(o);n=a<n?a:n,r=a>r?a:r}this.min=n,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}};Tb.prototype.setFromBox=function(){let e=new ur;return function(t,n){let r=n.min,i=n.max,o=1/0,a=-1/0;for(let s=0;s<=1;s++)for(let n=0;n<=1;n++)for(let l=0;l<=1;l++){e.x=r.x*s+i.x*(1-s),e.y=r.y*n+i.y*(1-n),e.z=r.z*l+i.z*(1-l);let c=t.dot(e);o=Math.min(c,o),a=Math.max(c,a)}this.min=o,this.max=a}}();!function(){let e=new Tb}();var Pb=function(){let e=new ur,t=new ur,n=new ur;return function(r,i,o){let a=r.start,s=e,l=i.start,c=t;n.subVectors(a,l),e.subVectors(r.end,i.start),t.subVectors(i.end,i.start);let u,d,h=n.dot(c),f=c.dot(s),p=c.dot(c),m=n.dot(s),g=s.dot(s)*p-f*f;u=0!==g?(h*f-m*p)/g:0,d=(h+u*f)/p,o.x=u,o.y=d}}(),Db=function(){let e=new jn,t=new ur,n=new ur;return function(r,i,o,a){Pb(r,i,e);let s=e.x,l=e.y;if(s>=0&&s<=1&&l>=0&&l<=1)return r.at(s,o),void i.at(l,a);if(s>=0&&s<=1)return l<0?i.at(0,a):i.at(1,a),void r.closestPointToPoint(a,!0,o);if(l>=0&&l<=1)return s<0?r.at(0,o):r.at(1,o),void i.closestPointToPoint(o,!0,a);{let e,c;e=s<0?r.start:r.end,c=l<0?i.start:i.end;let u=t,d=n;return r.closestPointToPoint(c,!0,t),i.closestPointToPoint(e,!0,n),u.distanceToSquared(c)<=d.distanceToSquared(e)?(o.copy(u),void a.copy(c)):(o.copy(e),void a.copy(d))}}}(),kb=function(){let e=new ur,t=new ur,n=new wo,r=new wu;return function(i,o){let{radius:a,center:s}=i,{a:l,b:c,c:u}=o;if(r.start=l,r.end=c,r.closestPointToPoint(s,!0,e).distanceTo(s)<=a||(r.start=l,r.end=u,r.closestPointToPoint(s,!0,e).distanceTo(s)<=a)||(r.start=c,r.end=u,r.closestPointToPoint(s,!0,e).distanceTo(s)<=a))return!0;let d=o.getPlane(n);if(Math.abs(d.distanceToPoint(s))<=a){let e=d.projectPoint(s,t);if(o.containsPoint(e))return!0}return!1}}();function Ob(e){return Math.abs(e)<1e-15}var Rb=class extends _i{constructor(){super(...arguments),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map((()=>new ur)),this.satBounds=new Array(4).fill().map((()=>new Tb)),this.points=[this.a,this.b,this.c],this.sphere=new Or,this.plane=new wo,this.needsUpdate=!0}intersectsSphere(e){return kb(e,this)}update(){let e=this.a,t=this.b,n=this.c,r=this.points,i=this.satAxes,o=this.satBounds,a=i[0],s=o[0];this.getNormal(a),s.setFromPoints(a,r);let l=i[1],c=o[1];l.subVectors(e,t),c.setFromPoints(l,r);let u=i[2],d=o[2];u.subVectors(t,n),d.setFromPoints(u,r);let h=i[3],f=o[3];h.subVectors(n,e),f.setFromPoints(h,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}};Rb.prototype.closestPointToSegment=function(){let e=new ur,t=new ur,n=new wu;return function(r){let i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,{start:s,end:l}=r,c=this.points,u=1/0;for(let d=0;d<3;d++){let s=(d+1)%3;n.start.copy(c[d]),n.end.copy(c[s]),Db(n,r,e,t),i=e.distanceToSquared(t),i<u&&(u=i,o&&o.copy(e),a&&a.copy(t))}return this.closestPointToPoint(s,e),i=s.distanceToSquared(e),i<u&&(u=i,o&&o.copy(e),a&&a.copy(s)),this.closestPointToPoint(l,e),i=l.distanceToSquared(e),i<u&&(u=i,o&&o.copy(e),a&&a.copy(l)),Math.sqrt(u)}}(),Rb.prototype.intersectsTriangle=function(){let e=new Rb,t=new Array(3),n=new Array(3),r=new Tb,i=new Tb,o=new ur,a=new ur,s=new ur,l=new ur,c=new wu,u=new wu,d=new wu;return function(h){let f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(e.copy(h),e.update(),h=e);let p=this.plane,m=h.plane;if(Math.abs(p.normal.dot(m.normal))>1-1e-10){let e=this.satBounds,a=this.satAxes;n[0]=h.a,n[1]=h.b,n[2]=h.c;for(let t=0;t<4;t++){let i=e[t],o=a[t];if(r.setFromPoints(o,n),i.isSeparated(r))return!1}let s=h.satBounds,l=h.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let n=0;n<4;n++){let e=s[n],i=l[n];if(r.setFromPoints(i,t),e.isSeparated(r))return!1}for(let c=0;c<4;c++){let e=a[c];for(let a=0;a<4;a++){let s=l[a];if(o.crossVectors(e,s),r.setFromPoints(o,t),i.setFromPoints(o,n),r.isSeparated(i))return!1}}return f&&(console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),f.start.set(0,0,0),f.end.set(0,0,0)),!0}{let e=this.points,t=!1,n=0;for(let s=0;s<3;s++){let r=e[s],i=e[(s+1)%3];c.start.copy(r),c.end.copy(i),c.delta(a);let o=t?u.start:u.end,l=Ob(m.distanceToPoint(r));if(Ob(m.normal.dot(a))&&l){u.copy(c),n=2;break}if((m.intersectLine(c,o)||l)&&!Ob(o.distanceTo(i))){if(n++,t)break;t=!0}}if(1===n&&this.containsPoint(u.start))return f&&(f.start.copy(u.start),f.end.copy(u.start)),!0;if(2!==n)return!1;let r=h.points,i=!1,o=0;for(let a=0;a<3;a++){let e=r[a],t=r[(a+1)%3];c.start.copy(e),c.end.copy(t),c.delta(s);let n=i?d.start:d.end,l=Ob(p.distanceToPoint(e));if(Ob(p.normal.dot(s))&&l){d.copy(c),o=2;break}if((p.intersectLine(c,n)||l)&&!Ob(n.distanceTo(t))){if(o++,i)break;i=!0}}if(1===o&&this.containsPoint(d.start))return f&&(f.start.copy(d.start),f.end.copy(d.start)),!0;if(2!==o)return!1;if(u.delta(a),d.delta(s),a.dot(s)<0){let e=d.start;d.start=d.end,d.end=e}let g=u.start.dot(a),v=u.end.dot(a),y=d.start.dot(a),x=d.end.dot(a),b=v<y,w=g<x;return(g===x||y===v||b!==w)&&(f&&(l.subVectors(u.start,d.start),l.dot(a)>0?f.start.copy(u.start):f.start.copy(d.start),l.subVectors(u.end,d.end),l.dot(a)<0?f.end.copy(u.end):f.end.copy(d.end)),!0)}}}(),Rb.prototype.distanceToPoint=function(){let e=new ur;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),Rb.prototype.distanceToTriangle=function(){let e=new ur,t=new ur,n=["a","b","c"],r=new wu,i=new wu;return function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=a||s?r:null;if(this.intersectsTriangle(o,l))return(a||s)&&(a&&l.getCenter(a),s&&l.getCenter(s)),0;let c=1/0;for(let t=0;t<3;t++){let r,i=n[t],l=o[i];this.closestPointToPoint(l,e),r=l.distanceToSquared(e),r<c&&(c=r,a&&a.copy(e),s&&s.copy(l));let u=this[i];o.closestPointToPoint(u,e),r=u.distanceToSquared(e),r<c&&(c=r,a&&a.copy(u),s&&s.copy(e))}for(let u=0;u<3;u++){let l=n[u],d=n[(u+1)%3];r.set(this[l],this[d]);for(let u=0;u<3;u++){let l=n[u],d=n[(u+1)%3];i.set(o[l],o[d]),Db(r,i,e,t);let h=e.distanceToSquared(t);h<c&&(c=h,a&&a.copy(e),s&&s.copy(t))}}return Math.sqrt(c)}}();var Ib=class extends fr{constructor(){super(...arguments),this.isOrientedBox=!0,this.matrix=new Ur,this.invMatrix=new Ur,this.points=new Array(8).fill().map((()=>new ur)),this.satAxes=new Array(3).fill().map((()=>new ur)),this.satBounds=new Array(3).fill().map((()=>new Tb)),this.alignedSatBounds=new Array(3).fill().map((()=>new Tb)),this.needsUpdate=!1}set(e,t,n){super.set(e,t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){super.copy(e),this.matrix.copy(e.matrix),this.needsUpdate=!0}};Ib.prototype.update=function(){let e=this.matrix,t=this.min,n=this.max,r=this.points;for(let l=0;l<=1;l++)for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){let a=r[1*l|2*i|4*o];a.x=l?n.x:t.x,a.y=i?n.y:t.y,a.z=o?n.z:t.z,a.applyMatrix4(e)}let i=this.satBounds,o=this.satAxes,a=r[0];for(let l=0;l<3;l++){let e=o[l],t=i[l],n=r[1<<l];e.subVectors(a,n),t.setFromPoints(e,r)}let s=this.alignedSatBounds;s[0].setFromPointsField(r,"x"),s[1].setFromPointsField(r,"y"),s[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},Ib.prototype.intersectsBox=function(){let e=new Tb;return function(t){this.needsUpdate&&this.update();let n=t.min,r=t.max,i=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(e.min=n.x,e.max=r.x,a[0].isSeparated(e)||(e.min=n.y,e.max=r.y,a[1].isSeparated(e))||(e.min=n.z,e.max=r.z,a[2].isSeparated(e)))return!1;for(let s=0;s<3;s++){let n=o[s],r=i[s];if(e.setFromBox(n,t),r.isSeparated(e))return!1}return!0}}(),Ib.prototype.intersectsTriangle=function(){let e=new Rb,t=new Array(3),n=new Tb,r=new Tb,i=new ur;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(e.copy(o),e.update(),o=e);let a=this.satBounds,s=this.satAxes;t[0]=o.a,t[1]=o.b,t[2]=o.c;for(let e=0;e<3;e++){let r=a[e],i=s[e];if(n.setFromPoints(i,t),r.isSeparated(n))return!1}let l=o.satBounds,c=o.satAxes,u=this.points;for(let e=0;e<3;e++){let t=l[e],r=c[e];if(n.setFromPoints(r,u),t.isSeparated(n))return!1}for(let e=0;e<3;e++){let o=s[e];for(let e=0;e<4;e++){let a=c[e];if(i.crossVectors(o,a),n.setFromPoints(i,t),r.setFromPoints(i,u),n.isSeparated(r))return!1}}return!0}}(),Ib.prototype.closestPointToPoint=function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t},Ib.prototype.distanceToPoint=function(){let e=new ur;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),Ib.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map((()=>new wu)),n=new Array(12).fill().map((()=>new wu)),r=new ur,i=new ur;return function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(s||l)&&(o.getCenter(i),this.closestPointToPoint(i,r),o.closestPointToPoint(r,i),s&&s.copy(r),l&&l.copy(i)),0;let c=a*a,u=o.min,d=o.max,h=this.points,f=1/0;for(let e=0;e<8;e++){let t=h[e];i.copy(t).clamp(u,d);let n=t.distanceToSquared(i);if(n<f&&(f=n,s&&s.copy(t),l&&l.copy(i),n<c))return Math.sqrt(n)}let p=0;for(let r=0;r<3;r++)for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){let a=(r+1)%3,s=(r+2)%3,l=1<<r|i<<a|o<<s,c=h[i<<a|o<<s],f=h[l];t[p].set(c,f);let m=e[r],g=e[a],v=e[s],y=n[p],x=y.start,b=y.end;x[m]=u[m],x[g]=i?u[g]:d[g],x[v]=o?u[v]:d[g],b[m]=d[m],b[g]=i?u[g]:d[g],b[v]=o?u[v]:d[g],p++}for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)for(let n=0;n<=1;n++){i.x=e?d.x:u.x,i.y=t?d.y:u.y,i.z=n?d.z:u.z,this.closestPointToPoint(i,r);let o=i.distanceToSquared(r);if(o<f&&(f=o,s&&s.copy(r),l&&l.copy(i),o<c))return Math.sqrt(o)}for(let e=0;e<12;e++){let o=t[e];for(let e=0;e<12;e++){let t=n[e];Db(o,t,r,i);let a=r.distanceToSquared(i);if(a<f&&(f=a,s&&s.copy(r),l&&l.copy(i),a<c))return Math.sqrt(a)}}return Math.sqrt(f)}}();var Lb=new ur,Nb=new ur,jb=new ur,Bb=new jn,Fb=new jn,zb=new jn,Ub=new ur;function Gb(e,t,n,r,i){let o=3*r,a=e.index.getX(o),s=e.index.getX(o+1),l=e.index.getX(o+2),c=function(e,t,n,r,i,o,a){Lb.fromBufferAttribute(t,r),Nb.fromBufferAttribute(t,i),jb.fromBufferAttribute(t,o);let s=function(e,t,n,r,i,o){let a;return a=1===o?e.intersectTriangle(r,n,t,!0,i):e.intersectTriangle(t,n,r,2!==o,i),null===a?null:{distance:e.origin.distanceTo(i),point:i.clone()}}(e,Lb,Nb,jb,Ub,a);if(s){n&&(Bb.fromBufferAttribute(n,r),Fb.fromBufferAttribute(n,i),zb.fromBufferAttribute(n,o),s.uv=_i.getUV(Ub,Lb,Nb,jb,Bb,Fb,zb,new jn));let e={a:r,b:i,c:o,normal:new ur,materialIndex:0};_i.getNormal(Lb,Nb,jb,e.normal),s.face=e,s.faceIndex=r}return s}(n,e.attributes.position,e.attributes.uv,a,s,l,t);return c?(c.faceIndex=r,i&&i.push(c),c):null}function Vb(e,t,n){return null===e||(e.point.applyMatrix4(t.matrixWorld),e.distance=e.point.distanceTo(n.ray.origin),e.object=t,e.distance<n.near||e.distance>n.far)?null:e}function Hb(e,t,n,r){let i=e.a,o=e.b,a=e.c,s=t,l=t+1,c=t+2;n&&(s=n.getX(t),l=n.getX(t+1),c=n.getX(t+2)),i.x=r.getX(s),i.y=r.getY(s),i.z=r.getZ(s),o.x=r.getX(l),o.y=r.getY(l),o.z=r.getZ(l),a.x=r.getX(c),a.y=r.getY(c),a.z=r.getZ(c)}function Wb(e,t,n,r,i,o,a){let s=n.index,l=n.attributes.position;for(let c=e,u=t+e;c<u;c++)if(Hb(a,3*c,s,l),a.needsUpdate=!0,r(a,c,i,o))return!0;return!1}var qb=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function Yb(e,t){return 65535===t[e+15]}function Xb(e,t){return t[e+6]}function Qb(e,t){return t[e+14]}function Kb(e){return e+8}function Zb(e,t){return t[e+6]}var Jb=new fr,$b=new ur,ew=["x","y","z"];function tw(e,t,n,r,i){let o=2*e,a=sw,s=lw,l=cw;if(Yb(o,s)){!function(e,t,n,r,i,o){for(let a=r,s=r+i;a<s;a++)Gb(e,t,n,a,o)}(t,n,r,Xb(e,l),Qb(o,s),i)}else{let o=Kb(e);ow(o,a,r,$b)&&tw(o,t,n,r,i);let s=Zb(e,l);ow(s,a,r,$b)&&tw(s,t,n,r,i)}}function nw(e,t,n,r){let i=2*e,o=sw,a=lw,s=cw;if(Yb(i,a)){return function(e,t,n,r,i){let o=1/0,a=null;for(let s=r,l=r+i;s<l;s++){let r=Gb(e,t,n,s);r&&r.distance<o&&(a=r,o=r.distance)}return a}(t,n,r,Xb(e,s),Qb(i,a))}{let i,a,l=function(e,t){return t[e+7]}(e,s),c=ew[l],u=r.direction[c]>=0;u?(i=Kb(e),a=Zb(e,s)):(i=Zb(e,s),a=Kb(e));let d=ow(i,o,r,$b)?nw(i,t,n,r):null;if(d){let e=d.point[c];if(u?e<=o[a+l]:e>=o[a+l+3])return d}let h=ow(a,o,r,$b)?nw(a,t,n,r):null;return d&&h?d.distance<=h.distance?d:h:d||h||null}}var rw=function(){let e,t,n=[],r=new qb((()=>new fr));return function(){e=r.getPrimitive(),t=r.getPrimitive(),n.push(e,t);let o=i(...arguments);r.releasePrimitive(e),r.releasePrimitive(t),n.pop(),n.pop();let a=n.length;return a>0&&(t=n[a-1],e=n[a-2]),o};function i(n,r,o,a){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;function u(e){let t=2*e,n=lw,r=cw;for(;!Yb(t,n);)t=2*(e=Kb(e));return Xb(e,r)}function d(e){let t=2*e,n=lw,r=cw;for(;!Yb(t,n);)t=2*(e=Zb(e,r));return Xb(e,r)+Qb(t,n)}let h=2*n,f=sw,p=lw,m=cw;if(Yb(h,p)){let t=Xb(n,m),r=Qb(h,p);return pb(n,f,e),a(t,r,!1,c,l+n,e)}{let h,g,v,y,x=Kb(n),b=Zb(n,m),w=x,S=b;if(s&&(v=e,y=t,pb(w,f,v),pb(S,f,y),h=s(v),g=s(y),g<h)){w=b,S=x;let e=h;h=g,g=e,v=y}v||(v=e,pb(w,f,v));let _,A=o(v,Yb(2*w,p),h,c+1,l+w);if(2===A){let e=u(w);_=a(e,d(w)-e,!0,c+1,l+w,v)}else _=A&&i(w,r,o,a,s,l,c+1);if(_)return!0;y=t,pb(S,f,y);let E,C=o(y,Yb(2*S,p),g,c+1,l+S);if(2===C){let e=u(S);E=a(e,d(S)-e,!0,c+1,l+S,y)}else E=C&&i(S,r,o,a,s,l,c+1);return!!E}}}(),iw=function(){let e=new Rb,t=new Rb,n=new Ur,r=new Ib,i=new Ib;return function o(a,s,l,c){let u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=2*a,h=sw,f=lw,p=cw;if(null===u&&(l.boundingBox||l.computeBoundingBox(),r.set(l.boundingBox.min,l.boundingBox.max,c),u=r),!Yb(d,f)){let e=a+8,t=p[a+6];return pb(e,h,Jb),!!(u.intersectsBox(Jb)&&o(e,s,l,c,u)||(pb(t,h,Jb),u.intersectsBox(Jb)&&o(t,s,l,c,u)))}{let r=s,o=r.index,u=r.attributes.position,m=l.index,g=l.attributes.position,v=Xb(a,p),y=Qb(d,f);if(n.copy(c).invert(),l.boundsTree)return pb(a,h,i),i.matrix.copy(n),i.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:e=>i.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(c),e.b.applyMatrix4(c),e.c.applyMatrix4(c),e.needsUpdate=!0;for(let n=3*v,r=3*(y+v);n<r;n+=3)if(Hb(t,n,o,u),t.needsUpdate=!0,e.intersectsTriangle(t))return!0;return!1}});for(let i=3*v,a=y+3*v;i<a;i+=3){Hb(e,i,o,u),e.a.applyMatrix4(n),e.b.applyMatrix4(n),e.c.applyMatrix4(n),e.needsUpdate=!0;for(let n=0,r=m.count;n<r;n+=3)if(Hb(t,n,m,g),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}}}();function ow(e,t,n,r){return pb(e,t,Jb),n.intersectBox(Jb,r)}var aw,sw,lw,cw,uw=[];function dw(e){aw&&uw.push(aw),aw=e,sw=new Float32Array(e),lw=new Uint16Array(e),cw=new Uint32Array(e)}function hw(){aw=null,sw=null,lw=null,cw=null,uw.length&&dw(uw.pop())}var fw=Symbol("skip tree generation"),pw=new fr,mw=new fr,gw=new Ur,vw=new Ib,yw=new Ib,xw=new ur,bw=new ur,ww=new ur,Sw=new ur,_w=new ur,Aw=new fr,Ew=new qb((()=>new Rb)),Cw=class{static serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Cw.serialize(arguments[0],{cloneBuffers:void 0===arguments[2]||arguments[2]});t={cloneBuffers:!0,...t};let n,r=e.geometry,i=e._roots,o=r.getIndex();return n=t.cloneBuffers?{roots:i.map((e=>e.slice())),index:o.array.slice()}:{roots:i,index:o.array},n}static deserialize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("boolean"==typeof n)return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Cw.deserialize(arguments[0],arguments[1],{setIndex:void 0===arguments[2]||arguments[2]});n={setIndex:!0,...n};let{index:r,roots:i}=e,o=new Cw(t,{...n,[fw]:!0});if(o._roots=i,n.setIndex){let n=t.getIndex();if(null===n){let n=new Pi(e.index,1,!1);t.setIndex(n)}else n.array!==r&&(n.array.set(r),n.needsUpdate=!0)}return o}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[fw]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[fw]||(this._roots=function(e,t){let n,r,i,o=Mb(e,t),a=[],s=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let u=0;u<o.length;u++){let e=o[u],t=new s(32*l(e));n=new Float32Array(t),r=new Uint32Array(t),i=new Uint16Array(t),c(0,e),a.push(t)}return a;function l(e){return e.count?1:1+l(e.left)+l(e.right)}function c(e,t){let o=e/4,a=e/2,s=!!t.count,l=t.boundingData;for(let r=0;r<6;r++)n[o+r]=l[r];if(s){let n=t.offset,s=t.count;return r[o+6]=n,i[a+14]=s,i[a+15]=65535,e+32}{let n,i=t.left,a=t.right,s=t.splitAxis;if(n=c(e+32,i),n/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return r[o+6]=n/4,n=c(n,a),r[o+7]=s,n}}}(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new fr))),this.geometry=e}refit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,n=t.index.array,r=t.attributes.position,i=r.array,o=r.offset||0,a=3;r.isInterleavedBufferAttribute&&(a=r.data.stride);let s,l,c,u,d=0,h=this._roots;for(let p=0,m=h.length;p<m;p++)s=h[p],l=new Uint32Array(s),c=new Uint16Array(s),u=new Float32Array(s),f(0,d),d+=s.byteLength;function f(t,r){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=2*t;if(65535===c[d+15]){let e=l[t+6],r=1/0,s=1/0,h=1/0,f=-1/0,p=-1/0,m=-1/0;for(let t=3*e,l=3*(e+c[d+14]);t<l;t++){let e=n[t]*a+o,l=i[e+0],c=i[e+1],u=i[e+2];l<r&&(r=l),l>f&&(f=l),c<s&&(s=c),c>p&&(p=c),u<h&&(h=u),u>m&&(m=u)}return(u[t+0]!==r||u[t+1]!==s||u[t+2]!==h||u[t+3]!==f||u[t+4]!==p||u[t+5]!==m)&&(u[t+0]=r,u[t+1]=s,u[t+2]=h,u[t+3]=f,u[t+4]=p,u[t+5]=m,!0)}{let n=t+8,i=l[t+6],o=n+r,a=i+r,c=s,d=!1,h=!1;e?c||(d=e.has(o),h=e.has(a),c=!d&&!h):(d=!0,h=!0);let p=c||h,m=!1;(c||d)&&(m=f(n,r,c));let g=!1;p&&(g=f(i,r,c));let v=m||g;if(v)for(let e=0;e<3;e++){let r=n+e,o=i+e,a=u[r],s=u[r+3],l=u[o],c=u[o+3];u[t+e]=a<l?a:l,u[t+e+3]=s>c?s:c}return v}}}traverse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._roots[t],r=new Uint32Array(n),i=new Uint16Array(n);!function t(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=2*o,l=65535===i[s+15];if(l){let t=r[o+6],c=i[s+14];e(a,l,new Float32Array(n,4*o,6),t,c)}else{let i=o+8,s=r[o+6],c=r[o+7];e(a,l,new Float32Array(n,4*o,6),c)||(t(i,a+1),t(s,a+1))}}(0)}raycast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._roots,r=this.geometry,i=[],o=t.isMaterial,a=Array.isArray(t),s=r.groups,l=o?t.side:t;for(let c=0,u=n.length;c<u;c++){let o=a?t[s[c].materialIndex].side:l,u=i.length;if(dw(n[c]),tw(0,r,o,e,i),hw(),a){let e=s[c].materialIndex;for(let t=u,n=i.length;t<n;t++)i[t].face.materialIndex=e}}return i}raycastFirst(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._roots,r=this.geometry,i=t.isMaterial,o=Array.isArray(t),a=null,s=r.groups,l=i?t.side:t;for(let c=0,u=n.length;c<u;c++){let i=o?t[s[c].materialIndex].side:l;dw(n[c]);let u=nw(0,r,i,e);hw(),null!=u&&(null==a||u.distance<a.distance)&&(a=u,o&&(u.face.materialIndex=s[c].materialIndex))}return a}intersectsGeometry(e,t){let n=this.geometry,r=!1;for(let i of this._roots)if(dw(i),r=iw(0,n,e,t),hw(),r)break;return r}shapecast(e,t,n){let r=this.geometry;if(e instanceof Function){if(t){let e=t;t=(t,n,r,i)=>{let o=3*n;return e(t,o,o+1,o+2,r,i)}}e={boundsTraverseOrder:n,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let i=Ew.getPrimitive(),{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:s,intersectsTriangle:l}=e;if(s&&l){let e=s;s=(t,n,o,a,s)=>!!e(t,n,o,a,s)||Wb(t,n,r,l,o,a,i)}else s||(s=l?(e,t,n,o)=>Wb(e,t,r,l,n,o,i):(e,t,n)=>n);let c=!1,u=0;for(let d of this._roots){if(dw(d),c=rw(0,r,a,s,o,u),hw(),c)break;u+=d.byteLength}return Ew.releasePrimitive(i),c}bvhcast(e,t,n){let{intersectsRanges:r,intersectsTriangles:i}=n,o=this.geometry.index,a=this.geometry.attributes.position,s=e.geometry.index,l=e.geometry.attributes.position;gw.copy(t).invert();let c=Ew.getPrimitive(),u=Ew.getPrimitive();if(i){let e=function(e,n,r,d,h,f,p,m){for(let g=r,v=r+d;g<v;g++){Hb(u,3*g,s,l),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let t=e,r=e+n;t<r;t++)if(Hb(c,3*t,o,a),c.needsUpdate=!0,i(c,u,t,g,h,f,p,m))return!0}return!1};if(r){let t=r;r=function(n,r,i,o,a,s,l,c){return!!t(n,r,i,o,a,s,l,c)||e(n,r,i,o,a,s,l,c)}}else r=e}e.getBoundingBox(mw),mw.applyMatrix4(t);let d=this.shapecast({intersectsBounds:e=>mw.intersectsBox(e),intersectsRange:(t,n,i,o,a,s)=>(pw.copy(s),pw.applyMatrix4(gw),e.shapecast({intersectsBounds:e=>pw.intersectsBox(e),intersectsRange:(e,i,s,l,c)=>r(t,n,e,i,o,a,l,c)}))});return Ew.releasePrimitive(c),Ew.releasePrimitive(u),d}intersectsBox(e,t){return vw.set(e.min,e.max,t),vw.needsUpdate=!0,this.shapecast({intersectsBounds:e=>vw.intersectsBox(e),intersectsTriangle:e=>vw.intersectsTriangle(e)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0;e.boundingBox||e.computeBoundingBox(),vw.set(e.boundingBox.min,e.boundingBox.max,t),vw.needsUpdate=!0;let a=this.geometry,s=a.attributes.position,l=a.index,c=e.attributes.position,u=e.index,d=Ew.getPrimitive(),h=Ew.getPrimitive(),f=bw,p=ww,m=null,g=null;r&&(m=Sw,g=_w);let v=1/0,y=null,x=null;return gw.copy(t).invert(),yw.matrix.copy(gw),this.shapecast({boundsTraverseOrder:e=>vw.distanceToBox(e),intersectsBounds:(e,t,n)=>n<v&&n<o&&(t&&(yw.min.copy(e.min),yw.max.copy(e.max),yw.needsUpdate=!0),!0),intersectsRange:(n,r)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:e=>yw.distanceToBox(e),intersectsBounds:(e,t,n)=>n<v&&n<o,intersectsRange:(e,o)=>{for(let a=3*e,b=3*(e+o);a<b;a+=3){Hb(h,a,u,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let e=3*n,t=3*(n+r);e<t;e+=3){Hb(d,e,l,s),d.needsUpdate=!0;let t=d.distanceToTriangle(h,f,m);if(t<v&&(p.copy(f),g&&g.copy(m),v=t,y=e/3,x=a/3),t<i)return!0}}}});for(let e=0,o=u?u.count:c.count;e<o;e+=3){Hb(h,e,u,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let t=3*n,o=3*(n+r);t<o;t+=3){Hb(d,t,l,s),d.needsUpdate=!0;let n=d.distanceToTriangle(h,f,m);if(n<v&&(p.copy(f),g&&g.copy(m),v=n,y=t/3,x=e/3),n<i)return!0}}}}),Ew.releasePrimitive(d),Ew.releasePrimitive(h),v===1/0?null:(n.point?n.point.copy(p):n.point=p.clone(),n.distance=v,n.faceIndex=y,r&&(r.point?r.point.copy(g):r.point=g.clone(),r.point.applyMatrix4(gw),p.applyMatrix4(gw),r.distance=p.sub(r.point).length(),r.faceIndex=x),n)}closestPointToPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=n*n,o=r*r,a=1/0,s=null;if(this.shapecast({boundsTraverseOrder:t=>(xw.copy(e).clamp(t.min,t.max),xw.distanceToSquared(e)),intersectsBounds:(e,t,n)=>n<a&&n<o,intersectsTriangle:(t,n)=>{t.closestPointToPoint(e,xw);let r=e.distanceToSquared(xw);return r<a&&(bw.copy(xw),a=r,s=n),r<i}}),a===1/0)return null;let l=Math.sqrt(a);return t.point?t.point.copy(bw):t.point=bw.clone(),t.distance=l,t.faceIndex=s,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach((t=>{pb(0,new Float32Array(t),Aw),e.union(Aw)})),e}},Mw=Cw.prototype.raycast;Cw.prototype.raycast=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycast" has changed. See docs for new signature.');let[e,n,r,i]=t;return Mw.call(this,r,e.material).forEach((t=>{(t=Vb(t,e,n))&&i.push(t)})),i}return Mw.apply(this,t)};var Tw=Cw.prototype.raycastFirst;Cw.prototype.raycastFirst=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "raycastFirst" has changed. See docs for new signature.');let[e,n,r]=t;return Vb(Tw.call(this,r,e.material),e,n)}return Tw.apply(this,t)};var Pw=Cw.prototype.closestPointToPoint;Cw.prototype.closestPointToPoint=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0].isMesh){console.warn('MeshBVH: The function signature and results frame for "closestPointToPoint" has changed. See docs for new signature.'),t.unshift();let e=t[1],n={};return t[1]=n,Pw.apply(this,t),e&&e.copy(n.point),n.distance}return Pw.apply(this,t)};var Dw=Cw.prototype.closestPointToGeometry;Cw.prototype.closestPointToGeometry=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=t[2],i=t[3];if(r&&r.isVector3||i&&i.isVector3){console.warn('MeshBVH: The function signature and results frame for "closestPointToGeometry" has changed. See docs for new signature.');let e={},n={},o=t[1];return t[2]=e,t[3]=n,Dw.apply(this,t),r&&r.copy(e.point),i&&i.copy(n.point).applyMatrix4(o),e.distance}return Dw.apply(this,t)};var kw=Cw.prototype.refit;Cw.prototype.refit=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=t[0],i=t[1];if(i&&(i instanceof Set||Array.isArray(i))){console.warn('MeshBVH: The function signature for "refit" has changed. See docs for new signature.');let e=new Set;i.forEach((t=>e.add(t))),r&&r.forEach((t=>e.add(t))),kw.call(this,e)}else kw.apply(this,t)},["intersectsGeometry","shapecast","intersectsBox","intersectsSphere"].forEach((e=>{let t=Cw.prototype[e];Cw.prototype[e]=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(null===r[0]||r[0].isMesh)&&(r.shift(),console.warn('MeshBVH: The function signature for "'.concat(e,'" has changed and no longer takes Mesh. See docs for new signature.'))),t.apply(this,r)}}));var Ow=class extends hi{},Rw=class extends Ow{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!0}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return!0}get isLight(){return!1}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){return this.object.geometry}get material(){return this.object.material}},Iw=class extends hi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.object=e;let n=e.recursiveBBox.getSize(new ur);this.parameters=ox.defaultData(n.toArray(),.1),ug(this.parameters,t),this.update(),this.setHideBase(this.parameters.hideBase)}setHideBase(e){this.parameters.hideBase=e}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters)}this.children.forEach((e=>e.updateMatrix()))}_updateCount(){let e="grid"===this.parameters.type?this.parameters.grid.count[0]*this.parameters.grid.count[1]*this.parameters.grid.count[2]:this.parameters.count;if(this.children.length!==e)if(this.children.length<e)for(let t=0,n=e-this.children.length;t<n;++t){let e=new Rw(this.object);e.visible=!0,this.add(e),this.parameters.hideBase&&this.setHideBase(!0)}else for(let t=0,n=this.children.length-e;t<n;++t)this.remove(this.children[0])}_updateRadial(e){let t,n=e.radial,r=n.start*Nn.DEG2RAD,i=r-n.end*Nn.DEG2RAD,o=new Zr(n.rotation[0]*Nn.DEG2RAD,n.rotation[1]*Nn.DEG2RAD,n.rotation[2]*Nn.DEG2RAD);switch(n.axis){case"z":t=new ur(0,0,1);break;case"y":t=new ur(0,1,0);break;default:t=new ur(1,0,0)}for(let[a,s]of this.children.entries()){s.scale.x=n.scale[0],s.scale.y=n.scale[1],s.scale.z=n.scale[2],s.position.setScalar(0);let l=i/e.count*a-r;switch(n.axis){case"x":s.rotation.set(0,l,0);break;case"y":s.rotation.set(0,0,l);break;case"z":s.rotation.set(l,0,0)}s.translateOnAxis(t,n.radius),s.position.x+=n.position[0],s.position.y+=n.position[1],s.position.z+=n.position[2],!0===n.alignment?(s.rotation.x+=o.x,s.rotation.y+=o.y,s.rotation.z+=o.z):s.rotation.copy(o)}}_updateLinear(e){if("linear"!==e.type)throw new Error;let t=e.linear,n=new Zr(t.rotation[0]*Nn.DEG2RAD,t.rotation[1]*Nn.DEG2RAD,t.rotation[2]*Nn.DEG2RAD);for(let[r,i]of this.children.entries())i.scale.x=1+(t.scale[0]-1)*r,i.scale.y=1+(t.scale[1]-1)*r,i.scale.z=1+(t.scale[2]-1)*r,i.rotation.x=n.x*r,i.rotation.y=n.y*r,i.rotation.z=n.z*r,i.position.x=t.position[0]*r,i.position.y=t.position[1]*r,i.position.z=t.position[2]*r}_updateGrid(e){let t=0,n=e.grid;if(!0===n.useCenter){let e={x:n.count[0]%2===0?2:1,y:n.count[1]%2===0?2:1,z:n.count[2]%2===0?2:1},r=new ur(n.size[0]*(n.count[0]-e.x)*.5,n.size[1]*(n.count[1]-e.y)*.5,n.size[2]*(n.count[2]-e.z)*.5);for(let i=0;i<n.count[0];i++)for(let e=0;e<n.count[1];e++)for(let o=0;o<n.count[2];o++){let a=this.children[t++];a.scale.setScalar(1),a.rotation.set(0,0,0),a.position.x=n.size[0]*i-r.x,a.position.y=n.size[1]*e-r.y,a.position.z=n.size[2]*o-r.z}}else for(let r=0;r<n.count[0];r++)for(let e=0;e<n.count[1];e++)for(let i=0;i<n.count[2];i++){let o=this.children[t++];o.scale.setScalar(1),o.rotation.set(0,0,0),o.position.x=n.size[0]*r,o.position.y=-n.size[1]*e,o.position.z=-n.size[2]*i}}fromClonerState(e){return void 0!==e.hideBase&&this.setHideBase(e.hideBase),ug(this.parameters,e),this.update(),this}},Lw=e=>{var t;return(t=class extends e{constructor(){super(...arguments),this.isObjectHelper=!0}}).geometryHelper=new ao(30,30,30),t},Nw=new zr,jw=new Or,Bw=new Ur,Fw=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=t,a=e.matrixWorld;if(null===o.boundingSphere&&o.computeBoundingSphere(),jw.copy(o.boundingSphere),jw.applyMatrix4(a),!1===n.ray.intersectsSphere(jw)||(Bw.copy(a).invert(),Nw.copy(n.ray).applyMatrix4(Bw),null!==o.boundingBox&&!1===Nw.intersectsBox(o.boundingBox)))return;let s,l,c,u,d,h,f=o.index,p=o.attributes.position,m=o.drawRange;if(!1===i){for(d=Math.max(0,m.start),h=Math.min(f.count,m.start+m.count);d<h;d+=3)if(l=f.getX(d),c=f.getX(d+1),u=f.getX(d+2),s=g(e,n,Nw,p,l,c,u),s)return s.faceIndex=Math.floor(d/3),void r.push(s)}else{let t=o.attributes.position,i=new ur,a=new ur,s=new ur,l=new ur,c=2,u=1/((e.scale.x+e.scale.y+e.scale.z)/3),d=u*u;for(let o=Math.max(0,m.start),h=Math.min(t.count,m.start+m.count)-1;o<h;o+=c){if(i.fromBufferAttribute(t,o),a.fromBufferAttribute(t,o+1),Nw.distanceSqToSegment(i,a,l,s)>d)continue;l.applyMatrix4(e.matrixWorld);let c=n.ray.origin.distanceTo(l);c<n.near||c>n.far||r.push({distance:c,point:s.clone().applyMatrix4(e.matrixWorld),object:e})}}function g(e,t,n,r,i,o,a){let s=new ur,l=new ur,c=new ur,u=new ur,d=new ur;if(s.fromBufferAttribute(r,i),l.fromBufferAttribute(r,o),c.fromBufferAttribute(r,a),null===n.intersectTriangle(s,l,c,!1,u))return null;d.copy(u),d.applyMatrix4(e.matrixWorld);let h=t.ray.origin.distanceTo(d);return h<t.near||h>t.far?null:{faceIndex:1,distance:h,point:d.clone(),object:e}}},zw=new ur,Uw=new ho,Gw=class extends yl{constructor(e){let t=new zi,n=new cl({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new $n(15711266),s=new $n(15711266),l=new $n(2857471);function c(e,t,n){u(e,n),u(t,n)}function u(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}c("n1","n2",a),c("n2","n4",a),c("n4","n3",a),c("n3","n1",a),c("f1","f2",a),c("f2","f4",a),c("f4","f3",a),c("f3","f1",a),c("n1","f1",a),c("n2","f2",a),c("n3","f3",a),c("n4","f4",a),c("p","n1",s),c("p","n2",s),c("p","n3",s),c("p","n4",s),c("u1","u2",l),c("u2","u3",l),c("u3","u1",l),t.setAttribute("position",new Oi(r,3)),t.setAttribute("color",new Oi(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){let e=this.geometry,t=this.pointMap;Uw.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let n=.8;Vw("n1",t,e,Uw,-1,-1,n),Vw("n2",t,e,Uw,1,-1,n),Vw("n3",t,e,Uw,-1,1,n),Vw("n4",t,e,Uw,1,1,n);let r=n;Vw("f1",t,e,Uw,-1,-1,r),Vw("f2",t,e,Uw,1,-1,r),Vw("f3",t,e,Uw,-1,1,r),Vw("f4",t,e,Uw,1,1,r);Vw("u1",t,e,Uw,.35,1.1,.8),Vw("u2",t,e,Uw,-.35,1.1,.8),Vw("u3",t,e,Uw,0,1.55,.8),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Vw(e,t,n,r,i,o,a){zw.set(i,o,a).unproject(r);let s=t[e];if(void 0!==s){let e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],zw.x,zw.y,zw.z)}}var Hw=class extends(Lw(Gw)){constructor(e){super(e),this.object=e,this.object=e,this.name="CombinedCameraHelper: ".concat(e.uuid)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){Fw(this.object,this.geometry,e,t,!0)}},Ww=class extends(Lw(Tu)){constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,arguments.length>2&&void 0!==arguments[2]?arguments[2]:10066329),this.object=e,this.added=!1,this.name="DirectionalLightHelper: ".concat(e.uuid)}raycast(e,t){Fw(this.object,Ww.geometryHelper,e,t)}},qw=class extends(Lw(Iu)){constructor(e){super(arguments.length>1&&void 0!==arguments[1]?arguments[1]:15),this.object=e,this.object.updateMatrixWorld(),this.name="EmptyObjectHelper: ".concat(e.uuid),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}raycast(e,t){Fw(this.object,qw.geometryHelper,e,t)}update(){}},Yw=class extends(Lw(Au)){constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,arguments.length>2&&void 0!==arguments[2]?arguments[2]:6710886),this.object=e,this.name="PointLightHelper: ".concat(e.uuid)}raycast(e,t){Fw(this.object,Yw.geometryHelper,e,t)}},Xw=class extends(Lw(_u)){constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:6710886),this.object=e,this.name="SpotLightHelper: ".concat(e.uuid)}raycast(e,t){Fw(this.object,Xw.geometryHelper,e,t)}update(){if(void 0!==this.object){let e=Xw._vector,t=this.object.distance?this.object.distance:1e3,n=t*Math.tan(this.object.angle);this.cone.scale.set(n,n,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let r=void 0!==this.color?this.color:this.light.color;if(this.cone.material instanceof Array)for(let i=0,o=this.cone.material.length;i<o;i++)this.cone.material[i].color.set(r);else this.cone.material.color.set(r)}}},Qw=Xw;Qw._vector=new ur;var Kw=1e-12,Zw=class{constructor(e){this.position=new jn,this.startPosition=new jn,this.uuid=Nn.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new Zw(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},Jw=class extends Zw{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new Jw(this.parent).copy(this)}},$w=class extends Zw{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new Jw(this),new Jw(this))}static create(e,t){let n=new $w(e,new jn(...t.position));return n.controls[0].position.set(...t.controlPrevious.position),n.controls[1].position.set(...t.controlNext.position),n.roundness=t.roundness,n.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,n}getOppositeControl(e){let t=this.controls.indexOf(e);return 0===t?this.controls[1]:1===t?this.controls[0]:null}applyOffsetToControls(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(let n=0,r=this.controls.length;n<r;n++){let r=this.controls[n];this.position.distanceTo(r.position)<=t?r.position.copy(this.position):r.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new $w(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var e,t;return[null===(e=this.curveBefore)||void 0===e?void 0:e.getTangentAt(1),null===(t=this.curveAfter)||void 0===t?void 0:t.getTangentAt(0)]}computeNormals(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn,[n,r]=this.computeTangents();return n&&r&&(eS(n,e),eS(r,t)),[e,t]}computeTangent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn,[t,n]=this.computeTangents();return t&&n&&e.copy(t).add(n).normalize(),e}computeNormal(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn,[t,n]=this.computeNormals();return e.copy(t).add(n).normalize(),e}};function eS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn,n=e.length();return t.set(-e.y/n,e.x/n)}var tS=new jn,nS=new jn,rS=new jn,iS=new jn,oS=new jn,aS=new jn,sS=new ur,lS=new ur;function cS(e){let t=new jn;t.addVectors(e.v0,tS.subVectors(e.v1,e.v0).multiplyScalar(2/3));let n=new jn;return n.addVectors(e.v2,nS.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new Pl(e.v0,t,n,e.v2)}function uS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return Math.abs(e-t)<n}function dS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return e.distanceTo(t)<n}function hS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return e.distanceTo(t)<n}function fS(e,t,n){let r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),i=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)),o=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));return Math.acos((i*i+r*r-o*o)/(2*i*r))}function pS(e,t,n){return bS(e,t)&&bS(t,n)&&mS(e.position,t.position,n.position)}function mS(e,t,n){return 0===tS.copy(t).sub(e).cross(nS.copy(n).sub(e))}function gS(e,t,n,r,i){let o=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=(e.y+t.y)/2,s=(e.x+t.x)/2,l=Math.sqrt(Math.pow(n,2)-Math.pow(o/2,2))*(e.y-t.y)/o,c=Math.sqrt(Math.pow(n,2)-Math.pow(o/2,2))*(t.x-e.x)/o;return r.set(s+l,a+c),i.set(s-l,a-c),[r,i]}function vS(e,t,n){return e.distanceTo(n)<t.distanceTo(n)?t:e}function yS(e,t,n,r,i,o){let a,s=t.x-e.x,l=t.y-e.y,c=n.x-e.x,u=n.y-e.y,d=Math.sqrt((s+c)*(s+c)+(l+u)*(l+u));return fS(t,e,n)>Math.PI&&(d*=-1),a=uS(u,l)?(l+u)*(r/d-.5)*8/3/(s-c):(s+c)*(r/d-.5)*8/3/(u-l),i.set(t.x-a*l,t.y+a*s),o.set(n.x+a*u,n.y-a*c),[i,o]}function xS(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function bS(e,t){return mS(e.position,e.controls[1].position,t.position)&&mS(e.position,t.controls[0].position,t.position)}function wS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];for(let i=0,o=e.length;i<o;i++){let o=e[i],a=0;if(n&&void 0!==o.roundedCurveCorner){let e=.5*SS(o.roundedCurveCorner,t);i>0&&(r[i-1]+=e),a+=e}void 0!==o.curveAfter&&(a+=SS(o.curveAfter,t)),r.push(a)}return e.length>0&&n&&void 0!==e[0].roundedCurveCorner&&(r[e.length-1]+=.5*SS(e[0].roundedCurveCorner,t)),r}function SS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return e&&e instanceof bl?2*t:e&&(e instanceof Dl||e instanceof kl)?1:e&&e instanceof Rl?t*e.points.length:t}var _S,AS,ES=new jn,CS=new jn,MS=new jn,TS=new jn,PS=new jn,DS=new jn,kS=class extends Gl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;super(),this.points=[],this.shapeHoles=[],this.eventDispatcher=new En,this.plane=new wo(new ur(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=Nn.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,n){let r=new kS;return r.isClosed=e.isClosed,r.points=e.points.map((e=>$w.create(e.id,e.data))),"number"==typeof e.roundness&&(r.roundness=e.roundness),r.shapeHoles=e.shapeHoles.map((e=>kS.createFromState(e))),void 0!==t&&void 0!==n&&r.applySize(t,n),r.update(),r}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,n=this.points.length;t<n;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map((e=>this.getPointIndexById(e))).filter((e=>e>=0))}getPointIndexById(e){let t=this.points.length,n=this.points.findIndex((t=>t.uuid===e));if(n<0){let n=t;for(let t=0,r=this.shapeHoles.length;t<r;t++){let r=this.shapeHoles[t],i=r.points.length,o=r.getPointIndexById(e);if(!(o<0))return o+n;n+=i}}return n}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let n=0,r=this.shapeHoles.length;n<r;n++){let r=this.shapeHoles[n],i=e-t;if(i<=r.points.length-1)return r.points[i];t+=r.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let n=0,r=this.shapeHoles.length;n<r;n++){let r=this.shapeHoles[n],i=r.points.indexOf(e);if(i>=0)return t+i;t+=r.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map((e=>e.points)));return[...this.points,...e]}applySize(e,t){0===e&&(e=.001),0===t&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let n=ES.set(e,t);for(let r=0,i=this.points.length;r<i;r++){let e=this.points[r];e.position.multiply(n),e.controls[0].position.multiply(n),e.controls[1].position.multiply(n)}for(let r=0,i=this.shapeHoles.length;r<i;r++)this.shapeHoles[r].applyScale(e,t);this._update(!1)}createPoint(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nn.generateUUID();t=e instanceof jn?e:new jn(e,n);let i=new $w(r,t);return i.roundness=this.roundness,i}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];if(n.uuid===e)return n}for(let t=0,n=this.shapeHoles.length;t<n;t++){let n=this.shapeHoles[t].getPointByUuid(e);if(n)return n}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find((t=>t.uuid===e));t&&this.removePoint(t)}update(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(let t=0,n=this.shapeHoles.length;t<n;t++)this.shapeHoles[t].update(!1);this._update(e)}extractShapePointsToBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t);let r=n?this.roundedCurveDivisions:this.curveDivisions;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=lS.set(0,0,0),a=0,s=[];for(let l=0;l<t.length;l++){let i=t[l],c=tS,u=SS(i,r);s.push(u);for(let t=0;t<=u;t++)if(i instanceof Pl||i instanceof Ol||i instanceof Dl){if(i.getPoint(t/u,c),o.set(c.x,c.y,0),void 0!==n&&hS(n,o))continue;void 0===n&&(n=sS),n.copy(o),e.setXYZ(a,o.x,o.y,o.z),a++}}i&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++)}(e,n?this.roundedCurves:this.curves,t,this.autoClose),r.reduce(((e,t)=>e+t),0)+1}computeCurveDivisions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;return this.curveDivisions=wS(this.points,e,!1),this.roundedCurveDivisions=wS(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return 2*function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=lS.set(0,0,0),a=0,s=[];for(let c=0;c<t.length;c++){if(!1===n[c])continue;let i,u=t[c],d=tS,h=SS(u,r);s.push(h);for(let t=0;t<=h;t++)if(u instanceof Pl||u instanceof Ol||u instanceof Dl){var l;if(u.getPoint(t/h,d),o.set(d.x,d.y,0),null!==(l=i)&&void 0!==l&&l.equals(o))continue;void 0===i?i=sS:(e.setXYZ(a,i.x,i.y,i.z),a++,e.setXYZ(a,o.x,o.y,o.z),a++),i.copy(o)}}return i&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),s}(e,this.curves,t,n,this.autoClose).reduce(((e,t)=>e+t),0)}extractShapePointsToFlatArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t),function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=0;for(let a=0;a<t.length;a++){let i=t[a],s=SS(i,r),l=tS;for(let t=0;t<=s;t++)if(i instanceof Pl||i instanceof Ol||i instanceof Dl){if(i.getPoint(t/s,l),void 0!==n&&dS(n,l,Kw))continue;void 0===n&&(n=nS),n.copy(l),e.push(l.x,l.y),o++}}return uS(e[0],e[e.length-2],Kw)&&uS(e[1],e[e.length-1],Kw)&&(e.pop(),e.pop()),i&&o>1&&!(uS(e[o-1],e[1],Kw)&&uS(e[o-2],e[0],Kw))&&(e.push(e[0],e[1]),o++),e}(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0;void 0===this.curveDivisions&&this.computeCurveDivisions(this.subdivision);let r=t?this.roundedCurveDivisions:this.curveDivisions,i=0;t&&void 0!==this.points[0].roundedCurveCorner&&(i=.5*SS(this.points[0].roundedCurveCorner,this.subdivision));let o=e-i;o<0&&(o+=r.reduce(((e,t)=>e+t),0));for(let a=0,s=r.length;a<s;a++){let e=r[a];if(o<n+e)return[a,(o-n+1)/e];n+=e}return[0,1]}getCurveT(e,t,n){let r=this.points[e],i=this.points[e>=this.points.length-1?0:e+1],o=this.curveDivisions,a=o[e];if(xS(r,i)){let e=r.position.distanceTo(i.position);return r.position.distanceTo(ES.set(n.x,n.y))/e}let s=0;for(let l=0;l<e;l++)s+=o[l];return(t-s)/a}dispose(){this.eventDispatcher=null}_applyCurveForPoint(e,t){xS(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let n=this.curves[this.curves.length-1];e.curveBefore=n,t.curveAfter=n;let r=n.clone();e.roundedCurveBefore=r,t.roundedCurveAfter=r,e.roundedCurveCorner=void 0,this.roundedCurves.push(r)}_update(){var e;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let o=0,a=this.points.length;o<a;o++){let e=this.points[o];if(0===o)this.moveTo(e.position.x,e.position.y);else{let t=this.points[o-1];this._applyCurveForPoint(e,t)}}let n=this.getLastPoint();if(null!==n&&void 0!==n&&n.curveAfter&&(n.curveAfter=void 0),this.isClosed){let e=this.points[0],t=this.points[this.points.length-1];this._applyCurveForPoint(e,t)}if(this.points.length>2){let e=0;for(let t=0,n=this.points.length;t<n;t++){var r,i;let n=this.points[t],o=null!==(r=this.points[t-1])&&void 0!==r?r:this.points[this.points.length-1],a=null!==(i=this.points[t+1])&&void 0!==i?i:this.points[0],s=n.roundness,l=o&&a&&pS(o,n,a);if(!n.controlsMoved()&&s>0&&!l){let r=n.curveBefore,i=n.curveAfter;if(void 0===r||void 0===i)continue;let o,a=n.roundedCurveBefore,l=n.roundedCurveAfter,c=r.getLength(),u=i.getLength(),d=Math.min(s,.499*c),h=Math.min(s,.499*u),f=Math.min(d,h),p=1-f/c,m=f/u,g=r.getPointAt(p,ES),v=i.getPointAt(m,CS);if(this._subSplitCurve(r,a,p,g,void 0),this._subSplitCurve(i,l,m,void 0,v),this.useCubicForRoundedCorners){let e=fS(g,n.position,v)/2,t=Math.tan(e)*g.distanceTo(n.position),[r,i]=gS(g,v,t,MS,TS),a=vS(r,i,n.position),[s,l]=yS(a,g,v,t,PS,DS);o=new Pl(g.clone(),s.clone(),l.clone(),v.clone())}else o=new Ol(g.clone(),n.position.clone(),v.clone());n.roundedCurveCorner=o,this.roundedCurves.splice(t+e,0,o),e++}}}t&&(null===(e=this.eventDispatcher)||void 0===e||e.dispatchEvent({type:"update"}))}_subSplitCurve(e,t,n,r,i){if(!(e instanceof Dl)){let o=e,a=t,s=o.getUtoTmapping(n,0),l=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=tS.subVectors(t,e).multiplyScalar(i).add(e),a=nS.subVectors(n,t).multiplyScalar(i).add(t),s=rS.subVectors(r,n).multiplyScalar(i).add(n),l=o,c=iS.subVectors(a,o).multiplyScalar(i).add(o),u=oS.subVectors(s,a).multiplyScalar(i).add(a),d=s,h=aS.subVectors(u,c).multiplyScalar(i).add(c);return[e.x,e.y,l.x,l.y,c.x,c.y,h.x,h.y,u.x,u.y,d.x,d.y,r.x,r.y]}(o.v0,o.v1,o.v2,o.v3,s);return void 0!==r&&(a.v0.set(l[0],l[1]),a.v1.set(l[2],l[3]),a.v2.set(l[4],l[5]),a.v3.set(l[6],l[7])),void 0!==i&&(a.v0.set(l[6],l[7]),a.v1.set(l[8],l[9]),a.v2.set(l[10],l[11]),a.v3.set(l[12],l[13])),a}return void 0!==r&&t.v2.copy(r),void 0!==i&&t.v1.copy(i),t}clone(){let e=new kS(this._width,this._height);return e.points=this.points.map((e=>e.clone())),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map((e=>e.clone())),e}toJSON(){return{points:this.points.reduce(((e,t)=>e.concat(t.toJSON())),[]),shapeHoles:this.shapeHoles.map((e=>e.toJSON())),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var t;this.points=[],this.pointIDs=0;let n=e.points.length/7;for(let r=0;r<n;r++){let t=7*r,n=e.points[t+0],i=e.points[t+1],o=e.points[t+2],a=e.points[t+3],s=e.points[t+4],l=e.points[t+5],c=e.points[t+6],u=new $w(Nn.generateUUID(),new jn(n,i));u.controls[0].position.set(o,a),u.controls[1].position.set(s,l),u.roundness=c,this.points.push(u)}return this.shapeHoles=null!==(t=e.shapeHoles)&&void 0!==t&&t.length?e.shapeHoles.map((e=>{let t=new kS;return t.fromJSON(e),t})):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let t=(e,t)=>{t instanceof Pl&&t.v3.equals(e.position)&&e.controls[0].position.copy(t.v2)};return this.points=(e=>{let n,r,i=[];for(n=0,r=e.length;n<r;n++)e[n]instanceof Ol&&(e[n]=cS(e[n]));for(n=0,r=e.length;n<r;n++){let r,o=e[n],a=n>0?e[n-1]:null;o instanceof Pl?(r=this.createPoint(o.v0),r.controls[1].position.copy(o.v1)):o instanceof Dl&&(r=this.createPoint(o.v1)),void 0!==r&&(null!==a&&t(r,a),i.push(r))}let o=e[e.length-1],a=!1;return o instanceof Pl?o.v3.equals(i[0].position)&&(i[0].controls[0].position.copy(o.v2),a=!0):o instanceof Dl&&o.v2.equals(i[0].position)&&(a=!0),this.isClosed=a,i})(e.curves),e instanceof Gl&&(this.shapeHoles=e.holes.map((e=>{let t=new kS;return t.fromShape(e),t}))),this.update(),this}};function OS(e,t){if(!e)throw t||"Assertion Failed!"}!function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"}(_S||(_S={})),function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"}(AS||(AS={}));var RS=function(){function e(){}return e.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},e.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},e.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},e.edgeEval=function(t,n,r){OS(e.vertLeq(t,n)&&e.vertLeq(n,r));var i=n.s-t.s,o=r.s-n.s;return i+o>0?i<o?n.t-t.t+(t.t-r.t)*(i/(i+o)):n.t-r.t+(r.t-t.t)*(o/(i+o)):0},e.edgeSign=function(t,n,r){OS(e.vertLeq(t,n)&&e.vertLeq(n,r));var i=n.s-t.s,o=r.s-n.s;return i+o>0?(n.t-r.t)*i+(n.t-t.t)*o:0},e.transEval=function(t,n,r){OS(e.transLeq(t,n)&&e.transLeq(n,r));var i=n.t-t.t,o=r.t-n.t;return i+o>0?i<o?n.s-t.s+(t.s-r.s)*(i/(i+o)):n.s-r.s+(r.s-t.s)*(o/(i+o)):0},e.transSign=function(t,n,r){OS(e.transLeq(t,n)&&e.transLeq(n,r));var i=n.t-t.t,o=r.t-n.t;return i+o>0?(n.s-r.s)*i+(n.s-t.s)*o:0},e.vertCCW=function(e,t,n){return e.s*(t.t-n.t)+t.s*(n.t-e.t)+n.s*(e.t-t.t)>=0},e.interpolate=function(e,t,n,r){return(e=e<0?0:e)<=(n=n<0?0:n)?0===n?(t+r)/2:t+e/(e+n)*(r-t):r+n/(e+n)*(t-r)},e.intersect=function(t,n,r,i,o){var a,s,l;e.vertLeq(t,n)||(l=t,t=n,n=l),e.vertLeq(r,i)||(l=r,r=i,i=l),e.vertLeq(t,r)||(l=t,t=r,r=l,l=n,n=i,i=l),e.vertLeq(r,n)?e.vertLeq(n,i)?((a=e.edgeEval(t,r,n))+(s=e.edgeEval(r,n,i))<0&&(a=-a,s=-s),o.s=e.interpolate(a,r.s,s,n.s)):((a=e.edgeSign(t,r,n))+(s=-e.edgeSign(t,i,n))<0&&(a=-a,s=-s),o.s=e.interpolate(a,r.s,s,i.s)):o.s=(r.s+n.s)/2,e.transLeq(t,n)||(l=t,t=n,n=l),e.transLeq(r,i)||(l=r,r=i,i=l),e.transLeq(t,r)||(l=t,t=r,r=l,l=n,n=i,i=l),e.transLeq(r,n)?e.transLeq(n,i)?((a=e.transEval(t,r,n))+(s=e.transEval(r,n,i))<0&&(a=-a,s=-s),o.t=e.interpolate(a,r.t,s,n.t)):((a=e.transSign(t,r,n))+(s=-e.transSign(t,i,n))<0&&(a=-a,s=-s),o.t=e.interpolate(a,r.t,s,i.t)):o.t=(r.t+n.t)/2},e}(),IS=function(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1},LS=function(){function e(e){this.side=e,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(e){this.Sym.Lface=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(e){this.Sym.Org=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(e){this.Sym.Lnext=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(e){this.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(e){this.Lnext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(e){this.Sym.Onext=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(e){this.Sym.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(e){this.Sym.Lnext.Sym=e},enumerable:!0,configurable:!0}),e}(),NS=function(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0},jS=function(){function e(){var e=new NS,t=new IS,n=new LS(0),r=new LS(1);e.next=e.prev=e,e.anEdge=null,t.next=t.prev=t,n.next=n,n.Sym=r,r.next=r,r.Sym=n,this.vHead=e,this.fHead=t,this.eHead=n,this.eHeadSym=r}return e.prototype.makeEdge_=function(e){var t=new LS(0),n=new LS(1);e.Sym.side<e.side&&(e=e.Sym);var r=e.Sym.next;return n.next=r,r.Sym.next=t,t.next=e,e.Sym.next=n,t.Sym=n,t.Onext=t,t.Lnext=n,t.Org=null,t.Lface=null,t.winding=0,t.activeRegion=null,n.Sym=t,n.Onext=n,n.Lnext=t,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,t},e.prototype.splice_=function(e,t){var n=e.Onext,r=t.Onext;n.Sym.Lnext=t,r.Sym.Lnext=e,e.Onext=r,t.Onext=n},e.prototype.makeVertex_=function(e,t,n){var r=e;OS(r,"Vertex can't be null!");var i=n.prev;r.prev=i,i.next=r,r.next=n,n.prev=r,r.anEdge=t;var o=t;do{o.Org=r,o=o.Onext}while(o!==t)},e.prototype.makeFace_=function(e,t,n){var r=e;OS(r,"Face can't be null");var i=n.prev;r.prev=i,i.next=r,r.next=n,n.prev=r,r.anEdge=t,r.trail=null,r.marked=!1,r.inside=n.inside;var o=t;do{o.Lface=r,o=o.Lnext}while(o!==t)},e.prototype.killEdge_=function(e){e.Sym.side<e.side&&(e=e.Sym);var t=e.next,n=e.Sym.next;t.Sym.next=n,n.Sym.next=t},e.prototype.killVertex_=function(e,t){var n=e.anEdge,r=n;do{r.Org=t,r=r.Onext}while(r!==n);var i=e.prev,o=e.next;o.prev=i,i.next=o},e.prototype.killFace_=function(e,t){var n=e.anEdge,r=n;do{r.Lface=t,r=r.Lnext}while(r!==n);var i=e.prev,o=e.next;o.prev=i,i.next=o},e.prototype.makeEdge=function(){var e=new NS,t=new NS,n=new IS,r=this.makeEdge_(this.eHead);return this.makeVertex_(e,r,this.vHead),this.makeVertex_(t,r.Sym,this.vHead),this.makeFace_(n,r,this.fHead),r},e.prototype.splice=function(e,t){var n=!1,r=!1;if(e!==t){if(t.Org!==e.Org&&(r=!0,this.killVertex_(t.Org,e.Org)),t.Lface!==e.Lface&&(n=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(t,e),!r){var i=new NS;this.makeVertex_(i,t,e.Org),e.Org.anEdge=e}if(!n){var o=new IS;this.makeFace_(o,t,e.Lface),e.Lface.anEdge=e}}},e.prototype.delete=function(e){var t=e.Sym,n=!1;if(e.Lface!==e.Rface&&(n=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!n){var r=new IS;this.makeFace_(r,e,e.Lface)}t.Onext===t?(this.killVertex_(t.Org,null),this.killFace_(t.Lface,null)):(e.Lface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),this.killEdge_(e)},e.prototype.addEdgeVertex=function(e){var t=this.makeEdge_(e),n=t.Sym;this.splice_(t,e.Lnext),t.Org=e.Dst;var r=new NS;return this.makeVertex_(r,n,t.Org),t.Lface=n.Lface=e.Lface,t},e.prototype.splitEdge=function(e){var t=this.addEdgeVertex(e).Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,t),e.Dst=t.Org,t.Dst.anEdge=t.Sym,t.Rface=e.Rface,t.winding=e.winding,t.Sym.winding=e.Sym.winding,t.idx=e.idx,t.Sym.idx=e.Sym.idx,t},e.prototype.connect=function(e,t){var n=!1,r=this.makeEdge_(e),i=r.Sym;if(t.Lface!==e.Lface&&(n=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(r,e.Lnext),this.splice_(i,t),r.Org=e.Dst,i.Org=t.Org,r.Lface=i.Lface=e.Lface,e.Lface.anEdge=i,!n){var o=new IS;this.makeFace_(o,r,e.Lface)}return r},e.prototype.zapFace=function(e){var t,n,r,i,o,a=e.anEdge;n=a.Lnext;do{n=(t=n).Lnext,t.Lface=null,null===t.Rface&&(t.Onext===t?this.killVertex_(t.Org,null):(t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),(r=t.Sym).Onext===r?this.killVertex_(r.Org,null):(r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t))}while(t!=a);i=e.prev,(o=e.next).prev=i,i.next=o},e.prototype.countFaceVerts_=function(e){var t=e.anEdge,n=0;do{n++,t=t.Lnext}while(t!==e.anEdge);return n},e.prototype.mergeConvexFaces=function(e){var t,n,r,i,o;for(t=this.fHead.next;t!==this.fHead;t=t.next)if(t.inside)for(o=(n=t.anEdge).Org;r=n.Lnext,(i=n.Sym)&&i.Lface&&i.Lface.inside&&(this.countFaceVerts_(t)+this.countFaceVerts_(i.Lface)-2<=e&&RS.vertCCW(n.Lprev.Org,n.Org,i.Lnext.Lnext.Org)&&RS.vertCCW(i.Lprev.Org,i.Org,n.Lnext.Lnext.Org)&&(r=i.Lnext,this.delete(i),n=null,i=null)),!n||n.Lnext.Org!==o;)n=r;return!0},e.prototype.check=function(){var e,t,n,r,i,o,a=this.fHead,s=this.vHead,l=this.eHead;for(t=a,t=a;(e=t.next)!==a;t=e){OS(e.prev===t),i=e.anEdge;do{OS(i.Sym!==i),OS(i.Sym.Sym===i),OS(i.Lnext.Onext.Sym===i),OS(i.Onext.Sym.Lnext===i),OS(i.Lface===e),i=i.Lnext}while(i!==e.anEdge)}for(OS(e.prev===t&&null===e.anEdge),r=s,r=s;(n=r.next)!==s;r=n){OS(n.prev===r),i=n.anEdge;do{OS(i.Sym!==i),OS(i.Sym.Sym===i),OS(i.Lnext.Onext.Sym===i),OS(i.Onext.Sym.Lnext===i),OS(i.Org===n),i=i.Onext}while(i!==n.anEdge)}for(OS(n.prev===r&&null===n.anEdge),o=l,o=l;(i=o.next)!==l;o=i)OS(i.Sym.next===o.Sym),OS(i.Sym!==i),OS(i.Sym.Sym===i),OS(null!==i.Org),OS(null!==i.Dst),OS(i.Lnext.Onext.Sym===i),OS(i.Onext.Sym.Lnext===i);OS(i.Sym.next===o.Sym&&i.Sym===this.eHeadSym&&i.Sym.Sym===i&&null===i.Org&&null===i.Dst&&null===i.Lface&&null===i.Rface)},e}(),BS=function(){this.handle=null},FS=function(){this.key=null,this.node=0},zS=function(){function e(e,t){this.leq=t,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=e,this.nodes=[],this.handles=[];for(var n=0;n<e+1;n++)this.nodes[n]=new BS,this.handles[n]=new FS;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(e){var t,n,r,i=this.nodes,o=this.handles;for(t=i[e].handle;;){if((r=e<<1)<this.size&&this.leq(o[i[r+1].handle].key,o[i[r].handle].key)&&++r,OS(r<=this.max),n=i[r].handle,r>this.size||this.leq(o[t].key,o[n].key)){i[e].handle=t,o[t].node=e;break}i[e].handle=n,o[n].node=e,e=r}},e.prototype.floatUp_=function(e){var t,n,r,i=this.nodes,o=this.handles;for(t=i[e].handle;;){if(n=i[r=e>>1].handle,0===r||this.leq(o[n].key,o[t].key)){i[e].handle=t,o[t].node=e;break}i[e].handle=n,o[n].node=e,e=r}},e.prototype.init=function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(e){var t,n;if(2*(t=++this.size)>this.max){var r,i;for(this.max*=2,i=this.nodes.length,this.nodes.length=this.max+1,r=i;r<this.nodes.length;r++)this.nodes[r]=new BS;for(i=this.handles.length,this.handles.length=this.max+1,r=i;r<this.handles.length;r++)this.handles[r]=new FS}return 0===this.freeList?n=t:(n=this.freeList,this.freeList=this.handles[n].node),this.nodes[t].handle=n,this.handles[n].node=t,this.handles[n].key=e,this.initialized&&this.floatUp_(t),n},e.prototype.extractMin=function(){var e=this.nodes,t=this.handles,n=e[1].handle,r=t[n].key;return this.size>0&&(e[1].handle=e[this.size].handle,t[e[1].handle].node=1,t[n].key=null,t[n].node=this.freeList,this.freeList=n,--this.size,this.size>0&&this.floatDown_(1)),r},e.prototype.delete=function(e){var t,n=this.nodes,r=this.handles;OS(e>=1&&e<=this.max&&null!==r[e].key),n[t=r[e].node].handle=n[this.size].handle,r[n[t].handle].node=t,--this.size,t<=this.size&&(t<=1||this.leq(r[n[t>>1].handle].key,r[n[t].handle].key)?this.floatDown_(t):this.floatUp_(t)),r[e].key=null,r[e].node=this.freeList,this.freeList=e},e}(),US=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},GS=function(){this.key=null,this.next=null,this.prev=null},VS=function(){function e(e,t){this.frame=e,this.leq=t,this.head=new GS,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(e){return this.insertBefore(this.head,e)},e.prototype.search=function(e){var t=this.head;do{t=t.next}while(null!==t.key&&!this.leq(this.frame,e,t.key));return t},e.prototype.insertBefore=function(e,t){do{e=e.prev}while(null!==e.key&&!this.leq(this.frame,e.key,t));var n=new GS;return n.key=t,n.next=e.next,e.next.prev=n,n.prev=e,e.next=n,n},e.prototype.delete=function(e){e.next.prev=e.prev,e.prev.next=e.next},e}(),HS=function(){function e(){}return e.regionBelow=function(e){return e.nodeUp.prev.key},e.regionAbove=function(e){return e.nodeUp.next.key},e.debugEvent=function(e){},e.addWinding=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},e.edgeLeq=function(e,t,n){var r=e.event,i=t.eUp,o=n.eUp;return i.Dst===r?o.Dst===r?RS.vertLeq(i.Org,o.Org)?RS.edgeSign(o.Dst,i.Org,o.Org)<=0:RS.edgeSign(i.Dst,o.Org,i.Org)>=0:RS.edgeSign(o.Dst,r,o.Org)<=0:o.Dst===r?RS.edgeSign(i.Dst,r,i.Org)>=0:RS.edgeEval(i.Dst,r,i.Org)>=RS.edgeEval(o.Dst,r,o.Org)},e.deleteRegion=function(e,t){t.fixUpperEdge&&OS(0===t.eUp.winding),t.eUp.activeRegion=null,e.dict.delete(t.nodeUp)},e.fixUpperEdge=function(e,t,n){OS(t.fixUpperEdge),e.mesh.delete(t.eUp),t.fixUpperEdge=!1,t.eUp=n,n.activeRegion=t},e.topLeftRegion=function(t,n){var r,i=n.eUp.Org;do{n=e.regionAbove(n)}while(n.eUp.Org===i);if(n.fixUpperEdge){if(null===(r=t.mesh.connect(e.regionBelow(n).eUp.Sym,n.eUp.Lnext)))return null;e.fixUpperEdge(t,n,r),n=e.regionAbove(n)}return n},e.topRightRegion=function(t){var n=t.eUp.Dst;do{t=e.regionAbove(t)}while(t.eUp.Dst===n);return t},e.addRegionBelow=function(e,t,n){var r=new US;return r.eUp=n,r.nodeUp=e.dict.insertBefore(t.nodeUp,r),r.fixUpperEdge=!1,r.sentinel=!1,r.dirty=!1,n.activeRegion=r,r},e.isWindingInside=function(e,t){switch(e.windingRule){case _S.ODD:return 0!==(1&t);case _S.NONZERO:return 0!==t;case _S.POSITIVE:return t>0;case _S.NEGATIVE:return t<0;case _S.ABS_GEQ_TWO:return t>=2||t<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,n){n.windingNumber=e.regionAbove(n).windingNumber+n.eUp.winding,n.inside=e.isWindingInside(t,n.windingNumber)},e.finishRegion=function(t,n){var r=n.eUp,i=r.Lface;i.inside=n.inside,i.anEdge=r,e.deleteRegion(t,n)},e.finishLeftRegions=function(t,n,r){for(var i,o=null,a=n,s=n.eUp;a!==r;){if(a.fixUpperEdge=!1,(i=(o=e.regionBelow(a)).eUp).Org!=s.Org){if(!o.fixUpperEdge){e.finishRegion(t,a);break}i=t.mesh.connect(s.Lprev,i.Sym),e.fixUpperEdge(t,o,i)}s.Onext!==i&&(t.mesh.splice(i.Oprev,i),t.mesh.splice(s,i)),e.finishRegion(t,a),s=o.eUp,a=o}return s},e.addRightEdges=function(t,n,r,i,o,a){var s,l,c,u,d=!0;c=r;do{OS(RS.vertLeq(c.Org,c.Dst)),e.addRegionBelow(t,n,c.Sym),c=c.Onext}while(c!==i);for(null===o&&(o=e.regionBelow(n).eUp.Rprev),l=n,u=o;(c=(s=e.regionBelow(l)).eUp.Sym).Org===u.Org;)c.Onext!==u&&(t.mesh.splice(c.Oprev,c),t.mesh.splice(u.Oprev,c)),s.windingNumber=l.windingNumber-c.winding,s.inside=e.isWindingInside(t,s.windingNumber),l.dirty=!0,!d&&e.checkForRightSplice(t,l)&&(e.addWinding(c,u),e.deleteRegion(t,l),t.mesh.delete(u)),d=!1,l=s,u=c;l.dirty=!0,OS(l.windingNumber-c.winding===s.windingNumber),a&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(e,t,n){e.mesh.splice(t,n)},e.vertexWeights=function(e,t,n){var r=RS.vertL1dist(t,e),i=RS.vertL1dist(n,e),o=.5*i/(r+i),a=.5*r/(r+i);e.coords[0]+=o*t.coords[0]+a*n.coords[0],e.coords[1]+=o*t.coords[1]+a*n.coords[1],e.coords[2]+=o*t.coords[2]+a*n.coords[2]},e.getIntersectData=function(t,n,r,i,o,a){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,e.vertexWeights(n,r,i),e.vertexWeights(n,o,a)},e.checkForRightSplice=function(t,n){var r=e.regionBelow(n),i=n.eUp,o=r.eUp;if(RS.vertLeq(i.Org,o.Org)){if(RS.edgeSign(o.Dst,i.Org,o.Org)>0)return!1;RS.vertEq(i.Org,o.Org)?i.Org!==o.Org&&(t.pq.delete(i.Org.pqHandle),e.spliceMergeVertices(t,o.Oprev,i)):(t.mesh.splitEdge(o.Sym),t.mesh.splice(i,o.Oprev),n.dirty=r.dirty=!0)}else{if(RS.edgeSign(i.Dst,o.Org,i.Org)<0)return!1;e.regionAbove(n).dirty=n.dirty=!0,t.mesh.splitEdge(i.Sym),t.mesh.splice(o.Oprev,i)}return!0},e.checkForLeftSplice=function(t,n){var r,i=e.regionBelow(n),o=n.eUp,a=i.eUp;if(OS(!RS.vertEq(o.Dst,a.Dst)),RS.vertLeq(o.Dst,a.Dst)){if(RS.edgeSign(o.Dst,a.Dst,o.Org)<0)return!1;e.regionAbove(n).dirty=n.dirty=!0,r=t.mesh.splitEdge(o),t.mesh.splice(a.Sym,r),r.Lface.inside=n.inside}else{if(RS.edgeSign(a.Dst,o.Dst,a.Org)>0)return!1;n.dirty=i.dirty=!0,r=t.mesh.splitEdge(a),t.mesh.splice(o.Lnext,a.Sym),r.Rface.inside=n.inside}return!0},e.checkForIntersect=function(t,n){var r,i,o=e.regionBelow(n),a=n.eUp,s=o.eUp,l=a.Org,c=s.Org,u=a.Dst,d=s.Dst,h=new NS;if(OS(!RS.vertEq(d,u)),OS(RS.edgeSign(u,t.event,l)<=0),OS(RS.edgeSign(d,t.event,c)>=0),OS(l!==t.event&&c!==t.event),OS(!n.fixUpperEdge&&!o.fixUpperEdge),l===c||Math.min(l.t,u.t)>Math.max(c.t,d.t))return!1;if(RS.vertLeq(l,c)){if(RS.edgeSign(d,l,c)>0)return!1}else if(RS.edgeSign(u,c,l)<0)return!1;return e.debugEvent(t),RS.intersect(u,l,d,c,h),OS(Math.min(l.t,u.t)<=h.t),OS(h.t<=Math.max(c.t,d.t)),OS(Math.min(d.s,u.s)<=h.s),OS(h.s<=Math.max(c.s,l.s)),RS.vertLeq(h,t.event)&&(h.s=t.event.s,h.t=t.event.t),r=RS.vertLeq(l,c)?l:c,RS.vertLeq(r,h)&&(h.s=r.s,h.t=r.t),RS.vertEq(h,l)||RS.vertEq(h,c)?(e.checkForRightSplice(t,n),!1):!RS.vertEq(u,t.event)&&RS.edgeSign(u,t.event,h)>=0||!RS.vertEq(d,t.event)&&RS.edgeSign(d,t.event,h)<=0?d===t.event?(t.mesh.splitEdge(a.Sym),t.mesh.splice(s.Sym,a),n=e.topLeftRegion(t,n),a=e.regionBelow(n).eUp,e.finishLeftRegions(t,e.regionBelow(n),o),e.addRightEdges(t,n,a.Oprev,a,a,!0),!0):u===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(a.Lnext,s.Oprev),o=n,n=e.topRightRegion(n),i=e.regionBelow(n).eUp.Rprev,o.eUp=s.Oprev,s=e.finishLeftRegions(t,o,null),e.addRightEdges(t,n,s.Onext,a.Rprev,i,!0),!0):(RS.edgeSign(u,t.event,h)>=0&&(e.regionAbove(n).dirty=n.dirty=!0,t.mesh.splitEdge(a.Sym),a.Org.s=t.event.s,a.Org.t=t.event.t),RS.edgeSign(d,t.event,h)<=0&&(n.dirty=o.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(a.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,a),a.Org.s=h.s,a.Org.t=h.t,a.Org.pqHandle=t.pq.insert(a.Org),e.getIntersectData(t,a.Org,l,u,c,d),e.regionAbove(n).dirty=n.dirty=o.dirty=!0,!1)},e.walkDirtyRegions=function(t,n){for(var r,i,o=e.regionBelow(n);;){for(;o.dirty;)n=o,o=e.regionBelow(o);if(!n.dirty&&(o=n,null===(n=e.regionAbove(n))||!n.dirty))return;if(n.dirty=!1,r=n.eUp,i=o.eUp,r.Dst!==i.Dst&&e.checkForLeftSplice(t,n)&&(o.fixUpperEdge?(e.deleteRegion(t,o),t.mesh.delete(i),i=(o=e.regionBelow(n)).eUp):n.fixUpperEdge&&(e.deleteRegion(t,n),t.mesh.delete(r),r=(n=e.regionAbove(o)).eUp)),r.Org!==i.Org)if(r.Dst===i.Dst||n.fixUpperEdge||o.fixUpperEdge||r.Dst!==t.event&&i.Dst!==t.event)e.checkForRightSplice(t,n);else if(e.checkForIntersect(t,n))return;r.Org===i.Org&&r.Dst===i.Dst&&(e.addWinding(i,r),e.deleteRegion(t,n),t.mesh.delete(r),n=e.regionAbove(o))}},e.connectRightVertex=function(t,n,r){var i,o=r.Onext,a=e.regionBelow(n),s=n.eUp,l=a.eUp,c=!1;s.Dst!==l.Dst&&e.checkForIntersect(t,n),RS.vertEq(s.Org,t.event)&&(t.mesh.splice(o.Oprev,s),n=e.topLeftRegion(t,n),o=e.regionBelow(n).eUp,e.finishLeftRegions(t,e.regionBelow(n),a),c=!0),RS.vertEq(l.Org,t.event)&&(t.mesh.splice(r,l.Oprev),r=e.finishLeftRegions(t,a,null),c=!0),c?e.addRightEdges(t,n,r.Onext,o,o,!0):(i=RS.vertLeq(l.Org,s.Org)?l.Oprev:s,i=t.mesh.connect(r.Lprev,i),e.addRightEdges(t,n,i,i.Onext,i.Onext,!1),i.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,n))},e.connectLeftDegenerate=function(t,n,r){var i,o,a,s,l;return i=n.eUp,RS.vertEq(i.Org,r)?(OS(!1),void e.spliceMergeVertices(t,i,r.anEdge)):RS.vertEq(i.Dst,r)?(OS(!1),n=e.topRightRegion(n),o=s=(a=(l=e.regionBelow(n)).eUp.Sym).Onext,l.fixUpperEdge&&(OS(o!==a),e.deleteRegion(t,l),t.mesh.delete(a),a=o.Oprev),t.mesh.splice(r.anEdge,a),RS.edgeGoesLeft(o)||(o=null),void e.addRightEdges(t,n,a.Onext,s,o,!0)):(t.mesh.splitEdge(i.Sym),n.fixUpperEdge&&(t.mesh.delete(i.Onext),n.fixUpperEdge=!1),t.mesh.splice(r.anEdge,i),void e.sweepEvent(t,r))},e.connectLeftVertex=function(t,n){var r,i,o,a,s,l,c=new US;if(c.eUp=n.anEdge.Sym,r=t.dict.search(c).key,i=e.regionBelow(r)){if(a=r.eUp,s=i.eUp,0===RS.edgeSign(a.Dst,n,a.Org))return void e.connectLeftDegenerate(t,r,n);if(o=RS.vertLeq(s.Dst,a.Dst)?r:i,r.inside||o.fixUpperEdge){if(o===r)l=t.mesh.connect(n.anEdge.Sym,a.Lnext);else l=t.mesh.connect(s.Dnext,n.anEdge).Sym;o.fixUpperEdge?e.fixUpperEdge(t,o,l):e.computeWinding(t,e.addRegionBelow(t,r,l)),e.sweepEvent(t,n)}else e.addRightEdges(t,r,n.anEdge,n.anEdge,null,!0)}},e.sweepEvent=function(t,n){t.event=n,e.debugEvent(t);for(var r=n.anEdge;null===r.activeRegion;)if((r=r.Onext)===n.anEdge)return void e.connectLeftVertex(t,n);var i=e.topLeftRegion(t,r.activeRegion);OS(null!==i);var o=e.regionBelow(i),a=o.eUp,s=e.finishLeftRegions(t,o,null);s.Onext===a?e.connectRightVertex(t,i,s):e.addRightEdges(t,i,s.Onext,a,a,!0)},e.addSentinel=function(e,t,n,r){var i=new US,o=e.mesh.makeEdge();o.Org.s=n,o.Org.t=r,o.Dst.s=t,o.Dst.t=r,e.event=o.Dst,i.eUp=o,i.windingNumber=0,i.inside=!1,i.fixUpperEdge=!1,i.sentinel=!0,i.dirty=!1,i.nodeUp=e.dict.insert(i)},e.initEdgeDict=function(t){t.dict=new VS(t,e.edgeLeq);var n=t.bmax[0]-t.bmin[0],r=t.bmax[1]-t.bmin[1],i=t.bmin[0]-n,o=t.bmax[0]+n,a=t.bmin[1]-r,s=t.bmax[1]+r;e.addSentinel(t,i,o,a),e.addSentinel(t,i,o,s)},e.doneEdgeDict=function(t){for(var n,r=0;null!==(n=t.dict.min().key);)n.sentinel||(OS(n.fixUpperEdge),OS(1===++r)),OS(0===n.windingNumber),e.deleteRegion(t,n)},e.removeDegenerateEdges=function(t){var n,r,i,o=t.mesh.eHead;for(n=o.next;n!==o;n=r)r=n.next,i=n.Lnext,RS.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(e.spliceMergeVertices(t,i,n),t.mesh.delete(n),i=(n=i).Lnext),i.Lnext===n&&(i!==n&&((i===r||i===r.Sym)&&(r=r.next),t.mesh.delete(i)),(n===r||n===r.Sym)&&(r=r.next),t.mesh.delete(n))},e.initPriorityQ=function(e){var t,n,r,i=0;for(n=(r=e.mesh.vHead).next;n!==r;n=n.next)i++;for(i+=8,t=e.pq=new zS(i,RS.vertLeq),n=(r=e.mesh.vHead).next;n!==r;n=n.next)n.pqHandle=t.insert(n);return n===r&&(t.init(),!0)},e.donePriorityQ=function(e){e.pq=null},e.removeDegenerateFaces=function(t,n){var r,i,o;for(r=n.fHead.next;r!==n.fHead;r=i)i=r.next,OS((o=r.anEdge).Lnext!==o),o.Lnext.Lnext===o&&(e.addWinding(o.Onext,o),t.mesh.delete(o));return!0},e.computeInterior=function(t,n){var r,i;if(void 0===n&&(n=!0),e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);null!==(r=t.pq.extractMin());){for(;null!==(i=t.pq.min())&&RS.vertEq(i,r);)i=t.pq.extractMin(),e.spliceMergeVertices(t,r.anEdge,i.anEdge);e.sweepEvent(t,r)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),!!e.removeDegenerateFaces(t,t.mesh)&&(n&&t.mesh.check(),!0)},e}(),WS=function(){function e(){this.mesh=new jS,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=_S.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.prototype.normalize_=function(e){var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!t)throw"Zero-size vector!";t=Math.sqrt(t),e[0]/=t,e[1]/=t,e[2]/=t},e.prototype.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},e.prototype.computeNormal_=function(e){var t,n,r,i,o,a,s=[0,0,0],l=[0,0,0],c=[0,0,0],u=[0,0,0],d=[0,0,0],h=[null,null,null],f=[null,null,null],p=this.mesh.vHead;t=p.next;for(var m=0;m<3;++m)i=t.coords[m],l[m]=i,f[m]=t,s[m]=i,h[m]=t;for(t=p.next;t!==p;t=t.next)for(var g=0;g<3;++g)(i=t.coords[g])<l[g]&&(l[g]=i,f[g]=t),i>s[g]&&(s[g]=i,h[g]=t);var v=0;if(s[1]-l[1]>s[0]-l[0]&&(v=1),s[2]-l[2]>s[v]-l[v]&&(v=2),l[v]>=s[v])return e[0]=0,e[1]=0,void(e[2]=1);for(a=0,n=f[v],r=h[v],c[0]=n.coords[0]-r.coords[0],c[1]=n.coords[1]-r.coords[1],c[2]=n.coords[2]-r.coords[2],t=p.next;t!==p;t=t.next)u[0]=t.coords[0]-r.coords[0],u[1]=t.coords[1]-r.coords[1],u[2]=t.coords[2]-r.coords[2],d[0]=c[1]*u[2]-c[2]*u[1],d[1]=c[2]*u[0]-c[0]*u[2],d[2]=c[0]*u[1]-c[1]*u[0],(o=d[0]*d[0]+d[1]*d[1]+d[2]*d[2])>a&&(a=o,e[0]=d[0],e[1]=d[1],e[2]=d[2]);a<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(c)]=1)},e.prototype.checkOrientation_=function(){for(var e,t,n=this.mesh.fHead,r=this.mesh.vHead,i=0,o=n.next;o!==n;o=o.next)if(!((t=o.anEdge).winding<=0))do{i+=(t.Org.s-t.Dst.s)*(t.Org.t+t.Dst.t),t=t.Lnext}while(t!==o.anEdge);if(i<0){for(e=r.next;e!==r;e=e.next)e.t=-e.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var e,t,n=this.mesh.vHead,r=[0,0,0],i=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),i=!0),e=this.sUnit,t=this.tUnit;var o=this.longAxis_(r);e[o]=0,e[(o+1)%3]=1,e[(o+2)%3]=0,t[o]=0,t[(o+1)%3]=0,t[(o+2)%3]=r[o]>0?1:-1;for(var a=n.next;a!==n;a=a.next)a.s=this.dot_(a.coords,e),a.t=this.dot_(a.coords,t);i&&this.checkOrientation_();for(var s=!0,l=n.next;l!==n;l=l.next)s?(this.bmin[0]=this.bmax[0]=l.s,this.bmin[1]=this.bmax[1]=l.t,s=!1):(l.s<this.bmin[0]&&(this.bmin[0]=l.s),l.s>this.bmax[0]&&(this.bmax[0]=l.s),l.t<this.bmin[1]&&(this.bmin[1]=l.t),l.t>this.bmax[1]&&(this.bmax[1]=l.t))},e.prototype.addWinding_=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},e.prototype.tessellateMonoRegion_=function(e,t){var n,r;if((n=t.anEdge).Lnext===n||n.Lnext.Lnext===n)throw"Mono region invalid";for(;RS.vertLeq(n.Dst,n.Org);n=n.Lprev);for(;RS.vertLeq(n.Org,n.Dst);n=n.Lnext);r=n.Lprev;for(;n.Lnext!==r;)if(RS.vertLeq(n.Dst,r.Org)){for(;r.Lnext!==n&&(RS.edgeGoesLeft(r.Lnext)||RS.edgeSign(r.Org,r.Dst,r.Lnext.Dst)<=0);)r=e.connect(r.Lnext,r).Sym;r=r.Lprev}else{for(;r.Lnext!==n&&(RS.edgeGoesRight(n.Lprev)||RS.edgeSign(n.Dst,n.Org,n.Lprev.Org)>=0);)n=e.connect(n,n.Lprev).Sym;n=n.Lnext}if(r.Lnext===n)throw"Mono region invalid";for(;r.Lnext.Lnext!==n;)r=e.connect(r.Lnext,r).Sym;return!0},e.prototype.tessellateInterior_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)if(t=n.next,n.inside&&!this.tessellateMonoRegion_(e,n))return!1;return!0},e.prototype.discardExterior_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)t=n.next,n.inside||e.zapFace(n)},e.prototype.setWindingNumber_=function(e,t,n){for(var r,i=e.eHead.next;i!==e.eHead;i=r)r=i.next,i.Rface.inside!==i.Lface.inside?i.winding=i.Lface.inside?t:-t:n?e.delete(i):i.winding=0},e.prototype.getNeighbourFace_=function(e){return e.Rface&&e.Rface.inside?e.Rface.n:-1},e.prototype.outputPolymesh_=function(e,t,n,r){var i,o,a=0,s=0;n>3&&e.mergeConvexFaces(n);for(var l=e.vHead.next;l!==e.vHead;l=l.next)l.n=-1;for(var c=e.fHead.next;c!==e.fHead;c=c.next)if(c.n=-1,c.inside){i=c.anEdge,o=0;do{-1===(l=i.Org).n&&(l.n=s,s++),o++,i=i.Lnext}while(i!==c.anEdge);if(o>n)throw"Face vertex greater that support polygon";c.n=a,++a}this.elementCount=a,t===AS.CONNECTED_POLYGONS&&(a*=2),this.elements=[],this.elements.length=a*n,this.vertexCount=s,this.vertices=[],this.vertices.length=s*r,this.vertexIndices=[],this.vertexIndices.length=s;for(l=e.vHead.next;l!==e.vHead;l=l.next)if(-1!==l.n){var u=l.n*r;this.vertices[u+0]=l.coords[0],this.vertices[u+1]=l.coords[1],r>2&&(this.vertices[u+2]=l.coords[2]),this.vertexIndices[l.n]=l.idx}var d=0;for(c=e.fHead.next;c!==e.fHead;c=c.next)if(c.inside){i=c.anEdge,o=0;do{l=i.Org;this.elements[d++]=l.n,o++,i=i.Lnext}while(i!==c.anEdge);for(var h=o;h<n;++h)this.elements[d++]=-1;if(t===AS.CONNECTED_POLYGONS){i=c.anEdge;do{this.elements[d++]=this.getNeighbourFace_(i),i=i.Lnext}while(i!==c.anEdge);for(var f=o;f<n;++f)this.elements[d++]=-1}}},e.prototype.outputContours_=function(e,t){var n,r,i=0,o=0;this.vertexCount=0,this.elementCount=0;for(var a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){r=n=a.anEdge;do{this.vertexCount++,n=n.Lnext}while(n!==r);this.elementCount++}this.elements=[],this.elements.length=2*this.elementCount,this.vertices=[],this.vertices.length=this.vertexCount*t,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var s=0,l=0,c=0;i=0;for(a=e.fHead.next;a!==e.fHead;a=a.next)if(a.inside){o=0,r=n=a.anEdge;do{this.vertices[s++]=n.Org.coords[0],this.vertices[s++]=n.Org.coords[1],t>2&&(this.vertices[s++]=n.Org.coords[2]),this.vertexIndices[l++]=this.vertexIdCallback?this.vertexIdCallback(n):n.Org.idx,o++,n=n.Lnext}while(n!==r);this.elements[c++]=i,this.elements[c++]=o,i+=o}},e.prototype.addContour=function(e,t){null===this.mesh&&(this.mesh=new jS),e<2&&(e=2),e>3&&(e=3);for(var n=null,r=0;r<t.length;r+=e)null===n?(n=this.mesh.makeEdge(),this.mesh.splice(n,n.Sym)):(this.mesh.splitEdge(n),n=n.Lnext),n.Org.coords[0]=t[r+0],n.Org.coords[1]=t[r+1],n.Org.coords[2]=e>2?t[r+2]:0,n.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(n),n.winding=1,n.Sym.winding=-1},e.prototype.tesselate=function(e,t,n,r,i,o){if(void 0===e&&(e=_S.ODD),void 0===t&&(t=AS.POLYGONS),void 0===o&&(o=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,i&&(this.normal[0]=i[0],this.normal[1]=i[1],this.normal[2]=i[2]),this.windingRule=e,r<2&&(r=2),r>3&&(r=3),!this.mesh)return!1;this.projectPolygon_(),HS.computeInterior(this,o);var a=this.mesh;return t===AS.BOUNDARY_CONTOURS?this.setWindingNumber_(a,1,!0):this.tessellateInterior_(a),o&&a.check(),t===AS.BOUNDARY_CONTOURS?this.outputContours_(a,r):this.outputPolymesh_(a,t,n,r),!0},e}();function qS(e){var t=e.windingRule,n=void 0===t?_S.ODD:t,r=e.elementType,i=void 0===r?AS.POLYGONS:r,o=e.polySize,a=void 0===o?3:o,s=e.vertexSize,l=void 0===s?2:s,c=e.normal,u=void 0===c?[0,0,1]:c,d=e.contours,h=void 0===d?[]:d,f=e.strict,p=void 0===f||f,m=e.debug,g=void 0!==m&&m;if(!h&&p)throw new Error("Contours can't be empty");if(h){var v=new WS;e.edgeCreateCallback&&(v.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(v.vertexIdCallback=e.vertexIdCallback);for(var y=0;y<h.length;y++)v.addContour(l||2,h[y]);return v.tesselate(n,i,a,l,u,p),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:g?v.mesh:void 0}}}_S.ODD,_S.NONZERO,_S.POSITIVE,_S.NEGATIVE,_S.ABS_GEQ_TWO,AS.POLYGONS,AS.CONNECTED_POLYGONS,AS.BOUNDARY_CONTOURS;var YS=class extends zi{constructor(e){var t,n,r,i,o,a;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.type="ShapeGeometry",this.windingRule=_S.ODD,this.elementType=AS.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=s,this._triangulationOptions=Object.assign({windingRule:_S.ODD,elementType:AS.POLYGONS,polySize:3,vertexSize:2,strict:!0},l);let c,u,d,h=this._shape.extractShapePointsToFlatArray([],this._curveSegments),f=this._shape.shapeHoles.map((e=>e.extractShapePointsToFlatArray([],this._curveSegments))),p=!0,m=!0;for(let y=0,x=h.length/2;y<x;y++){let e=2*y,t=h[e+0],n=h[e+1];if(void 0!==u&&t!==u&&(p=!1),void 0!==d&&n!==d&&(m=!1),u=t,d=n,!p&&!m)break}!p&&!m&&(c=qS({contours:[h,...f],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict}));let g=null!==(t=null===(n=c)||void 0===n?void 0:n.vertexCount)&&void 0!==t?t:1,v=null!==(r=null===(i=c)||void 0===i?void 0:i.elementCount)&&void 0!==r?r:1;if(this._positionAttribute=new Pi(new Float32Array(3*g),3),this._normalAttribute=new Pi(new Float32Array(3*g),3),this._uvAttribute=new Pi(new Float32Array(2*g),2),this._indexAttribute=new Pi(new Uint32Array(3*v),1),c){let e=1/0,t=-1/0,n=1/0,r=-1/0;for(let a=0,s=g;a<s;a++){let i=2*a,o=c.vertices[i+0],s=c.vertices[i+1];o<e&&(e=o),o>t&&(t=o),s<n&&(n=s),s>r&&(r=s)}let i=t-e,o=r-n;for(let a=0,s=g;a<s;a++){let t=2*a,r=c.vertices[t+0],s=c.vertices[t+1],l=(r-e)/i,u=(s-n)/o;this._positionAttribute.setXYZ(a,r,s,0),this._normalAttribute.setXYZ(a,0,0,1),this._uvAttribute.setXY(a,l,u)}for(let a=0,s=v;a<s;a++){let e=3*a,t=c.elements[e+0],n=c.elements[e+1],r=c.elements[e+2];this._indexAttribute.setX(e+0,t),this._indexAttribute.setX(e+1,n),this._indexAttribute.setX(e+2,r)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,3*(null!==(o=null===(a=c)||void 0===a?void 0:a.elementCount)&&void 0!==o?o:1))}clone(){let e=new YS(this._shape,this._curveSegments);return e.userData=Wm(this.userData),e}},XS=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log("allocating with cap ".concat(e));let n=e*XS.eSize;this.buffer=new ArrayBuffer(n);let r=Float32Array.BYTES_PER_ELEMENT,i=0;this.positions=new Float32Array(this.buffer,i*r,3*e),i+=3*e,this.normals=new Float32Array(this.buffer,i*r,3*e),i+=3*e,this.uvs=new Float32Array(this.buffer,i*r,2*e)}realloc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log("resizing from ".concat(this.capacity," \u2192 ").concat(e));let n=e*XS.eSize,r=new ArrayBuffer(n),i=Float32Array.BYTES_PER_ELEMENT,o=0,a=new Float32Array(r,o*i,3*e);o+=3*e;let s=new Float32Array(r,o*i,3*e);o+=3*e;let l=new Float32Array(r,o*i,2*e);a.set(this.positions.slice(0,3*this.size)),s.set(this.normals.slice(0,3*this.size)),l.set(this.uvs.slice(0,2*this.size)),this.buffer=r,this.positions=a,this.normals=s,this.uvs=l,this.capacity=e}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.size+e;if(t>this.capacity){let e=this.capacity;for(;t>e;)e*=2;this.realloc(e)}let n=this.size;return this.size=t,n}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log("shrinking ".concat(this.capacity," \u2192 ").concat(this.size)),this.realloc(this.size,!0)}},QS=XS;QS.eSize=8*Float32Array.BYTES_PER_ELEMENT;var KS=(e,t)=>n=>{let[r,i]=n;return i<r&&(i+=t),(e>=r?e:e+t)<=i},ZS=class extends zi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_S.ODD;super(),this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._bevel=n,this._curveSegments=r,this._bevelSegmentsInput=i,n<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(n,t/2-1e-12),this._bevelSegments=Math.floor(i));let a=this._shape.extractShapePointsToFlatArray([],r),s=this._shape.shapeHoles.map((e=>{let t=e.extractShapePointsToFlatArray([],r),n=[];for(let r=t.length-1;r>=1;r-=2){let e=t[r-1],i=t[r-0];n.push(e,i)}return n})),l=qS({windingRule:o,elementType:AS.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[a]}),c=qS({windingRule:_S.ODD,elementType:AS.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...s]});if(!l)throw new Error("error generating geometry");let u=l.elementCount;if(c){l.elementCount+=c.elementCount;for(let e=0;e<c.elements.length;e++){let t=c.elements[e],n=e%2===0?l.vertexCount:0;l.elements.push(t+n)}for(let e=0;e<c.vertexIndices.length;e++){let t=c.vertexIndices[e],n=l.vertexCount;l.vertexIndices.push(t+n)}for(let e=0;e<c.vertices.length;e++){let t=c.vertices[e];l.vertices.push(t)}}let d=1/0,h=-1/0,f=1/0,p=-1/0;for(let S=0,_=l.vertexCount;S<_;S++){let e=2*S,t=l.vertices[e+0],n=l.vertices[e+1];t<d&&(d=t),t>h&&(h=t),n<f&&(f=n),n>p&&(p=n)}this._minX=d,this._minY=f,this._width=h-d,this._height=p-f;let m=2*l.vertexCount*(2+this._bevelSegments);this._buffer=new QS(m);let g=[],v=[];for(let S=l.elementCount-1;S>=0;S--){let e=S>=u,t=2*S,n=l.elements[t+0],i=l.elements[t+1],o=n+i,a={start:n,count:i,normals:[],continuous:[],concave:[]},c=n,d=o-1,h=n+1,f=this._shape.roundedCurves.length;do{let t=c-n,r=l.vertices[2*d+0],s=l.vertices[2*d+1],u=l.vertices[2*c+0],p=l.vertices[2*c+1],m=l.vertices[2*h+0],g=l.vertices[2*h+1],v=u-r,y=p-s,x=Math.sqrt(v*v+y*y);v/=x,y/=x;let b=u-m,w=p-g,S=Math.sqrt(b*b+w*w);b/=S,w/=S,a.normals[2*t+0]=-w,a.normals[2*t+1]=b,a.concave[t]=v*w-y*b>0;let _=l.vertexIndices[c];if(Array.isArray(_))a.continuous[t]=!1;else{let[e,n]=this._shape.getCurveIndexFromVertexId(_-1,!0);if(n>0&&n<1)a.continuous[t]=!0;else{let r=1===n?e+1:e-1;r=(r+f)%f;let i=1===n?0:1,o=this._shape.roundedCurves[e].getTangent(n),s=this._shape.roundedCurves[r].getTangent(i);a.continuous[t]=o.dot(s)>.95}}e&&(a.normals[2*t+0]*=-1,a.normals[2*t+1]*=-1),[d,c,h]=[c,h,h+1],h>=o&&(h-=i)}while(h!==n+1);let p=[];p.push({bevelI:0,angle:0,size:0,boundary:{vertices:l.vertices.slice(2*n,2*o),vertexCount:i,vertexIndices:new Array(i).fill(!0).map(((e,t)=>[t,t])),elements:[0,i],elementCount:1,mesh:null},reverseMap:[],insetPoints:l.vertices.slice(2*n,2*o)});for(let s=1;s<=this._bevelSegments;s++){let t=s/this._bevelSegments*Math.PI/2,n=(1-Math.cos(t))*this._bevelSize,o=[],c=[],u=[],d=[],h=0;for(let s=0;s<i;s++){let t=2*s,f=(s-1+i)%i*2,p=l.vertices[2*a.start+t+0],m=l.vertices[2*a.start+t+1],g=-a.normals[f+0]*n,v=-a.normals[f+1]*n,y=-a.normals[t+0]*n,x=-a.normals[t+1]*n;if(a.concave[s]||!a.concave[s]&&e){let t=Math.atan2(v,g),i=Math.atan2(x,y);i>t&&(i-=2*Math.PI);let l=i-t;if(a.continuous[s]||e){let r=t+l/2,i=Math.cos(r)*n,a=Math.sin(r)*n;o[2*h+0]=p+i*(e?-1:1),o[2*h+1]=m+a*(e?-1:1),d[h]=s,h++}else{let e=Math.max(1,Math.floor(r/4*Math.abs(l)/Math.PI));for(let r=0;r<=e;r++){let i=t+l*(r/e),a=Math.cos(i)*n,c=Math.sin(i)*n;o[2*h+0]=p+a,o[2*h+1]=m+c,d[h]=s,h++}}}else o[2*h+0]=p+g,o[2*h+1]=m+v,d[h]=s,c[s]=h,h++,o[2*h+0]=p,o[2*h+1]=m,d[h]=s,h++,o[2*h+0]=p+y,o[2*h+1]=m+x,d[h]=s,u[s]=h,h++}let f=qS({windingRule:_S.POSITIVE,elementType:AS.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o],edgeCreateCallback:e=>{let t=e.Org.idx,n=d[t],r=d[(t+1)%d.length];e.idx=[n,r],e.Sym.idx=[r,n]},vertexIdCallback:e=>{let t=e.Lprev.idx;return[t?t[1]:0,e.idx[0]]}});if(!f)throw console.log("Error"),new Error("error generating bevel geometry for ".concat(s,"'th loop"));if(!f.vertexCount)break;for(let e=0;e<f.vertexIndices.length;e++){let[t,n]=f.vertexIndices[e];if(t===n)continue;let r=n;n<t&&(r+=i);for(let o=t;o<r;o++){let r=o%i,s=(o+1)%i;if(!a.continuous[r]||!a.continuous[s]){f.vertexIndices[e]=[t,r],f.vertexIndices.splice(e+1,0,[s,n]),f.vertices.splice(2*(e+1),0,f.vertices[2*e],f.vertices[2*e+1]);break}}}p.push({bevelI:s,angle:t,size:n,boundary:f,reverseMap:d,insetPoints:o})}let m=(e,t,n)=>{let r=0,i=e.boundary.vertexIndices.length;for(;r<i&&n(e.boundary.vertexIndices[t]);)t=(t+1)%i,r++;return r},y=g.length;for(let r=1;r<p.length;r++){let e=p[r-1],t=p[r],n=e.boundary.vertexIndices.length,o=t.boundary.vertexIndices.length;if(!n||!o)break;let s=a.concave.length,l=0,c=KS(l,i);for(;!e.boundary.vertexIndices.filter(c).length||!t.boundary.vertexIndices.filter(c).length;)l++,c=KS(l,i);let u=e.boundary.vertexIndices.findIndex(c),d=t.boundary.vertexIndices.findIndex(c);do{u=(u+1)%n}while(c(e.boundary.vertexIndices[u]));do{d=(d+1)%o}while(c(t.boundary.vertexIndices[d]));l=(l+1)%i;let h,f,v=l,y=this.buildBevelVert(a,e,(u-1+n)%n),x=this.buildBevelVert(a,t,(d-1+o)%o),b=!1;do{c=KS(l,i);let r=m(e,u,c),p=m(t,d,c),v=b;if(b=!1,r&&!p){for(let t=0;t<r;t++)h=this.buildBevelVert(a,e,(u+t)%n,t/(r-1)),g.push(y.topN,h.topP,x.topN),g.push(h.bottomP,y.bottomN,x.bottomN),y=h;b=!0}else if(!r&&p)for(let e=0;e<p;e++)f=this.buildBevelVert(a,t,(d+e)%o,e/(p-1)),g.push(x.topN,y.topP,f.topP),g.push(y.bottomP,x.bottomN,f.bottomP),x=f;else if(r&&p)if(h=this.buildBevelVert(a,e,u,0),f=this.buildBevelVert(a,t,d,0),v?(g.push(y.topN,f.topP,x.topN),g.push(y.topN,h.topP,f.topP),g.push(f.bottomP,y.bottomN,x.bottomN),g.push(f.bottomP,h.bottomP,y.bottomN)):(g.push(x.topN,y.topN,h.topP),g.push(x.topN,h.topP,f.topP),g.push(h.bottomP,y.bottomN,x.bottomN),g.push(h.bottomP,x.bottomN,f.bottomP)),y=h,x=f,r===p)for(let i=1;i<r;i++)h=this.buildBevelVert(a,e,(u+i)%n,i/(r-1)),f=this.buildBevelVert(a,t,(d+i)%o,i/(p-1)),g.push(y.topN,h.topP,x.topN),g.push(x.topN,h.topP,f.topP),g.push(h.bottomP,y.bottomN,x.bottomN),g.push(h.bottomP,x.bottomN,f.bottomP),y=h,x=f;else if(r>p){let i=r/p,s=0;for(let l=1;l<r;l++)h=this.buildBevelVert(a,e,(u+l)%n,l/(r-1)),g.push(y.topN,h.topP,x.topN),g.push(h.bottomP,y.bottomN,x.bottomN),y=h,l>(s+1)*i&&(s++,f=this.buildBevelVert(a,t,(d+s)%o,s/(p-1)),g.push(x.topN,h.topP,f.topP),g.push(h.bottomP,x.bottomN,f.bottomP),x=f)}else{let i=p/r,s=0;for(let l=1;l<p;l++)f=this.buildBevelVert(a,t,(d+l)%o,l/(p-1)),g.push(x.topN,h.topP,f.topP),g.push(h.bottomP,x.bottomN,f.bottomP),x=f,l>(s+1)*i&&(s++,h=this.buildBevelVert(a,e,(u+s)%n,s/(r-1)),g.push(y.topN,h.topP,x.topN),g.push(h.bottomP,y.bottomN,x.bottomN),y=h)}u=(u+r)%n,d=(d+p)%o,l=(l+1)%s}while(l!==v)}{let e=p[0];for(let t=0,n=e.boundary.vertexCount;t<n;t++){let r=this.buildBevelVert(a,e,t),i=this.buildBevelVert(a,e,(t+1)%n);g.push(i.topP,r.topN,r.bottomN),g.push(i.topP,r.bottomN,i.bottomP)}}if(e){let e=[];for(let t=g.length-1;t>=y+2;t-=3){let n=g[t-2],r=g[t-1],i=g[t-0];e.push(i,r,n)}g.splice(y,g.length-y,...e)}if(e){let e=[];for(let t=p[p.length-1].boundary.vertices.length-1;t>=1;t-=2){let n=p[p.length-1].boundary.vertices[t-1],r=p[p.length-1].boundary.vertices[t-0];e.push(n,r)}v.push(e)}if(!e){let e=p[p.length-1],t=qS({windingRule:p.length>1?_S.POSITIVE:_S.ODD,elementType:AS.POLYGONS,vertexSize:2,strict:!0,contours:[e.insetPoints,...v]});if(!t)throw new Error("Error generating geometry for surface");0===s.length&&Object.assign(this,{capStartIndex:g.length});for(let n=0;n<3*t.elementCount;n+=3){let e=this.buildSurfaceVert(t,t.elements[n+0]),r=this.buildSurfaceVert(t,t.elements[n+1]),i=this.buildSurfaceVert(t,t.elements[n+2]);g.push(e.top,r.top,i.top),g.push(i.bottom,r.bottom,e.bottom)}}this.vertexCache={}}this._buffer.shrink();let y=new Pi(Uint32Array.from(g),1),x=new Pi(this._buffer.positions,3),b=new Pi(this._buffer.normals,3),w=new Pi(this._buffer.uvs,2);x.needsUpdate=!0,b.needsUpdate=!0,w.needsUpdate=!0,y.needsUpdate=!0,this.setAttribute("position",x),this.setAttribute("normal",b),this.setAttribute("uv",w),this.setIndex(y)}buildSurfaceVert(e,t){let n=t.toString();if(n in this.vertexCache)return this.vertexCache[n];let r=e.vertices[2*t+0],i=e.vertices[2*t+1],o=(r-this._minX)/this._width,a=(i-this._minY)/this._height,s=this._buffer.get(2),l=3*s,c=2*s,u={top:s+0,bottom:s+1};return this._buffer.positions[l+0]=r,this._buffer.positions[l+1]=i,this._buffer.positions[l+2]=this._depth,this._buffer.normals[l+0]=0,this._buffer.normals[l+1]=0,this._buffer.normals[l+2]=1,this._buffer.uvs[c+0]=o,this._buffer.uvs[c+1]=a,this._buffer.positions[l+3]=r,this._buffer.positions[l+4]=i,this._buffer.positions[l+5]=0,this._buffer.normals[l+3]=0,this._buffer.normals[l+4]=0,this._buffer.normals[l+5]=-1,this._buffer.uvs[c+2]=o,this._buffer.uvs[c+3]=a,this.vertexCache[n]=u,u}buildBevelVert(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i="".concat(t.bevelI,":").concat(n);if(i in this.vertexCache)return this.vertexCache[i];let o,a,s,l,[c,u]=t.boundary.vertexIndices[n];c!==u?(a=c,o=u,l=!1,s=e.continuous[a]&&e.continuous[o]):(o=c,a=(o-1+e.count)%e.count,l=e.concave[o]&&t.bevelI>0,s=e.continuous[o]||l);let d=Math.cos(t.angle),h=Math.sin(t.angle),f=2*n,p=2*o,m=2*a,g=t.boundary.vertices[f+0],v=t.boundary.vertices[f+1],y=(1-h)*this._bevelSize,x=(g-this._minX)/this._width,b=(v-this._minY)/this._height,w=e.normals[p+0],S=e.normals[p+1],_=e.normals[m+0],A=e.normals[m+1];if(l){w+=(_-w)*(1-r),S+=(A-S)*(1-r);let e=Math.sqrt(w*w+S*S);w/=e,S/=e}let E=this._buffer.get(s?2:4),C=3*E,M=2*E,T={i:n,fi:o,topP:E+0,topN:E+0,bottomP:E+1,bottomN:E+1};return this._buffer.positions[C+0]=g,this._buffer.positions[C+1]=v,this._buffer.positions[C+2]=this._depth-y,this._buffer.normals[C+0]=w*d,this._buffer.normals[C+1]=S*d,this._buffer.normals[C+2]=h,this._buffer.uvs[M+0]=x,this._buffer.uvs[M+1]=b,this._buffer.positions[C+3]=g,this._buffer.positions[C+4]=v,this._buffer.positions[C+5]=y,this._buffer.normals[C+3]=w*d,this._buffer.normals[C+4]=S*d,this._buffer.normals[C+5]=-h,this._buffer.uvs[M+2]=b,this._buffer.uvs[M+3]=x,s||(E+=2,C+=6,M+=4,T.topP=E+0,T.bottomP=E+1,this._buffer.positions[C+0]=g,this._buffer.positions[C+1]=v,this._buffer.positions[C+2]=this._depth-y,this._buffer.normals[C+0]=_*d,this._buffer.normals[C+1]=A*d,this._buffer.normals[C+2]=h,this._buffer.uvs[M+0]=x,this._buffer.uvs[M+1]=b,this._buffer.positions[C+3]=g,this._buffer.positions[C+4]=v,this._buffer.positions[C+5]=y,this._buffer.normals[C+3]=_*d,this._buffer.normals[C+4]=A*d,this._buffer.normals[C+5]=-h,this._buffer.uvs[M+2]=b,this._buffer.uvs[M+3]=x),this.vertexCache[i]=T,T}clone(){let e=new ZS(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Wm(this.userData),e}},JS=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i,o,a,s,l,c,u;let d=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:_S.ODD},e.parameters),h=Math.abs(d.width),f=Math.abs(null!==(r=d.height)&&void 0!==r?r:d.width),p=Math.abs(null!==(i=d.depth)&&void 0!==i?i:0),m=null!==(o=e.shape)&&void 0!==o?o:null===t||void 0===t?void 0:t.shape,g=null!==(a=null===(s=m)||void 0===s?void 0:s.roundness)&&void 0!==a?a:d.roundness;void 0!==m&&(m instanceof kS?(m.width!==h||m.height!==f)&&m.applySize(h,f):m=new kS(h,f).fromJSON(m),void 0!==(null===(l=e.parameters)||void 0===l?void 0:l.roundness)&&(null===(c=e.parameters)||void 0===c?void 0:c.roundness)>0&&m.update(!1));let v=null!==(u=m)&&void 0!==u?u:new kS(h,f);return{parameters:Object.assign(d,{width:h,height:f,depth:p,roundness:g}),shape:v}}static build(e){let t,{depth:n,extrudeBevelSize:r,extrudeBevelSegments:i,subdivisions:o,roundness:a,windingRule:s}=e.parameters;return e.shape.roundness=a,t=n<=0?new YS(e.shape,o,{windingRule:s}):new ZS(e.shape,n,r,o,i,s),Object.assign(t,{userData:{...e,type:"VectorGeometry"}})}};function $S(e,t,n){n.x=e.x*t.x,n.y=e.y,n.z=e.x*t.y}function e_(e){return new jn(e.y,-e.x)}var t_=class extends zi{constructor(e,t,n,r,i,o,a,s,l,c,u,d){let h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];super(),this.type="RoundedCylinderBufferGeometry",e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI,o&&(l=0,c=0);let f=[],p=[],m=[],g=[],v=0,y=n/2,x=new ur,b=new ur;h&&0==e&&(e=l),h&&0==t&&(t=c);let w=new jn(e,y),S=new jn(t,-y),_=null,A=null,E=null,C=null,M=w.clone().sub(S),T=0,P=0,D=0;d>0&&(T=Math.min(e,t)*(1-d),P=e-T,D=t-T);let k=w.clone();k.x-=T;let O=Math.PI-M.angle(),R=M.angle(),I=Math.tan(R/2),L=Math.tan(O/2),N=I+L,j=d?N:L,B=d?N:I;if(l=Math.min(l,(e-P)/j,M.length()/N),c=Math.min(c,(t-D)/B,M.length()/N),l>0){let e=l/I;_=w.clone().sub(new jn(e,l)),d&&(E=_.clone(),E.x-=T-N*l),w.sub(M.clone().setLength(e))}if(c>0){let e=c/L;A=S.clone().sub(new jn(e,-c)),S.add(M.clone().setLength(e)),d&&(C=A.clone(),C.x-=T-N*c,k.sub(M.clone().setLength(e)))}M=w.clone().sub(S);let F=M.length()<.5,z=[];for(let H=0;H<=r;H++){let u=[],h=H/r,f=h*s+a,y=new jn(Math.sin(f),Math.cos(f));if(C&&A?(U(u,h,y,O,c,C,-1,!0),U(u,h,y,R,c,A,-1,!1)):A?(G(u,y,A.x,0,-1),U(u,h,y,R,c,A,-1,!1)):o||G(u,y,t,D,-1),$S(e_(M).normalize(),y,x),!F)for(let e=0;e<=i;e++){let t=e/i;$S(M.clone().multiplyScalar(t).add(S),y,b),p.push(b.x,b.y,b.z),m.push(x.x,x.y,x.z),g.push(h,.5+b.y/n),u.push(v++)}if(E&&_?(U(u,h,y,O,l,_,1,!1),U(u,h,y,R,l,E,1,!0)):_?(U(u,h,y,O,l,_,1,!1),G(u,y,_.x,0,1)):o||G(u,y,e,P,1),d&&!F){$S(e_(M).multiplyScalar(-1).normalize(),y,x);for(let e=0;e<=i;e++){let t=e/i;$S(M.clone().multiplyScalar(-t).add(k),y,b),p.push(b.x,b.y,b.z),m.push(x.x,x.y,x.z),g.push(h,.5+b.y/n),u.push(v++)}}d&&!o&&u.push(u[0]),z.push(u)}for(let H=0;H<z.length-1;H++)for(let e=0;e<z[0].length-1;e++){if(o&&d&&e==i)continue;let t=z[H][e],n=z[H+1][e],r=z[H+1][e+1],a=z[H][e+1],s=p[3*r+0],l=p[3*r+2];f.push(t,n,a),(0!=s||0!=l)&&f.push(n,r,a)}function U(e,t,r,i,o,a,s,l){for(let c=0;c<u+1;c++){let d=c/u,h=s<0?d:1-d;l&&(h-=1),h*=i;let f=new jn(Math.sin(h),Math.cos(h)*s);$S(f.clone().multiplyScalar(o).add(a),r,b),p.push(b.x,b.y,b.z),$S(f,r,x),m.push(x.x,x.y,x.z),g.push(t,.5+b.y/n),e.push(v++)}}function G(e,t,n,r,i){let o=new ur,a=new jn,s=[n,r];i<0&&s.reverse();for(let l of s)a.set(l,y*i),$S(a,t,o),p.push(o.x,o.y,o.z),m.push(0,i,0),g.push(.5,.5),e.push(v++)}function V(n,r,i){let o=new jn(Math.sin(i),Math.cos(i)),a=new jn(-Math.cos(i),Math.sin(i)),s=new ur,l=n<0?(e,t,n)=>f.push(e,t,n):(e,t,n)=>f.push(e,n,t);$S(new jn((e+t+P+D)/4,0),o,s),p.push(s.x,s.y,s.z),m.push(a.x,0,a.y),g.push(.5,.5);let c=v++;for(let e of r){let t=p.slice(3*e,3*e+3);p.push(...t),m.push(a.x,0,a.y);let n=g.slice(2*e,2*e+2);g.push(...n),v++}for(let e=c+1;e<v-1;e++)l(c,e,e+1);l(c,v-1,c+1)}s<2*Math.PI&&(V(-1,z[0],a),V(1,z[z.length-1],a+s)),this.setIndex(f),this.setAttribute("position",new Oi(p,3)),this.setAttribute("normal",new Oi(m,3)),this.setAttribute("uv",new Oi(g,2))}},n_=Math.PI/2,r_=class extends zi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:4;super(),this.type="BoxGeometry";let l=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o),s=Math.floor(s),a=Math.min(a,e/2,t/2,n/2);let c=[],u=[],d=[],h=[],f=0,p=0;function m(e,t,n,r,i,o,s,m,g,v,y){let x=(o-2*a)/g,b=(s-2*a)/v,w=o/2-a,S=s/2-a,_=m/2,A=g+1,E=v+1,C=0,M=0,T=new ur;for(let a=0;a<E;a++){let o=a*b-S;for(let s=0;s<A;s++){let l=s*x-w;T[e]=l*r,T[t]=o*i,T[n]=_,u.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=m>0?1:-1,d.push(T.x,T.y,T.z),h.push(s/g),h.push(1-a/v),C+=1}}for(let a=0;a<v;a++)for(let e=0;e<g;e++){let t=f+e+A*a,n=f+e+A*(a+1),r=f+(e+1)+A*(a+1),i=f+(e+1)+A*a;c.push(t,n,i),c.push(n,r,i),M+=6}l.addGroup(p,M,y),p+=M,f+=C}function g(e,t,n,r,i,o,m,g,v,y,x){let b=(m-2*a)/y,w=m/2-a,S=g/2-a,_=v/2,A=y+1,E=0,C=0,M=new ur,T=new ur;for(let l=0;l<s+1;l++){let c=l/s*n_,f=Math.sin(c)*a,p=(1-Math.cos(c))*a,m=Math.sin(c),g=Math.cos(c);M[t]=(S+f)*i,M[n]=(_-p)*o,T[e]=0,T[t]=m*Math.sign(M[t]),T[n]=g*Math.sign(M[n]);for(let t=0;t<A;t++){let n=t*b-w;M[e]=n*r,u.push(M.x,M.y,M.z),d.push(T.x,T.y,T.z),h.push(t/y),h.push(0),E+=1}}for(let a=0;a<s;a++)for(let e=0;e<y;e++){let t=f+e+A*a,n=f+e+A*(a+1),r=f+(e+1)+A*(a+1),i=f+(e+1)+A*a;c.push(t,n,i),c.push(n,r,i),C+=6}l.addGroup(p,C,x),p+=C,f+=E}function v(r,i,o){let l=new ur,p=new ur(e/2,t/2,n/2);p.subScalar(a);let m=[],g=r*i*o>0?(e,t,n)=>c.push(e,t,n):(e,t,n)=>c.push(e,n,t);for(let e=0;e<=s;e++){let t=[],n=n_*(1-e/s),c=Math.cos(n),g=Math.sin(n),v=0;for(let s=0;s<=e;s++){let n=Math.cos(v),s=Math.sin(v);l.x=c*n,l.y=g,l.z=c*s;let m=p.clone().addScaledVector(l,a);u.push(r*m.x,i*m.y,o*m.z),d.push(r*l.x,i*l.y,o*l.z),h.push(0,0),t.push(f++),v+=n_/e}m.push(t)}let v=m.length-1;for(let e=0;e<v;e++){let t=m[e],n=m[e+1],r=t.length-1;g(t[0],n[1],n[0]);for(let e=1;e<=r;e++)g(t[e-1],t[e],n[e]),g(t[e],n[e+1],n[e])}}m("z","y","x",-1,-1,n,t,e,o,i,0),m("z","y","x",1,-1,n,t,-e,o,i,1),m("x","z","y",1,1,e,n,t,r,o,2),m("x","z","y",1,-1,e,n,-t,r,o,3),m("x","y","z",1,-1,e,t,n,r,i,4),m("x","y","z",-1,-1,e,t,-n,r,i,5),a>0&&(g("z","y","x",-1,-1,1,n,t,e,o,0),g("z","y","x",1,-1,-1,n,t,e,o,1),g("z","y","x",-1,1,-1,n,t,e,o,1),g("z","y","x",1,1,1,n,t,e,o,0),g("x","y","z",-1,-1,-1,e,t,n,r,0),g("x","y","z",1,-1,1,e,t,n,r,1),g("x","y","z",-1,1,1,e,t,n,r,0),g("x","y","z",1,1,-1,e,t,n,r,1),g("y","x","z",-1,-1,1,t,e,n,i,0),g("y","x","z",1,-1,-1,t,e,n,i,1),g("y","x","z",1,1,1,t,e,n,i,1),g("y","x","z",-1,1,-1,t,e,n,i,0),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(c),this.setAttribute("position",new Oi(u,3)),this.setAttribute("normal",new Oi(d,3)),this.setAttribute("uv",new Oi(h,2))}},i_=class extends zi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4;super(),this.type="PolyhedronGeometryRound";let a=[],s=[],l=[];return function(){i=Math.min(.99999,i),0==i&&(o=0);let s={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[n],c=new ur,u=c.clone(),d=new _i,h=i*r,f=r-h,p=o+1,m=new ur,g=(e,t)=>m.subVectors(e,t).normalize(),v=(e,t)=>Array(e).fill(void 0).map(t),y=v(e.length/3,((t,n)=>(new ur).fromArray(e,3*n).setLength(r))),x=[],b=1e6;for(let e=0;e<y.length;e++){let n,r,i,o=y[e],a=[],s=1e10,l=-1;for(;-1!=(l=t.indexOf(e,l+1));){let e=l-l%3;n=t[e+(l+1)%3],r=t[e+(l+2)%3],i=o.distanceToSquared(y[n]),s=Math.min(s,i),a.push([n,r,i])}s+=1e-6;let c=[],u=0,d=a.length;for(let t=0;t<d;t++){var w;[n,r,i]=a[u];let t=1==(null===(w=x[n])||void 0===w?void 0:w.includes(e));i<=s&&c.push(n+ +t*b),u=a.findIndex((e=>e[0]==r))}x.push(c)}let S=[];{let e,t,n=0,r=0,i=3==s;for(let a=0;a<=o;a++){e=a*(a+1)/2,t=(a+1)*(a+2)/2;for(let s=0;s<o-a;s++)[n,r]=[e+s+a+2,t+s+a+3],S.push(e,t,...i?[r,e]:[n,t],r,n),[e,t]=[n,r];S.push(e,t,e+o+2)}}let _=c.clone(),A=c.clone(),E=c.clone(),C=c.clone(),M=c.clone(),T=[],P=v(y.length,(()=>v(s,(()=>c.clone()))));for(let e=0;e<y.length;e++){c.copy(y[e]).normalize(),_.copy(c).multiplyScalar(f);let t=x[e];for(let o=0;o<t.length;o++){let n=t[o],r=t[(o+1)%s];d.setFromPointsAndIndices(y,e,n%b,r%b),d.b.sub(d.a).setLength(1e10).add(d.a),d.c.sub(d.a).setLength(1e10).add(d.a),d.closestPointToPoint(_,P[e][o])}let n=[],r=[],i=[],v=new ur;0==o&&[...P[e]].reduce(((e,t)=>e.add(t)),v).multiplyScalar(1/s);for(let a=0;a<s;a++){let t=[],l=(a-1+s)%s,d=P[e][l],y=P[e][a];c.copy(d).sub(_),u.copy(y).sub(_);let x=_.angleTo(c),b=c.angleTo(u),w=Math.cos(x)*h;0==o?A.copy(v):A.copy(_).setLength(f+w),r.push(w);let S=[A,d,y];for(let e=0;e<2;e++){let r=S[e],i=S[e+1];C.subVectors(r,_),M.subVectors(i,_),E.crossVectors(C,M).normalize();for(let o=0;o<p;o++){let i=[x,b][e]*o/p;c.copy(C).applyAxisAngle(E,i).add(_),n.push(c.clone()),e&&(g(c,_),t.push([0==o?r:c.clone(),m.clone()]))}e&&(g(i,_),t.push([i,m.clone()]))}i.push(t)}T.push(i);let w=2*p,D=2;for(let e=0;e<s;e++){let t=w*e,i=w*((e+1)%s),o=[n[t]];for(let a=1;a<p;a++){C=n[t+a],M=n[i+a],o.push(C);for(let t=1,n=a-D+1;t<=n;t++)c.lerpVectors(C,M,t/(n+1)),c.sub(_).setLength(r[e]).add(_),o.push(c.clone());o.push(M)}for(let e=0;e<p;e++)o.push(n[e+p+t]);o.push(n[i+p]);let u=S.map((e=>o[e]));a.push(...u.map((e=>[e.x,e.y,e.z])).flat()),l.push(...u.map((e=>(g(e,_),[m.x,m.y,m.z]))).flat())}}let D=[];for(let e=0;e<x.length;e++)for(let t=0;t<s;t++){let n=x[e][t];if(n<b){let r=x[n].findIndex((t=>t%b==e)),i=T[e][t],o=T[n][r];for(let e=0;e<p;e++){let t=i[e],n=o[p-e],r=i[e+1],s=o[p-(e+1)];[t,n,r,r,n,s].forEach((e=>{a.push(e[0].x,e[0].y,e[0].z),l.push(e[1].x,e[1].y,e[1].z)}))}D.push(i[0][0],o[p][0],i[p][0],o[0][0])}}for(;D.length;){let e,t,n,r;[e,t]=D.splice(0,2);let i=[e];for(;e!=t;)i.push(t),n=D.indexOf(t),r=n%2,t=D.splice(n-r,2)[1-r];m.subVectors(i[0],i[1]).cross(c.subVectors(i[0],i[2])).normalize();let o=m.dot(i[0])<0;o&&m.negate();for(let s=1;s<=i.length-2;s++)[i[s+ +o],i[s+1-+o],i[0]].forEach((e=>{a.push(e.x,e.y,e.z),l.push(m.x,m.y,m.z)}))}}(),function(){let e=new ur;for(let f=0;f<a.length;f+=3){e.x=a[f+0],e.y=a[f+1],e.z=a[f+2];let t=d(e)/2/Math.PI+.5,n=h(e)/Math.PI+.5;s.push(t,1-n)}let t=new ur,n=new ur,r=new ur,i=new ur,o=new jn,l=new jn,c=new jn,u=(e,t,n,r)=>{r<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=r/2/Math.PI+.5)};for(let f=0,p=0;f<a.length;f+=9,p+=6){t.set(a[f+0],a[f+1],a[f+2]),n.set(a[f+3],a[f+4],a[f+5]),r.set(a[f+6],a[f+7],a[f+8]),o.set(s[p+0],s[p+1]),l.set(s[p+2],s[p+3]),c.set(s[p+4],s[p+5]),i.copy(t).add(n).add(r).divideScalar(3);let e=d(i);u(o,p+0,t,e),u(l,p+2,n,e),u(c,p+4,r,e)}for(let a=0;a<s.length;a+=6){let e=s[a+0],t=s[a+2],n=s[a+4],r=Math.max(e,t,n),i=Math.min(e,t,n);r>.9&&i<.1&&(e<.2&&(s[a+0]+=1),t<.2&&(s[a+2]+=1),n<.2&&(s[a+4]+=1))}function d(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}}(),this.setAttribute("position",new Oi(a,3)),this.setAttribute("normal",new Oi(l,3)),void this.setAttribute("uv",new Oi(s,2))}static fromJSON(e){return new i_(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},o_=class extends i_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=(1+Math.sqrt(5))/2,i=1/r,o="DodecahedronGeometry";super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],o,e,t,n),this.type=o}static fromJSON(e){return new o_(e.radius,e.corner,e.cornerSides)}},a_=2*Math.PI;function s_(e,t,n,r,i){let{x:o,y:a}=e;return{x:o*t+r,y:a*n+i}}function l_(e,t){let n=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:1.3333333333333333*Math.tan(t/4),r=Math.cos(e),i=Math.sin(e),o=Math.cos(e+t),a=Math.sin(e+t);return[{x:r-i*n,y:i+r*n},{x:o+a*n,y:a-o*n},{x:o,y:a}]}function c_(e,t,n,r){let i=e*r-t*n<0?-1:1,o=Math.min(1,Math.max(-1,e*n+t*r));return i*Math.acos(o)}function u_(e){let{px:t,py:n,cx:r,cy:i,rx:o,ry:a,largeArcFlag:s,sweepFlag:l}=e,c=[];if(0===o||0===a)return[];let u=(t-r)/2,d=(n-i)/2;if(0===u&&0===d)return[];o=Math.abs(o),a=Math.abs(a);let h=Math.pow(u,2)/Math.pow(o,2)+Math.pow(d,2)/Math.pow(a,2);h>1&&(o*=Math.sqrt(h),a*=Math.sqrt(h));let f=function(e,t,n,r,i,o,a,s,l,c){let u=Math.pow(i,2),d=Math.pow(o,2),h=Math.pow(a,2),f=Math.pow(s,2),p=u*d-u*f-d*h;p<0&&(p=0),p/=u*f+d*h,p=Math.sqrt(p)*(l===c?-1:1);let m=p*i/o*s,g=p*-o/i*a,v=m+(e+n)/2,y=g+(t+r)/2,x=(a-m)/i,b=(s-g)/o,w=(-a-m)/i,S=(-s-g)/o,_=c_(1,0,x,b),A=c_(x,b,w,S);return!c&&A>0&&(A-=a_),c&&A<0&&(A+=a_),{centerx:v,centery:y,ang1:_,ang2:A}}(t,n,r,i,o,a,u,d,s,l),{ang1:p,ang2:m}=f,{centerx:g,centery:v}=f,y=Math.abs(m)/(a_/4);Math.abs(1-y)<1e-7&&(y=1);let x=Math.max(Math.ceil(y),1);m/=x;for(let b=0;b<x;b++)c.push(l_(p,m)),p+=m;return c.map((e=>{let{x:t,y:n}=s_(e[0],o,a,g,v),{x:r,y:i}=s_(e[1],o,a,g,v),{x:s,y:l}=s_(e[2],o,a,g,v);return{x1:t,y1:n,x2:r,y2:i,x:s,y:l}}))}var d_=2*Math.PI;function h_(e,t,n,r,i,o){let a=-t/n;for(let s=0;s<=n;s++){let t=a*s,n=Math.sin(t)*r,o=Math.cos(t)*i;e.addPoint(f_(n,o))}return t<d_?o>0?m_(e,r,i,o):e.addPoint(f_(0,0)):(e.removePoint(e.points[e.points.length-1]),o>0&&g_(e,r,i,o)),1}function f_(e,t){return new $w(Nn.generateUUID(),new jn(e,t))}function p_(e,t,n,r,i,o){let a=f_(e,t);return a.controls[0].position.set(n,r),a.controls[1].position.set(i,o),a}function m_(e,t,n,r){v_(e,t,n,r).forEach((t=>e.addPoint(t)))}function g_(e,t,n,r){let i=v_(e,t,n,r),o=new kS;i.forEach((e=>o.addPoint(e))),o.isClosed=!0,e.shapeHoles.push(o)}function v_(e,t,n,r){let i=r*t/100,o=i*(Math.abs(n)/Math.abs(t)),a=new jn(i/t,o/n),s=e.points.map((e=>{let t=e.clone();return t.uuid=Nn.generateUUID(),t})).reverse();return s.forEach((e=>{e.position.multiply(a);let t=e.controls[0].position.clone().multiply(a),n=e.controls[1].position.clone().multiply(a);e.controls[0].position.copy(n),e.controls[1].position.copy(t)})),s}var y_=class extends zi{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,a=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,s=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,l=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1;super();let c=e&&1===r;c&&(l=0),s>100&&(s=100);let u,d,h,f,p,m,g,v,y=()=>new ur,x=new ur,b=y(),w=y(),S=y(),_=y(),A=y(),E=y(),C=y(),M=y(),T=y(),P=y(),D=y(),k=t-2*o+.001,O=k/r,R=Math.ceil(i*r),I=R+1,L=k/R,N=-k/2,j=a+1,B=2*Math.PI/a,F=Math.PI/2/l,z=Math.min((1-s/100)*o,o-.01),U=o-z,G=0,V=2*l+2,H=j*V/2,W=H+j*I,q=j*(I+V),[Y,X,Q]=[3,3,2].map((e=>Array(q*e).fill(0))),K=[],Z=n-o;function J(t,n){let r=Math.PI/2;m=n*L,v=2*Math.PI*(m%O)/O+r,m+=N,g=Math.sin(v)*Z,p=Math.cos(v)*Z,e?t.set(p,g,m):t.set(p,m,g)}J(x,-1e-10),J(b,0),_.copy(x),J(x,1);let $=x.distanceTo(b),ee=U+z,te=$*R+2*ee,ne=z,re=te-ee;for(let se=0;se<=R;se++){J(w,se),D.subVectors(w,_).normalize(),_.copy(w),T.copy(w).setComponent(+e+1,0).normalize(),P.crossVectors(D,T).normalize();let t=0===se,n=se===R,r=t?3*Math.PI/2:F,i=t?ne:re,s=t?j:W,u=t?0:q-j,d=D.clone().multiplyScalar(t?-U:U).add(w),h=D.clone().multiplyScalar(t?-1:1).normalize();for(let e=0;e<j;e++){let f=e*B;if(A.addVectors(x.copy(T).multiplyScalar(o*Math.cos(f)),b.copy(P).multiplyScalar(o*Math.sin(f))),E.copy(A).normalize(),t||n){c||(G=u+e,[0,1,2].forEach((e=>{Y[3*G+e]=d.getComponent(e),X[3*G+e]=h.getComponent(e)})),Q[2*G]=+n,Q[2*G+1]=e/a),b.copy(E).multiplyScalar(z),S.addVectors(w,b);for(let n=0;n<l;n++){let o=n*F+r;C.addVectors(x.copy(D).multiplyScalar(U*Math.sin(o)),b.copy(E).multiplyScalar(U*Math.cos(o))),M.copy(C).normalize(),b.addVectors(S,C),C.normalize(),G=s+n*j+e,[0,1,2].forEach((e=>{Y[3*G+e]=b.getComponent(e),X[3*G+e]=M.getComponent(e)}));let l=+t+Math.sin(o);Q[2*G]=(i+U*l)/te,Q[2*G+1]=e/a}}b.addVectors(w,A),G=H+se*j+e,[0,1,2].forEach((e=>{Y[3*G+e]=b.getComponent(e),X[3*G+e]=E.getComponent(e)})),Q[2*G]=(ee+se*$)/te,Q[2*G+1]=e/a}}let ie=I+2*l+2,[oe,ae]=c?[1,1+I-1]:[0,ie-1];for(let se=oe;se<=ae-1;se++){let e=c&&se===ae-1;for(let t=0;t<j-1;t++)u=se*j+t,d=u+1,h=(e?t:u)+j,f=(e?t+1:d)+j,0===se?K.push(d,f,h):se===ie-2?K.push(u,d,h):K.push(u,d,h,d,f,h)}this.setIndex(K),this.setAttribute("position",new Oi(Y,3)),this.setAttribute("normal",new Oi(X,3)),this.setAttribute("uv",new Oi(Q,2))}},x_=class extends i_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=(1+Math.sqrt(5))/2,i="IcosahedronGeometry";super([-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],i,e,t,n),this.type=i}static fromJSON(e){return new x_(e.radius,e.corner,e.cornerSides)}},b_=new Ur,w_=new hi,S_=new ur,__=class extends En{constructor(){super(),this.uuid=Nn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=(new Bn).getNormalMatrix(e);for(let n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(let n=0,r=this.faces.length;n<r;n++){let e=this.faces[n];e.normal.applyMatrix3(t).normalize();for(let n=0,r=e.vertexNormals.length;n<r;n++)e.vertexNormals[n].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return b_.makeRotationX(e),this.applyMatrix4(b_),this}rotateY(e){return b_.makeRotationY(e),this.applyMatrix4(b_),this}rotateZ(e){return b_.makeRotationZ(e),this.applyMatrix4(b_),this}translate(e,t,n){return b_.makeTranslation(e,t,n),this.applyMatrix4(b_),this}scale(e,t,n){return b_.makeScale(e,t,n),this.applyMatrix4(b_),this}lookAt(e){return w_.lookAt(e),w_.updateMatrix(),this.applyMatrix4(w_.matrix),this}fromBufferGeometry(e){let t=this,n=null!==e.index?e.index:void 0,r=e.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let i=r.position,o=r.normal,a=r.color,s=r.uv,l=r.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(let d=0;d<i.count;d++)t.vertices.push((new ur).fromBufferAttribute(i,d)),void 0!==a&&t.colors.push((new $n).fromBufferAttribute(a,d));function c(e,n,r,i){let c=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],u=void 0===o?[]:[(new ur).fromBufferAttribute(o,e),(new ur).fromBufferAttribute(o,n),(new ur).fromBufferAttribute(o,r)],d=new E_(e,n,r,u,c,i);t.faces.push(d),void 0!==s&&t.faceVertexUvs[0].push([(new jn).fromBufferAttribute(s,e),(new jn).fromBufferAttribute(s,n),(new jn).fromBufferAttribute(s,r)]),void 0!==l&&t.faceVertexUvs[1].push([(new jn).fromBufferAttribute(l,e),(new jn).fromBufferAttribute(l,n),(new jn).fromBufferAttribute(l,r)])}let u=e.groups;if(u.length>0)for(let d=0;d<u.length;d++){let e=u[d],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)void 0!==n?c(n.getX(r),n.getX(r+1),n.getX(r+2),e.materialIndex):c(r,r+1,r+2,e.materialIndex)}else if(void 0!==n)for(let d=0;d<n.count;d+=3)c(n.getX(d),n.getX(d+1),n.getX(d+2));else for(let d=0;d<i.count;d+=3)c(d,d+1,d+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(S_).negate(),this.translate(S_.x,S_.y,S_.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new Ur;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(r),this}computeFaceNormals(){let e=new ur,t=new ur;for(let n=0,r=this.faces.length;n<r;n++){let r=this.faces[n],i=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];e.subVectors(a,o),t.subVectors(i,o),e.cross(t),e.normalize(),r.normal.copy(e)}}computeVertexNormals(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new Array(this.vertices.length);for(let n=0,r=this.vertices.length;n<r;n++)t[n]=new ur;if(e){let e=new ur,n=new ur;for(let r=0,i=this.faces.length;r<i;r++){let i=this.faces[r],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),n.subVectors(o,a),e.cross(n),t[i.a].add(e),t[i.b].add(e),t[i.c].add(e)}}else{this.computeFaceNormals();for(let e=0,n=this.faces.length;e<n;e++){let n=this.faces[e];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let n=0,r=this.vertices.length;n<r;n++)t[n].normalize();for(let n=0,r=this.faces.length;n<r;n++){let e=this.faces[n],r=e.vertexNormals;3===r.length?(r[0].copy(t[e.a]),r[1].copy(t[e.b]),r[2].copy(t[e.c])):(r[0]=t[e.a].clone(),r[1]=t[e.b].clone(),r[2]=t[e.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let t=this.faces[e],n=t.vertexNormals;3===n.length?(n[0].copy(t.normal),n[1].copy(t.normal),n[2].copy(t.normal)):(n[0]=t.normal.clone(),n[1]=t.normal.clone(),n[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,n=this.faces.length;t<n;t++){let e=this.faces[t];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]);for(let t=0,n=e.vertexNormals.length;t<n;t++)e.__originalVertexNormals[t]?e.__originalVertexNormals[t].copy(e.vertexNormals[t]):e.__originalVertexNormals[t]=e.vertexNormals[t].clone()}let e=new __;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let e=this.morphNormals[t].faceNormals,n=this.morphNormals[t].vertexNormals;for(let t=0,r=this.faces.length;t<r;t++){let t=new ur,r={a:new ur,b:new ur,c:new ur};e.push(t),n.push(r)}}let n=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let e=0,t=this.faces.length;e<t;e++){let t=this.faces[e],r=n.faceNormals[e],i=n.vertexNormals[e];r.copy(t.normal),i.a.copy(t.vertexNormals[0]),i.b.copy(t.vertexNormals[1]),i.c.copy(t.vertexNormals[2])}}for(let t=0,n=this.faces.length;t<n;t++){let e=this.faces[t];e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals}}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new fr),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Or),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);let r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,c=this.colors,u=e.colors;void 0!==t&&(r=(new Bn).getNormalMatrix(t));for(let d=0,h=a.length;d<h;d++){let e=a[d].clone();void 0!==t&&e.applyMatrix4(t),o.push(e)}for(let d=0,h=u.length;d<h;d++)c.push(u[d].clone());for(let d=0,h=l.length;d<h;d++){let e,t,o=l[d],a=o.vertexNormals,c=o.vertexColors,u=new E_(o.a+i,o.b+i,o.c+i);u.normal.copy(o.normal),void 0!==r&&u.normal.applyMatrix3(r).normalize();for(let n=0,i=a.length;n<i;n++)e=a[n].clone(),void 0!==r&&e.applyMatrix3(r).normalize(),u.vertexNormals.push(e);u.color.copy(o.color);for(let n=0,r=c.length;n<r;n++)t=c[n],u.vertexColors.push(t.clone());u.materialIndex=o.materialIndex+n,s.push(u)}for(let d=0,h=e.faceVertexUvs.length;d<h;d++){let t=e.faceVertexUvs[d];void 0===this.faceVertexUvs[d]&&(this.faceVertexUvs[d]=[]);for(let e=0,n=t.length;e<n;e++){let n=t[e],r=[];for(let e=0,t=n.length;e<t;e++)r.push(n[e].clone());this.faceVertexUvs[d].push(r)}}}mergeMesh(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)}mergeVertices(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t={},n=[],r=[],i=Math.pow(10,e);for(let s=0,l=this.vertices.length;s<l;s++){let e=this.vertices[s],o=Math.round(e.x*i)+"_"+Math.round(e.y*i)+"_"+Math.round(e.z*i);void 0===t[o]?(t[o]=s,n.push(this.vertices[s]),r[s]=n.length-1):r[s]=r[t[o]]}let o=[];for(let s=0,l=this.faces.length;s<l;s++){let e=this.faces[s];e.a=r[e.a],e.b=r[e.b],e.c=r[e.c];let t=[e.a,e.b,e.c];for(let n=0;n<3;n++)if(t[n]===t[(n+1)%3]){o.push(s);break}}for(let s=o.length-1;s>=0;s--){let e=o[s];this.faces.splice(e,1);for(let t=0,n=this.faceVertexUvs.length;t<n;t++)this.faceVertexUvs[t].splice(e,1)}let a=this.vertices.length-n.length;return this.vertices=n,a}setFromPoints(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){let n=e[t];this.vertices.push(new ur(n.x,n.y,n.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let a=0;a<t;a++)e[a]._id=a;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));let n,r,i=this.faceVertexUvs[0],o=this.faceVertexUvs[1];i&&i.length===t&&(n=[]),o&&o.length===t&&(r=[]);for(let a=0;a<t;a++){let t=e[a]._id;n&&n.push(i[t]),r&&r.push(o[t])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){let t=this.parameters;for(let n in t)void 0!==t[n]&&(e[n]=t[n]);return e}let t=[];for(let f=0;f<this.vertices.length;f++){let e=this.vertices[f];t.push(e.x,e.y,e.z)}let n=[],r=[],i={},o=[],a={},s=[],l={};for(let f=0;f<this.faces.length;f++){let e=this.faces[f],t=!0,r=!1,i=void 0!==this.faceVertexUvs[0][f],o=e.normal.length()>0,a=e.vertexNormals.length>0,s=1!==e.color.r||1!==e.color.g||1!==e.color.b,l=e.vertexColors.length>0,p=0;if(p=c(p,0,0),p=c(p,1,t),p=c(p,2,r),p=c(p,3,i),p=c(p,4,o),p=c(p,5,a),p=c(p,6,s),p=c(p,7,l),n.push(p),n.push(e.a,e.b,e.c),n.push(e.materialIndex),i){let e=this.faceVertexUvs[0][f];n.push(h(e[0]),h(e[1]),h(e[2]))}if(o&&n.push(u(e.normal)),a){let t=e.vertexNormals;n.push(u(t[0]),u(t[1]),u(t[2]))}if(s&&n.push(d(e.color)),l){let t=e.vertexColors;n.push(d(t[0]),d(t[1]),d(t[2]))}}function c(e,t,n){return n?e|1<<t:e&~(1<<t)}function u(e){let t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==i[t]||(i[t]=r.length/3,r.push(e.x,e.y,e.z)),i[t]}function d(e){let t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==a[t]||(a[t]=o.length,o.push(e.getHex())),a[t]}function h(e){let t=e.x.toString()+e.y.toString();return void 0!==l[t]||(l[t]=s.length/2,s.push(e.x,e.y)),l[t]}return e.data={},e.data.vertices=t,e.data.normals=r,o.length>0&&(e.data.colors=o),s.length>0&&(e.data.uvs=[s]),e.data.faces=n,e}clone(){return(new __).copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let d=0,h=t.length;d<h;d++)this.vertices.push(t[d].clone());let n=e.colors;for(let d=0,h=n.length;d<h;d++)this.colors.push(n[d].clone());let r=e.faces;for(let d=0,h=r.length;d<h;d++)this.faces.push(r[d].clone());for(let d=0,h=e.faceVertexUvs.length;d<h;d++){let t=e.faceVertexUvs[d];void 0===this.faceVertexUvs[d]&&(this.faceVertexUvs[d]=[]);for(let e=0,n=t.length;e<n;e++){let n=t[e],r=[];for(let e=0,t=n.length;e<t;e++){let t=n[e];r.push(t.clone())}this.faceVertexUvs[d].push(r)}}let i=e.morphTargets;for(let d=0,h=i.length;d<h;d++){let e={};if(e.name=i[d].name,void 0!==i[d].vertices){e.vertices=[];for(let t=0,n=i[d].vertices.length;t<n;t++)e.vertices.push(i[d].vertices[t].clone())}if(void 0!==i[d].normals){e.normals=[];for(let t=0,n=i[d].normals.length;t<n;t++)e.normals.push(i[d].normals[t].clone())}this.morphTargets.push(e)}let o=e.morphNormals;for(let d=0,h=o.length;d<h;d++){let e={};if(void 0!==o[d].vertexNormals){e.vertexNormals=[];for(let t=0,n=o[d].vertexNormals.length;t<n;t++){let n=o[d].vertexNormals[t],r={};r.a=n.a.clone(),r.b=n.b.clone(),r.c=n.c.clone(),e.vertexNormals.push(r)}}if(void 0!==o[d].faceNormals){e.faceNormals=[];for(let t=0,n=o[d].faceNormals.length;t<n;t++)e.faceNormals.push(o[d].faceNormals[t].clone())}this.morphNormals.push(e)}let a=e.skinWeights;for(let d=0,h=a.length;d<h;d++)this.skinWeights.push(a[d].clone());let s=e.skinIndices;for(let d=0,h=s.length;d<h;d++)this.skinIndices.push(s[d].clone());let l=e.lineDistances;for(let d=0,h=l.length;d<h;d++)this.lineDistances.push(l[d]);let c=e.boundingBox;null!==c&&(this.boundingBox=c.clone());let u=e.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=(new A_).fromGeometry(this),t=new zi,n=new Float32Array(3*e.vertices.length);if(t.setAttribute("position",new Pi(n,3).copyVector3sArray(e.vertices)),e.normals.length>0){let n=new Float32Array(3*e.normals.length);t.setAttribute("normal",new Pi(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){let n=new Float32Array(3*e.colors.length);t.setAttribute("color",new Pi(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){let n=new Float32Array(2*e.uvs.length);t.setAttribute("uv",new Pi(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){let n=new Float32Array(2*e.uvs2.length);t.setAttribute("uv2",new Pi(n,2).copyVector2sArray(e.uvs2))}t.groups=e.groups;for(let r in e.morphTargets){let n=[],i=e.morphTargets[r];for(let e=0,t=i.length;e<t;e++){let t=i[e],r=new Oi(3*t.data.length,3);r.name=t.name,n.push(r.copyVector3sArray(t.data))}t.morphAttributes[r]=n}if(e.skinIndices.length>0){let n=new Oi(4*e.skinIndices.length,4);t.setAttribute("skinIndex",n.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){let n=new Oi(4*e.skinWeights.length,4);t.setAttribute("skinWeight",n.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(t.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new zi,n=e.geometry;if(e.isPoints||e.isLine){let e=new Oi(3*n.vertices.length,3),r=new Oi(3*n.colors.length,3);if(t.setAttribute("position",e.copyVector3sArray(n.vertices)),t.setAttribute("color",r.copyColorsArray(n.colors)),n.lineDistances&&n.lineDistances.length===n.vertices.length){let e=new Oi(n.lineDistances.length,1);t.setAttribute("lineDistance",e.copyArray(n.lineDistances))}null!==n.boundingSphere&&(t.boundingSphere=n.boundingSphere.clone()),null!==n.boundingBox&&(t.boundingBox=n.boundingBox.clone())}else e.isMesh&&(t=n.toBufferGeometry());return t}};__.prototype.isGeometry=!0;var A_=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t,n,r,i=[],o=e.faces;for(n=0;n<o.length;n++){let e=o[n];e.materialIndex!==r&&(r=e.materialIndex,void 0!==t&&(t.count=3*n-t.start,i.push(t)),t={start:3*n,materialIndex:r})}void 0!==t&&(t.count=3*n-t.start,i.push(t)),this.groups=i}fromGeometry(e){let t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(let e=0;e<l;e++)t[e]={name:s[e].name,data:[]};this.morphTargets.position=t}let c,u=e.morphNormals,d=u.length;if(d>0){c=[];for(let e=0;e<d;e++)c[e]={name:u[e].name,data:[]};this.morphTargets.normal=c}let h=e.skinIndices,f=e.skinWeights,p=h.length===r.length,m=f.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<n.length;g++){let e=n[g];this.vertices.push(r[e.a],r[e.b],r[e.c]);let v=e.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{let t=e.normal;this.normals.push(t,t,t)}let y=e.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{let t=e.color;this.colors.push(t,t,t)}if(!0===o){let e=i[0][g];void 0!==e?this.uvs.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new jn,new jn,new jn))}if(!0===a){let e=i[1][g];void 0!==e?this.uvs2.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new jn,new jn,new jn))}for(let n=0;n<l;n++){let r=s[n].vertices;t[n].data.push(r[e.a],r[e.b],r[e.c])}for(let t=0;t<d;t++){let e=u[t].vertexNormals[g];c[t].data.push(e.a,e.b,e.c)}p&&this.skinIndices.push(h[e.a],h[e.b],h[e.c]),m&&this.skinWeights.push(f[e.a],f[e.b],f[e.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}},E_=class{constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new ur,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new $n,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=o}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},C_=["a","b","c"];function M_(e,t){switch(t){case"c":return e.c;case"b":return e.b;default:return e.a}}function T_(e,t,n){let r=Math.min(e,t)+"_"+Math.max(e,t);return n.get(r)}function P_(e,t,n,r,i,o){let a,s=Math.min(e,t),l=Math.max(e,t),c=s+"_"+l;if(r.has(c))a=r.get(c);else{a={a:n[s],b:n[l],newEdge:null,faces:[]},r.set(c,a)}a.faces.push(i),o[e].edges.push(a),o[t].edges.push(a)}function D_(e,t,n,r,i){e.push(new E_(t,n,r,void 0,void 0,i))}function k_(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function O_(e,t,n,r){e.push([t.clone(),n.clone(),r.clone()])}var R_=new ur;function I_(e,t,n){n.x=e.x*t.x,n.y=e.y,n.z=e.x*t.y}function L_(e,t,n,r,i,o){let a=t.clone().sub(e),s=n.clone().sub(e),l=a.angleTo(s);if(a.normalize(),s.normalize(),r===i){let t=a.add(s).normalize();o.copy(e).addScaledVector(t,r/Math.sin(l/2))}else{let t=a.angleTo(s);o.copy(e),o.addScaledVector(a,i/Math.sin(t)),o.addScaledVector(s,r/Math.sin(t))}}function N_(e,t,n){let r=e.clone().sub(t),i=n.clone().sub(t);return r.projectOnVector(i),r.add(t)}var j_=class extends zi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:4;super(),n=Math.floor(Math.max(3,n)),r=Math.floor(r),a=Math.floor(a);let s,l=[],c=[],u=[],d=[],h=0,f=t/2,p=Math.PI/n,m=e*Math.cos(Math.PI/n),g=2*Math.PI/n,v=(n-2)*Math.PI/n,y=Math.PI-v,x=new ur(0,-f,0),b=new ur(0,f,0),w=new jn(e,-f),S=new jn(m,-f),_=new jn(0,b.y).sub(S),A=new jn(0,b.y).sub(w),E=new jn(_.y,-_.x).normalize(),C=new jn(A.y,-A.x).normalize(),M=e*Math.cos(Math.PI/n)*Math.tan((Math.PI-_.angle())/2)-1e-8;o=Math.min(o,M);{let e=new ur(E.x,E.y,0),t=new ur(Math.cos(g)*e.x,e.y,Math.sin(g)*e.x);s=e.angleTo(t)}let T=o/Math.tan((Math.PI-_.angle())/2),P=o/Math.tan((Math.PI-s)/2),D=new ur;if(!i){c.push(x.x,x.y,x.z),u.push(0,-1,0),d.push(0,0);let e=h++,t=[],r=w.clone(),i=T/Math.cos(Math.PI/n);r.x-=i;for(let o=0;o<n;o++){let e=o/n*Math.PI*2+p;I_(r,new jn(Math.sin(e),Math.cos(e)),D),c.push(D.x,D.y,D.z),u.push(0,-1,0),d.push(0,0),t.push(h++)}for(let n=0;n<t.length;n++)l.push(t[n],e,t[(n+1)%t.length])}let k=[];{let e=new ur,t=new ur,r=new ur,i=new ur,f=new ur,m=new ur;for(let g=0;g<n;g++){let v=g/n*Math.PI*2+p,y=(g+.5)/n*Math.PI*2+p,S=(g+1)/n*Math.PI*2+p,A=new jn(Math.sin(v),Math.cos(v)),M=new jn(Math.sin(y),Math.cos(y)),D=new jn(Math.sin(S),Math.cos(S));I_(w,A,t),I_(w,D,r),I_(E,M,e),L_(b,t,r,P,P,i),c.push(i.x,i.y,i.z),L_(t,b,r,P,T,f),c.push(f.x,f.y,f.z),L_(r,t,b,T,P,m),c.push(m.x,m.y,m.z),u.push(e.x,e.y,e.z),u.push(e.x,e.y,e.z),u.push(e.x,e.y,e.z),d.push(0,0),d.push(0,0),d.push(0,0);let I=h++,L=h++,N=h++;if(l.push(I,L,N),o>0){{let e=t.clone().add(r).multiplyScalar(.5),n=b.clone().sub(e).normalize(),i=x.clone().sub(e).normalize().add(n).normalize().multiplyScalar(-1);O(e,m.clone().sub(f),i,_.angle())}let p,g;{let e=new ur;I_(C,D,e);let t=m.clone().add(i).multiplyScalar(.5);t=N_(t,r,b);let n=m.clone().sub(i);[p,g]=O(t,n,e,s,i.y)}{let e=p,t=e.clone().setY(0).normalize(),n=new ur(0,-1,0),r=t.clone().cross(n);R(e,t,n,r)}k.concat(g);{let t=_.angle(),r=Math.PI-t,i=b.clone();i.y-=o/Math.sin(t-Math.PI/2);let s=new ur,f=[];for(let l=0;l<a;l++){let t=[],p=Math.PI/2-r*l/a,m=Math.cos(p),g=Math.sin(p),v=y;for(let r=0;r<=l;r++){let r=Math.cos(v),a=Math.sin(v);e.x=m*a,e.y=g,e.z=m*r,s.copy(i).addScaledVector(e,o),c.push(s.x,s.y,s.z),u.push(e.x,e.y,e.z),d.push(0,0),t.push(h++),v+=2*Math.PI/l/n}f.push(t)}g.reverse(),f.push(g);let p=f.length-1;for(let e=0;e<p;e++){let t=f[e],n=f[e+1],r=t.length-1;l.push(n[1],t[0],n[0]);for(let e=1;e<=r;e++)l.push(t[e],t[e-1],n[e]),l.push(n[e+1],t[e],n[e])}}}}}function O(e,t,n,r,i){let s=-r/2,f=(Math.PI-r)/2,p=t.clone().normalize().cross(n);e.addScaledVector(n,-o/Math.sin(f));let m=new ur,g=new ur,v=h,y=[];for(let l=0;l<=a;l++){let f=s+l/a*r;g.set(0,0,0),g.addScaledVector(p,Math.sin(f)),g.addScaledVector(n,Math.cos(f));for(let n=0;n<=1;n++){let r=n/1-.5;if(m.copy(e),m.addScaledVector(t,r),m.addScaledVector(g,o),null!=i){let e=Math.max(0,m.y-i);m.addScaledVector(t,-e/t.y)}c.push(m.x,m.y,m.z),u.push(g.x,g.y,g.z),d.push(0,0),0===n&&y.push(h),h++}}for(let o=0;o<a;o++)for(let e=0;e<1;e++){let t=v+e+2*o,n=t+2,r=n+1,i=t+1;l.push(t,n,i),l.push(n,r,i)}return[e.clone().addScaledVector(t,.5),y]}function R(e,t,n,r){let i=Math.PI/2,s=A.angle()-i,f=[],p=new ur,m=new ur;for(let l=0;l<=a;l++){let g=[],v=l/a;for(let a=0;a<=l;a++){let f=((l?a/l:0)-.5)*y,x=Math.cos(f),b=Math.sin(f),w=(i+Math.atan(Math.tan(s)*x))*v,S=Math.cos(w),_=Math.sin(w);p.set(0,0,0),p.addScaledVector(t,_*x),p.addScaledVector(n,S),p.addScaledVector(r,_*b),m.copy(e).addScaledVector(p,o),c.push(m.x,m.y,m.z),u.push(p.x,p.y,p.z),d.push(0,0),g.push(h++)}f.push(g)}let g=f.length-1;for(let o=0;o<g;o++){let e=f[o],t=f[o+1],n=e.length-1;l.push(e[0],t[1],t[0]);for(let r=1;r<=n;r++)l.push(e[r-1],e[r],t[r]),l.push(e[r],t[r+1],t[r])}}this.setIndex(l),this.setAttribute("position",new Oi(c,3)),this.setAttribute("normal",new Oi(u,3)),this.setAttribute("uv",new Oi(d,2))}},B_=class extends zi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:90,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:24;super(),this.type="BackdropGeometry";let a=[],s=[],l=[],c=.001;0==i&&(o=1),o=Math.max(1,Math.floor(o)),i=Math.min(i,100),r=Math.min(180-c,r),r*=Math.PI/180;let u=[],d=Math.PI/2,h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new ur(e,t,n)},f=h(),p=h(),[m,g,v]=[t/2,e/2,n/2],y=-g,x=+g,[b,w,S]=[h(y,-m,+v),h(y,-m,-v),h(y,+m,-v)],_=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.sin(e-Math.PI/(+t+1))},A=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.cos(e-Math.PI/(+t+1))};S.y=Math.sin(r)*t-m;let E=Math.cos(r)*t-v,C=b.z-c;r<=d?(S.z=Math.min(E,C),S.z==C&&(S.y-=(E-C)/Math.tan(d-r))):w.z=Math.min(w.z-E-v,b.z-c),f.subVectors(b,w),p.subVectors(S,w);let M=Math.min(f.length(),p.length())*i/100,T=M*Math.tan(r/2),P=M/Math.cos(r/2),D=f.clone().normalize().add(p.normalize()).setLength(P).add(w);f.set(0,_(r,!0),A(r,!0)),u.push([S,f.clone()]);let k=(Math.PI-r)/o;for(let G=0;G<=o;G++){let e=d+r+G*k;f.set(0,Math.sin(e)*T,Math.cos(e)*T),f.add(D),p.set(0,_(e),A(e)),u.push([f.clone(),p.clone()])}u.push([b,h(0,1,0)]);let O=Math.sin(k/2)*T*2,R=u.length-1,I=u[0][0].distanceTo(u[1][0]),L=I+O*o+u[R-1][0].distanceTo(u[R][0]);u[0].push(1);for(let G=0;G<=o;G++)u[G+1].push(1-(I+G*O)/L);u[R].push(0);let N,j,B,[F,z,U]=u[0];for(let G=1;G<u.length;G++)[N,j,B]=u[G],a.push(y,F.y,F.z,y,N.y,N.z,x,F.y,F.z,x,F.y,F.z,y,N.y,N.z,x,N.y,N.z),s.push(0,z.y,z.z,0,j.y,j.z,0,z.y,z.z,0,z.y,z.z,0,j.y,j.z,0,j.y,j.z),l.push(0,U,0,B,1,U,1,U,0,B,1,B),[F,z,U]=[N,j,B];this.setAttribute("position",new Oi(a,3)),this.setAttribute("normal",new Oi(s,3)),this.setAttribute("uv",new Oi(l,2))}};function F_(){let e=new zi;return e.setAttribute("position",new Pi(new Float32Array([]),3)),e.setIndex(new Pi(new Uint16Array([]),1)),e}var z_=class extends zi{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.vectorShapes=[];let n=F_();Object.entries(n.attributes).forEach((e=>{let[t,n]=e;this.setAttribute(t,n)})),this.setIndex(n.index),this.updateFont(e.font,t),this.update(e)}async updateFont(e,t){let n=t.getFont(e);n&&(this.font=n,await n.loadingPromise)}async update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!t||!t.isLoaded)return void console.warn("Cannot update text because its font is not loaded");let{width:n,height:r,depth:i,extrudeBevelSize:o,extrudeBevelSegments:a,text:s,textTransform:l,subdivisions:c}=e;await t.loadingPromise;let u=function(e,t,n){var r;n=null!==(r=n)&&void 0!==r?r:e.text;let i=[""],o="";for(let a of n)o+=a," "===a||"\n"===a?(i[i.length-1]+=o,o="","\n"===a&&i.push("")):t.getTextWidth(i[i.length-1]+o,e)>e.width&&(i[i.length-1].length&&i.push(""),t.getTextWidth(i[i.length-1]+o,e)>e.width&&(1===o.length?(i[i.length-1]+=o,o=""):(i[i.length-1]+=o.slice(0,-1),o=o[o.length-1],i.push(""))));return i[i.length-1]+=o,i}(e,t,2===l?s.toUpperCase():3===l?s.toLowerCase():s),{shapes:d,charWidths:h,charCoords:f}=await t.generateShapes(u,e),p=.5*n,m=.5*r,g=d.map((e=>(new kS).fromShape(e)));this.vectorShapes=g;let v=g.map((e=>JS.create({shape:e,parameters:{depth:i,extrudeBevelSegments:a,extrudeBevelSize:o,windingRule:i<=0?_S.NONZERO:_S.ODD,subdivisions:null!==c&&void 0!==c?c:12}}))),y=v.length?ub(v):F_();y.translate(-p,m,0),this.dispose(),this.wrappedText=u,this.charCoords=f,this.charWidths=h,Object.entries(y.attributes).forEach((e=>{let[t,n]=e;this.setAttribute(t,n)})),this.setIndex(y.index),this.computeBoundingSphere()}clone(){let e=Ix(new zi,z_.prototype);return e.copy(this),e}copy(e){return Object.entries(e.attributes).forEach((e=>{let[t,n]=e;this.setAttribute(t,n)})),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:e})}get text(){var e;return null!==(e=this.userData.parameters.text)&&void 0!==e?e:""}};var U_,G_,V_=new Promise((e=>{U_=e})),H_=!1;async function W_(){if(H_)return;let[e,t]=await Promise.all([n.e(526).then(n.bind(n,526)),fetch("".concat("https://unpkg.com/@splinetool/modelling-wasm@0.9.133/build","/process.wasm")).then((e=>e.arrayBuffer()))]),r=await e.default({wasmBinary:t});U_(r),H_=!0}function q_(e,t){return function(e){let t,n={parameters:e,type:e.type};if("VectorGeometry"===e.type){let t=kS.createFromState(e.shape,e.width,e.height);n.shape=t}else"NonParametricGeometry"===e.type&&(e.data.groups&&e.data.groups.forEach((e=>{var t;return e.materialIndex=Math.max(null!==(t=e.materialIndex)&&void 0!==t?t:0,0)})),n.geometry=(new $c).parse(e));try{t=xA(n)}catch(JR){console.error(JR)}if(!t){let e=kS.createFromState(mx.defaultData(),100,100);n.shape=e,t=xA(n)}return t}(e)}V_.then((e=>{G_=e}));var Y_=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),X_=new Uint32Array([0,1,2,3]),Q_=new Uint8Array([4]),K_=class{static build(e,t,n,r,i){var o,a;let s,l,c,u=null!==(o=null!==(a=null===e||void 0===e?void 0:e.phongAngle)&&void 0!==a?a:null===t||void 0===t?void 0:t.phongAngle)&&void 0!==o?o:35;if(!1===r&&(u=-1),void 0!==e.positionWASM){n&&0!==n&&(G_.free_bvh(n),G_.free_subdivision_surface(n));try{s=K_.allocate(e,i)}catch(oG){console.error(oG,e),s=K_.allocate({positionWASM:Y_,indexWASM:X_,verticesPerFaceWASM:Q_},i)}G_.set_destination_refinement_level(s,0),l=K_.buildLevel(s,!0,u)}else s=n,void 0!==e.phongAngle&&(l=K_.buildLevel(s,!0,u));return void 0!==e.subdivisions&&(G_.set_destination_refinement_level(s,e.subdivisions),c=e.subdivisions>0?K_.buildLevel(s,!1,u):null),{subdivPointer:s,originalGeometry:l,subdividedGeometry:c}}static primitiveToQuads(e,t){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),"DodecahedronGeometry"===e.type&&(e.detail=0);let n,r,i,o,a,s=void 0!==e.shape?t.geometry:q_(e);if(({positions:n,triIndices:o}=J_(s.getAttribute("position"),s.getIndex())),"CylinderGeometry"===e.type&&0===e.cornerRadius&&0===e.hollow&&!1===e.openEnded){let t=e.radialSegments*e.heightSegments*3*2;a=[t,t+3*e.radialSegments]}return({indices:r,verticesPerFace:i}=rA(n,o,s,a)),{positions:n,indices:r,verticesPerFace:i}}static allocate(e,t){var n;let r,i,o,a=[],s=[];e.positionWASM&&e.positionWASM.length>0?(r=e.positionWASM,i=e.indexWASM,o=e.verticesPerFaceWASM):(r=Y_,i=X_,o=Q_);let l,c=r.length,u=i.length,d=o.length,h=r.length+a.length+s.length,f=i.length+o.length,p=h*Float32Array.BYTES_PER_ELEMENT+f*Uint32Array.BYTES_PER_ELEMENT,m=h*Float32Array.BYTES_PER_ELEMENT,g=(Uint32Array.BYTES_PER_ELEMENT,G_._malloc(p)),v=new Float32Array(G_.HEAPF32.buffer,g,h),y=new Uint32Array(G_.HEAPU32.buffer,g+m,f);v.set(r,0),v.set(a,r.length),v.set(s,r.length+a.length),y.set(i,0),y.set(o,i.length),null!==e&&void 0!==e&&null!==(n=e.scaleBaked)&&void 0!==n&&n.some((e=>1!==e))&&(l=(new Ur).makeScale(...e.scaleBaked)),t&&(l?l.premultiply(t):l=t);let x=l?G_.alloc_subdivision_surface2(g,c,g+m,u,g+m+i.length*Uint32Array.BYTES_PER_ELEMENT,d,l.elements):G_.alloc_subdivision_surface(g,c,g+m,u,g+m+i.length*Uint32Array.BYTES_PER_ELEMENT,d);return G_._free(g),x}static buildLevel(e,t,n,r,i){let o=i?G_.get_mesh_data2(e,t?G_.Level.CONTROL:G_.Level.REFINED,n,i.elements):G_.get_mesh_data(e,t?G_.Level.CONTROL:G_.Level.REFINED,n),a=G_.HEAPU32.subarray(o>>2,8+(o>>2)),s=a.subarray(4,8),l=0,c=G_.HEAPU32[a[l]>>2],u=G_.HEAPF32.subarray(c>>2,(c>>2)+s[l]);l++;let d=G_.HEAPU32[a[l]>>2],h=G_.HEAPF32.subarray(d>>2,(d>>2)+s[l]);l++;let f=G_.HEAPU32[a[l]>>2],p=G_.HEAPU32.subarray(f>>2,(f>>2)+s[l]);l++;let m=G_.HEAPU32[a[l]>>2],g=G_.HEAPU32.subarray(m>>2,(m>>2)+s[l]);if(l++,void 0===r){let e=new zi;if(e.setIndex(new ki(g,1)),e.setAttribute("position",new Oi(u,3)),e.setAttribute("normal",new Oi(h,3)),t){e.setAttribute("faceMap",new ki(p,1));let t=new Float32Array(h.length/3*4).fill(0);e.setAttribute("color",new Pi(t,4))}return G_.free_mesh_data(o),e.userData.type="SubdivGeometry",e}r.getAttribute("position").copyArray(u),r.getAttribute("normal").copyArray(h),r.attributes.position.needsUpdate=!0,r.attributes.normal.needsUpdate=!0,G_.free_mesh_data(o)}static buildControlCageWireframe(e,t,n){let r=G_.get_wireframe_data_for_base_level(e),i=G_.HEAPU32.subarray(r>>2,4+(r>>2)),o=i.subarray(2,4),a=0,s=G_.HEAPU32[i[a]>>2],l=G_.HEAPF32.subarray(s>>2,(s>>2)+o[a]);a++;let c=G_.HEAPU32[i[a]>>2],u=G_.HEAPU32.subarray(c>>2,(c>>2)+o[a]);if(void 0===t){let e=new zi;e.setAttribute("position",new Oi(l,3));let t=new Float32Array(l.length);for(let r=0,i=l.length;r<i;)t[r++]=n.r,t[r++]=n.g,t[r++]=n.b;return e.setAttribute("color",new Pi(t,3)),e.setIndex(new ki(u,1)),G_.free_wireframe_data_for_base_level(r),e}t.getAttribute("position").copyArray(l),t.attributes.position.needsUpdate=!0,G_.free_wireframe_data_for_base_level(r)}static updateCollabMesh(e,t,n){let r=0===t;r||G_.set_destination_refinement_level(e,t);let i=n?G_.get_topological_data2(e,r?G_.Level.CONTROL:G_.Level.REFINED,n.elements):G_.get_topological_data(e,r?G_.Level.CONTROL:G_.Level.REFINED),o=G_.HEAPU32.subarray(i>>2,6+(i>>2)),a=o.subarray(3,6),s=0,l=G_.HEAPU32[o[s]>>2],c=new Float32Array(G_.HEAPF32.subarray(l>>2,(l>>2)+a[s]));s++;let u=G_.HEAPU32[o[s]>>2],d=new Uint32Array(G_.HEAPU32.subarray(u>>2,(u>>2)+a[s]));s++;let h=G_.HEAPU32[o[s]>>2],f=new Uint8Array(G_.HEAPU32.subarray(h>>2,(h>>2)+a[s]));return G_.free_topological_data(i),{positions:c,indices:d,verticesPerFace:f}}},Z_=["getX","getY","getZ"];function J_(e,t){let n={},r=t?t.count:e.count,i=0,o=[],a=[];for(let l=0;l<r;l++){let r=t?t.getX(l):l,s="";for(let t=0;t<3;t++)s+="".concat(~~(1e4*e[Z_[t]](r)),",");if(s in n)o.push(n[s]);else{for(let t=0;t<3;t++)a.push(e[Z_[t]](r));n[s]=i,o.push(i),i++}}let s=[];for(let l=0;l<o.length;l+=3)o[l]===o[l+1]||o[l]===o[l+2]||o[l+1]===o[l+2]||s.push(o[l],o[l+1],o[l+2]);return{positions:a,triIndices:s}}var $_=new ur,eA=new ur,tA=new ur,nA=new ur;function rA(e,t,n,r){let i=[],o=[];if(void 0!==n.userData.shape&&0===n.userData.parameters.depth&&0===n.userData.shape.shapeHoles.length){let t=n.userData.shape.extractShapePointsToFlatArray([]),r=0;for(let e=0;e<t.length;e+=2)r+=(t[e]-t[(0===e?t.length:e)-2])*(t[e+1]+t[(0===e?t.length:e)-1]);e.length=0;let a=0;if(r<0)for(let n=0;n<t.length;n+=2)e.push(t[n],t[n+1],0),i.push(a++);else for(let n=t.length-2;n>=0;n-=2)e.push(t[n],t[n+1],0),i.push(a++);return o.push(a),{indices:i,verticesPerFace:o}}for(let s=0,l=null!==(a=n.capStartIndex)&&void 0!==a?a:t.length;s<l;){var a;if(t[s+1]===t[s+3]&&t[s+2]===t[s+5]||t[s+0]===t[s+3]&&t[s+2]===t[s+4]){$_.set(e[3*t[s]],e[3*t[s]+1],e[3*t[s]+2]),eA.set(e[3*t[s+1]],e[3*t[s+1]+1],e[3*t[s+1]+2]),tA.set(e[3*t[s+4]],e[3*t[s+4]+1],e[3*t[s+4]+2]),nA.set(e[3*t[s+5]],e[3*t[s+5]+1],e[3*t[s+5]+2]),eA.sub($_).normalize(),tA.sub($_).normalize(),nA.sub($_).normalize();let n=eA.cross(tA).dot(nA);Math.abs(n)>.005||r&&r.some(((e,t)=>t%2!==1&&(s>=r[t]&&s<r[t+1])))?(i.push(t[s],t[s+1],t[s+2]),o.push(3),s+=3):(i.push(t[s],t[s+1],t[s+4],t[s+5]),o.push(4),s+=6)}else i.push(t[s],t[s+1],t[s+2]),o.push(3),s+=3}if(void 0!==n.capStartIndex){let t=[],r=[],a=0,s=new Float32Array([n.userData.parameters.depth])[0];for(let n=0,i=0;n<e.length;n+=3,i++)0===e[n+2]&&(t.push(i),a++),e[n+2]===s&&r.push(i);if(0===n.userData.parameters.extrudeBevelSize){let e=r[0];r[0]=r[1],r[1]=e}t.reverse(),i.push(...t,...r),o.push(a,a)}return{indices:i,verticesPerFace:o}}var iA={};((e,t)=>{for(var n in t)lt(e,n,{get:t[n],enumerable:!0})})(iA,{calcBoolean:()=>pA,calcBooleanTopological:()=>fA,freeMeshSet:()=>vA,getMeshSet:()=>mA,transformMeshSet:()=>gA});var oA,aA,sA,lA=new Promise((e=>{oA=e})),cA=!1;async function uA(){if(cA)return;let[e,t]=await Promise.all([n.e(232).then(n.bind(n,232)),fetch("".concat("https://unpkg.com/@splinetool/boolean-wasm@0.9.133/build","/boolean.wasm")).then((e=>e.arrayBuffer()))]),r=await e.default({wasmBinary:t});oA(r),cA=!0}function dA(e){let t=e.length,n=t*Uint32Array.BYTES_PER_ELEMENT,r=t*Float32Array.BYTES_PER_ELEMENT,i=Number.isInteger(e[0])?n:r,o=aA._malloc(i);return(Number.isInteger(e[0])?new Uint32Array(aA.HEAPU32.buffer,o,t):new Float32Array(aA.HEAPF32.buffer,o,t)).set(e,0),o}function hA(e){switch(e){case 0:return aA.OP.UNION;case 1:return aA.OP.INTERSECTION;case 2:return aA.OP.A_MINUS_B;case 3:return aA.OP.B_MINUS_A;case 4:return aA.OP.SYMMETRIC_DIFFERENCE;case 5:return aA.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function fA(e,t){void 0===sA&&(sA=aA.init_csg());let n=dA(e),r=aA.csg_calc_topological(sA,n,e.length,hA(t));aA._free(n);let i=aA.HEAPU32.subarray(r>>2,6+(r>>2)),o=i.subarray(3,6),a=0,s=aA.HEAPU32[i[a]>>2],l=new Float32Array(aA.HEAPF32.subarray(s>>2,(s>>2)+o[a]));a++;let c=aA.HEAPU32[i[a]>>2],u=new Uint32Array(aA.HEAPU32.subarray(c>>2,(c>>2)+o[a]));a++;let d=aA.HEAPU32[i[a]>>2],h=new Uint8Array(aA.HEAPU32.subarray(d>>2,(d>>2)+o[a]));return aA.free_mesh_data(r),{positions:l,indices:u,verticesPerFace:h}}function pA(e,t,n,r){void 0===sA&&(sA=aA.init_csg());let i=dA(e),o=aA.csg_calc(sA,i,e.length,r,hA(t));aA._free(i);let a=aA.HEAPU32.subarray(o>>2,5+(o>>2)),s=a.subarray(2,5),l=0,c=aA.HEAPU32[a[l]>>2],u=aA.HEAPF32.subarray(c>>2,(c>>2)+s[l]);l++;let d=aA.HEAPU32[a[l]>>2],h=aA.HEAPF32.subarray(d>>2,(d>>2)+s[l]);l++;let f=s[l];n.setAttribute("position",new Oi(u,3)),n.setAttribute("normal",new Oi(h,3));let p=aA.HEAPF32.subarray(5+(o>>2),5+(o>>2)+6);return null===n.boundingSphere&&(n.boundingSphere=new Or),n.boundingSphere.center.set(p[0],p[1],p[2]),n.boundingSphere.radius=(p[3]**2+p[4]**2+p[5]**2)**.5,n.userData.parameters={width:2*p[3],height:2*p[4],depth:2*p[5]},aA.free_mesh_data(o),f}function mA(e,t,n){if(void 0===aA)return-1;let r,i,o;if(t&&void 0!==e.userData.positions){let t=e.userData;o=t.verticesPerFace.length,r=t.positions,i=Array(t.verticesPerFace.reduce(((e,t)=>e+t),0)+o);for(let e=0,n=0,r=0;e<t.verticesPerFace.length;e++){i[r++]=t.verticesPerFace[e];for(let o=0;o<t.verticesPerFace[e];o++)i[r++]=t.indices[n++]}}else({positions:r,faceIndices:i,nFaces:o}=function(e,t,n){let r,i,{positions:o,triIndices:a}=J_(e.getAttribute("position"),e.getIndex());if(t&&n){let{indices:t,verticesPerFace:n}=rA(o,a,e);i=n.length,r=[];for(let e=0,o=0;e<i;e++){r.push(n[e]);for(let i=0;i<n[e];i++)r.push(t[o++])}}else{let e=a.length;r=Array(e+e/3),i=0;for(let t=0,n=0;n<r.length;)r[n++]=3,i++,r[n++]=a[t++],r[n++]=a[t++],r[n++]=a[t++]}return{positions:o,faceIndices:r,nFaces:i}}(e,t,n));let a=r.length,s=i.length,l=r.length,c=i.length,u=l*Float32Array.BYTES_PER_ELEMENT+c*Uint32Array.BYTES_PER_ELEMENT,d=l*Float32Array.BYTES_PER_ELEMENT,h=(Uint32Array.BYTES_PER_ELEMENT,aA._malloc(u)),f=new Float32Array(aA.HEAPF32.buffer,h,l),p=new Uint32Array(aA.HEAPU32.buffer,h+d,c);return f.set(r,0),p.set(i,0),aA.get_csg_mesh(h,a,h+d,s,o)}function gA(e,t){aA.transform_csg_mesh(e,t.elements)}function vA(e){aA.free_csg_mesh(e)}lA.then((e=>aA=e));var yA={ConeGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:0,cornerRadiusBottom:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}}static build(e){let t,{width:n,depth:r,height:i,radialSegments:o,heightSegments:a,openEnded:s,thetaStart:l,thetaLength:c,cornerRadiusTop:u,cornerRadiusBottom:d,cornerSegments:h}=e.parameters;return t=u>0||d>0||c<360?new t_(0,n/2,i,o,a,s,l,c*Math.PI/180,u,d,h,0,!0):new Fl(n/2,i,o,a,s),t.scale(1,1,r/n),Object.assign(t,{userData:{...e,type:"ConeGeometry"}})}},CubeGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}}static build(e){let t,{width:n,height:r,depth:i,widthSegments:o,heightSegments:a,depthSegments:s,cornerRadius:l,cornerSegments:c}=e.parameters;return t=0==l?new ao(n,r,i,o,a,s):new r_(n,r,i,o,a,s,l,c),Object.assign(t,{userData:{...e,type:"CubeGeometry"}})}},CylinderGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i,o,a;let s=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:0,cornerSegments:8,hollow:0},e.parameters),l=s.width/2,c=null!==(r=s.radiusTop)&&void 0!==r?r:l,u=null!==(i=s.radiusBottom)&&void 0!==i?i:l;return c===u?(c=l,u=l):c>u?(c=l,u=u*l/c):(c=c*l/u,u=l),{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(null!==(o=s.height)&&void 0!==o?o:s.width),depth:Math.abs(null!==(a=s.depth)&&void 0!==a?a:s.width),radiusTop:c,radiusBottom:u})}}static build(e){let t,{width:n,depth:r,height:i,radialSegments:o,heightSegments:a,openEnded:s,thetaStart:l,thetaLength:c,radiusTop:u,radiusBottom:d,cornerRadius:h,cornerSegments:f,hollow:p}=e.parameters;return t=h||p?new t_(u,d,i,o,a,s,l,c*Math.PI/180,h,h,f,p):new Bl(u,d,i,o,a,s,l,c*Math.PI/180),t.scale(1,1,r/n),Object.assign(t,{userData:{...e,type:"CylinderGeometry"}})}},DodecahedronGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}}static build(e){let{width:t,height:n,depth:r,detail:i,corner:o,cornerSides:a}=e.parameters,s=0===i&&0!==o?new o_(.5*t,o,a):new Ul(.5*t,i);return s.scale(1,n/t,r/t),Object.assign(s,{userData:{...e,type:"DodecahedronGeometry"}})}},EllipseGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof kS?e.shape:new kS,parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:0)})}}static build(e){let{width:t,height:n,spikes:r,angle:i,innerRadius:o,depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}=e.parameters,c=e.shape,u=function(e,t,n,r,i,o){if(r>=d_)return i>30||i%4===0?(function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=.5522847498,s=t*a,l=n*a;e.addPoint(p_(i-t,o,i-t,o-l,i-t,o+l)),e.addPoint(p_(i,o+n,i-s,o+n,i+s,o+n)),e.addPoint(p_(i+t,o,i+t,o+l,i+t,o-l)),e.addPoint(p_(i,o-n,i+s,o-n,i-s,o-n)),r>0&&g_(e,t,n,r)}(e,t,n,o),Math.round(i/4)):h_(e,r,i,t,n,o);let a={x:0,y:n},s=r+.5*Math.PI,l={x:Math.cos(s)*t,y:Math.sin(s)*n},c=u_({px:a.x,py:a.y,cx:l.x,cy:l.y,rx:t,ry:n,largeArcFlag:r>Math.PI,sweepFlag:!0});return i>30||i%c.length===0?function(e,t,n,r,i,o,a,s){let l=Math.round(i/r.length);e.addPoint(f_(t,n));for(let c=0,u=r.length;c<u;c++){let t=r[c],n=e.points[c],i=f_(t.x,t.y);n.controls[1].position.set(t.x1,t.y1),i.controls[0].position.set(t.x2,t.y2),e.addPoint(i)}return s>0?m_(e,o,a,s):e.addPoint(f_(0,0)),l}(e,a.x,a.y,c,i,t,n,o):h_(e,r,i,t,n,o)}(c,.5*t,.5*n,i*Math.PI/180,r,o);c.isClosed=!0,c.update();let d=JS.create({shape:c,parameters:{subdivisions:u,depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}});return Object.assign(d,{userData:{...e,type:"EllipseGeometry"}})}},HelixGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),a=Math.abs(o.width),s=Math.abs(null!==(r=o.height)&&void 0!==r?r:a),l=Math.abs(null!==(i=o.depth)&&void 0!==i?i:a),c=Math.abs(Math.min(a,l))/2;return{parameters:Object.assign(o,{width:a,height:s,depth:l,radius:c,segments:Math.round(o.segments),pathSegments:Math.round(o.pathSegments),cornerSegments:Math.round(o.cornerSegments)})}}static build(e){let{width:t,height:n,depth:r,radius:i,revolutions:o,segments:a,pathRadius:s,pathType:l,pathSegments:c,cornerRadius:u,cornerSegments:d}=e.parameters,h=new y_(!1,t,n,r,i,o,a,s,l,c,u,d);return Object.assign(h,{userData:{...e,type:"HelixGeometry"}})}},IcosahedronGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}}static build(e){let{width:t,height:n,depth:r,detail:i,corner:o,cornerSides:a}=e.parameters,s=0===i&&0!==o?new x_(.5*t,o,a):new yc(.5*t,i);return s.scale(1,n/t,r/t),Object.assign(s,{userData:{...e,type:"IcosahedronGeometry"}})}},LatheGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i,o,a;(null!==(n=null===(r=e.parameters)||void 0===r?void 0:r.points)&&void 0!==n?n:[]).forEach((e=>{Array.isArray(e)&&(e.x=e[0],e.y=e[1])}));let s=Object.assign({},null!==(i=null===t||void 0===t?void 0:t.parameters)&&void 0!==i?i:{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(null!==(o=s.height)&&void 0!==o?o:s.width),depth:Math.abs(null!==(a=s.depth)&&void 0!==a?a:s.width)})}}static build(e){let{points:t,segments:n,verticalSegments:r}=e.parameters,i=new Gl;i.moveTo(t[0].x,t[0].y),i.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let o=new jl(i.extractPoints(r).shape,n);return o.rotateZ(Math.PI),Object.assign(o,{userData:{...e,type:"LatheGeometry"}})}},NonParametricGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r;let i,o=null!==(n=null!==(r=e.geometry)&&void 0!==r?r:null===t||void 0===t?void 0:t.geometry)&&void 0!==n?n:(new zi).copy(new ao(100,100,100));void 0===t?(o.computeBoundingBox(),o.boundingBox.getSize(R_),i={width:R_.x,height:R_.y,depth:R_.z,subdivisions:0}):i=t.parameters;let a={...i,...e.parameters};return{parameters:{width:Math.abs(a.width),height:Math.abs(a.height),depth:Math.abs(a.depth),subdivisions:Math.abs(a.subdivisions)},geometry:o}}static build(e){var t;let{width:n,height:r,depth:i,subdivisions:o}=e.parameters,a=null!==(t=e.geometry)&&void 0!==t?t:(new zi).copy(new ao(100,100,100)),s=a.userData.parameters;void 0===s?(a.computeBoundingBox(),a.boundingBox.getSize(R_)):R_.set(s.width,s.height,s.depth),(n!==R_.x||r!==R_.y||i!==R_.z)&&a.scale(0===R_.x?1:n/R_.x,0===R_.y?1:r/R_.y,0===R_.z?1:i/R_.z);let l=a.originalGeometry;return o>0?(void 0===l||(null===s||void 0===s?void 0:s.subdivisions)!==o)&&(void 0===l&&(l=a),a=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.subdivisions=e}modify(e){(e=e instanceof zi?(new __).fromBufferGeometry(e):e.clone()).mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t,n,r,i,o,a=new ur,s=e.vertices,l=e.faces,c=e.faceVertexUvs[0],u=void 0!==c&&c.length>0,d=[],h=new Map;!function(e,t,n,r){let i,o,a;for(i=0,o=e.length;i<o;i++)n[i]={edges:[]};for(i=0,o=t.length;i<o;i++)a=t[i],P_(a.a,a.b,e,r,a,n),P_(a.b,a.c,e,r,a,n),P_(a.c,a.a,e,r,a,n)}(s,l,d,h);let f,p,m,g,v,y,x,b=[];for(let V of Array.from(h.keys())){for(p=h.get(V),m=new ur,v=3/8,y=1/8,x=p.faces.length,2!=x&&(v=.5,y=0),m.addVectors(p.a,p.b).multiplyScalar(v),a.set(0,0,0),i=0;i<x;i++){for(g=p.faces[i],o=0;o<3&&(f=s[M_(g,C_[o])],f===p.a||f===p.b);o++);f&&a.add(f)}a.multiplyScalar(y),m.add(a),p.newEdge=b.length,b.push(m)}let w,S,_,A,E,C,M,T=[];for(n=0,r=s.length;n<r;n++){for(C=s[n],E=d[n].edges,t=E.length,3==t?w=3/16:t>3&&(w=3/(8*t)),S=1-t*Number(w),_=w,t<=2&&2==t&&(S=3/4,_=1/8),M=C.clone().multiplyScalar(S),a.set(0,0,0),i=0;i<t;i++)A=E[i],f=A.a!==C?A.a:A.b,a.add(f);a.multiplyScalar(Number(_)),M.add(a),T.push(M)}let P,D,k,O,R,I,L,N=T.concat(b),j=T.length,B=[],F=[],z=new jn,U=new jn,G=new jn;for(n=0,r=l.length;n<r;n++)g=l[n],P=Number(T_(g.a,g.b,h).newEdge)+j,D=Number(T_(g.b,g.c,h).newEdge)+j,k=Number(T_(g.c,g.a,h).newEdge)+j,D_(B,P,D,k,g.materialIndex),D_(B,g.a,P,k,g.materialIndex),D_(B,g.b,D,P,g.materialIndex),D_(B,g.c,k,D,g.materialIndex),u&&(O=c[n],R=O[0],I=O[1],L=O[2],z.set(k_(R.x,I.x),k_(R.y,I.y)),U.set(k_(I.x,L.x),k_(I.y,L.y)),G.set(k_(R.x,L.x),k_(R.y,L.y)),O_(F,z,U,G),O_(F,R,z,G),O_(F,I,U,z),O_(F,L,G,U));e.vertices=N,e.faces=B,u&&(e.faceVertexUvs[0]=F)}}(o).modify(l).toBufferGeometry()):(void 0!==l&&(a=l),l=void 0,void 0===a.getAttribute("normal")&&a.computeVertexNormals()),void 0!==l&&Object.assign(a,{originalGeometry:l}),delete e.geometry,Object.assign(a,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,n){new $c(n).load(e,(e=>{let n=this.normalizeInputs({geometry:e});e.boundingBox.getSize(R_);let r=100/R_.x;Object.assign(n.parameters,{width:100,height:R_.y*r,depth:R_.z*r}),t(this.build(n))}))}},PolygonGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof kS?e.shape:new kS,parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:0)})}}static build(e){let{width:t,height:n,spikes:r,cornerRadius:i,depth:o,extrudeBevelSize:a,extrudeBevelSegments:s}=e.parameters,l=e.shape,c=.5*t,u=.5*n,d=2*Math.PI/r;for(let f=0;f<r;f++){let e=d*f,t=0+Math.sin(e)*c,n=0+Math.cos(e)*u;l.addPoint(l.createPoint(t,n))}l.isClosed=!0;for(let f=0,p=l.points.length;f<p;f++)l.points[f].roundness=i;l.roundness=i,l.update();let h=JS.create({shape:l,parameters:{roundness:i,depth:o,extrudeBevelSize:a,extrudeBevelSegments:s}});return Object.assign(h,{userData:{...e,type:"PolygonGeometry"}})}},PyramidGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}}static build(e){let{width:t,height:n,depth:r,radialSegments:i,heightSegments:o,openEnded:a,cornerRadius:s,cornerSegments:l}=e.parameters,c=new j_(.5*t,n,i,o,a,s,l);return c.scale(1,1,r/t),Object.assign(c,{userData:{...e,type:"PyramidGeometry"}})}},RectangleGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i,o;let a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),s=Object.assign(null!==(r=null===t||void 0===t?void 0:t.ui)&&void 0!==r?r:{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof kS?e.shape:new kS,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(i=a.height)&&void 0!==i?i:a.width),depth:Math.abs(null!==(o=a.depth)&&void 0!==o?o:0)}),ui:s}}static build(e){let t=e.shape,{width:n,height:r,cornerRadius:i,cornerType:o,depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}=e.parameters,c={x:.5*n,y:.5*r},u={x:-c.x,y:-c.y},d={x:c.x,y:c.y};function h(e,t,i){return t>n&&i>r?Math.min(e*n/t,e*r/i):t>n?e*n/t:i>r?e*r/i:e}let f=[];f[0]=0===i[0]?0:h(i[0],i[0]+i[3],i[0]+i[1]),f[1]=0===i[1]?0:h(i[1],i[1]+i[2],i[1]+i[0]),f[2]=0===i[2]?0:h(i[2],i[2]+i[1],i[2]+i[3]),f[3]=0===i[3]?0:h(i[3],i[3]+i[0],i[3]+i[2]);let p=u.x,m=d.x,g=d.y,v=u.y;t.addPoint(t.createPoint(p,g)),t.addPoint(t.createPoint(m,g)),t.addPoint(t.createPoint(m,v)),t.addPoint(t.createPoint(p,v)),t.isClosed=!0;let y=!0;for(let b=0,w=t.points.length;b<w;b++)t.points[b].roundness=f[b],b>0&&f[b]!==f[b-1]&&(y=!1);y&&(t.roundness=f[0]),t.useCubicForRoundedCorners=1!==o,t.update();let x=JS.create({shape:t,parameters:{depth:a,extrudeBevelSize:s,extrudeBevelSegments:l}});return Object.assign(x,{userData:{...e,type:"RectangleGeometry"}})}},SphereGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}}static build(e){let{width:t=100,height:n=t,depth:r=t,widthSegments:i=64,heightSegments:o=64,phiStart:a,phiLength:s,thetaStart:l,thetaLength:c}=e.parameters,u=new xc(.5*t,i,o,a,s,l,c);return u.scale(1,n/t,r/t),Object.assign(u,{userData:{...e,type:"SphereGeometry"}})}},PlaneGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r;let i=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(null!==(r=i.height)&&void 0!==r?r:i.width),depth:0})}}static build(e){let{width:t=100,height:n=t,widthSegments:r=8,heightSegments:i=8}=e.parameters,o=new Mo(t,n,r,i);return o.scale(1,1,1),Object.assign(o,{userData:{...e,type:"PlaneGeometry"}})}},BackdropGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:o.width)})}}static build(e){let{width:t,height:n,depth:r,angle:i,cornerRadius:o,cornerSegments:a}=e.parameters,s=new B_(t,n,r,i,o,a);return Object.assign(s,{userData:{...e,type:"BackdropGeometry"}})}},StarGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof kS?e.shape:new kS,parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:0)})}}static build(e){let{width:t,height:n,innerRadiusPercent:r,spikes:i,cornerRadius:o,angle:a,depth:s,extrudeBevelSize:l,extrudeBevelSegments:c}=e.parameters,u=e.shape,d=.5*t,h=.5*n,f=a*Math.PI/360/i,p=Math.PI/2*3*-1,m=d*r/100,g=h*r/100;if(3===i&&50===r){f=2*Math.PI/i;for(let e=0;e<i;e++){let t=f*e,n=0+Math.sin(t)*d,r=0+Math.cos(t)*h;u.addPoint(u.createPoint(n,r))}}else for(let y=0;y<i;y++){let e=0+Math.cos(p)*d,t=0+Math.sin(p)*h;u.addPoint(u.createPoint(e,t)),p+=f,e=0+Math.cos(p)*m,t=0+Math.sin(p)*g,u.addPoint(u.createPoint(e,t)),p+=f}u.isClosed=!0;for(let y=0,x=u.points.length;y<x;y++)u.points[y].roundness=o;u.roundness=o,u.update();let v=JS.create({shape:u,parameters:{roundness:o,depth:s,extrudeBevelSize:l,extrudeBevelSegments:c}});return Object.assign(v,{userData:{...e,type:"StarGeometry"}})}},TextFrameGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:0)})}}static build(e){let{width:t,height:n}=e.parameters,r=new Mo(t,n);return Object.assign(r,{userData:{...e,type:"TextFrameGeometry"}})}},TorusGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,radialSegments:32,tubularSegments:64,arc:2*Math.PI,cornerRadius:30,cornerSegments:8},e.parameters),a=Math.abs(o.width),s=Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width),l=Math.abs(null!==(i=o.depth)&&void 0!==i?i:.25*o.width);return{parameters:Object.assign(o,{width:a,height:s,depth:l})}}static build(e){let{width:t,height:n,depth:r,radialSegments:i,tubularSegments:o,arc:a,cornerRadius:s,cornerSegments:l}=e.parameters,c=function(e,t,n,r,i,o,a,s,l,c,u){return[t,n]=[n,t],a=t/2,1==(i/=2*Math.PI)&&(c=0),new y_(!0,e,t,n,r,i,o,a,s,l,c,u)}(t,n,r,.5*t,a,o,0,0,i,s,l);return c.scale(1,n/t,1),Object.assign(c,{userData:{...e,type:"TorusGeometry"}})}},TorusKnotGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i,o;let a=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!==(r=a.height)&&void 0!==r?r:a.width),depth:Math.abs(null!==(i=a.depth)&&void 0!==i?i:a.width),tube:null!==(o=a.tube)&&void 0!==o?o:.125*a.width})}}static build(e){let{width:t,tube:n,tubularSegments:r,radialSegments:i,p:o,q:a}=e.parameters,s=.5*t;s!==n&&(s-=n);let l=new bc(s,n,r,i,o,a);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},TriangleGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var n,r,i;let o=Object.assign({},null!==(n=null===t||void 0===t?void 0:t.parameters)&&void 0!==n?n:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof kS?e.shape:new kS,parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!==(r=o.height)&&void 0!==r?r:o.width*(o.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(null!==(i=o.depth)&&void 0!==i?i:0)})}}static build(e){let{width:t=100,height:n,cornerRadius:r,depth:i,extrudeBevelSize:o,extrudeBevelSegments:a,isRect:s}=e.parameters,l=e.shape,c=.5*t,u=.5*n;s?(l.addPoint(l.createPoint(-c,u)),l.addPoint(l.createPoint(c,-u)),l.addPoint(l.createPoint(-c,-u))):(l.addPoint(l.createPoint(0,u)),l.addPoint(l.createPoint(c,-u)),l.addPoint(l.createPoint(-c,-u))),l.isClosed=!0;for(let h=0,f=l.points.length;h<f;h++)l.points[h].roundness=r;l.roundness=r,l.update();let d=JS.create({shape:l,parameters:{roundness:r,depth:i,extrudeBevelSize:o,extrudeBevelSegments:a}});return Object.assign(d,{userData:{...e,type:"TriangleGeometry"}})}},VectorGeometry:JS},xA=e=>yA[e.type].create(e);function bA(e,t){return t.color(e)}var wA=e=>"isEntity"in e,SA=e=>"isAbstractMesh"in e,_A=e=>null!==e&&"BooleanObject"===e.objectType,AA=e=>"EmptyObject"===e.objectType,EA=e=>"objectHelper"in e;function CA(e,t){var n;let r=!1;t.position&&(e.position.fromArray(t.position),r=!0),t.rotation&&(e.rotation.fromArray(t.rotation),r=!0),t.scale&&(r=!0,e.scale.fromArray(t.scale)),void 0!==t.hiddenMatrix&&"hiddenMatrix"in e&&(r=!0,e.hiddenMatrix.fromArray(null!==(n=t.hiddenMatrix)&&void 0!==n?n:Zy.identity)),r&&(e.updateMatrix(),_A(e.parent)&&SA(e)&&e.invalidateDownstreamBooleanData(!0).recomputeBoolean()),t.position&&t.rotation&&t.scale&&void 0!==t.hiddenMatrix&&e.updateWorldMatrix(!1,!0),"CombinedCamera"===e.objectType&&(void 0!==t.isUpVectorFlipped&&(e.isUpVectorFlipped=t.isUpVectorFlipped),e.updateUp())}function MA(e,t,n){(function(e,t){CA(e,t),void 0!==t.name&&(e.name=t.name),void 0!==t.visible&&(e.visible=t.visible)})(e,t),void 0!==t.color&&(e.color=bA(t.color,n)),void 0!==t.intensity&&(e.intensity=t.intensity),void 0!==t.shadows&&!(e instanceof Bc)&&(e.castShadow=t.shadows),e.shadow&&!(e instanceof Bc)&&void 0!==t.depth&&(e.shadow.camera.far=t.depth,e.shadow.needsUpdate=!0)}var TA=e=>class extends e{hasEntityChild(){return this.children.some((e=>wA(e)))}isDescendantOf(e){e instanceof hi&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}attach(e,t){this.updateWorldMatrix(!0,!1);let n=(new Ur).copy(this.matrixWorld).invert();return null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),n.multiply(e.parent.matrixWorld)),wA(e)?e.hiddenMatrix.premultiply(n):e.applyMatrix4(n),e.updateWorldMatrix(!1,!1),this.add(e),void 0!==t&&(this.children.pop(),this.children.splice(t,0,e)),this}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){let t=e.children[n];this.add(t.clone())}return this}},PA=new fr,DA=new ur,kA=new ur,OA=new Ur,RA=[new ur(-1,1,1),new ur(-1,-1,1),new ur(1,-1,1),new ur(1,1,1),new ur(-1,1,-1),new ur(-1,-1,-1),new ur(1,-1,-1),new ur(1,1,-1)],IA=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],LA=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]];var NA=(e,t,n)=>{if(SA(e)){var r;let t=e.geometry.userData.parameters,n=e.geometry.getAttribute("position");"SubdivGeometry"===e.geometry.userData.type?DA.copy(e.originalGeometry.boundingSphere.center):"TextGeometry"===e.geometry.userData.type?DA.set(0,0,.5*t.depth):void 0!==n&&(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.count,i=1/0,o=1/0,a=1/0,s=-1/0,l=-1/0,c=-1/0;for(let u=n;u<r;u++){let e=t.getX(u),n=t.getY(u),r=t.getZ(u);e<i&&(i=e),n<o&&(o=n),r<a&&(a=r),e>s&&(s=e),n>l&&(l=n),r>c&&(c=r)}e.min.set(i,o,a),e.max.set(s,l,c)}(PA,n,e.geometry.drawRange.start,e.geometry.drawRange.count<1/0?e.geometry.drawRange.count:n.count),PA.getCenter(DA)),e.forceComputeSize?PA.getSize(kA).multiplyScalar(.5):kA.set(t.width,t.height,null!==(r=t.depth)&&void 0!==r?r:0).multiplyScalar(.5)}else if(EA(e)&&e.objectHelper.visible){let t=e.geometryHelper.getAttribute("position");PA.setFromArray(t.array),PA.getCenter(DA),PA.getSize(kA).multiplyScalar(.5)}else DA.setScalar(0),kA.setScalar(0);OA.copy(t).multiply(e.matrixWorld),0===kA.x&&0===kA.y&&0===kA.z?n.push(new ur(DA.x,DA.y,DA.z).applyMatrix4(OA)):RA.forEach((e=>{n.push(e.clone().multiply(kA).add(DA).applyMatrix4(OA))}))},jA=class extends fr{constructor(){super(...arguments),this.matrix=new Ur,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map((e=>e.clone())),this.faces=e.faces.map((e=>e.clone())),this.edges=e.edges.map((e=>e.clone())),this.centerEdges=e.centerEdges.map((e=>e.clone())),this}setFromObjectSize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let n=(new Ur).copy(e.matrixWorld).invert();return this.expandByObjectSize(e,n,t)}expandByObjectSize(e,t){let n=[];return!0===(arguments.length>2&&void 0!==arguments[2]&&arguments[2])?e.traverseEntity((e=>{e.visible&&NA(e,t,n)})):NA(e,t,n),this.setFromPoints(n)}getCenter(e){return(e=super.getCenter(e)).applyMatrix4(this.matrix),e}getPositionToCenter(e){return(e=super.getCenter(e)).applyMatrix4(OA.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(kA).multiplyScalar(.5),this.getCenter(DA),OA.copy(this.matrix).setPosition(DA),this.vertices=RA.map((e=>e.clone().multiply(kA).applyMatrix4(OA)))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=IA.map((e=>{let[t,n]=e;return new wu(this.vertices[t],this.vertices[n])})),this.centerEdges=this.edges.map((e=>e.getCenter(new ur)))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=LA.map((e=>{let[t,n]=e;return this.vertices[t].clone().add(this.vertices[n]).multiplyScalar(.5)}))}},BA=e=>"isEntity"in e,FA=e=>"isAbstractMesh"in e,zA=e=>class extends(TA(e)){constructor(){super(...arguments),this.objectType="",this.isEntity=!0,this.raycastLock=!1,this.scaleLock=!1,this.hiddenMatrix=new Ur,this._singleBBox=new jA,this._recursiveBBox=new jA,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.forceComputeSize=!1,this.states={},this.currentState=null,this.currentTransitionAction=null}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}resetBBoxNeedsUpdate(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.traverseAncestors((e=>{BA(e)&&(e.singleBBoxNeedsUpdate=!0,e.recursiveBBoxNeedsUpdate=!0)})),this.traverseEntity((e=>{e.singleBBoxNeedsUpdate=!0,e.recursiveBBoxNeedsUpdate=!0}))}traverseEntity(e){e(this);for(let t of this.children)BA(t)&&t.traverseEntity(e)}traverseVisibleEntity(e){e(this);for(let t of this.children)BA(t)&&t.visible&&t.traverseVisibleEntity(e)}updateMatrix(){super.updateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(let t of this.children)t.updateMatrixWorld(e)}updateWorldMatrix(e,t){let n=this.parent;if(e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),t)for(let r of this.children)r.updateWorldMatrix(!1,!0)}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(super.copy(e,!1),this.raycastLock=e.raycastLock,this.scaleLock=e.scaleLock,this.hiddenMatrix.copy(e.hiddenMatrix),!0===t)for(let n of e.children)BA(n)&&this.add(n.clone());return this}keepChildrenMatrixWorld(){let e=new Ur,t=this.matrixWorld.clone();this.updateWorldMatrix(!1,!1),e.copy(this.matrixWorld).invert(),e.multiply(t);for(let n of this.children)BA(n)&&n.hiddenMatrix.premultiply(e)}toObjectTransformState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.updateWorldMatrix(!0,!1);let t={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return pg(t,e)}fromObjectTransformState(e){return e.position&&this.position.fromArray(e.position),e.rotation&&this.rotation.fromArray(e.rotation),e.scale&&this.scale.fromArray(e.scale),e.hiddenMatrix&&this.hiddenMatrix.fromArray(e.hiddenMatrix),this.updateMatrix(),this}toState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(e)};return pg(t,e)}fromState(e,t){return e.name&&(this.name=e.name),void 0!==e.raycastLock&&(this.raycastLock=e.raycastLock),"OrthographicCamera"!==e.type&&"PerspectiveCamera"!==e.type&&(this.matrixAutoUpdate=!1),void 0!==e.visible&&(this.visible=e.visible),this.fromObjectTransformState(e),this}},UA=class{constructor(e){var t;e=null!==(t=e)&&void 0!==t?t:{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},GA=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=Nn.generateUUID(),this.type=e,this.name=""}analyze(e,t){var n;t=null!==(n=t)&&void 0!==n?n:{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,n){var r;return n=null!==(r=n)&&void 0!==r?r:{},this.analyze(e,n),this.flow(e,t,n)}flow(e,t,n){var r;n=null!==(r=n)&&void 0!==r?r:{},e.addFlow(n.slot,n.cache,n.context);let i={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),i}build(e,t,n){var r;t=null!==(r=t)&&void 0!==r?r:this.getType(e,t);let i=e.getNodeData(null!==n&&void 0!==n?n:this);return e.analyzing&&this.appendDepsNode(e,i,t),-1===e.nodes.indexOf(this)&&e.nodes.push(this),void 0!==this.updateFrame&&-1===e.updaters.indexOf(this)&&e.updaters.push(this),this.generate(e,t,n)}updateFrame(e){}generateReadonly(e,t,n,r,i,o){return""}generate(e,t,n,r,i){return""}parse(e,t,n,r){}appendDepsNode(e,t,n){t.deps=(t.deps||0)+1;let r=e.getTypeLength(n);(r>(t.outputMax||0)||this.getType(e,n))&&(t.outputMax=r,t.output=n)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return"sampler2D"===t||"samplerCube"===t?t:this.type}getHash(){let e,t,n="{";for(e in this)t=this[e],t instanceof GA&&(n+='"'+e+'":'+t.getHash()+",");if(this.hashProperties)for(let r=0;r<this.hashProperties.length;r++)e=this.hashProperties[r],t=this[e],n+='"'+e+'":"'+String(t)+'",';return n+='"id":"'+this.uuid+'"}',n}},VA=new class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,n){n=void 0===n||n,this.keywords[e]={callback:t,cache:n}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return void 0!==this.nodes[e]}containsKeyword(e){return void 0!==this.keywords[e]}},HA=class extends GA{constructor(e,t){var n;super(e),this.scope="",t=null!==(n=t)&&void 0!==n?n:{},this.shared=void 0===t.shared||t.shared,this.unique=void 0!==t.unique&&t.unique}build(e,t,n,r){var i;if(t=null!==(i=t)&&void 0!==i?i:this.getType(e),this.getShared(e,t)){var o;let i=this.getUnique(e,t);i&&void 0===this.uuid&&(this.uuid=Nn.generateUUID()),n=e.getUUID(null!==(o=n)&&void 0!==o?o:this.getUUID(),!i);let a=e.getNodeData(n),s=a.output||this.getType(e);if(e.analyzing)return(a.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,a,t),this.generate(e,t,n)):super.build(e,t,n);if(i)return a.name=a.name||super.build(e,t,n),a.name;if(!this.getLabel()&&(!this.getShared(e,s)||e.context.ignoreCache||1===a.deps))return super.build(e,t,n);n=this.getUUID(!1);let l=this.getTemp(e,n);if(l)return e.format(l,s,t);{l=super.generate(e,t,n,a.output,r);let i=this.generate(e,s,n);return e.addNodeCode(l+" = "+i+";"),e.format(l,s,t)}}return super.build(e,t,n)}getShared(e,t){return"sampler2D"!==t&&"samplerCube"!==t&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return"string"==typeof this.scope&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let n=e.getVars()[t];return n?n.name:void 0}generate(e,t,n,r,i){var o;return this.getShared(e,t)||console.error("TempNode is not shared"),n=null!==(o=n)&&void 0!==o?o:this.uuid,e.getTempVar(n,null!==r&&void 0!==r?r:this.getType(e),i,this.getLabel()).name}},WA=class extends HA{constructor(e,t){var n;(t=null!==(n=t)&&void 0!==n?n:{}).shared=void 0!==t.shared&&t.shared,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,n,r,i,o){var a,s;n=e.getUUID(null!==(a=n)&&void 0!==a?a:this.getUUID()),r=null!==(s=r)&&void 0!==s?s:this.getType(e);let l=e.getNodeData(n);return this.getReadonly()&&void 0!==this.generateReadonly?this.generateReadonly(e,t,n,r,i,o):e.isShader("vertex")?(l.vertex||(l.vertex=e.createVertexUniform(r,this,i,o,this.getLabel())),e.format(l.vertex.name,r,t)):(l.fragment||(l.fragment=e.createFragmentUniform(r,this,i,o,this.getLabel())),e.format(l.fragment.name,r,t))}},qA=class extends WA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;super("v2"),this.nodeType="Vector2",this.value=e instanceof jn?e:new jn(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,n,r,i,o){return e.format("vec2("+this.value.x+", "+this.value.y+")",r,t)}},YA=class extends WA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;super("v3"),this.nodeType="Vector3",this.value=e instanceof ur?e:new ur(e,t,n)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,n,r,i,o){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",r,t)}},XA=class extends $n{constructor(e,t,n,r){super(e,t,n),this.isColorA=!0,this.a=r}setRGBA(e,t,n,r){super.setRGB(e,t,n),this.a=r}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},QA=class extends WA{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof XA?e:new XA(e.r,e.g,e.b,e.a)}generateReadonly(e,t,n,r,i,o){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",r,t)}},KA=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,ZA=/[a-z_0-9]+/gi,JA=class extends HA{constructor(e,t,n,r,i){super(i),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=void 0===i,this.isInterface=!1,this.parse(e,t,n,r)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,n,r,i){let o,a=0,s=this.src;if(this.includes)for(let c=0;c<this.includes.length;c++)e.include(this.includes[c],this);for(let c in this.extensions)e.extensions[c]=!0;let l=[];for(;o=ZA.exec(this.src);)l.push(o);for(let c=0;c<l.length;c++){let t=l[c],n=t[0],r=!this.isMethod||!this.getInputByName(n),i=n;if(this.keywords[n]||this.useKeywords&&r&&VA.containsKeyword(n)){let t=this.keywords[n];if(!t){let r=VA.getKeywordData(n);r.cache&&(t=e.keywords[n]),t=t||VA.getKeyword(n,e),r.cache&&(e.keywords[n]=t)}i=t.build(e)}n!==i&&"."!==s[t.index+a-1]&&(s=s.substring(0,t.index+a)+i+s.substring(t.index+n.length+a),a+=i.length-n.length),void 0===this.getIncludeByName(i)&&VA.contains(i)&&e.include(VA.get(i))}return"source"===t?s:this.isMethod?(this.isInterface||e.include(this,void 0,s),this.name):e.format("( "+s+" )",this.getType(e),t)}parse(e,t,n,r){if(this.src=e||"",this.includes=null!==t&&void 0!==t?t:[],this.extensions=null!==n&&void 0!==n?n:{},this.keywords=null!==r&&void 0!==r?r:{},this.isMethod){let e=KA.exec(this.src);if(this.inputs=[],e&&4==e.length){this.type=e[1],this.name=e[2];let t=e[3].match(ZA);if(t){let e=0;for(;e<t.length;){let n,r=t[e++];"in"===r||"out"===r||"inout"===r?n=t[e++]:(n=r,r="");let i=t[e++];this.inputs.push({name:i,type:n,qualifier:r})}}this.isInterface=-1===this.src.indexOf("{")}else this.type="",this.name=""}}},$A=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,eE=class extends HA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||eE.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,n,r,i){this.src=e||"";let o,a,s="",l=$A.exec(e);this.useDefine=null!==i&&void 0!==i?i:"#"===this.src.charAt(0),l&&l.length>1?(a=l[1],o=l[2],s=l[3]):(o=this.src,a="f"),this.name=o,this.type=a,this.value=s}build(e,t){if("source"===t){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,n,r,i){return e.format(this.name,this.getType(e),t)}},tE=eE;tE.PI="PI",tE.PI2="PI2",tE.RECIPROCAL_PI="RECIPROCAL_PI",tE.RECIPROCAL_PI2="RECIPROCAL_PI2",tE.LOG2="LOG2",tE.EPSILON="EPSILON";var nE=new RegExp("^structs*([a-z_0-9]+)s*{s*((.|\n)*?)}","gim"),rE=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),iE=class extends HA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,n,r,i){return"source"===t?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.src=e,this.inputs=[];let t=nE.exec(e);if(t){let e,n=t[2];for(;e=rE.exec(n);)this.inputs.push({type:e[1],name:e[2]});this.name=t[1]}else this.name="";this.type=this.name}},oE=class extends HA{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=null!==e&&void 0!==e?e:0}generate(e,t){e.requires.uv[this.index]=!0;let n=this.index>0?this.index+1:"",r=e.isShader("vertex")?"uv"+n:"vUv"+n;return e.format(r,this.getType(e),t)}};VA.addKeyword("uv",(function(){return new oE})),VA.addKeyword("uv2",(function(){return new oE(1)}));var aE=class extends HA{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=null!==t&&void 0!==t?t:aE.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case gn:return["Linear"];case vn:return["sRGB"];default:return[]}}generate(e,t){var n;let r=this.input.build(e,"v4"),i=this.getType(e),o=aE.Nodes[this.method],a=e.include(o);if(a===aE.LINEAR_TO_LINEAR)return e.format(r,i,t);if(2===(null===(n=o.inputs)||void 0===n?void 0:n.length)){let n=this.factor.build(e,"f");return e.format(a+"( "+r+", "+n+" )",i,t)}return e.format(a+"( "+r+" )",i,t)}fromEncoding(e){let t=aE.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=aE.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},sE=aE;sE.Nodes={LinearToLinear:new JA(["vec4 LinearToLinear( in vec4 value ) {","\treturn value;","}"].join("\n")),sRGBToLinear:new JA(["vec4 sRGBToLinear( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join("\n")),LinearTosRGB:new JA(["vec4 LinearTosRGB( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join("\n"))},sE.LINEAR_TO_LINEAR="LinearToLinear",sE.SRGB_TO_LINEAR="sRGBToLinear",sE.LINEAR_TO_SRGB="LinearTosRGB";var lE=class extends JA{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",arguments.length>4?arguments[4]:void 0,arguments.length>3?arguments[3]:void 0,arguments.length>2?arguments[2]:void 0,arguments.length>1?arguments[1]:void 0),this.nodeType="Expression"}},cE=class extends WA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new or,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=null!==t&&void 0!==t?t:new oE,this.bias=n,this.project=void 0!==r&&r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){var n;if("sampler2D"===t)return this.getTexture(e,t);let r,i,o=this.getTexture(e,t),a=this.uv.build(e,this.project?"v4":"v2"),s=this.bias?this.bias.build(e,"f"):void 0;void 0===s&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f")),r=this.project?"texture2DProj":s?"tex2DBias":"tex2D",i=s?r+"( "+o+", "+a+", "+s+" )":r+"( "+o+", "+a+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},c=this.getType(e);return e.addContext(l),this.colorSpace=null!==(n=this.colorSpace)&&void 0!==n?n:new sE(new lE("",c)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(i),i=this.colorSpace.build(e,c),e.removeContext(),e.format(i,c,t)}},uE=class extends WA{constructor(e){super("f"),this.nodeType="Float",this.value=null!==e&&void 0!==e?e:0}generateReadonly(e,t,n,r,i,o){return e.format(this.value+(this.value%1?"":".0"),r,t)}},dE=class extends HA{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=null!==t&&void 0!==t?t:[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,n,r,i){r=this.getType(e);let o=this.value,a=o.build(e,t)+"( ",s=[];if(o.inputs){for(let t=0;t<o.inputs.length;t++){let n=o.inputs[t],r=this.inputs[t]||this.inputs[n.name];s.push(r.build(e,e.getTypeByFormat(n.type)))}a+=s.join(", ")+" )"}return e.format(a,r,t)}},hE=class extends HA{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hE.ADD;super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=n}getType(e){let t=this.a.getType(e),n=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(n)>e.getTypeLength(t)?n:t}generate(e,t){let n=this.getType(e);this.type=n;let r=this.a.build(e,n),i=this.b.build(e,n);return e.format("( "+r+" "+this.op+" "+i+" )",n,t)}},fE=hE;fE.ADD="+",fE.SUB="-",fE.MUL="*",fE.DIV="/";var pE=class extends HA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pE.ABS,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;super(),this.nodeType="Math",this.a=e,"string"!=typeof t?this.b=t:r=t,"string"!=typeof n?this.c=n:r=n,this.method=r,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case pE.MIX:case pE.CLAMP:case pE.REFRACT:case pE.SMOOTHSTEP:case pE.FACEFORWARD:return 3;case pE.MIN:case pE.MAX:case pE.MOD:case pE.STEP:case pE.REFLECT:case pE.DISTANCE:case pE.DOT:case pE.CROSS:case pE.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),n=this.b?e.getTypeLength(this.b.getType(e)):0,r=this.c?e.getTypeLength(this.c.getType(e)):0;return t>n&&t>r?this.a.getType(e):n>r?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case pE.LENGTH:case pE.DISTANCE:case pE.DOT:return"f";case pE.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let n,r,i,o=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,s=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),c=this.getType(e);switch(this.type=c,this.method){case pE.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case pE.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case pE.CROSS:n=this.a.build(e,"v3"),r=this.b.build(e,"v3");break;case pE.STEP:n=this.a.build(e,1===o?"f":l),r=this.b.build(e,l);break;case pE.MIN:case pE.MAX:case pE.MOD:n=this.a.build(e,l),r=this.b.build(e,1===a?"f":l);break;case pE.REFRACT:n=this.a.build(e,l),r=this.b.build(e,l),i=this.c.build(e,"f");break;case pE.MIX:n=this.a.build(e,l),r=this.b.build(e,l),i=this.c.build(e,1===s?"f":l);break;default:n=this.a.build(e,l),this.b&&(r=this.b.build(e,l)),this.c&&(i=this.c.build(e,l))}let u=[];u.push(n),r&&u.push(r),i&&u.push(i);let d=this.getNumInputs(e);if(u.length!==d)throw Error('Arguments not match used in "'.concat(this.method,'". Require ').concat(d,", currently ").concat(u.length,"."));return e.format(this.method+"( "+u.join(", ")+" )",c,t)}},mE=pE;mE.RAD="radians",mE.DEG="degrees",mE.EXP="exp",mE.EXP2="exp2",mE.LOG="log",mE.LOG2="log2",mE.SQRT="sqrt",mE.INV_SQRT="inversesqrt",mE.FLOOR="floor",mE.CEIL="ceil",mE.NORMALIZE="normalize",mE.FRACT="fract",mE.SATURATE="saturate",mE.SIN="sin",mE.COS="cos",mE.TAN="tan",mE.ASIN="asin",mE.ACOS="acos",mE.ARCTAN="atan",mE.ABS="abs",mE.SIGN="sign",mE.LENGTH="length",mE.NEGATE="negate",mE.INVERT="invert",mE.MIN="min",mE.MAX="max",mE.MOD="mod",mE.STEP="step",mE.REFLECT="reflect",mE.DISTANCE="distance",mE.DOT="dot",mE.CROSS="cross",mE.POW="pow",mE.MIX="mix",mE.CLAMP="clamp",mE.REFRACT="refract",mE.SMOOTHSTEP="smoothstep",mE.FACEFORWARD="faceforward";var gE=class extends HA{constructor(e,t,n){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=n}bilinearCubeUV(e,t,n,r){var i,o,a,s;let l=new dE(gE.Nodes.bilinearCubeUV,[t,n,r]);this.colorSpaceTL=null!==(i=this.colorSpaceTL)&&void 0!==i?i:new sE(new lE("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(l.build(e)+".tl"),this.colorSpaceTR=null!==(o=this.colorSpaceTR)&&void 0!==o?o:new sE(new lE("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(l.build(e)+".tr"),this.colorSpaceBL=null!==(a=this.colorSpaceBL)&&void 0!==a?a:new sE(new lE("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(l.build(e)+".bl"),this.colorSpaceBR=null!==(s=this.colorSpaceBR)&&void 0!==s?s:new sE(new lE("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(l.build(e)+".br");let c={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(c),this.colorSpaceTLExp=new lE(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new lE(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new lE(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new lE(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let u=new lE("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return u.keywords.cubeUV_TL=this.colorSpaceTLExp,u.keywords.cubeUV_TR=this.colorSpaceTRExp,u.keywords.cubeUV_BL=this.colorSpaceBLExp,u.keywords.cubeUV_BR=this.colorSpaceBRExp,u.keywords.cubeUV=l,u}generate(e,t){if(e.isShader("fragment")){let n=this.uv,r=this.bias||e.context.roughness,i=new dE(gE.Nodes.roughnessToMip,[r]),o=new mE(i,gE.Nodes.m0,gE.Nodes.cubeUV_maxMipLevel,mE.CLAMP),a=new mE(o,mE.FLOOR),s=new mE(o,mE.FRACT),l=this.bilinearCubeUV(e,this.value,n,a),c=this.bilinearCubeUV(e,this.value,n,new fE(a,new uE(1).setReadonly(!0),fE.ADD)),u=new mE(l,c,s,mE.MIX);return e.format(u.build(e),"v4",t)}return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},vE=gE;vE.Nodes=function(){let e=new iE("struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}"),t=new tE("float cubeUV_maxMipLevel 8.0",!0),n=new tE("float cubeUV_minMipLevel 4.0",!0),r=new tE("float cubeUV_maxTileSize 256.0",!0),i=new tE("float cubeUV_minTileSize 16.0",!0),o=new JA("float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}");o.useKeywords=!1;let a=new JA("vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x); // pos x\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(direction.x, direction.y) / abs(direction.z); // neg z\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}");a.useKeywords=!1;let s=new JA("TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}",[e,o,a,t,n,r,i]);s.useKeywords=!1;let l=new tE("float r0 1.0",!0),c=new tE("float v0 0.339",!0),u=new tE("float m0 -2.0",!0),d=new tE("float r1 0.8",!0),h=new tE("float v1 0.276",!0),f=new tE("float m1 -1.0",!0),p=new tE("float r4 0.4",!0),m=new tE("float v4 0.046",!0),g=new tE("float m4 2.0",!0),v=new tE("float r5 0.305",!0),y=new tE("float v5 0.016",!0),x=new tE("float m5 3.0",!0),b=new tE("float r6 0.21",!0),w=new tE("float v6 0.0038",!0),S=new tE("float m6 4.0",!0);return{bilinearCubeUV:s,roughnessToMip:new JA("float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}",[l,c,u,d,h,f,p,m,g,v,y,x,b,w,S]),m0:u,cubeUV_maxMipLevel:t}}();var yE=class extends HA{constructor(e){super("v3"),this.nodeType="Normal",this.scope=null!==e&&void 0!==e?e:yE.VIEW}getShared(){return this.scope===yE.WORLD}build(e,t,n,r){let i=e.context[this.scope+"Normal"];return i?i.build(e,t,n,r):super.build(e,t,n)}generate(e,t,n,r,i){let o;switch(this.scope){case yE.VIEW:o=e.isShader("vertex")?"transformedNormal":"geometryNormal";break;case yE.LOCAL:e.isShader("vertex")?o="objectNormal":(e.requires.normal=!0,o="vObjectNormal");break;case yE.WORLD:e.isShader("vertex")?o="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,o="vWNormal")}return e.format(o,this.getType(e),t)}},xE=yE;xE.LOCAL="local",xE.WORLD="world",xE.VIEW="view",xE.NORMAL="normal",VA.addKeyword("viewNormal",(function(){return new xE(xE.VIEW)})),VA.addKeyword("localNormal",(function(){return new xE(xE.NORMAL)})),VA.addKeyword("worldNormal",(function(){return new xE(xE.WORLD)}));var bE=class extends HA{constructor(e){super("v3"),this.nodeType="Position",this.scope=null!==e&&void 0!==e?e:bE.LOCAL}getType(){return this.scope===bE.PROJECTION?"v4":this.type}getShader(){switch(this.scope){case bE.LOCAL:case bE.WORLD:return!1}return!0}generate(e,t,n,r,i){let o;switch(this.scope){case bE.LOCAL:e.isShader("vertex")?o="transformed":(e.requires.position=!0,o="vPosition");break;case bE.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,o="vWPosition";break;case bE.VIEW:o=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case bE.PROJECTION:o=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return e.format(o,this.getType(),t)}},wE=bE;wE.LOCAL="local",wE.WORLD="world",wE.VIEW="view",wE.PROJECTION="projection",VA.addKeyword("position",(function(){return new wE})),VA.addKeyword("worldPosition",(function(){return new wE(wE.WORLD)})),VA.addKeyword("viewPosition",(function(){return new wE(wE.VIEW)}));var SE=class extends HA{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=null!==e&&void 0!==e?e:SE.CUBE}getUnique(e){return!e.context.viewNormal}getType(){return this.scope===SE.SPHERE?"v2":this.type}generate(e,t){let n=this.getUnique(e);if(e.isShader("fragment")){let r;switch(this.scope){case SE.VECTOR:{let t=new xE(xE.VIEW),i=e.context.roughness,o=t.build(e,"v3"),a=new wE(wE.VIEW).build(e,"v3"),s=i?i.build(e,"f"):void 0,l="reflect( -normalize( ".concat(a," ), ").concat(o," )");s&&(l="normalize( mix( ".concat(l,", ").concat(o,", ").concat(s," * ").concat(s," ) )"));let c="inverseTransformDirection( ".concat(l,", viewMatrix )");n?(e.addNodeCode("vec3 reflectVec = ".concat(c,";")),r="reflectVec"):r=c;break}case SE.CUBE:{let t=new SE(SE.VECTOR).build(e,"v3"),i="vec3( -"+t+".x, "+t+".yz )";n?(e.addNodeCode("vec3 reflectCubeVec = ".concat(i,";")),r="reflectCubeVec"):r=i;break}case SE.SPHERE:{let t="normalize( ( viewMatrix * vec4( "+new SE(SE.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";n?(e.addNodeCode("vec2 reflectSphereVec = ".concat(t,";")),r="reflectSphereVec"):r=t;break}}return e.format(r,this.getType(),t)}return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},_E=SE;_E.CUBE="cube",_E.SPHERE="sphere",_E.VECTOR="vector";var AE=class extends HA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cE,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new vE(this.value,null!==t&&void 0!==t?t:new _E(_E.VECTOR),n),this.irradianceNode=new vE(this.value,new xE(xE.WORLD),new uE(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),("irradiance"===e.slot?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},EE=class extends WA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new go,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=null!==t&&void 0!==t?t:new _E,this.bias=n}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var n,r;if("samplerCube"===t)return this.getTexture(e,t);let i,o=this.getTexture(e,t),a=null===(n=this.uv)||void 0===n?void 0:n.build(e,"v3"),s=this.bias?this.bias.build(e,"f"):void 0;void 0===s&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f")),i=s?"texCubeBias( "+o+", "+a+", "+s+" )":"texCube( "+o+", "+a+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},c=this.getType(e);return e.addContext(l),this.colorSpace=null!==(r=this.colorSpace)&&void 0!==r?r:new sE(new lE("",c)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(i),i=this.colorSpace.build(e,c),e.removeContext(),e.format(i,c,t)}},CE=["x","y","z","w"],ME=["float","vec2","vec3","vec4"],TE={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},PE={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},DE=class extends WA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;super("c"),this.nodeType="Color",this.value=e instanceof XA?e:new XA(e||0,t,n,r)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,n,r,i,o){var a,s;n=e.getUUID(null!==(a=n)&&void 0!==a?a:this.getUUID()),r=null!==(s=r)&&void 0!==s?s:this.getType(e);let l=e.getNodeData(n),c=this.getReadonly()&&void 0!==this.generateReadonly;if(this.alpha){let t=this.alpha.build(e,"f");e.addFragmentNodeCode("accumAlpha += ( 1.0 - accumAlpha ) * ".concat(t,";"))}return c?this.generateReadonly(e,t,n,r,i,o):e.isShader("vertex")?(l.vertex||(l.vertex=e.createVertexUniform(r,this,i,o,this.getLabel())),e.format(l.vertex.name,r,t)):(l.fragment||(l.fragment=e.createFragmentUniform(r,this,i,o,this.getLabel())),e.format(l.fragment.name,r,t))}generateReadonly(e,t,n,r,i,o){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",r,t)}},kE=class extends WA{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(null!==e&&void 0!==e?e:0)}generateReadonly(e,t,n,r,i,o){return e.format(this.value.toString(),r,t)}},OE=class extends GA{constructor(){super("basic"),this.nodeType="Basic",this.color=new DE(5855577),this.shadingAlpha=new uE(1),this.shadingBlend=new kE(0)}generate(e){let t;if(e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(co.merge([Po.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join("\n"));let r=["#include <beginnormal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","\tvNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join("\n")}else{void 0===this.color&&(this.color=new DE(5855577)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let n=this.color.flow(e,"c",{slot:"color"}),r=this.alpha?this.alpha.flow(e,"f"):void 0,i=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=void 0!==r,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join("\n"));let o=["#include <normal_fragment_begin>",n.code];r&&o.push(r.code,"#ifdef ALPHATEST"," if ( "+r.result+" <= ALPHATEST ) discard;","#endif"),i?o.push(i.code,"vec3 outgoingLight = ".concat(n.result,";"),"vec3 finalColor = spe_blend(outgoingLight, ".concat(i.result,", 1.0, SPE_BLENDING_NORMAL);")):o.push("vec3 finalColor = ".concat(n.result,";")),r?o.push("gl_FragColor = vec4( finalColor, accumAlpha * ".concat(r.result," );")):o.push("gl_FragColor = vec4("+n.result+", 1.0 );"),o.push("#include <fog_fragment>","#include <dithering_fragment>"),t=o.join("\n")}return t}},RE=class extends WA{constructor(e){super("b"),this.nodeType="Bool",this.value=null!==e&&void 0!==e&&e}generateReadonly(e,t,n,r){return e.format(this.value?"true":"false",r,t)}},IE=class extends WA{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=null!==e&&void 0!==e?e:new Bn}generateReadonly(e,t,n,r,i,o){return e.format("mat3("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},LE=class extends WA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:"number"==typeof t?new Array(e).fill(t):new Array(e).fill(0)}},NE=class extends WA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof ar?new Array(e).fill(t):new Array(e).fill(new ar(0))}},jE=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e))(jE||{}),BE=function(){let e=new JA("vec3 random3(vec3 c) {\n\t\t\tfloat j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));\n\t\t\tvec3 r;\n\t\t\tr.z = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.x = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.y = fract(512.0*j);\n\t\t\treturn r-0.5;\n\t\t}"),t=new JA("float simplex3d(vec3 p) {\n\t\t\t vec3 s = floor(p + dot(p, vec3(F3)));\n\t\t\t vec3 x = p - s + dot(s, vec3(G3));\n\t\t\t \n\t\t\t vec3 e = step(vec3(0.0), x - x.yzx);\n\t\t\t vec3 i1 = e*(1.0 - e.zxy);\n\t\t\t vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n\t\t\t\t\n\t\t\t vec3 x1 = x - i1 + G3;\n\t\t\t vec3 x2 = x - i2 + 2.0*G3;\n\t\t\t vec3 x3 = x - 1.0 + 3.0*G3;\n\t\t\t \n\t\t\t vec4 w, d;\n\t\t\t \n\t\t\t w.x = dot(x, x);\n\t\t\t w.y = dot(x1, x1);\n\t\t\t w.z = dot(x2, x2);\n\t\t\t w.w = dot(x3, x3);\n\t\t\t \n\t\t\t w = max(0.6 - w, 0.0);\n\t\t\t \n\t\t\t d.x = dot(random3(s), x);\n\t\t\t d.y = dot(random3(s + i1), x1);\n\t\t\t d.z = dot(random3(s + i2), x2);\n\t\t\t d.w = dot(random3(s + 1.0), x3);\n\t\t\t \n\t\t\t w *= w;\n\t\t\t w *= w;\n\t\t\t d *= w;\n\t\t\t \n\t\t\t return dot(d, vec4(52.0));\n\t\t}",[e]);t.keywords.F3=new tE("float F3 0.3333333"),t.keywords.G3=new tE("float G3 0.1666667");let n=new JA("float simplex3dFractal(vec3 m) {\n\t\t\tmat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);\n\t\t\tmat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);\n\t\t\tmat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);\n\t\t\treturn 0.5333333 * simplex3d(m * rot1)\n\t\t\t\t + 0.2666667 * simplex3d(2.0 * m * rot2)\n\t\t\t\t + 0.1333333 * simplex3d(4.0 * m * rot3)\n\t\t\t\t + 0.0666667 * simplex3d(8.0 * m);\n\t\t}",[t]),r=new JA("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),i=new JA("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),o=new JA("float simplexAshima(vec3 v) {\n\t\t  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n\t\t  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\t\t  vec3 i  = floor(v + dot(v, C.yyy) );\n\t\t  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\t\t  vec3 g = step(x0.yzx, x0.xyz);\n\t\t  vec3 l = 1.0 - g;\n\t\t  vec3 i1 = min( g.xyz, l.zxy );\n\t\t  vec3 i2 = max( g.xyz, l.zxy );\n\t\t  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n\t\t  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n\t\t  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\t\t  i = mod(i, 289.0 ); \n\t\t  vec4 p = permute( permute( permute( \n\t\t\t\t\t i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n\t\t\t\t   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n\t\t\t\t   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\t\t  float n_ = 1.0/7.0; // N=7\n\t\t  vec3  ns = n_ * D.wyz - D.xzx;\n\t\t  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\t\t  vec4 x_ = floor(j * ns.z);\n\t\t  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\t\t  vec4 x = x_ *ns.x + ns.yyyy;\n\t\t  vec4 y = y_ *ns.x + ns.yyyy;\n\t\t  vec4 h = 1.0 - abs(x) - abs(y);\n\t\t  vec4 b0 = vec4( x.xy, y.xy );\n\t\t  vec4 b1 = vec4( x.zw, y.zw );\n\t\t  vec4 s0 = floor(b0)*2.0 + 1.0;\n\t\t  vec4 s1 = floor(b1)*2.0 + 1.0;\n\t\t  vec4 sh = -step(h, vec4(0.0));\n\t\t  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n\t\t  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\t\t  vec3 p0 = vec3(a0.xy,h.x);\n\t\t  vec3 p1 = vec3(a0.zw,h.y);\n\t\t  vec3 p2 = vec3(a1.xy,h.z);\n\t\t  vec3 p3 = vec3(a1.zw,h.w);\n\t\t  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n\t\t  p0 *= norm.x;\n\t\t  p1 *= norm.y;\n\t\t  p2 *= norm.z;\n\t\t  p3 *= norm.w;\n\t\t  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n\t\t  m = m * m;\n\t\t  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n\t\t\t\t\t\t\t\t\t\tdot(p2,x2), dot(p3,x3) ) );\n\t\t}",[r,i]),a=new JA("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),s=new JA("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[a]),l=new JA("float noise(vec3 p){\n\t\t\tvec3 a = floor(p);\n\t\t\tvec3 d = p - a;\n\t\t\td = d * d * (3.0 - 2.0 * d);\n\t\t\tvec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n\t\t\tvec4 k1 = perm(b.xyxy);\n\t\t\tvec4 k2 = perm(k1.xyxy + b.zzww);\n\t\t\tvec4 c = k2 + a.zzzz;\n\t\t\tvec4 k3 = perm(c);\n\t\t\tvec4 k4 = perm(c + 1.0);\n\t\t\tvec4 o1 = fract(k3 * (1.0 / 41.0));\n\t\t\tvec4 o2 = fract(k4 * (1.0 / 41.0));\n\t\t\tvec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n\t\t\tvec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\t\t\treturn o4.y * d.y + o4.x * (1.0 - d.y);\n\t\t}",[s]),c=new JA("float fbm(vec3 x) {\n\t\t\tfloat v = 0.0;\n\t\t\tfloat a = 0.5;\n\t\t\tvec3 shift = vec3(100);\n\t\t\tfor (int i = 0; i < NUM_OCTAVES; ++i) {\n\t\t\t\tv += a * noise(x);\n\t\t\t\tx = x * 2.0 + shift;\n\t\t\t\ta *= 0.5;\n\t\t\t}\n\t\t\treturn v;\n\t\t}",[l]);c.keywords.NUM_OCTAVES=new tE("int NUM_OCTAVES ".concat(5));let u=new JA("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}");return{simplex:t,simplexFractal:n,simplexAshima:o,fbm:c,perlin:new JA("float perlin(vec3 P){\n\t\t  vec3 Pi0 = floor(P);\n\t\t  vec3 Pi1 = Pi0 + vec3(1.0);\n\t\t  Pi0 = mod(Pi0, 289.0);\n\t\t  Pi1 = mod(Pi1, 289.0);\n\t\t  vec3 Pf0 = fract(P);\n\t\t  vec3 Pf1 = Pf0 - vec3(1.0);\n\t\t  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n\t\t  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n\t\t  vec4 iz0 = Pi0.zzzz;\n\t\t  vec4 iz1 = Pi1.zzzz;\n\t\t  vec4 ixy = permute(permute(ix) + iy);\n\t\t  vec4 ixy0 = permute(ixy + iz0);\n\t\t  vec4 ixy1 = permute(ixy + iz1);\n\t\t  vec4 gx0 = ixy0 / 7.0;\n\t\t  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n\t\t  gx0 = fract(gx0);\n\t\t  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n\t\t  vec4 sz0 = step(gz0, vec4(0.0));\n\t\t  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n\t\t  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\t\t  vec4 gx1 = ixy1 / 7.0;\n\t\t  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n\t\t  gx1 = fract(gx1);\n\t\t  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n\t\t  vec4 sz1 = step(gz1, vec4(0.0));\n\t\t  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n\t\t  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\t\t  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n\t\t  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n\t\t  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n\t\t  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n\t\t  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n\t\t  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n\t\t  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n\t\t  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\t\t  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n\t\t  g000 *= norm0.x;\n\t\t  g010 *= norm0.y;\n\t\t  g100 *= norm0.z;\n\t\t  g110 *= norm0.w;\n\t\t  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n\t\t  g001 *= norm1.x;\n\t\t  g011 *= norm1.y;\n\t\t  g101 *= norm1.z;\n\t\t  g111 *= norm1.w;\n\t\t  float n000 = dot(g000, Pf0);\n\t\t  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n\t\t  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n\t\t  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n\t\t  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n\t\t  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n\t\t  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n\t\t  float n111 = dot(g111, Pf1);\n\t\t  vec3 fade_xyz = fade(Pf0);\n\t\t  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n\t\t  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n\t\t  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n\t\t  return 2.2 * n_xyz;\n\t\t}",[r,i,u])}}(),FE=class extends HA{constructor(e,t,n,r,i,o,a,s,l,c,u,d){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=n,this.fA=r,this.fB=i,this.distortion=o,this.colorA=a,this.colorB=s,this.colorC=l,this.colorD=c,this.alpha=u,this.noiseType=d,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t,n,r,i){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let o=Object.values(jE)[this.noiseType.value],a=new JA("vec3 ".concat(o,"customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {\n                vec3 st = position / size;\n\t\t\t\tst /= scale;\n\t\t\t\tvec3 q = vec3(").concat(o,"(st),\n\t\t\t\t\t\t\t  ").concat(o,"(st + vec3(1.0)),\n\t\t\t\t\t\t\t  ").concat(o,"(st + vec3(1.0)));\n\t\t\t\tvec3 r = vec3(").concat(o,"(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),\n\t\t\t\t\t\t\t  ").concat(o,"(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), \n\t\t\t\t\t\t\t  ").concat(o,"(st * q));\n\t\t\t\tfloat f = ").concat(o,"(st + r);\n\t\t\t\tvec4 color;\n\t\t\t\tcolor = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));\n\t\t\t\tcolor = mix(color, colorC, clamp(length(q), 0.0, 1.0));\n\t\t\t\tcolor = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));\n\n                float lalpha = alpha * color.a;\n                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\n\t\t\t    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn clamp(color, 0.0, 1.0).rgb;\n\t\t\t}"),[BE.simplex,BE.simplexFractal,BE.simplexAshima,BE.fbm,BE.perlin]),s=e.include(a),l=[];return l.push(this.scale.build(e,"f")),l.push(this.size.build(e,"v3")),l.push(this.move.build(e,"f")),l.push(this.fA.build(e,"v2")),l.push(this.fB.build(e,"v2")),l.push(this.distortion.build(e,"v2")),l.push(this.colorA.build(e,"v4")),l.push(this.colorB.build(e,"v4")),l.push(this.colorC.build(e,"v4")),l.push(this.colorD.build(e,"v4")),l.push(this.alpha.build(e,"f")),l.push(this.calpha),e.format(s+"("+l.join(",")+")",this.getType(e),t)}};FE.numOctaves=5;var zE=class extends GA{constructor(){super("phong"),this.nodeType="Phong",this.color=new DE(5855577),this.specular=new DE(1118481),this.shininess=new uE(30),this.shadingAlpha=new uE(1),this.shadingBlend=new kE(0)}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(co.merge([Po.fog,Po.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let r=["#include <beginnormal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join("\n")}else{e.mergeUniform({penumbraSize:sC.penumbraSize}),void 0===this.color&&(this.color=new DE(5855577)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),i=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=void 0!==l,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[".concat(5,"];"),"#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));let c=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tBlinnPhongMaterial material;"];c.push(n.code,"\tvec3 diffuseColor = "+n.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","\tvec3 totalEmissiveRadiance = emissive;",r.code,"\tvec3 specular = "+r.result+";",i.code,"\tfloat shininess = max( 0.0001, "+i.result+" );","\tfloat specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;"),c.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(o.result," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(o.result,", ").concat(a.result," );\n\t\t\t\t}\n\t\t\t\t")),s&&c.push(s.code,"outgoingLight = spe_blend(outgoingLight, ".concat(s.result,", 1.0, SPE_BLENDING_NORMAL);")),l?c.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(l.result," );")):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join("\n")}return t}},UE=class extends HA{constructor(e,t,n,r,i,o,a){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=n,this.intensity=r,this.factor=i,this.alpha=o,this.mode=a,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let n=e.include(UE.Nodes.fresnel),r=[];return r.push(this.color.build(e,"c")),r.push(this.bias.build(e,"f")),r.push(this.scale.build(e,"f")),r.push(this.intensity.build(e,"f")),r.push(this.factor.build(e,"f")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},GE=UE;GE.Nodes={fresnel:new JA("vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {\n\t\t\t\tfloat fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );\n\n\t\t\t\tfloat lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;\n\t\t\t\tcalpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\t\t\t\treturn color;\n\t\t\t}")};var VE=class extends HA{constructor(e,t,n,r,i,o,a){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=n,this.noiseStrength=r,this.noiseScale=i,this.offset=o,this.alpha=a,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(VE.Nodes.rainbow),r=[];return r.push(this.filmThickness.build(e,"f")),r.push(this.movement.build(e,"f")),r.push(this.wavelengths.build(e,"v3")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.offset.build(e,"v3")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},HE=VE;HE.Nodes=function(){let e=new JA("vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {\n                 vec3 st = position / noiseScale;\n\t\t\t\t vec3 q = vec3(simplex3d(st),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)));\n\n\t\t\t\t vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st * q));\n\n                 float noise = simplex3d(st + r);\n\n                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);\n             }",[BE.simplex]);return{rainbow:new JA("vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {\n                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);\n\n                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);\n                 float lalpha = alpha * rainbowContribution;\n                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\n                 return res;\n             }",[e])}}();var WE=class extends HA{constructor(e,t,n,r,i,o,a,s,l,c,u,d,h,f,p,m){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=n,this.contourWidth=r,this.contourThreshold=i,this.outlineThreshold=o,this.contourFrequency=a,this.outlineSmoothing=s,this.contourDirection=l,this.positionalLines=c,this.compensation=u,this.resolution=d,this.normalMap=h,this.depthMap=f,this.pixelRatio=p,this.alpha=m,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.firstTime){let t=this.outlineWidth.build(e,"f"),n=this.resolution.build(e,"v2"),r=this.compensation.build(e,"b"),i=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(t,"uniform float"),e.addVertexParsVariable(n,"uniform vec2"),e.addVertexParsVariable(r,"uniform bool"),e.addVertexParsVariable(i,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float");let o="g".concat(this.uuid.toString().replace(/-/g,""));e.addVertexFinalCode("\n                vID = randomColor.r;\n                if (".concat(r,") {\n                    vec4 ").concat(o,"_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));\n                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the\n                    // normals face the camera directly. So we hackily fix this by offsetting the normal\n                    // by a tiny amount.\n                    vec3 ").concat(o,"_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;\n                    vec2 ").concat(o,"_offset = normalize(").concat(o,"_clipNormal.xy) / ").concat(n," * (").concat(t," / 2.0) * ").concat(o,"_clipPosition.w * 2.0 * ").concat(i,";\n                    ").concat(o,"_clipPosition.xy += ").concat(o,"_offset;\n                    // TODO(MAX): To handle multiple outline layers, we only want to extrude\n                    // if this offset is the biggest of all the potential offsets\n                    gl_Position = ").concat(o,"_clipPosition;\n                }\n            "))}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(WE.Nodes.outline),r=[];return r.push(this.outlineColor.build(e,"c")),r.push(this.contourColor.build(e,"c")),r.push(this.outlineWidth.build(e,"f")),r.push(this.contourWidth.build(e,"f")),r.push(this.contourThreshold.build(e,"f")),r.push(this.outlineThreshold.build(e,"f")),r.push(this.contourFrequency.build(e,"f")),r.push(this.outlineSmoothing.build(e,"f")),r.push(this.contourDirection.build(e,"v3")),r.push(this.positionalLines.build(e,"b")),r.push(this.resolution.build(e,"v2")),r.push(this.normalMap.getTexture(e,"t")),r.push(this.depthMap.getTexture(e,"t")),r.push(this.pixelRatio.build(e,"f")),r.push(this.compensation.build(e,"b")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),this.firstTime=!this.firstTime,e.format(n+"("+r.join(",")+")",this.getType(e),t)}return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},qE=WE;qE.Nodes=function(){let e=new JA("\nfloat sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)\n{\n    vec2 texelSize = (vec2(1.0) / resolution) * outlineWidth * pixelRatio;\n\n    vec2 uvSamples[9];\n    vec4 normalSamples[9];\n\n\tuvSamples[0] = uv + vec2( -texelSize.x, -texelSize.y);\n\tuvSamples[1] = uv + vec2(0.0, -texelSize.y);\n\tuvSamples[2] = uv + vec2(  texelSize.x, -texelSize.y);\n\tuvSamples[3] = uv + vec2( -texelSize.x, 0.0);\n\tuvSamples[4] = uv;\n\tuvSamples[5] = uv + vec2(  texelSize.x, 0.0);\n\tuvSamples[6] = uv + vec2( -texelSize.x, texelSize.y);\n\tuvSamples[7] = uv + vec2(0.0, texelSize.y);\n\tuvSamples[8] = uv + vec2(  texelSize.x, texelSize.y);\n\n\n    normalSamples[0] = texture2D(t, uvSamples[0]);\n    normalSamples[1] = texture2D(t, uvSamples[1]);\n    normalSamples[2] = texture2D(t, uvSamples[2]);\n    normalSamples[3] = texture2D(t, uvSamples[3]);\n    normalSamples[4] = texture2D(t, uvSamples[4]);\n    normalSamples[5] = texture2D(t, uvSamples[5]);\n    normalSamples[6] = texture2D(t, uvSamples[6]);\n    normalSamples[7] = texture2D(t, uvSamples[7]);\n    normalSamples[8] = texture2D(t, uvSamples[8]);\n\n    float depthBias = 0.0001;\n    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!\n    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n\n    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {\n        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;\n        if (gl_FragCoord.z > depthAtSample) {\n           return 0.0;\n        }\n    }\n\n    vec4 sobel_edge_h = normalSamples[2] + (2.0*normalSamples[5]) + normalSamples[8] - (normalSamples[0] + (2.0*normalSamples[3]) + normalSamples[6]);\n  \tvec4 sobel_edge_v = normalSamples[0] + (2.0*normalSamples[1]) + normalSamples[2] - (normalSamples[6] + (2.0*normalSamples[7]) + normalSamples[8]);\n\n    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));\n    return edgeNormal;\n}\n");return{outline:new JA("vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float alpha, out float calpha) {\n                vec3 result = outlineColor;\n                float resultAlpha = 0.0;\n\n                vec3 N = normalize(vWNormal);\n                vec2 nuv = (gl_FragCoord.xy / resolution);\n                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);\n                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);\n\n                float t = 1.0 - contourThreshold;\n                if(positionalLines) {\n                    vec3 NDir = position * contourDirection;\n                    float NT = NDir.x + NDir.y + NDir.z;\n                    float f  = fract(NT * contourFrequency * 0.01);\n                    float df = fwidth(NT * contourFrequency);\n\n                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);\n                    if (g < 1.0 && resultAlpha == 0.0) {\n                        result = contourColor;\n                        resultAlpha = 1.0;\n                    }\n                 }\n                 else {\n                    vec3 NDir = N * contourDirection;\n                    float NT = NDir.x + NDir.y + NDir.z;\n                    float df = fwidth(NT * contourThreshold);\n                    float f = sin(NT * 1.0 * contourFrequency);\n                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);\n\n                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {\n                        result = contourColor;\n                        resultAlpha = 1.0 - g;\n                    }\n                 }\n\n                 float lalpha = alpha * resultAlpha;\n                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n                 return result;\n             }",[e])}}();var YE=class extends HA{constructor(e,t,n,r,i,o,a,s){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=n,this.transmissionSamplerSize=r,this.transmissionSamplerMap=i,this.transmissionDepthMap=o,this.aspectRatio=a,this.alpha=s,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",30),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let n=e.include(YE.Nodes.transmission),r=[];return r.push(this.thickness.build(e,"f")),r.push(this.ior.build(e,"f")),r.push(this.roughness.build(e,"f")),r.push(this.transmissionSamplerSize.build(e,"v2")),r.push(this.transmissionSamplerMap.getTexture(e,"t")),r.push(this.transmissionDepthMap.getTexture(e,"t")),r.push(this.aspectRatio.build(e,"v2")),r.push("normal"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},XE=YE;XE.Nodes=function(){let e=new JA("\n            float gaussian(vec2 i) {\n                const float sigma = float(NUM_SAMPLES) * .25;\n                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );\n            }"),t=new JA("\n            vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {\n                // Slightly modified version of this:\n                // https://www.shadertoy.com/view/ltScRG\n\n                const int LOD = 2;\n                const int sLOD = 4; // tile size = 2^LOD\n\n                vec3 O = vec3(0);\n                float a = 0.0;\n                const int s = NUM_SAMPLES/sLOD;\n                for ( int i = 0; i < s*s; i++ ) {\n                    int modulo = (i)-((i)/(s))*(s);\n                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;\n                    vec2 uv = U + (scale * aspectRatio) * d;\n                    // What is the depth of the opaque object we're trying to sample\n                    float opaqueDepth = unpackRGBAToDepth(texture2D(dm, uv));\n                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {\n                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;\n                        lod = lod > 4.0 ? lod : lod / 2.0;\n                    }\n                    float gaussian = gaussian(d);\n\t\t            #ifdef TEXTURE_LOD_EXT\n                    O += gaussian * texture2DLodEXT( sp, uv, lod).rgb;\n                    #else\n                    O += gaussian * textureLod( sp, uv, lod).rgb;\n                    #endif\n                    a += gaussian;\n                }\n                return O / a;\n            }",[e]),n=new JA("\n            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\t        // Direction of refracted light.\n\t\t        vec3 refractionVector = refract( -v,  n, 1.0 / ior );\n\t\t        // Compute rotation-independant scaling of the model matrix.\n\t\t        vec3 modelScale;\n\t\t        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\t        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\t        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\t        // The thickness is specified in local space.\n\t\t        return normalize( refractionVector ) * thickness * modelScale;\n\t        }"),r=new JA("\nfloat applyIorToRoughness( float roughness, float ior ) {\n\t\t// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n\t\t// an IOR of 1.5 results in the default amount of microfacet refraction.\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t} "),i=new JA("\nvec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n        float lod = applyIorToRoughness(roughness, ior);\n\n        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);\n\t}",[r,t]),o=new JA("\nvec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {\n        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n        vec3 refractedRayExit = position + transmissionRay;\n\n        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );\n        vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n        refractionCoords += 1.0;\n        refractionCoords /= 2.0;\n\n        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );\n        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;\n        unrefractedCoords += 1.0;\n        unrefractedCoords /= 2.0;\n\n        // Sample framebuffer to get pixel the refracted ray hits.\n        return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );\n    }",[i,n]);return{transmission:new JA("\n            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {\n                vec3 v = vec3(0.);\n                if (isOrthographic) {\n                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n                } else {\n                    v = normalize(vWPosition - cameraPosition);\n                }\n                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );\n                float lalpha = alpha;\n\n                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n                 return transmission;\n            }",[o])}}();var QE=class extends HA{constructor(e,t,n,r,i,o,a,s,l,c,u){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=n,this.far=r,this.isVector=i,this.isWorldSpace=o,this.origin=a,this.direction=s,this.colors=l,this.steps=c,this.alpha=u,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){let n="g".concat(this.uuid.toString().replace(/-/g,"")),r=new JA("vec3 ".concat(n,"_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[").concat(n,"_MAX_COLORS], float steps[").concat(n,"_MAX_COLORS], float alpha, out float calpha) {\n               vec4 color = colors[0];\n               #ifdef ").concat(n,"_IS_VECTOR\n                   #ifdef ").concat(n,"_LINEAR\n                       #ifdef ").concat(n,"_WORLDSPACE\n                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);\n                       #else\n                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);\n                       #endif\n                   #else\n                       #ifdef ").concat(n,"_WORLDSPACE\n                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);\n                       #else\n                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);\n                       #endif\n                   #endif\n               #else\n                   float dist = length(vWPosition - cameraPosition);\n\t\t\t       float depth = ( dist - near ) / ( far - near );\n               #endif\n\n\n              float p;\n              #ifdef ").concat(n,"_SMOOTH\n\t\t\t\tfor ( int i = 1; i < ").concat(n,"_MAX_COLORS; i++ ) {\n\t\t\t\t\t\tp = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n              #else\n                for ( int i = 1; i < ").concat(n,"_MAX_COLORS; i++ ) {\n                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);\n                   color = mix(color, colors[i], p);\n                 }\n              #endif\n\n               float lalpha = alpha * color.a;\n               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\n\t\t\t   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n               return color.rgb;\n\t\t\t}"),[QE.Nodes.vectorLinearWorldSpaceDepth,QE.Nodes.vectorLinearObjectSpaceDepth,QE.Nodes.vectorSphericalObjectSpaceDepth,QE.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define("".concat(n,"_MAX_COLORS"),this.colors.value.length),this.smooth.value&&e.define("".concat(n,"_SMOOTH")),this.isVector.value>.5&&e.define("".concat(n,"_IS_VECTOR")),0===this.gradientType.value&&e.define("".concat(n,"_LINEAR")),this.isWorldSpace.value>.5&&e.define("".concat(n,"_WORLDSPACE")),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let i=e.include(r),o=[];return o.push(this.near.build(e,"f")),o.push(this.far.build(e,"f")),o.push(this.origin.build(e,"v3")),o.push(this.direction.build(e,"v3")),o.push(this.colors.build(e,"v4[]")),o.push(this.steps.build(e,"f[]")),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(i+"("+o.join(",")+")",this.getType(e),t)}return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},KE=QE;KE.Nodes={vectorLinearWorldSpaceDepth:new JA("float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorLinearObjectSpaceDepth:new JA("float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalWorldSpaceDepth:new JA("float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(vWPosition - origin);\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalObjectSpaceDepth:new JA("float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(position - origin);\n               return ( dist - near ) / ( far - near );\n            }")};var ZE=class extends HA{constructor(e,t,n,r){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=n,this.mode=r}generate(e,t){if(e.isShader("fragment")){let n=[];return n.push(this.a.build(e,"c")),n.push(this.b.build(e,"c")),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),e.format("spe_blend("+n.join(",")+")",this.getType(e),t)}return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},JE=(e=>(e.NOISE="noise",e.MAP="map",e))(JE||{}),$E=class extends HA{constructor(e,t,n,r,i){super("v3"),this.displacementTypeIndex=new kE(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,"map"===Object.values(JE)[this.displacementTypeIndex.value]&&(this.mat=new IE(this.movementOrTexture.value.matrix)),this.cropOrOffset=n,this.scale=r,this.noiseFunctionIndex=i}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let n,r=[];switch(r.push("displaced_position"),r.push("displaced_normal"),Object.values(JE)[this.displacementTypeIndex.value]){case"map":n=e.include($E.Nodes.map),r.push(this.movementOrTexture.getTexture(e,"t")),r.push("uv"),r.push(this.cropOrOffset.build(e,"f")),this.mat&&r.push(this.mat.build(e,"mat3"));break;case"noise":{let t=Object.values(jE)[this.noiseFunctionIndex.value],i=new JA("vec3 orthogonal(vec3 v) {\n\t\t\t\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t\t\t\t}"),o=new JA("vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {\n\t\t\t\t\t\t\treturn p + n * ".concat(t,"((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;\n\t\t\t\t\t\t}"),[BE.simplex,BE.simplexFractal,BE.simplexAshima,BE.fbm,BE.perlin]),a=new JA("vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {\n\t\t\t\t\t\t\tvec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);\n\t\t\t\t\t\t\tvec3 tangent1 = orthogonal(normal);\n\t\t\t\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\n                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.\n                            // This caused some small oval/circular visual artifacts in the lighting.\n                            // For now, simply using neighbors further away betters the problem,\n                            // but we should figure out the underlying cause when we have some time.\n                            // Maybe its related to how we calculate the tangent and bitangent?\n\t\t\t\t\t\t\tvec3 nearby1 = position + tangent1;\n\t\t\t\t\t\t\tvec3 nearby2 = position + tangent2;\n\t\t\t\t\t\t\tvec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);\n\t\t\t\t\t\t\tvec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);\n\t\t\t\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\t\t\t\treturn displaced_position;\n\t\t\t\t\t\t}",[o,i]);n=e.include(a),r.push(this.scale.build(e,"f")),r.push(this.cropOrOffset.build(e,"v3")),r.push(this.movementOrTexture.build(e,"f"));break}}return r.push(this.intensity.build(e,"f")),r.push("displaced_normal"),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},eC=$E;eC.Nodes=function(){let e=new JA("vec3 orthogonal(vec3 v) {\n\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t}"),t=new JA("float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {\n\t\t\t\tvec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;\n\t\t\t\tvec4 tmp = texture2D(tex, uvs);\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tif (crop > 0.5) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\treturn 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn col.r;\n\t\t\t}");return{map:new JA("vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {\n\t\t\t\tvec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;\n\t\t\t\tvec3 tangent1 = normalize(orthogonal(normal));\n\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\t\t\t\tvec3 nearby1 = position + tangent1 * 0.1;\n\t\t\t\tvec3 nearby2 = position + tangent2 * 0.1;\n\t\t\t\tvec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tvec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\treturn displaced_position;\n\t\t\t}",[e,t])}}();var tC=class extends HA{constructor(e,t,n,r,i,o,a,s){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=n,this.steps=r,this.offset=i,this.morph=o,this.angle=a,this.alpha=s,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=e.include(tC.Nodes.gradient),r=[];return r.push(this.gradientType.build(e,"i")),r.push(this.smooth.build(e,"b")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.offset.build(e,"v2")),r.push(this.morph.build(e,"v2")),r.push(this.angle.build(e,"f")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},nC=tC;nC.Nodes={gradient:new JA("vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tvec2 m = morph / vUv.xy;\n\t\t\t\tvec2 rot = vec2( 0.5 + m.x, m.y );\n\t\t\t\tvec2 dt = vec2(\n\t\t\t\t\tcos( angle ) * rot.x - sin( angle ) * rot.y,\n\t\t\t\t\tsin( angle ) * rot.x + cos( angle ) * rot.y\n\t\t\t\t);\n\t\t\t\tvec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;\n\t\t\t\tfloat t = dot( pt, dt ) / dot( dt, dt );\n\t\t\t\tif ( gradientType == 1 ) {\n\t\t\t\t\tt = distance (\n\t\t\t\t\t\t( vUv + morph ) * 3.0,\n\t\t\t\t\t\t( vUv + offset ) + 1.0\n\t\t\t\t\t) + angle;\n\t\t\t\t} else if ( gradientType == 2 ) {\n\t\t\t\t\tfloat polar = atan(\n\t\t\t\t\t\tvUv.x + morph.x - 0.5 + offset.x,\n\t\t\t\t\t\tvUv.y + morph.y - 0.5 + offset.y\n\t\t\t\t\t) * -1.0;\n\t\t\t\t\tt = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );\n\t\t\t\t}\n\n\t\t\t\tfloat p;\n\t\t\t\tif (smoothed) {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], p);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfloat lalpha = alpha * color.a;\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\n\t\t\t\treturn color.xyz;\n\t\t\t}")};var rC=class extends HA{constructor(e,t,n,r,i,o,a,s,l,c){super("v3"),this.nodeType="CustomTexture",this.firstTime=!0,this.texture=e,this.textureSize=t,this.crop=n,this.projection=r,this.axis=i,this.side=o,this.size=a,this.mat=s,this.alpha=l,this.mode=c,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let n,r="g".concat(this.uuid.toString().replace(/-/g,""));switch(this.projection.value){case 3:n=e.include(rC.Nodes.cylindrical);break;case 2:n=e.include(rC.Nodes.spherical);break;case 1:let t=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],i=new JA("\n\t\tvec3 ".concat(r,"_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {\n\n\t\t\t\tvec2 uvs = ( mat * vec3( (").concat(r,"_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;\n\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\t").concat(2===this.side.value?"":"lalpha *= step(0.0, ".concat(1===this.side.value?"-1.0 * ":"","dot(vObjectNormal, mat * ").concat(t,"));"),"\n\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn col;\n\t\t\t}"));n=e.include(i);break;default:n=e.include(rC.Nodes.uv)}if(1===this.projection.value&&this.firstTime){e.addVertexParsCode("varying vec2 ".concat(r,"_vCustomUv;")),e.addFragmentParsCode("varying vec2 ".concat(r,"_vCustomUv;"));let t=["zy","xz","xy"][this.axis.value];e.addVertexFinalCode("".concat(r,"_vCustomUv = (1. + (transformed.").concat(t,")) / 2.;"))}e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.texture.generate(e,"t")),i.push(this.textureSize.build(e,"v2")),i.push(this.crop.build(e,"f")),i.push(this.mat.build(e,"mat3")),i.push(this.size.build(e,"v2")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),this.firstTime=!this.firstTime,e.format(n+"("+i.join(",")+")",this.getType(e),t)}},iC=rC;iC.Nodes={cylindrical:new JA("\nvec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {\n                vec3 posN = normalize(position);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float scaledHeight = position.y / (size.y * 0.5);\n                float v =  (scaledHeight / 2.) + .5;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn col;\n\t\t\t}\n"),spherical:new JA("\nvec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {\n                vec3 posN = normalize(vPosition);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float v = 0.5 + asin(posN.y) / 3.1415;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn col;\n\t\t\t}\n"),uv:new JA("vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {\n\n\t\t\t\tvec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn col;\n\t\t\t}")};var oC=class extends HA{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t}generate(e,t){if(e.isShader("fragment")){let n=e.include(oC.Nodes.customNormal),r=[];return r.push(this.cnormal.build(e,"v3")),r.push("normal"),r.push(this.alpha.build(e,"f")),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},aC=oC;aC.Nodes={customNormal:new JA("vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {\n\t\t\t\tvec3 normal = packNormalToRGB( norm ).rgb;\n\t\t\t\tnormal *= step( vec3(0.5), cnormal );\n\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * alpha;\n\n\t\t\t\treturn normal;\n\t\t\t}")};var sC={normalRenderTarget:new cE,normalRenderTargetDepth:new cE,transmissionRenderTarget:new cE,transmissionSize:new qA(2048,2048),transmissionRenderTargetDepth:new cE,pixelRatioNode:new uE(1),resolution:new qA,penumbraSize:new LE(5,.5)};for(let n of Object.values(sC))n.isRenderGlobal=!0;var lC=class extends GA{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new DE(5855577),this.emissive=new DE(0),this.emissiveIntensity=new uE(1),this.shadingAlpha=new uE(1),this.shadingBlend=new kE(0)}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(co.merge([Po.fog,Po.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let r=["#include <beginnormal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\n\t\t\t\t\tvec3 diffuse = vec3( 1.0 );\n\t\t\t\t\tGeometricContext geometry;\n\t\t\t\t\tgeometry.position = mvPosition.xyz;\n\t\t\t\t\tgeometry.normal = normalize( transformedNormal );\n\t\t\t\t\tgeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\t\t\t\t\tGeometricContext backGeometry;\n\t\t\t\t\tbackGeometry.position = geometry.position;\n\t\t\t\t\tbackGeometry.normal = -geometry.normal;\n\t\t\t\t\tbackGeometry.viewDir = geometry.viewDir;\n\t\t\t\t\tvLightFront = vec3( 0.0 );\n\t\t\t\t\tvIndirectFront = vec3( 0.0 );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvLightBack = vec3( 0.0 );\n\t\t\t\t\t\tvIndirectBack = vec3( 0.0 );\n\t\t\t\t\t#endif\n\t\t\t\t\tIncidentLight directLight;\n\t\t\t\t\tfloat dotNL;\n\t\t\t\t\tvec3 directLightColor_Diffuse;\n\t\t\t\t\tvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\tvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\t\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_POINT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_DIR_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_HEMI_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join("\n")}else{e.mergeUniform({penumbraSize:sC.penumbraSize}),void 0===this.color&&(this.color=new DE(5855577)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),r=this.emissive.flow(e,"c",{slot:"emissive"}),i=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=void 0!==l,e.addParsCode(["uniform float penumbraSize[".concat(5,"];"),"varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));let c=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx, viewdy));\n\t\t\t\tbool isFrontFacing = (dot(normal, faceNormal) >= 0.0);\n\t\t\t\t","#include <clipping_planes_fragment>"];c.push(n.code,"vec3 diffuseColor = "+n.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("#ifdef DOUBLE_SIDED","\treflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","\treflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","\treflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","\treflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),r&&c.push(r.code,"reflectedLight.directDiffuse += "+r.result+" * "+i.result+";"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),c.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(o.result," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(o.result,", ").concat(a.result," );\n\t\t\t\t}\n\t\t\t\t")),s&&c.push(s.code,"outgoingLight = spe_blend(outgoingLight, ".concat(s.result,", 1.0, SPE_BLENDING_NORMAL);")),l?c.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(l.result," );")):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join("\n")}return t}},cC=class extends GA{constructor(){super("standard"),this.nodeType="Standard",this.color=new DE(5855577),this.roughness=new uE(.3),this.metalness=new uE(0),this.reflectivity=new uE(.5),this.shadingAlpha=new uE(1),this.shadingBlend=new kE(0)}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(co.merge([Po.fog,Po.lights])),Po.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let r=["#include <beginnormal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join("\n")}else{e.mergeUniform({penumbraSize:sC.penumbraSize});let n={gamma:!0};void 0===this.color&&(this.color=new DE(5855577)),this.color.analyze(e,{slot:"color",context:n}),this.roughness.analyze(e),this.metalness.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let r=this.color.flow(e,"c",{slot:"color",context:n}),i=this.roughness.flow(e,"f"),o=this.metalness.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=void 0!==c,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[".concat(5,"];"),"#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join("\n"));let d=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );"];d.push(r.code,"\tvec3 diffuseColor = "+r.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"\tfloat roughnessFactor = "+i.result+";",o.code,"\tfloat metalnessFactor = "+o.result+";"),c&&d.push(c.code,"#ifdef ALPHATEST","\tif ( "+c.result+" <= ALPHATEST ) discard;","#endif"),d.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),d.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),u?d.push(u.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+u.result+" ) ), diffuseColor, metalnessFactor );"):d.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),d.push("#include <lights_fragment_begin>"),d.push("#include <lights_fragment_end>"),d.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),d.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(a.result," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(a.result,", ").concat(s.result," );\n\t\t\t\t}\n\t\t\t\t")),l&&d.push(l.code,"outgoingLight = spe_blend(outgoingLight, ".concat(l.result,", 1.0, SPE_BLENDING_NORMAL);")),c?d.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(c.result," );")):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join("\n")}return t}},uC=class extends GA{constructor(){super("toon"),this.nodeType="Toon",this.color=new DE(5855577),this.specular=new DE(1118481),this.shininess=new uE(30),this.shadingAlpha=new uE(1),this.shadingBlend=new kE(0)}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(co.merge([Po.fog,Po.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let r=["#include <beginnormal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];n&&r.push(n.code,n.result?"displaced_position = "+n.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join("\n")}else{e.mergeUniform({penumbraSize:sC.penumbraSize}),void 0===this.color&&(this.color=new DE(5855577)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let n=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),i=this.shininess.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=void 0!==l,e.addParsCode(["uniform float penumbraSize[".concat(5,"];"),"varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>","\n\t\t\t\t\tvarying vec3 vViewPosition;\n\t\t\t\t\tstruct ToonMaterial {\n\t\t\t\t\t\tvec3\tdiffuseColor;\n\t\t\t\t\t\tvec3\tspecularColor;\n\t\t\t\t\t\tfloat\tspecularShininess;\n\t\t\t\t\t\tfloat\tspecularStrength;\n\t\t\t\t\t};\n\t\t\t\t\tvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t\t\t\n\t\t\t\t\t\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n\t\t\t\t\t}\n\t\t\t\t\tvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\t\t\t\t\t#define RE_Direct\t\t\t\tRE_Direct_Toon\n\t\t\t\t\t#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\t\t\t\t\t#define Material_LightProbeLOD( material )\t(0)\n\t\t\t\t\t","#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join("\n"));let c=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tToonMaterial material;"];c.push(n.code,"\tvec3 diffuseColor = "+n.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"\tvec3 specular = "+r.result+";",i.code,"\tfloat shininess = max( 0.0001, "+i.result+" );","\tfloat specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),c.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(o.result," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(o.result,", ").concat(a.result," );\n\t\t\t\t}\n\t\t\t\t")),s&&c.push(s.code,"outgoingLight = spe_blend(outgoingLight, ".concat(s.result,", 1.0, SPE_BLENDING_NORMAL);")),l?c.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(l.result," );")):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join("\n")}return t}};function dC(e,t){switch(e.type){case"fresnel":return function(e,t){let{bias:n,scale:r,intensity:i,factor:o,color:a}=e;return{...fC(e),color:bA(a,t),bias:n,scale:r,intensity:i,factor:o}}(e,t);case"gradient":return function(e){let{gradientType:t,smooth:n,colors:r,steps:i,angle:o,offset:a,morph:s}=e;return{...fC(e),gradientType:t,smooth:n,colors:r.map((e=>new ar(e[0],e[1],e[2],e[3]))),num:r.length,steps:i,offset:new jn(...a),morph:new jn(...s),angle:o}}(e);case"depth":return function(e){let{gradientType:t,near:n,far:r,isVector:i,isWorldSpace:o,origin:a,direction:s,colors:l,steps:c,smooth:u}=e;return{...fC(e),gradientType:t,near:n,far:r,isVector:i,isWorldSpace:o,origin:new ur(...a),direction:s?new ur(...s):new ur(1,0,0),colors:l.map((e=>void 0!==e?new ar(e[0],e[1],e[2],e[3]):new ar(0,0,0,0))),steps:c.slice(0,l.length),smooth:u}}(e);case"normal":return function(e){let{cnormal:t}=e;return{...fC(e),cnormal:new ur(t[0],t[1],t[2])}}(e);case"noise":return function(e,t){return{...fC(e),scale:e.scale,move:e.move,fA:new jn(...e.fA),fB:new jn(...e.fB),size:new ur(...e.size),distortion:new jn(...e.distortion),colorA:bA(e.colorA,t),colorB:bA(e.colorB,t),colorC:bA(e.colorC,t),colorD:bA(e.colorD,t),noiseType:e.noiseType}}(e,t);case"rainbow":return function(e){return{...fC(e),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new ur(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new ur(...e.offset)}}(e);case"toon":return function(e,t){return{...fC(e),positioning:e.positioning,colors:e.colors.map((e=>new ar(e[0],e[1],e[2],e[3]))),num:e.colors.length,steps:e.steps,source:new ur(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:bA(e.shadowColor,t),offset:new ur(...e.offset)}}(e,t);case"outline":return function(e,t){return{...fC(e),outlineColor:bA(e.outlineColor,t),contourColor:bA(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:e.contourDirection,positionalLines:e.positionalLines,compensation:e.compensation}}(e,t);case"transmission":return function(e,t){return{...fC(e),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}(e);case"color":return function(e,t){return{...fC(e),color:bA(e.color,t)}}(e,t)}}function hC(e){return{type:e.type}}function fC(e){let{alpha:t,mode:n}=e;return{...hC(e),alpha:t,mode:n}}var pC=class extends XA{},mC=new Map,gC={url:"head",time:0,data:null,next:null,prev:null},vC={url:"tail",time:1/0,data:null,next:null,prev:null};gC.next=vC,vC.prev=gC;var yC=0;var xC=class{constructor(e,t){this.data=e,this.onImageLoad=t,this.loaded=!1,this.updateSrc(e.data)}updateSrc(e){typeof document>"u"||(this.dispose(),this.loaded=!1,this.img=new Image,this.img.src=function(e){if("string"==typeof e)return e;let t=Date.now(),n=mC.get(e);return void 0===n?(n={url:URL.createObjectURL(new Blob([e])),data:e,time:t,next:null,prev:null},mC.set(e,n)):(n.time=t,n.prev.next=n.next,n.next.prev=n.prev),n.prev=vC.prev,n.next=vC,vC.prev.next=n,vC.prev=n,t-yC>1e4&&(yC=t+1e3,setTimeout((()=>{let e=Date.now(),t=gC.next;for(;t.time<e-1e4;)URL.revokeObjectURL(t.url),mC.delete(t.data),t=t.next,t.prev=gC,gC.next=t}),900)),n.url}(e),this.img.onload=()=>{this.loaded=!0;let e=[1e3,1001,1002];for(let t of e){let e=this[t];e&&(e.image=this.img,e.needsUpdate=!0)}this.onImageLoad&&this.onImageLoad()})}getTexture(e){let t=this[e];if(t)return t;{let t=new or(this.img,void 0,e,e);return this.loaded&&(t.needsUpdate=!0),this[e]=t,t}}dispose(){var e,t,n;null!==(e=this[1e3])&&void 0!==e&&e.dispose(),this[1e3]=void 0,null!==(t=this[1001])&&void 0!==t&&t.dispose(),this[1001]=void 0,null!==(n=this[1002])&&void 0!==n&&n.dispose(),this[1002]=void 0}},bC=class extends xC{},wC=class extends WA{},SC={noise:["noiseType"],texture:["projection","axis","side"],displace:["noiseType"],depth:["smooth","isWorldSpace","gradientType","isVector"]},_C={depth:["colors"]};function AC(e,t,n){let r=SC[e.type],i=_C[e.type];if(void 0!==i){let r=e.color;if(i.includes(t)){var o,a;let e=null===(o=r[t])||void 0===o||null===(a=o.value)||void 0===a?void 0:a.length;if(void 0!==e&&e!==n.length)return!0}}return void 0!==r&&r.includes(t)}function EC(e,t,n){let r=n.uniforms["f".concat(n.id,"_texture")];if(!r)return!1;let i=e;if("image"in i){let e=i.image,n=t.image(e),o=r;o instanceof bC||o.image.dispose(),o.image=n}if("wrapping"in i){r.wrap=i.wrapping}if("repeat"in i||"offset"in i){let e="mat",t=n.uniforms["f".concat(n.id,"_").concat(e)];"repeat"in i&&(t.repeat=i.repeat),"offset"in i&&(t.offset=i.offset),t.updateMatrix()}return!1}var CC=class extends HA{constructor(e,t,n){super("v3"),this.nodeType="Matcap",this.texture=e,this.alpha=t,this.mode=n,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let n=e.include(CC.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let r=[];return r.push(this.texture.generate(e,"t")),r.push("normal"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},MC=CC;MC.Nodes={matcap:new JA("vec3 matcap(sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {\n                vec3 viewDir = normalize( vViewPosition );\n                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n                vec3 y = cross( viewDir, x );\n                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n                vec4 matcapColor = texture2D( matcapTex, uv );\n\n                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * alpha;\n                \n                return matcapColor.rgb;\n            }\n            ")};var TC=class extends wC{constructor(e,t){super("t"),this.image=e,this.wrap=t}get value(){return this.image.getTexture(this.wrap)}},PC=class extends wC{constructor(e){super("v3"),this.image=e,this._value=new ur}get value(){return this._value.x=this.image.img.width,this._value.y=this.image.img.height,this._value}},DC=class extends HA{constructor(e,t,n,r,i,o,a,s,l,c){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=n,this.source=r,this.isWorldSpace=i,this.noiseStrength=o,this.noiseScale=a,this.shadowColor=s,this.offset=l,this.alpha=c,this.calpha="g".concat(this.uuid.toString().replace(/-/g,""),"_calpha")}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let n=e.include(DC.Nodes.toon),r=[];return r.push(this.positioning.build(e,"i")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.source.build(e,"v3")),r.push(this.isWorldSpace.build(e,"b")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.shadowColor.build(e,"v4")),r.push(this.offset.build(e,"v3")),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(n+"("+r.join(",")+")",this.getType(e),t)}return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},kC=DC;function OC(e,t,n){e.setUvTransform(n[0],n[1],t[0],t[1],0,0,0)}kC.Nodes=function(){let e=new JA("float rand(float n) {\n\t\t\t\treturn fract(sin(n) * 43758.5453123);\n\t\t\t}"),t=new JA("float hash1(float p) { \n\t\t\t\tp = fract(p * 0.011); \n\t\t\t\tp *= p + 7.5; \n\t\t\t\tp *= p + p; \n\t\t\t\treturn fract(p); \n\t\t\t}"),n=new JA("float valueNoise(vec3 x) {\n\t\t\t\tconst vec3 step = vec3(110, 241, 171);\n\t\t\t\n\t\t\t\tvec3 i = floor(x);\n\t\t\t\tvec3 f = fract(x);\n\t\t\t \n\t\t\t\t// For performance, compute the base input to a 1D hash from the integer part of the argument and the \n\t\t\t\t// incremental change to the 1D based on the 3D -> 1D wrapping\n\t\t\t\tfloat n = dot(i, step);\n\t\t\t\n\t\t\t\tvec3 u = f * f * (3.0 - 2.0 * f);\n\t\t\t\treturn mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),\n\t\t\t\t\t\t\t   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\n\t\t\t\t\t\t   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),\n\t\t\t\t\t\t\t   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\n\t\t\t}",[t]),r=new JA("vec3 hash3(vec3 x) {\n\t\t\t\tx = vec3(dot(x,vec3(127.1, 311.7, 74.7)),\n\t\t\t\t\t\t dot(x,vec3(269.5, 183.3, 246.1)),\n\t\t\t\t\t\t dot(x,vec3(113.5, 271.9, 124.6)));\n\t\t\t\n\t\t\t\treturn fract(sin(x)*43758.5453123);\n\t\t\t}"),i=new JA('vec3 voronoiNoise(in vec3 x)\n\t\t\t{\n\t\t\t\tvec3 p = floor(x);\n\t\t\t\tvec3 f = fract(x);\n\n\t\t\t\tfloat id = 0.0;\n\t\t\t\tvec2 res = vec2(100.0);\n\n\t\t\t\tfor(int k=-1; k<=1; k++)\n\t\t\t\tfor(int j=-1; j<=1; j++)\n\t\t\t\tfor(int i=-1; i<=1; i++)\n\t\t\t\t{\n\t\t\t\t\tvec3 b = vec3(float(i), float(j), float(k));\n\n\t\t\t\t\t// Comment out the "+ hash(p + b);" part below to get "square" cells\n\t\t\t\t\tvec3 r = vec3(b) - f + hash3(p + b);\n\t\t\t\t\tfloat d = dot(r, r);\n\n\t\t\t\t\tif (d < res.x)\n\t\t\t\t\t{\n\t\t\t\t\t\tid = dot(p + b, vec3(1.0, 57.0, 113.0));\n\t\t\t\t\t\tres = vec2(d, res.x);\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\telse if (d < res.y)\n\t\t\t\t\t{\n\t\t\t\t\t\tres.y = d;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn vec3(sqrt(res), abs(id));\n\t\t\t}\n\t\t\t',[r]);return{toon:new JA('vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float alpha, out float calpha) {\n\t\t\t\tfloat t = 0.0;\n\t\t\t\tfloat shadow = 1.0;\n\n\t\t\t\tif (positioning == 0) {\n\n\t\t\t\t\t// Can\'t do this mode if lighting is "none"\n\t\t\t\t\t#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))\n\n\t\t\t\t\t\t// Algorithm from Chapter 10 of Graphics Shaders\n\t\t\t\t\t\tconst vec3 weights = vec3(0.2125, 0.7154, 0.0721);\n\t\t\t\t\t\tvec3 lpos;\n\t\t\t\t\t\tvec3 l;\n\t\t\t\t\t\tfloat dproduct;\n\n\t\t\t\t\t\t#if (NUM_POINT_LIGHTS > 0)\n\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tPointLightShadow pointLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_POINT_LIGHTS; i++) {\n\t\t\t\t\t\t\t\t// Light positions are in view-space for some reason?\n\t\t\t\t\t\t\t\tlpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;\n\t\t\t\t\t\t\t\tl = normalize(lpos - worldPosition);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// TODO: we want to use "intensity" but it isn\'t available in the shader code\n\t\t\t\t\t\t\t\t//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);\n\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tpointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getPointShadow( \n\t\t\t\t\t\t\t\t\t\t\tpointShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowRadius,\n\t\t\t\t\t\t\t\t\t\t\tvPointShadowCoord[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowCameraNear, \n\t\t\t\t\t\t\t\t\t\t\tpointLightShadow.shadowCameraFar);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#if NUM_DIR_LIGHTS > 0 \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tDirectionalLightShadow directionalLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_DIR_LIGHTS; i++) {\n\t\t\t\t\t\t\t\t// Use the direction vector for directional lights instead\n\t\t\t\t\t\t\t\tl = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;\n\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tdirectionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getShadow( \n\t\t\t\t\t\t\t\t\t\tUNROLLED_LOOP_INDEX,\n\t\t\t\t\t\t\t\t\t\tdirectionalShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\tdirectionalLightShadow.shadowRadius, \n\t\t\t\t\t\t\t\t\t\tvDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0 \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)\n\t\t\t\t\t\t\t\tSpotLightShadow spotLightShadow;\n\t\t\t\t\t\t\t#endif \n\n\t\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\t\tfor (int i = 0; i < NUM_SPOT_LIGHTS; i++) {\n\t\t\t\t\t\t\t\tlpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;\n\t\t\t\t\t\t\t\tl = normalize(lpos - worldPosition);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tdproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;\n\t\t\t\t\t\t\t\tt = max(t, dproduct);\n\n\t\t\t\t\t\t\t\t// Accumulate shadow contribution\n\t\t\t\t\t\t\t\t#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)\n\t\t\t\t\t\t\t\t\tspotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];\n\t\t\t\t\t\t\t\t\tshadow *= getShadow(\n\t\t\t\t\t\t\t\t\t\tUNROLLED_LOOP_INDEX,\n\t\t\t\t\t\t\t\t\t\tspotShadowMap[UNROLLED_LOOP_INDEX], \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowMapSize, \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowBias, \n\t\t\t\t\t\t\t\t\t\tspotLightShadow.shadowRadius, \n\t\t\t\t\t\t\t\t\t\tvSpotShadowCoord[UNROLLED_LOOP_INDEX]);\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t#pragma unroll_loop_end\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\tt = clamp(t, 0.0, 1.0);\n\t\t\t\t\n\t\t\t\t\t#endif\n\n\t\t\t\t} else if (positioning == 1) {\n\t\t\t\t\t\n\t\t\t\t\tvec3 origin = mix(position, worldPosition, float(isWorldSpace));\n\t\t\t\t\tvec3 direction = normalize(source - origin);\n\t\t\t\t\tt = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;\t\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvec3 origin = worldPosition;\n\t\t\t\t\tvec3 source = cameraPosition - offset;\n\t\t\t\t\tvec3 direction = normalize(source - origin);\n\t\t\t\t\tt = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;\t\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\tif (noiseStrength > 0.0) {\n\t\t\t\t\t// Distort with noise\n\t\t\t\t\tvec3 st = position / noiseScale;\n\t\t\t\t\t\n\t\t\t\t\t// Voronoi "smooth" noise\n\t\t\t\t\tfloat noise = 1.0 - voronoiNoise(st).x;\n\n\t\t\t\t\t// Voronoi cellular noise\n\t\t\t\t\t//float noise = 1.0 - rand(voronoiNoise(st).z);\n\n\t\t\t\t\t// Position warp noise\n\t\t\t\t\t// vec3 offset = vec3(\n\t\t\t\t\t// \tsimplex3d(st),\n\t\t\t\t\t// \tsimplex3d(st + vec3(111.1, 143.89, 217.19)),\n\t\t\t\t\t// \tsimplex3d(st + vec3(171.1, 247.89, 117.23))\n\t\t\t\t\t// );\n\t\t\t\t\t// st += offset;\n\t\t\t\t\t// float noise = valueNoise(st);\n\n\t\t\t\t\tt += noise * noiseStrength;\n\t\t\t\t}\n\n\t\t\t\tt = clamp(t, 0.0, 1.0);\n\n\t\t\t\t// Compute ramp color\n\t\t\t\tfloat p;\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tfor (int i = 1; i < COLORS_MAX; i++) {\n\t\t\t\t\tp = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);\n\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t}\n\n\t\t\t\t// Incorporate custom shadow color\n\t\t\t\tif (positioning == 0) {\n\n\t\t\t\t\tvec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);\n\t\t\t\t\tcolor.rgb = mix(blendedShadow, color.rgb, shadow);\n\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\t// Accumulate alpha as usual\n\t\t\t\tfloat lalpha = alpha * color.a;\n\t\t\t\tcalpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\n\t\t\t\treturn color.xyz;\n\n            }',[BE.simplex,e,n,i])}}();var RC=class extends IE{constructor(e,t){super(new Bn),this.repeat=e,this.offset=t,OC(this.value,e,t)}updateMatrix(){OC(this.value,this.repeat,this.offset)}},IC=class{constructor(e,t,n,r){this.id=e,this.uuid=t,this.data=n,this.uniforms={};for(let i in r)this.uniforms["f".concat(this.id,"_").concat(i)]=r[i];for(let i in n)FC(i,this,n)}get type(){return this.data.type}static create(e,t,n,r){if("light"===n.type)return jC.createLigherLayer(e,t,n,r);if("texture"===n.type){var i,o,a,s,l;let c=r.image(n.texture.image),u=new TC(c,n.texture.wrapping),d=new PC(c),h=new RC(n.texture.repeat,n.texture.offset),f=new uE(n.crop?1:0),p=new kE(null!==(i=n.projection)&&void 0!==i?i:0),m=new kE(null!==(o=["x","y","z"].indexOf(n.axis))&&void 0!==o?o:0),g=new kE(null!==(a=n.side)&&void 0!==a?a:0),v=new qA(n.size?new jn(n.size[0],n.size[1]):new jn(100,100)),y=new uE(null!==(s=n.alpha)&&void 0!==s?s:1),x=new kE(null!==(l=n.mode)&&void 0!==l?l:0),b=new iC(u,d,f,p,m,g,v,h,y,x),w=new lE(b.calpha,"f");return new LC(e,t,n,{texture:u,textureSize:d,crop:f,projection:p,axis:m,side:g,size:v,mat:h,alpha:y,mode:x},b,x,w)}if("matcap"===n.type){var c,u;let i=r.image(n.texture.image),o=new TC(i,n.texture.wrapping),a=new uE(null!==(c=n.alpha)&&void 0!==c?c:1),s=new kE(null!==(u=n.mode)&&void 0!==u?u:0),l=new MC(o,a,s),d=new lE(l.calpha,"f");return new LC(e,t,n,{texture:o,alpha:a,mode:s},l,s,d)}if("displace"===n.type){if("noise"===n.displacementType){var d,h,f,p;let r=new YA(new ur(...n.offset)),i=new uE(null!==(d=n.scale)&&void 0!==d?d:10),o=new uE(null!==(h=n.intensity)&&void 0!==h?h:8),a=new uE(null!==(f=n.movement)&&void 0!==f?f:1),s=new kE(null!==(p=n.noiseType)&&void 0!==p?p:0),l=new eC(o,a,r,i,s);return new NC(e,t,n,{offset:r,scale:i,intensity:o,movement:a,noiseType:s},l)}throw new Error}return function(e,t,n,r){let i=dC(n,r);return function(e,t,n,r){switch(e.type){case"color":{var i,o,a;let s=new DE(null!==(i=r.color)&&void 0!==i?i:5855577),l=new uE(null!==(o=r.alpha)&&void 0!==o?o:1),c=new lE("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");c.keywords.alpha=l;let u=new kE(null!==(a=r.mode)&&void 0!==a?a:0);return s.alpha=l,new LC(t,n,e,{color:s,alpha:l,mode:u},s,u,c)}case"fresnel":{var s,l,c,u,d,h,f;let i=new DE(null!==(s=r.color)&&void 0!==s?s:16777215),o=new uE(null!==(l=r.bias)&&void 0!==l?l:.1),a=new uE(null!==(c=r.scale)&&void 0!==c?c:1),p=new uE(null!==(u=r.intensity)&&void 0!==u?u:2),m=new uE(null!==(d=r.factor)&&void 0!==d?d:1),g=new uE(null!==(h=r.alpha)&&void 0!==h?h:1),v=new kE(null!==(f=r.mode)&&void 0!==f?f:0),y=new GE(i,o,a,p,m,g,v),x=new lE(y.calpha,"f");return new LC(t,n,e,{color:i,bias:o,scale:a,intensity:p,factor:m,alpha:g,mode:v},y,v,x)}case"rainbow":{var p,m,g,v,y,x,b,w;let i=new uE(null!==(p=r.filmThickness)&&void 0!==p?p:30),o=new uE(null!==(m=r.movement)&&void 0!==m?m:0),a=new YA(null!==(g=r.wavelengths)&&void 0!==g?g:new ur(0,0,0)),s=new uE(null!==(v=r.noiseStrength)&&void 0!==v?v:0),l=new uE(null!==(y=r.noiseScale)&&void 0!==y?y:1),c=new YA(null!==(x=r.offset)&&void 0!==x?x:new ur(0,0,0)),u=new uE(null!==(b=r.alpha)&&void 0!==b?b:1),d=new HE(i,o,a,s,l,c,u),h=new lE(d.calpha,"f"),f=new kE(null!==(w=r.mode)&&void 0!==w?w:0);return new LC(t,n,e,{filmThickness:i,movement:o,wavelengths:a,noiseStrength:s,noiseScale:l,offset:c,alpha:u,mode:f},d,f,h)}case"transmission":{var S,_,A,E,C;let i=new uE(null!==(S=r.thickness)&&void 0!==S?S:10),o=new uE(null!==(_=r.ior)&&void 0!==_?_:1.5),a=new uE(null!==(A=r.roughness)&&void 0!==A?A:.5),s=sC.transmissionSize,l=sC.transmissionRenderTarget,c=sC.transmissionRenderTargetDepth,u=window.innerWidth,d=window.innerHeight,h=u>=d?new qA(d/u,1):new qA(1,u/d),f=new uE(null!==(E=r.alpha)&&void 0!==E?E:1),p=new XE(i,o,a,s,l,c,h,f),m=new lE(p.calpha,"f"),g=new kE(null!==(C=r.mode)&&void 0!==C?C:0);return new LC(t,n,e,{thickness:i,ior:o,roughness:a,aspectRatio:h,alpha:f,mode:g},p,g,m)}case"toon":{var M,T,P,D,k,O,R,I;let i,o,a=new kE(null!==(M=r.positioning)&&void 0!==M?M:0);r.colors?i=new NE(r.colors.length,r.colors):(i=new NE(10,new ar(0,0,0,1)),i.value[1]=new ar(1,1,1,1)),r.steps?o=new LE(r.steps.length,r.steps):(o=new LE(10,1),o.value[0]=0);let s=new YA(null!==(T=r.source)&&void 0!==T?T:new ur(0,0,0)),l=new RE(null===(P=r.isWorldSpace)||void 0===P||P),c=new uE(null!==(D=r.noiseStrength)&&void 0!==D?D:0),u=new uE(null!==(k=r.noiseScale)&&void 0!==k?k:1),d=new QA(r.shadowColor),h=new YA(null!==(O=r.offset)&&void 0!==O?O:new ur(0,0,0)),f=new uE(null!==(R=r.alpha)&&void 0!==R?R:1),p=new kC(a,i,o,s,l,c,u,d,h,f),m=new lE(p.calpha,"f"),g=new kE(null!==(I=r.mode)&&void 0!==I?I:0);return new LC(t,n,e,{positioning:a,colors:i,steps:o,source:s,isWorldSpace:l,noiseStrength:c,noiseScale:u,shadowColor:d,offset:h,alpha:f,mode:g},p,g,m)}case"outline":{var L,N,j,B,F,z,U,G,V,H,W,q,Y;let i=new DE(null!==(L=r.outlineColor)&&void 0!==L?L:16777215),o=new DE(null!==(N=r.contourColor)&&void 0!==N?N:16777215),a=new uE(null!==(j=r.outlineWidth)&&void 0!==j?j:.1),s=new uE(null!==(B=r.contourWidth)&&void 0!==B?B:.1),l=new uE(null!==(F=r.outlineThreshold)&&void 0!==F?F:.1),c=new uE(null!==(z=r.contourThreshold)&&void 0!==z?z:.1),u=new uE(null!==(U=r.outlineSmoothing)&&void 0!==U?U:.1),d=new uE(null!==(G=r.contourFrequency)&&void 0!==G?G:.1),h=new YA(null!==(V=r.contourDirections)&&void 0!==V?V:new ur(0,1,0)),f=new RE(null!==(H=r.positionalLines)&&void 0!==H&&H),p=new RE(null===(W=r.compensation)||void 0===W||W),m=sC.normalRenderTarget,g=sC.normalRenderTargetDepth,v=sC.pixelRatioNode,y=sC.resolution,x=new uE(null!==(q=r.alpha)&&void 0!==q?q:1),b=new qE(i,o,a,s,l,c,u,d,h,f,p,y,m,g,v,x),w=new lE(b.calpha,"f"),S=new kE(null!==(Y=r.mode)&&void 0!==Y?Y:0);return new LC(t,n,e,{outlineColor:i,contourColor:o,outlineWidth:a,contourWidth:s,outlineThreshold:l,contourThreshold:c,outlineSmoothing:u,contourFrequency:d,contourDirection:h,positionalLines:f,compensation:p,alpha:x,mode:S},b,S,w)}case"depth":{var X,Q,K,Z,J,$,ee,te,ne,re;let i,o,a=new kE(null!==(X=r.gradientType)&&void 0!==X?X:0),s=new RE(null!==(Q=r.smooth)&&void 0!==Q&&Q),l=new uE(null!==(K=r.near)&&void 0!==K?K:50),c=new uE(null!==(Z=r.far)&&void 0!==Z?Z:200),u=new uE(null!==(J=r.isVector)&&void 0!==J?J:1),d=new uE(null!==($=r.isWorldSpace)&&void 0!==$?$:0),h=new YA(null!==(ee=r.origin)&&void 0!==ee?ee:new ur),f=new YA(null!==(te=r.direction)&&void 0!==te?te:new ur);r.colors?i=new NE(r.colors.length,r.colors):(i=new NE(2,new ar(0,0,0,1)),i.value[1]=new ar(1,1,1,1)),r.steps?o=new LE(r.steps.length,r.steps):(o=new LE(2,1),o.value[0]=0);let p=new uE(null!==(ne=r.alpha)&&void 0!==ne?ne:1),m=new kE(null!==(re=r.mode)&&void 0!==re?re:0),g=new KE(a,s,l,c,u,d,h,f,i,o,p),v=new lE(g.calpha,"f");return new LC(t,n,e,{gradientType:a,smooth:s,near:l,far:c,isVector:u,isWorldSpace:d,origin:h,direction:f,colors:i,steps:o,alpha:p,mode:m},g,m,v)}case"noise":{var ie,oe,ae,se,le,ce,ue,de,he;let i=new uE(null!==(ie=r.scale)&&void 0!==ie?ie:1),o=new YA(null!==(oe=r.size)&&void 0!==oe?oe:new ur(100,100,100)),a=new uE(null!==(ae=r.move)&&void 0!==ae?ae:1),s=new qA(null!==(se=r.fA)&&void 0!==se?se:new jn(1.7,9.2)),l=new qA(null!==(le=r.fB)&&void 0!==le?le:new jn(8.3,2.8)),c=new qA(null!==(ce=r.distortion)&&void 0!==ce?ce:new jn(1,1)),u=new QA(r.colorA),d=new QA(r.colorB),h=new QA(r.colorC),f=new QA(r.colorD),p=new uE(null!==(ue=r.alpha)&&void 0!==ue?ue:1),m=new kE(null!==(de=r.mode)&&void 0!==de?de:0),g=new kE(null!==(he=r.noiseType)&&void 0!==he?he:0),v=new FE(i,o,a,s,l,c,u,d,h,f,p,g),y=new lE(v.calpha,"f");return new LC(t,n,e,{scale:i,size:o,move:a,fA:s,fB:l,distortion:c,colorA:u,colorB:d,colorC:h,colorD:f,alpha:p,mode:m,noiseType:g},v,m,y)}case"normal":{var fe,pe,me;let i=new YA(null!==(fe=r.cnormal)&&void 0!==fe?fe:new ur(1,1,1)),o=new uE(null!==(pe=r.alpha)&&void 0!==pe?pe:1),a=new kE(null!==(me=r.mode)&&void 0!==me?me:0),s=new aC(i,o),l=new lE("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return l.keywords.alpha=o,new LC(t,n,e,{cnormal:i,alpha:o,mode:a},s,a,l)}case"gradient":{var ge,ve,ye,xe,be,we,Se;let i,o,a=new kE(null!==(ge=r.gradientType)&&void 0!==ge?ge:0),s=new RE(null!==(ve=r.smooth)&&void 0!==ve&&ve);r.colors?i=new NE(r.colors.length,r.colors):(i=new NE(10,new ar(0,0,0,1)),i.value[1]=new ar(1,1,1,1)),r.steps?o=new LE(r.steps.length,r.steps):(o=new LE(10,1),o.value[0]=0);let l=new qA(null!==(ye=r.offset)&&void 0!==ye?ye:new jn(0,0)),c=new qA(null!==(xe=r.morph)&&void 0!==xe?xe:new jn(0,0)),u=new uE(null!==(be=r.angle)&&void 0!==be?be:0),d=new uE(null!==(we=r.alpha)&&void 0!==we?we:1),h=new kE(null!==(Se=r.mode)&&void 0!==Se?Se:0),f=new nC(a,s,i,o,l,c,u,d),p=new lE(f.calpha,"f");return new LC(t,n,e,{gradientType:a,smooth:s,colors:i,steps:o,offset:l,morph:c,angle:u,alpha:d,mode:h},f,h,p)}default:{let r=new DE(1,0,0,1),i=new uE(1),o=new lE("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=i;let a=new kE(0);return r.alpha=i,new LC(t,n,e,{color:r,alpha:i,mode:a},r,a,o)}}}(n,e,t,i)}(e,t,n,r)}updateByOp(e,t,n){let r=e;if(void 0===r.path[0]){if(0===r.type)return"type"in r.props||"category"in r.props||function(e,t,n,r){let i=!1;for(let[o,a]of Object.entries(e)){if(!o||void 0===a)continue;if(FC(o,n,r)){"visible"===o&&"light"===n.type&&(i=!0);continue}n.visible=r.visible;let e=n.uniforms["f".concat(n.id,"_").concat(o)];if(e&&!(e instanceof wC))switch(i=i||AC(n,o,a),e.constructor){case DE:if("string"==typeof a){let n=t.getColor(a);n&&(e.value=n);break}{let t=a;e.value instanceof pC?e.value=new XA(t.r,t.g,t.b,t.a):e.setRGBA(t);break}case QA:if("string"==typeof a){let n=t.getColor(a);n&&(e.value=n);break}{let t=a;e.value instanceof pC?e.value=new XA(t.r,t.g,t.b,t.a):e.value.setRGBA(t.r,t.g,t.b,t.a);break}case qA:{let t=a;e.value.setX(t[0]),e.value.setY(t[1]);break}case YA:{let t=a;e.value.setX(t[0]),e.value.setY(t[1]),e.value.setZ(t[2]);break}case cE:EC(a,t,n);break;case NE:e.value=a.map((e=>new ar(...e)));break;default:e.value=a}}return i}(r.props,n,this,t)}else if("texture"===r.path[0])return!("texture"in t)||EC(r.props,n,this);return!1}dispose(){}hasValueByKey(e){return void 0!==this.uniforms[e]}hasValue(e){return this.hasValueByKey("f".concat(this.id,"_").concat(e))}setValue(e,t){let n="f".concat(this.id,"_").concat(e);this.hasValueByKey(n)&&void 0!==t&&(this.uniforms[n].value=t)}getNode(e){let t="f".concat(this.id,"_").concat(e);if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t="f".concat(this.id,"_").concat(e);if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log("Layer.getName: error ".concat(e))}getNames(){let e=[];for(let t in this.uniforms){let n=this.getName(t);n&&e.push(n)}return e}},LC=class extends IC{constructor(e,t,n,r,i,o,a){super(e,t,n,r),this.color=i,this.mode=o,this.alpha=a}},NC=class extends IC{constructor(e,t,n,r,i){super(e,t,n,r),this.position=i}},jC=class extends IC{constructor(e,t,n,r,i){super(e,t,n,i),this.data=n,this.node=r}static createLigherLayer(e,t,n,r){let i,o,a=new uE(n.alpha),s=new kE(n.mode);if(n.visible)if("lambert"===n.category){var l;i=new lC;let e=new DE(null!==(l=r.color(n.emissive))&&void 0!==l?l:0);o={emissive:e},i.emissive=e}else if("toon"===n.category){var c,u;i=new uC;let e=new uE(null!==(c=n.shininess)&&void 0!==c?c:30),t=new DE(null!==(u=r.color(n.specular))&&void 0!==u?u:1118481);o={shininess:e,specular:t},i.shininess=e,i.specular=t}else if("physical"===n.category){var d,h,f;i=new cC;let e=new uE(null!==(d=n.roughness)&&void 0!==d?d:.3),t=new uE(null!==(h=n.metalness)&&void 0!==h?h:0),r=new uE(null!==(f=n.reflectivity)&&void 0!==f?f:.5);o={roughness:e,metalness:t,reflectivity:r},i.roughness=e,i.metalness=t,i.reflectivity=r}else{var p,m;i=new zE;let e=new uE(null!==(p=n.shininess)&&void 0!==p?p:30),t=new DE(null!==(m=r.color(n.specular))&&void 0!==m?m:1118481);o={shininess:e,specular:t},i.shininess=e,i.specular=t}else i=new OE,o={};return i.alpha=new uE(1),i.shadingAlpha=a,i.shadingBlend=s,o.alpha=i.shadingAlpha,o.mode=i.shadingBlend,new jC(e,t,n,i,o)}};function BC(e){let t=e instanceof IC?e.type:e;return"texture"===t||"displace_map"===t||"matcap"===t}function FC(e,t,n){if("displace"===n.type&&("intensity"===e||"visible"===e)){let e=t.uniforms["f".concat(t.id,"_intensity")];return e?(e.value=n.intensity*(n.visible?1:0),e):void 0}if("displace"!==n.type&&("alpha"===e||"visible"===e)){let r=t.uniforms["f".concat(t.id,"_alpha")];if(!r)return;if(r.value=n.alpha*(n.visible?1:0),"outline"===n.type&&"visible"===e){let e=t.uniforms["f".concat(t.id,"_compensation")];e&&(e.value=n.compensation&&n.visible)}return r}}var zC=class extends uo{constructor(e,t){super(void 0),this.data=e,this.layerIdGen=0,this.type="NodeMaterial",this.uniformsBackup={},this.fog=!0,this.updaters=[],this.dithering=!0,this.vertexColors=!0,this.onBeforeCompile=this._onBeforeCompile,this.transparent=!0,this.reset(e,t)}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.data.category}reset(e,t){var n,r;let i=null!==(n=e.layers)&&void 0!==n?n:px.defaultTwoLayerData("phong").layers;this.layers=i.map((e=>IC.create(this.layerIdGen++,e.id,e.data,t))),this.layers.reverse(),this.name=null!==(r=e.name)&&void 0!==r?r:"Untitled Material",this.onUpdate(t)}getLayersOfType(e){return this.layers.filter((t=>t.type===e))}getLayerByUuid(e){return this.layers.find((t=>t.uuid===e))}onUpdate(e){this.lightLayer=this.layers.find((e=>e instanceof jC)),void 0===this.lightLayer&&(this.lightLayer=new jC(0,"",{...fx.defaultData("light","phong"),visible:!1},new OE,{})),this.dispose(),this.needsUpdate=!0,this.blendColors(),this.blendAfterColors(),this.blendPositions()}updateByOp(e,t,n){if(this.data=t,"layers"===e.path[0]){let r=e.path[1];if(void 0===r){if(this.layers.reverse(),4===e.type){let t=IC.create(this.layerIdGen++,e.id,e.data,n);this.layers.splice(e.localIndex,0,t)}else if(5===e.type)this.layers.splice(e.localIndex,1)[0].dispose();else if(6===e.type){let t=this.layers.findIndex((t=>t.uuid===e.id)),n=this.layers[t];this.layers.splice(t,1),this.layers.splice(e.localIndex,0,n)}this.layers.reverse(),this.onUpdate(n)}else{let i=this.layers.find((e=>e.uuid===r));if(i){let o=t.layers.data(r);if(i.updateByOp({...e,path:e.path.slice(2)},o,n)){let e=IC.create(this.layerIdGen++,r,o,n);this.layers.splice(this.layers.findIndex((e=>e.uuid===r)),1,e),this.onUpdate(n)}}}}}blendColors(){let e=this.layers.findIndex((e=>e instanceof LC)),t=this.layers.findIndex((e=>e instanceof jC));if(-1!==e&&e<t){let n=this.layers[e].color;for(let r=e+1;r<t;++r){let e=this.layers[r];e instanceof LC&&(n=new ZE(n,e.color,e.alpha,e.mode))}this.fragment.color=n}else this.fragment.color=void 0}blendAfterColors(){let e=new lE("outgoingLight","f"),t=this.layers.findIndex((e=>e instanceof jC));if(this.layers.length>t+1){for(let n=t+1;n<this.layers.length;++n){let t=this.layers[n];t instanceof LC&&(e=new ZE(e,t.color,t.alpha,t.mode))}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter((e=>e instanceof NC));if(e.length>0){let t=e[0].position;for(let n=1;n<e.length;++n)e[n]&&(t=new fE(t,e[n].position,fE.ADD),t=new fE(t,new uE(.5).setReadonly(!0),fE.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}_onBeforeCompile(e,t){this.build({renderer:t}),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=!0===this.extensions.derivatives,e.extensionFragDepth=!0===this.extensions.fragDepth,e.extensionDrawBuffers=!0===this.extensions.drawBuffers,e.extensionShaderTextureLOD=!0===this.extensions.shaderTextureLOD}clampUniformsForPreview(e,t){let n=(e,t,n)=>Math.min(Math.max(e,t),n);for(let r of this.layers)if("displace"===r.type){this.uniformsBackup["f".concat(r.id,"_intensity")]=r.uniforms["f".concat(r.id,"_intensity")].value;let i=n(r.uniforms["f".concat(r.id,"_intensity")].value,e,t);r.uniforms["f".concat(r.id,"_intensity")].value=i}}restoreClampedUniforms(){for(let e of this.layers)"displace"===e.type&&(e.uniforms["f".concat(e.id,"_intensity")].value=this.uniformsBackup["f".concat(e.id,"_intensity")])}customProgramCacheKey(){let e="[";for(let{data:r}of this.data.layers)if("light"===r.type)e+='"'.concat(r.visible?r.category.toUpperCase():"Basic",'"');else{var t,n;let i=(null!==(t=SC[r.type])&&void 0!==t?t:[]).map((e=>r[e])),o=(null!==(n=_C[r.type])&&void 0!==n?n:[]).map((e=>{var t,n;return null!==(t=null===(n=r[e])||void 0===n?void 0:n.length)&&void 0!==t?t:0})),a=[...i,...o];a.length?e+='["'.concat(r.type,'", "').concat(a.join('","'),'"],'):e+='"'.concat(r.type,'",')}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(e){var t,n;let r=null!==(n=(e=null!==(t=e)&&void 0!==t?t:{}).builder)&&void 0!==n?n:new class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function e(e,t){return e.deps.length-t.deps.length}return function(t,n){let r=this.getIncludes(t,n);if(!r)return"";let i="";r=r.sort(e);for(let e=0;e<r.length;e++)r[e].src&&(i+=r[e].src+"\n");return i}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCube(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif","\n\t\t\t// NOTE: Include Spline's blending modes. This could be part of BlendNode\n\t\t\t#define SPE_BLENDING_NORMAL 0\n\t\t\t#define SPE_BLENDING_MULTIPLY 1\n\t\t\t#define SPE_BLENDING_SCREEN 2\n\t\t\t#define SPE_BLENDING_OVERLAY 3\n\n\t\t\tvec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, a * b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );\n\t\t\t\treturn mix( a, tmp, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );\n\t\t\t\treturn clamp( mix( a, tmp, alpha ), 0.0, 1.0 );\n\t\t\t}\n\n\t\t\tvec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {\n\t\t\t\tif ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );\n\t\t\t\treturn vec3( 1.0 );\n\t\t\t}\n\t\t\t","#include <packing>","#include <common>"].join("\n"),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join("\n"),fragment:["float accumAlpha = 0.0;","void accumulateAlpha(float alpha) {\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * alpha;\n\t\t\t\t}",""].join("\n")},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.buildShader("vertex",e),this.buildShader("fragment",t);for(let n=0;n<this.requires.uv.length;n++)if(this.requires.uv[n]){let e=n>0?n+1:"";this.addVaryCode("varying vec2 vUv"+e+";"),n>0&&this.addVertexParsCode("attribute vec2 uv"+e+";"),this.addVertexFinalCode("vUv"+e+" = uv"+e+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.material=e,this.renderer=t,this.defines={},this}addFlow(e,t,n){return this.addSlot(e).addCache(t).addContext(n)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=null!==e&&void 0!==e?e:"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){void 0===this.fragmentVariables[e]&&(this.addFragmentCode("".concat(t," ").concat(e,";")),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){void 0===this.fragmentParsVariables[e]&&(this.addFragmentParsCode("".concat(t," ").concat(e,";")),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){void 0===this.vertexParsVariables[e]&&(this.addVertexParsCode("".concat(t," ").concat(e,";")),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[null!==t&&void 0!==t?t:this.shader]+=e+"\n"}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[null!==t&&void 0!==t?t:this.shader]+=e+"\n"}clearNodeCode(e){var t;e=null!==(t=e)&&void 0!==t?t:this.shader;let n=this.nodeCode[e];return this.nodeCode[e]="",n}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[null!==t&&void 0!==t?t:this.shader]+=e+"\n"}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[null!==t&&void 0!==t?t:this.shader]+=e+"\n"}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return-1!==this.caches.indexOf(e)}isSlot(e){return-1!==this.slots.indexOf(e)}define(e,t){this.defines[e]=void 0===t?1:t}require(e){this.requires[e]=!0}isDefined(e){return void 0!==this.defines[e]}getVar(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"varying",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"V",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=this.getVars(r),s=a[e];if(!s){let r=a.length;s={name:n||"node"+i+r+(o?"_"+o:""),type:t},a.push(s),a[e]=s}return s}getTempVar(e,t,n,r){return this.getVar(e,t,n,this.shader,"T",r)}getAttribute(e,t){if(!this.attributes[e]){let n=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(n.name+" = "+e+";"),this.attributes[e]={varying:n,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join("\n")}getVarListCode(e,t){var n;t=null!==(n=t)&&void 0!==n?n:"";let r="";for(let i=0,o=e.length;i<o;++i){let n=e[i],o=n.type,a=n.name,s=n.size,l=this.getFormatByType(o);if(void 0===l)throw new Error("Node pars "+l+" not found.");l.includes("[]")?r+=t+" "+l.substring(0,l.length-2)+" "+a+"[".concat(s,"];\n"):r+=t+" "+l+" "+a+";\n"}return r}getVars(e){return this.inputs.vars[null!==e&&void 0!==e?e:this.shader]}getNodeData(e){let t=e instanceof GA?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,n,r,i,o){if(t.includes("[]")){let a=this.inputs.arrayUniforms,s=a.list.length,l=new UA({type:t,size:n.size,name:r||"nodeUA"+s+(o?"_"+o:""),node:n,needsUpdate:i});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}{let a=this.inputs.uniforms,s=a.list.length,l=new UA({type:t,name:r||"nodeU"+s+(o?"_"+o:""),node:n,needsUpdate:i});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,n,r,i){return this.createUniform("vertex",e,t,n,r,i)}createFragmentUniform(e,t,n,r,i){return this.createUniform("fragment",e,t,n,r,i)}include(e,t,n){let r;if(e="string"==typeof e?VA.get(e):e,!1===this.context.include)return e.name;e instanceof JA?r=this.includes.functions:e instanceof tE?r=this.includes.consts:e instanceof iE&&(r=this.includes.structs);let i=r[this.shader]=r[this.shader]||[];if(e){var o;let r=i[e.name];if(r||(r=i[e.name]={node:e,deps:[]},i.push(r),r.src=e.build(this,"source")),e instanceof JA&&t&&i[t.name]&&-1===i[t.name].deps.indexOf(e)&&(i[t.name].deps.push(e),null!==(o=e.includes)&&void 0!==o&&o.length)){let n=0;do{this.include(e.includes[n++],t)}while(n<e.includes.length)}return n&&(r.src=n),e.name}throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return ME[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return"f"===e?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return 1===e?"f":"v"+e}findNode(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<arguments.length;r++){let e=t[r];if(null!==e&&void 0!==e&&e.isNode)return e}}resolve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<arguments.length;r++){let e=t[r];if(void 0!==e){if(e.isNode)return e;if(e.isTexture)switch(e.mapping){case _t:case At:return new EE(e);case Et:return new AE(new cE(e));default:return new cE(e)}else{if(e.isVector2)return new qA(e);if(e.isVector3)return new YA(e);if(e.isVector4)return new QA(e)}}}}format(e,t,n){switch(this.colorToVector(n+" <- "+t)){case"f <- v2":case"f <- v3":case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return TE[e]||e}getFormatByType(e){return PE[e]||e}getUUID(e,t){return(t=void 0===t||t)&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return CE[e]}getIndexByElement(e){return CE.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=gn,t===gn&&this.context.gamma&&(t=vn),t}};return this.lights=this.lightLayer.data.visible,r.setMaterial(this,e.renderer),r.build(this.fragment,this.fragment),this.vertexShader=r.getCode("vertex"),this.fragmentShader=r.getCode("fragment"),this.defines=r.defines,this.uniforms=r.uniforms,this.extensions=r.extensions,this.updaters=r.updaters,this.transparent=r.requires.transparent||this.blending>1,this}dispose(){this.layers.forEach((e=>e.dispose())),super.dispose()}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(zC.prototype,{properties:{get:function(){return this.fragment.properties}},needsUpdate:{set:function(e){!0===e&&this.version++,this.needsCompile=e},get:function(){return this.needsCompile}}});var UC=e=>"\n\n// PCSS implementation based on:\n// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/\n// NOTE: This number affects how big the shadow blur can\n// possibly get. Bigger number == bigger blur, but less precise results\n\nconst float  gPenumbraFilterSize = 80.0;\nconst int   gPenumbraSamples = ".concat(e,";\nconst int gShadowSamples = ").concat(e,";\nconst float gShadowSamplesRpc = 1.0f / float(gShadowSamples);\n\nvec2 vogelDiskSample(int sample_index, int sample_count, float angle)\n{\n  const float goldenAngle = 2.399963f; // radians\n  float r = sqrt(float(sample_index) + 0.5f) / sqrt(float(sample_count));\n  float theta = float(sample_index) * goldenAngle + angle;\n  float sine = sin(theta);\n  float cosine = cos(theta);\n  return vec2(cosine, sine) * r;\n}\n\n// NOTE: For now we aren't using this screen-space noise. But we should enable\n// it again once we do some sort of temporal AA. Then we could potentially lower\n// the number of samples needed and still get a pretty smooth result.\n// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso\nfloat getNoiseInterleavedGradient(vec2 screenPos)\n{\n    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);\n    return fract(magic.z * fract(dot(screenPos, magic.xy)));\n}\n\n#ifdef USE_SHADOWMAP\n    #if NUM_DIR_LIGHT_SHADOWS > 0\n\n        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n        struct DirectionalLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n        };\n\n        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n    #endif\n\n    #if NUM_SPOT_LIGHT_SHADOWS > 0\n\n        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n        varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n        struct SpotLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n        };\n\n        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n    #endif\n\n    #if NUM_POINT_LIGHT_SHADOWS > 0\n\n        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n        struct PointLightShadow {\n            float shadowBias;\n            float shadowNormalBias;\n            float shadowRadius;\n            vec2 shadowMapSize;\n            float shadowCameraNear;\n            float shadowCameraFar;\n        };\n\n        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n    #endif\n\n    /*\n    #if NUM_RECT_AREA_LIGHTS > 0\n\n        // TODO (abelnation): create uniforms for area light shadows\n\n    #endif\n    */\n\nfloat computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)\n{\n    float penumbra = 1.0;\n    float blockerDepthAvg = 0.0;\n    float blockerCount = 0.0;\n\n    #pragma unroll_loop_start\n    for(int i = 0; i < gPenumbraSamples; i ++)\n    {\n        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;\n        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );\n\n        if(depth < compare + 0.0001)\n        {\n            blockerDepthAvg += depth;\n            blockerCount++;\n        }\n    }\n    #pragma unroll_loop_end\n\n    if (blockerCount > 0.0)\n    {\n        blockerDepthAvg /= blockerCount;\n\n        // Compute penumbra\n        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);\n        penumbra *= penumbra;\n        penumbra *= 200.0 * penumbraSize[min(index, ",5," - 1)]; // Magic number that affects how quickly the penumbra grows\n\n        return clamp(penumbra, 0.00, 1.0);\n    }\n    return 0.0;\n}\n\nvec4 shadowmod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}\nvec4 shadowperm(vec4 x){return shadowmod289(((x * 34.0) + 1.0) * x);}\nfloat shadowNoise(vec3 p){\n            vec3 a = floor(p);\n            vec3 d = p - a;\n            d = d * d * (3.0 - 2.0 * d);\n            vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n            vec4 k1 = shadowperm(b.xyxy);\n            vec4 k2 = shadowperm(k1.xyxy + b.zzww);\n            vec4 c = k2 + a.zzzz;\n            vec4 k3 = shadowperm(c);\n            vec4 k4 = shadowperm(c + 1.0);\n            vec4 o1 = fract(k3 * (1.0 / 41.0));\n            vec4 o2 = fract(k4 * (1.0 / 41.0));\n            vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n            vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n            return o4.y * d.y + o4.x * (1.0 - d.y);\n        }\n\nfloat vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)\n{\n    float shadow         = 0.0f;\n    float temporalOffset = shadowNoise(floor(vWPosition * 10.));\n\n    // NOTE: When using TAA, we should use screen space interleaved gradient noise\n    //float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy);\n    float temporalAngle  = temporalOffset * PI2;\n\n    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);\n    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);\n    if (penumbra == -1.0) {\n        return 1.0;\n    }\n\n    #pragma unroll_loop_start\n    for (int i = 0; i < gShadowSamples; i++)\n    {\n        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n        // Overall blurring offset\n        vec2 offset = vogelSample * (shadowRadius * 2.);\n\n        // Penumbra offset\n        offset += vogelSample * (penumbra * texelScalar);\n\n        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n    }\n    #pragma unroll_loop_end\n\n    return shadow * gShadowSamplesRpc;\n}\n\n\n    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n    }\n\n    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n        return unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n    }\n\n    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n        float occlusion = 1.0;\n\n        vec2 distribution = texture2DDistribution( shadow, uv );\n\n        float hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n        if (hard_shadow != 1.0 ) {\n\n            float distance = compare - distribution.x ;\n            float variance = max( 0.00000, distribution.y * distribution.y );\n            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n        }\n        return occlusion;\n\n    }\n\n    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n        float shadow = 1.0;\n\n        shadowCoord.xyz /= shadowCoord.w;\n        shadowCoord.z += shadowBias;\n\n        // if ( something && something ) breaks ATI OpenGL shader compiler\n        // if ( all( something, something ) ) using this instead\n\n        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n        bool inFrustum = all( inFrustumVec );\n\n        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n        bool frustumTest = all( frustumTestVec );\n\n        if ( frustumTest ) {\n\n        #if defined( SHADOWMAP_TYPE_PCF )\n\n            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );\n\n        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n            float dx = texelSize.x;\n            float dy = texelSize.y;\n\n            vec2 uv = shadowCoord.xy;\n            vec2 f = fract( uv * shadowMapSize + 0.5 );\n            uv -= f * texelSize;\n\n            shadow = (\n                texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n                     f.x ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n                     f.x ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n                     f.y ) +\n                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n                     f.y ) +\n                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n                          f.x ),\n                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n                          f.x ),\n                     f.y )\n            ) * ( 1.0 / 9.0 );\n\n        #elif defined( SHADOWMAP_TYPE_VSM )\n\n            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n        #else // no percentage-closer filtering:\n\n            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n        #endif\n\n        }\n\n        return shadow;\n\n    }\n\n    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n    // vector suitable for 2D texture mapping. This code uses the following layout for the\n    // 2D texture:\n    //\n    // xzXZ\n    //  y Y\n    //\n    // Y - Positive y direction\n    // y - Negative y direction\n    // X - Positive x direction\n    // x - Negative x direction\n    // Z - Positive z direction\n    // z - Negative z direction\n    //\n    // Source and test bed:\n    // https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n    vec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n        // Number of texels to avoid at the edge of each square\n\n        vec3 absV = abs( v );\n\n        // Intersect unit cube\n\n        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n        absV *= scaleToCube;\n\n        // Apply scale to avoid seams\n\n        // two texels less per square (one texel will do for NEAREST)\n        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n        // Unwrap\n\n        // space: -1 ... 1 range for each square\n        //\n        // #X##         dim    := ( 4 , 2 )\n        //  # #         center := ( 1 , 1 )\n\n        vec2 planar = v.xy;\n\n        float almostATexel = 1.5 * texelSizeY;\n        float almostOne = 1.0 - almostATexel;\n\n        if ( absV.z >= almostOne ) {\n\n            if ( v.z > 0.0 )\n                planar.x = 4.0 - v.x;\n\n        } else if ( absV.x >= almostOne ) {\n\n            float signX = sign( v.x );\n            planar.x = v.z * signX + 2.0 * signX;\n\n        } else if ( absV.y >= almostOne ) {\n\n            float signY = sign( v.y );\n            planar.x = v.x + 2.0 * signY + 2.0;\n            planar.y = v.z * signY - 2.0;\n\n        }\n\n        // Transform to UV space\n\n        // scale := 0.5 / dim\n        // translate := ( center + 0.5 ) / dim\n        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n    }\n\n    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n        float shadow = 1.0;\n        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n        // for point lights, the uniform @vShadowCoord is re-purposed to hold\n        // the vector from the light to the world-space position of the fragment.\n        vec3 lightToPosition = shadowCoord.xyz;\n\n        // dp = normalized distance from light to fragment position\n        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n        compare += shadowBias;\n\n        // bd3D = base direction 3D\n        vec3 bd3D = normalize( lightToPosition );\n\n        float temporalOffset = shadowNoise(floor(vWPosition * 10.));\n        float temporalAngle  = temporalOffset * PI2;\n\n\n        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )\n            for (int i = 0; i < gShadowSamples; i++) {\n                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n\n                // Overall blurring offset\n                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);\n\n                // NOTE: Removed for now\n                // Penumbra offset\n                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);\n\n                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );\n\n            }\n            return shadow * gShadowSamplesRpc;\n\n        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n            for (int i = 0; i < 16; i++) {\n                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;\n\n                // Overall blurring offset\n                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);\n\n                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );\n\n            }\n            return shadow * (1.0 / 16.0);\n        #else // no percentage-closer filtering\n\n            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );\n\n        #endif\n\n    }\n\n#endif\n"),GC=To.lights_fragment_begin,VC=To.shadowmask_pars_fragment,HC=!1,WC=e=>{switch(e){case"low":return 8;case"medium":default:return 16;case"high":return 32}},qC=new uo({vertexShader:"\nattribute vec3 randomColor;\nvarying vec3 vNormal;\nflat out vec3 vColor;\n\nvoid main()\n{\nvNormal = normal;\nvColor = randomColor;\ngl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));\n}\n",fragmentShader:"\nuniform float depthContrast;\nvarying vec3 vNormal;\nflat in vec3 vColor;\nvoid main()\n{\nvec3 normal = (normalize(vNormal)).rgb;\n\nfloat contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;\n\nvec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);\ngl_FragColor = vec4(resultColor, vColor.r);\n}\n",uniforms:{depthContrast:{value:1}}});function YC(e){var t,n;if(Array.isArray(e.material)){for(let r of e.material)if(0===r.getLayersOfType("outline").length)return}else if(!(e.material instanceof zC)||0===e.material.getLayersOfType("outline").length)return;"Mesh2D"===e.objectType||"TextFrame"===e.objectType&&0===(null===(t=e.data)||void 0===t||null===(n=t.geometry)||void 0===n?void 0:n.depth)?function(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,n=new Float32Array(t.length),r=new ur;for(let i=0;i<t.length;i+=3)r.set(t[i],t[i+1],t[i+2]).normalize(),n[i]=r.x,n[i+1]=r.y,n[i+2]=r.z;e.geometry.setAttribute("extrudeNormal",new Oi(n,3))}(e):function(e){if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,n=e.geometry.attributes.position.array,r=e.geometry.attributes.normal.array,i=new Float32Array(n.length);for(let s=0;s<n.length;s+=3){var o;let e="".concat(n[s],"_").concat(n[s+1],"_").concat(n[s+2]),i=new ur(r[s],r[s+1],r[s+2]);t.has(e)?null===(o=t.get(e))||void 0===o||o.normals.push(i):t.set(e,{normals:[i],result:new ur})}t.forEach(((e,t)=>{for(let n of e.normals)e.result.add(n);e.result.divideScalar(e.normals.length)}));for(let s=0;s<n.length;s+=3){var a;let e="".concat(n[s],"_").concat(n[s+1],"_").concat(n[s+2]),r=null===(a=t.get(e))||void 0===a?void 0:a.result;r&&(i[s]=r.x,i[s+1]=r.y,i[s+2]=r.z)}e.geometry.setAttribute("extrudeNormal",new Oi(i,3))}(e)}function XC(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,n=new Float32Array(t.length),r=parseInt(e.uuid.replace(/\D/g,"")),i=[Nn.seededRandom(r),Nn.seededRandom(r+1e4),Nn.seededRandom(r+2e4)];for(let o=0;o<t.length;o++)n[o]=i[o%3];e.geometry.setAttribute("randomColor",new Pi(n,3))}var QC=class extends(zA(io)){constructor(e,t){var n,r;super(e,t),this.isAbstractMesh=!0,this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new Ur,this.booleanExclude=null,Array.isArray(t)&&0===e.groups.length&&e.addGroup(0,Math.max(null!==(n=null===(r=e.getIndex())||void 0===r?void 0:r.count)&&void 0!==n?n:0,e.getAttribute("position").count),0)}get isGroup(){var e;return!0===(null===(e=this._cloner)||void 0===e?void 0:e.parameters.hideBase)}get isMesh(){return!this.isGroup}set isMesh(e){}get cloner(){return this._cloner}set cloner(e){this._cloner&&this.remove(this._cloner),e&&this.add(e),this._cloner=e}updateGeometry(e,t){let n=this.geometry,r=yA[n.userData.type],i="NonParametric"===this.objectType?Object.assign({},n.userData,{geometry:n}):n.userData,o=r.build(r.normalizeInputs(e,i)),a=n.uuid;this.geometry.dispose(),this.geometry=o,this.geometry.uuid=a,this.geometry.computeBoundingSphere(),YC(this),n.getAttribute("randomColor")&&XC(this)}clone(e){let t="NonParametric"===this.objectType?Object.assign({},this.geometry.userData,{geometry:this.geometry.clone()}):this.geometry.userData,n=xA(t),r=this.material;return new this.constructor(n,r).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return super.copy(e,t),e.cloner&&(this.cloner=new Iw(e,e.cloner.parameters),this.add(this.cloner)),this}setFromClonerState(e){null===e?this.cloner=void 0:(void 0===this.cloner&&(this.cloner=new Iw(this)),this.cloner.fromClonerState(e))}fromState(e,t){var n,r,i;return super.fromState(e),"Mesh"===e.type&&(this.setFromClonerState(e.cloner),this.castShadow=null===(n=e.castShadow)||void 0===n||n,this.receiveShadow=null===(r=e.receiveShadow)||void 0===r||r,this.booleanExclude=null!==(i=e.booleanExclude)&&void 0!==i?i:null),this}freeBooleanPointer(){-1!==this.booleanMeshSetAddress&&(iA.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.booleanWasTransformed=!0:this.freeBooleanPointer(),_A(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)SA(e)&&(e.freeBooleanPointer(),_A(e)&&e.invalidateUpstreamBooleanData())}},KC=new ur(0,0,1),ZC=new ur,JC=new ur,$C=new Bn,eM=class extends QC{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JS.create({});super(t,arguments.length>1?arguments[1]:void 0),this.recursiveSelection=!1,this.objectType="VectorObject",this.eventDispatcher=new En,this._onShapeUpdate=()=>{this.updateGeometry({}),this.geometry.computeBoundingSphere(),this.geometry.computeBoundingBox()},this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!0,this.shape=t.userData.shape,null===(e=this.shape.eventDispatcher)||void 0===e||e.addEventListener("update",this._onShapeUpdate)}fromState(e){return super.fromState(e),this.shape.update(),this}setHelperVisibility(){}updateGeometry(e,t){if(super.updateGeometry(e,t),"userData"in this.geometry){let e=this.geometry.userData.parameters;this.eventDispatcher.dispatchEvent({type:"geometryUpdate",parameters:e})}}setShape(e){var t,n;this.shape&&null!==(t=this.shape.eventDispatcher)&&void 0!==t&&t.removeEventListener("update",this._onShapeUpdate),this.shape=e,null===(n=this.shape.eventDispatcher)||void 0===n||n.addEventListener("update",this._onShapeUpdate)}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),$C.getNormalMatrix(this.matrixWorld),ZC.copy(KC).applyMatrix3($C).normalize(),JC.setFromMatrixPosition(this.matrixWorld),this.shape.plane.setFromNormalAndCoplanarPoint(ZC,JC)}clone(e){let t=this.shape.clone(),n=this.material,r=this.geometry.userData,i=JS.create(Object.assign({},r,{shape:t})),o=new eM(i,n).copy(this,e);return o.shape=t,t.update(),o}raycast(e,t){QC.prototype.raycast.call(this,e,t)}},tM=(e,t)=>class extends e{constructor(){super(...arguments),this.objectHelper=new t(this)}get geometryHelper(){return t.geometryHelper}raycast(e,t){this.objectHelper.raycast(e,t)}fromLightState(e,t){if("LightDirectional"===this.objectType||"LightPoint"===this.objectType||"LightSpot"===this.objectType){let n=this;void 0!==e.color&&(n.color=bA(e.color,t)),void 0!==e.intensity&&(n.intensity=e.intensity),void 0!==e.depth&&(n.shadow.camera.far=e.depth,n.shadow.needsUpdate=!0),void 0!==e.shadows&&(this.castShadow=e.shadows)}return this}},nM=new ur,rM=new ur,iM=class extends(tM(zA(ho),Hw)){constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.innerWidth,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.innerHeight,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:45,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e5;super(),this.objectType="CombinedCamera",this._cameraType="OrthographicCamera",this.targetOffset=ix.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.width=e,this.height=t,this.orthoCamera=new jo(-.5*e,.5*e,.5*t,-.5*t,null!==r&&void 0!==r?r:-5e4,i),this.perspCamera=new fo(n,e/t,null!==r&&void 0!==r?r:50,i),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.fov=this.perspCamera.fov,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.toOrthographic()}static createFromState(e,t){let n=(new iM).fromState(t);return n.objectHelper.update(),n.uuid=e,n}get isPerspectiveCamera(){return"PerspectiveCamera"===this.cameraType}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}setNear(e,t){"PerspectiveCamera"===e?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&("PerspectiveCamera"===e?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){"PerspectiveCamera"===e?this.toPerspective():"OrthographicCamera"===e&&this.toOrthographic()}get near(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.near:this.orthoCamera.near}set near(e){"PerspectiveCamera"===this._cameraType?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&("PerspectiveCamera"===this._cameraType?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e){super.lookAt(e),this.getWorldPosition(nM),this.targetOffset=nM.distanceTo(e)}getTarget(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ur;return this.getWorldDirection(rM),this.getWorldPosition(nM),rM.multiplyScalar(this.targetOffset),e.copy(nM).add(rM),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(nM),nM.distanceTo(e)}updateUp(){let e=this.getWorldQuaternion(new cr),t=new ur(0,0,1).applyQuaternion(e),n=(new ur).copy(hi.DefaultUp);this.isUpVectorFlipped&&n.negate(),n.applyQuaternion(e);let r=(new ur).copy(hi.DefaultUp).projectOnPlane(t),i=(new ur).crossVectors(r,n).dot(t)>=0?1:-1;this.angleOffsetFromUp=r.angleTo(n)*i}getViewFrontToObject(e){let t=e.getWorldPosition(new ur),n=e.getWorldDirection(new ur).multiplyScalar(this.targetOffset);return{position:t.clone().add(n),target:t}}getViewToObject(e){let t=e.getWorldPosition(new ur),n=this.getWorldDirection(new ur).multiplyScalar(this.targetOffset);return{position:t.clone().sub(n),target:t}}setViewplaneSize(e,t){this.left=.5*-e,this.right=.5*e,this.top=.5*t,this.bottom=.5*-t,this.aspect=e/t,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,n,r,i,o){"PerspectiveCamera"===this._cameraType?this.perspCamera.setViewOffset(e,t,n,r,i,o):this.orthoCamera.setViewOffset(e,t,n,r,i,o)}clearViewOffset(){"PerspectiveCamera"===this._cameraType?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}updateProjectionMatrix(){"PerspectiveCamera"===this._cameraType?this.toPerspective():"OrthographicCamera"===this._cameraType&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=null===e.view?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return pg(t,e)}fromCameraState(e){let{orthographic:t,perspective:n}=e;return void 0!==e.type&&(this.cameraType=e.type),void 0!==e.far&&(this.far=e.far),void 0!==t&&(void 0!==t.near&&(this.orthoCamera.near=t.near),void 0!==t.zoom&&(this.orthoCamera.zoom=t.zoom)),void 0!==n&&(void 0!==n.near&&(this.perspCamera.near=n.near),void 0!==n.fov&&(this.perspCamera.fov=n.fov),void 0!==n.zoom&&(this.perspCamera.zoom=n.zoom)),"PerspectiveCamera"===e.type?(this.zoom=this.perspCamera.zoom,this.fov=this.perspCamera.fov,this.near=this.perspCamera.near):(this.near=this.orthoCamera.near,this.zoom=this.orthoCamera.zoom),void 0!==e.up&&this.up.fromArray(e.up),void 0!==e.targetOffset&&(this.targetOffset=e.targetOffset),void 0!==e.isUpVectorFlipped&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix(),this}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}fromState(e){return super.fromState(e),this.fromCameraState(e),this}},oM=new Ur;function aM(e){let t=!1;return e.scene.objects.traverse(((e,n)=>{var r;"BooleanGeometry"===(null===(r=n.geometry)||void 0===r?void 0:r.type)&&(t=!0)})),t}var sM,lM=class extends QC{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,arguments.length>1?arguments[1]:void 0),this.booleanOp=2,this.phongAngle=35,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.objectType="BooleanObject",this.castShadow=!0,this.receiveShadow=!0,this.geometry.userData.parameters={width:0,height:0,depth:0},this.onAfterRender=this.recomputeBoolean.bind(this)}reInit(){this.objectType="BooleanObject",this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry.userData.parameters={width:0,height:0,depth:0},this.onAfterRender=this.recomputeBoolean.bind(this)}recomputeBoolean(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(-1!==this.booleanMeshSetAddress)return;for(let a=0;a<this.children.length;a++){let n=this.children[a];_A(n)&&n.recomputeBoolean(!0===e,t)}this.meshSetAddresses=[];for(let a=0;a<this.children.length;a++){var n;let i=this.children[a];if(FA(i)&&!1===i.booleanExclude&&(null===(n=i.geometry.attributes.position)||void 0===n?void 0:n.count)>0&&i.geometry.drawRange.count>0){if(-1===i.booleanMeshSetAddress){var r;if((null!==(r=i.geometry.index)&&void 0!==r?r:i.geometry.getAttribute("position")).count/3<15e5&&(i.booleanMeshSetAddress=iA.getMeshSet(i.geometry,!0===e,t)),-1===i.booleanMeshSetAddress)return;iA.transformMeshSet(i.booleanMeshSetAddress,i.matrix),i.booleanMatrixInvOld.copy(i.matrix).invert(),i.booleanWasTransformed=!1}else _A(i)&&!0===i.needsTransformForDownstream?(iA.transformMeshSet(i.booleanMeshSetAddress,i.matrix),i.needsTransformForDownstream=!1):!0===i.booleanWasTransformed&&(oM.multiplyMatrices(i.matrix,i.booleanMatrixInvOld),iA.transformMeshSet(i.booleanMeshSetAddress,oM),i.booleanMatrixInvOld.copy(i.matrix).invert(),i.booleanWasTransformed=!1);this.meshSetAddresses.push(i.booleanMeshSetAddress)}}if(0===this.meshSetAddresses.length)return void this.geometry.setDrawRange(0,0);if(!0===e)return iA.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let i=this.geometry;i.dispose(),this.geometry=new zi,this.geometry.userData=i.userData,this.geometry.boundingSphere=i.boundingSphere;try{this.booleanMeshSetAddress=iA.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(o){this.booleanMeshSetAddress=0,console.error(o)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,YC(this),XC(this)}updateGeometry(e,t){let n=e.parameters;void 0!==n.operation&&(this.booleanOp=n.operation),void 0!==n.phongAngle&&(this.phongAngle=n.phongAngle),this.invalidateDownstreamBooleanData().recomputeBoolean()}},cM=class extends(tM(zA(Ks),qw)){constructor(){super(...arguments),this.objectType="EmptyObject"}static createFromState(e,t){let n=(new cM).fromState(t);return n.uuid=e,n.objectHelper.update(),n}},uM=class extends(tM(zA(Zc),Ww)){constructor(){super(...arguments),this.objectType="LightDirectional",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let e=this.shadow.camera;e.top=1250,e.bottom=-1250,e.right=1250,e.left=-1250,e.near=-1e4,e.far=2500;let t=new ku(this.shadow.camera);t.visible=!1,this._gizmos.shadowmap=t,this.update()}static createFromState(e,t,n){let r=(new uM).fromState(t,n);return r.uuid=e,r}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof ku&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof ku&&(t.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this._gizmos){let t=this._gizmos[e];t instanceof ku&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}fromDirectionalLightState(e,t){let n=void 0!==e.depth&&e.depth!==this.shadow.camera.far||void 0!==e.size&&e.size/2!==this.shadow.camera.right;return super.fromLightState(e,t),void 0!==e.size&&function(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}(this,e.size),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),n&&this.update(),this}fromState(e,t){return super.fromState(e),this.fromDirectionalLightState(e,t),this}},dM=class extends(tM(zA(Qc),Yw)){constructor(){super(...arguments),this.objectType="LightPoint",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let e=this.shadow.camera;e.fov=90,e.aspect=1,e.near=100,e.far=2500;let t=new ur(-e.far+this.position.x,-e.far+this.position.y,-e.far+this.position.z),n=new ur(e.far+this.position.x,e.far+this.position.y,e.far+this.position.z),r=new fr(t,n),i=new Ru(r,new $n(16755200));i.visible=!1,this._gizmos.shadowmap=i,this.update()}static createFromState(e,t,n){let r=(new dM).fromState(t,n);return r.uuid=e,r}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Ru&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Ru&&(t.visible=!1)}}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this._gizmos))for(let e in this._gizmos){let t=this._gizmos[e];if(t instanceof Ru){let e=this.shadow.camera,n=new ur(-e.far+this.position.x,-e.far+this.position.y,-e.far+this.position.z),r=new ur(e.far+this.position.x,e.far+this.position.y,e.far+this.position.z);t.box.set(n,r),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}fromPointLightState(e,t){return super.fromLightState(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),this}fromState(e,t){return super.fromState(e),this.fromPointLightState(e,t),this}},hM=new ur,fM=new ur,pM=new cr,mM=class extends(tM(zA(Hc),Qw)){constructor(){super(...arguments),this.objectType="LightSpot",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let e=this.shadow.camera;e.fov=2*Nn.RAD2DEG*this.angle,e.aspect=1,e.near=100,e.far=2500;let t=new ku(this.shadow.camera);t.visible=!1,this._gizmos.shadowmap=t,this.update()}static createFromState(e,t,n){let r=(new mM).fromState(t,n);return r.uuid=e,r}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof ku&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof ku&&(t.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this._gizmos){let t=this._gizmos[e];t instanceof ku&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),fM.setFromMatrixPosition(this.matrixWorld),pM.setFromRotationMatrix(this.matrixWorld),hM.copy(this.up).applyQuaternion(pM).negate().multiplyScalar(this.distance),this.target.position.copy(fM).add(hM),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}fromSpotLightState(e,t){return super.fromLightState(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.angle&&(this.angle=e.angle),void 0!==e.penumbra&&(this.penumbra=e.penumbra),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),this}fromState(e,t){return super.fromState(e),this.fromSpotLightState(e,t),this}},gM=e=>"VIDEO"===e.tagName,vM=class{static resize(e,t,n){let r,i=e/t;if(!n.image)return;let o=n.image;r=gM(o)?o.videoWidth/o.videoHeight:o.width/o.height,i>r&&("WEBCAM"==n.imageType?n.repeat.set(-1,1*r/i):n.repeat.set(1,1*r/i)),i<r&&("WEBCAM"==n.imageType?n.repeat.set(1*i/r*-1,1):n.repeat.set(1*i/r,1)),i==r&&("WEBCAM"==n.imageType?n.repeat.set(-1,1):n.repeat.set(1,1))}static resizeTextureLayer(e,t,n){let r,i=e/t,o=void 0!==n.image?n.image.width/n.image.height:1;r=i>o?{x:1,y:o/i}:i<o?{x:i/o,y:1}:{x:1,y:1},n.repeat.set(r.x,r.y),n.updateMatrix()}static resizeTextureLayers(e,t,n){let r=n.layers;for(let i=0;i<r.length;i++){let n=r[i];BC(n)&&vM.resizeTextureLayer(e,t,n.uniforms["f".concat(n.id,"_texture")].value)}}static resizeComplex(e,t,n,r){let i,o=e/t,a=n.image;i=gM(a)?a.videoWidth/a.videoHeight:a.width/a.height,r.geometry.type.includes("Shape")?(o>i&&("WEBCAM"==n.imageType?n.repeat.set(1/e*-1,1/t*i/o):n.repeat.set(1/e,1/t*i/o)),o<i&&("WEBCAM"==n.imageType?n.repeat.set(1/e*o/i*-1,1/t):n.repeat.set(1/e*o/i,1/t)),o==i&&("WEBCAM"==n.imageType?n.repeat.set(1/e*-1,1/t):n.repeat.set(1/e,1/t))):(o>i&&("WEBCAM"==n.imageType?n.repeat.set(-1,1*i/o):n.repeat.set(1,1*i/o)),o<i&&("WEBCAM"==n.imageType?n.repeat.set(1*o/i*-1,1):n.repeat.set(1*o/i,1)),o==i&&("WEBCAM"==n.imageType?n.repeat.set(-1,1):n.repeat.set(1,1)))}},yM=class extends QC{constructor(e,t){super(e,t),this.objectType="Mesh2D",this.castShadow=!0,this.receiveShadow=!0}updateGeometry(e,t){super.updateGeometry(e,t),this.material.layers&&vM.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)}},xM=class extends QC{constructor(e,t){super(e,t),this.objectType="Mesh3D",this.castShadow=!0,this.receiveShadow=!0}},bM=class extends xM{constructor(e,t){super(e,t),this.objectType="NonParametric"}},wM=new Promise((e=>{sM=e})),SM=!1;async function _M(){if(SM)return;let e=await n.e(237).then(n.bind(n,237));sM(e),SM=!0}var AM=new class{async load(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},{load:r}=await wM;r(e,((e,r)=>{e||!r?n(null!==e&&void 0!==e?e:"Something went wrong"):t(r)}))}async parse(e){let{parse:t}=await wM;try{return t(e)}catch(JR){console.error(JR)}}};async function EM(e){let t,n,r=!1;if(e.url?(t=await async function(e){return await(await fetch(e)).arrayBuffer()}(e.url),n=e.url,r=e.url.startsWith("/")):e.data&&(t=e.data.buffer),t){let e=await AM.parse(t);if(e)return{font:e,url:n,intercepted:r,arr:t}}}var CM=new ur,MM=new Ur,TM=new zr;function PM(e){let t=!1;return e.scene.objects.traverse(((e,n)=>{"Mesh"===n.type&&"TextGeometry"===n.geometry.type&&(t=!0)})),t}var DM,kM=class extends QC{constructor(e,t,n){super(new z_(t.geometry,n),n.material(t.material)),this.data=t,this.objectType="TextFrame",this.wrappedText=[""],this.charWidths=[],this.charCoords=[],this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.name=t.name,this.uuid=e,this.updateState(t,n)}async updateGeometry(e,t){var n;let r=e.parameters,i={...this.geometry.userData.parameters,...r};this.geometry.userData={parameters:i,type:"TextGeometry"},t&&(r.font||!this.geometry.font&&t.getFont(i.font))&&await this.geometry.updateFont(null!==(n=r.font)&&void 0!==n?n:i.font,t),await this.geometry.update(i),YC(this),XC(this);let{wrappedText:o,charCoords:a,charWidths:s}=this.geometry;this.wrappedText=o,this.charWidths=s,this.charCoords=a,this.resetBBoxNeedsUpdate()}updateState(e,t){this.data=e,this.material=t.material(e.material),this.fromState(e,t),this.updateGeometry({parameters:e.geometry},t)}get font(){return this.geometry.font}get initialOffsetY(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,this.geometry.userData.parameters.height,this.fontScale,this.geometry.userData.parameters.verticalAlign))&&void 0!==e?e:0}get fontScale(){return this.font?this.geometry.userData.parameters.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e,t;return(null!==(e=null===(t=this.font)||void 0===t?void 0:t.ascender)&&void 0!==e?e:1)*this.fontScale}get descender(){var e,t;return(null!==(e=null===(t=this.font)||void 0===t?void 0:t.descender)&&void 0!==e?e:1)*this.fontScale}get lineHeight(){return this.geometry.userData.parameters.fontSize*this.geometry.userData.parameters.lineHeight}raycast(e,t){let{matrixWorld:n}=this;if(MM.copy(n).invert(),TM.copy(e.ray).applyMatrix4(MM),TM.intersectBox(this.singleBBox,CM)){let r=CM.applyMatrix4(n),i=e.ray.origin.distanceTo(r);t.push({distance:i,point:r.clone(),object:this})}}},OM=pt(mt());V_.then((e=>{DM=e}));var RM=new Ur,IM=new Ur,LM=new Ur,NM=new fr,jM=new ur,BM=new Ur,FM=new Ur;function zM(e){let t=!1;return e.scene.objects.traverse(((e,n)=>{"Mesh"===n.type&&"SubdivGeometry"===n.geometry.type&&(t=!0)})),t}var UM=class extends QC{constructor(e,t,n,r){super(null!==n&&void 0!==n?n:t,r),this.subdivPointer=e,this.originalGeometry=t,this.subdividedGeometry=n,this.objectType="SubdivObject",this.hiddenMatrixOld=new Ur,this.smoothShading=!0,this.phongAngle=35,this.matrixWorldRigid=new Ur,this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!1}static createFromState(e,t,n){let{subdivPointer:r,originalGeometry:i,subdividedGeometry:o}=K_.build(t.geometry,void 0,void 0,!t.flatShading),a=n.material(t.material),s=new UM(r,i,o||void 0,a);return void 0!==t.geometry.phongAngle&&(s.phongAngle=t.geometry.phongAngle),s.calcBoundingBox(),s.freeSubdivPointer(),s.uuid=e,s.fromState(t),s}buildFromStore(e,t){var n,r,i;let{originalGeometry:o,subdividedGeometry:a,subdivPointer:s}=K_.build(e,t,this.subdivPointer,this.smoothShading,this.shearScale);void 0!==e.phongAngle&&(this.phongAngle=e.phongAngle),this.subdivPointer=s,void 0!==o&&(null!==(n=this.originalGeometry)&&void 0!==n&&n.dispose(),this.originalGeometry=o),void 0!==a&&(null!==(r=this.subdividedGeometry)&&void 0!==r&&r.dispose(),this.subdividedGeometry=null!==a&&void 0!==a?a:void 0),this.geometry=null!==(i=this.subdividedGeometry)&&void 0!==i?i:this.originalGeometry,YC(this),XC(this),e.width&&(this.geometry.userData.parameters={width:e.width,height:e.height,depth:e.depth})}updateMesh(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];K_.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e?this.shearScaleInv:void 0),this.subdividedGeometry&&K_.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e?this.shearScaleInv:void 0)}updateTopology(){var e;this.originalGeometry.dispose(),this.originalGeometry=K_.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=K_.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.geometry=null!==(e=this.subdividedGeometry)&&void 0!==e?e:this.originalGeometry}raycast(e,t){var n;this.geometry=this.originalGeometry,QC.prototype.raycast.call(this,e,t),this.geometry=null!==(n=this.subdividedGeometry)&&void 0!==n?n:this.originalGeometry}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,t=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:n,v:r,q:i}=(0,OM.SVD)(t),o=RM.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),a=IM.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),s=LM.copy(a).transpose();this.shearScale=BM.makeScale(i[0],i[1],i[2]).multiply(s).premultiply(a),this.shearScaleInv=FM.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(o,s),i.every((e=>Math.abs(i[0]-e)<.01))&&(this.shearScale=void 0,this.shearScaleInv=void 0)}activateSVDCompensation(){void 0!==this.shearScale&&(this.matrixAutoUpdate=!1,this.matrix.copy(this.matrixWorldRigid).copyPosition(this.matrixWorld),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){void 0!==this.shearScale&&(this.shearScale=void 0,this.shearScaleInv=void 0,this.matrixAutoUpdate=!0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;null===e.boundingSphere&&(e.boundingSphere=new Or);let t=e.attributes.position,n=e.boundingSphere.center;NM.setFromBufferAttribute(t),NM.getCenter(n),e.boundingSphere.radius=n.distanceTo(NM.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),NM.getSize(jM);let r={width:jM.x,height:jM.y,depth:jM.z};return this.geometry.userData.parameters=r,r}updateBoundingBox(e){let t=this.originalGeometry;NM.min.set(e[0],e[2],e[4]),NM.max.set(e[1],e[3],e[5]),this.shearScaleInv&&(NM.min.applyMatrix4(this.shearScaleInv),NM.max.applyMatrix4(this.shearScaleInv)),null===t.boundingSphere&&(t.boundingSphere=new Or);let n=t.boundingSphere.center;NM.getCenter(n),t.boundingSphere.radius=n.distanceTo(NM.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),NM.getSize(jM);let r={width:jM.x,height:jM.y,depth:jM.z};return this.geometry.userData.parameters=r,r}freeSubdivPointer(){this.subdivPointer&&(DM.free_bvh(this.subdivPointer),DM.free_subdivision_surface(this.subdivPointer),this.subdivPointer=0)}updateGeometry(e,t){this.geometry.userData.scale||(this.geometry.userData.scale=Array(3)),this.geometry.userData.scale[0]=0===this.geometry.userData.parameters.width?1:e.parameters.width/this.geometry.userData.parameters.width,this.geometry.userData.scale[1]=0===this.geometry.userData.parameters.height?1:e.parameters.height/this.geometry.userData.parameters.height,this.geometry.userData.scale[2]=0===this.geometry.userData.parameters.depth?1:e.parameters.depth/this.geometry.userData.parameters.depth,GM(this.originalGeometry.attributes,...this.geometry.userData.scale),this.originalGeometry.attributes.position.needsUpdate=!0,this.originalGeometry.attributes.normal.needsUpdate=!0,this.subdividedGeometry&&(GM(this.subdividedGeometry.attributes,...this.subdividedGeometry.userData.scale),this.subdividedGeometry.attributes.position.needsUpdate=!0,this.subdividedGeometry.attributes.normal.needsUpdate=!0),this.geometry.userData.parameters={...e.parameters}}};function GM(e,t,n,r){let i,o,a,s=e.position.array,l=e.normal.array,c=RM.makeScale(t,n,r).invert().elements;for(var u=0,d=s.length;u<d;u+=3)s[u]*=t,s[u+1]*=n,s[u+2]*=r,i=l[u],o=l[u+1],a=l[u+2],l[u]=c[0]*i+c[4]*o+c[8]*a,l[u+1]=c[1]*i+c[5]*o+c[9]*a,l[u+2]=c[2]*i+c[6]*o+c[10]*a}function VM(e,t){void 0!==t.flatShading&&(e.flatShading=t.flatShading,e.needsUpdate=!0),void 0!==t.wireframe&&(e.wireframe=t.wireframe),void 0!==t.side&&(0===t.side?e.side=0:1===t.side?e.side=1:e.side=2)}function HM(e,t,n){let r;if("SubdivGeometry"===t.geometry.type)r=UM.createFromState(e,t,n);else{let i="BooleanGeometry"===t.geometry.type?new zi:q_(t.geometry),o="materials"in t?t.materials.map((e=>n.material(e))):n.material(t.material);gx.is2DParametricMesh(i.userData.type)?r=new yM(i,o):"VectorGeometry"===(null===i||void 0===i?void 0:i.userData.type)?r=new eM(i,o):"NonParametricGeometry"===t.geometry.type?r=new bM(i,o):"BooleanGeometry"===t.geometry.type?(r=new lM(void 0,o),r.booleanOp=t.geometry.operation,void 0!==t.geometry.phongAngle&&(r.phongAngle=t.geometry.phongAngle)):r=new xM(i,o),r.uuid=e,r.fromState(t,n)}return function(e,t){if(Array.isArray(e.material))for(let n of e.material)VM(n,t);else VM(e.material,t);"SubdivObject"===e.objectType&&void 0!==t.flatShading&&(e.material.flatShading=!1,e.smoothShading=!t.flatShading,e.updateMesh())}(r,t),r}var WM=class extends zC{};function qM(e,t){let n=!1,r=t.getLayersOfType("transmission"),i=t.getLayersOfType("outline");return i.length>0&&(e.layers.set(8),r.length>0&&e.layers.enable(3),n=!0,XC(e),YC(e)),0===r.length&&0===i.length&&e.layers.set(0),n}function YM(e,t){if(!t.layers)return!1;let n=!1,r=t.getLayersOfType("transmission"),i=t.getLayersOfType("outline");return r.length>0&&(e.layers.set(3),i.length>0&&e.layers.enable(8),n=!0),0===r.length&&0===i.length&&e.layers.set(0),n}function XM(e){"material"in e&&function(e){(function(e){return Array.isArray(e)?e:[e]})(e).forEach((e=>{e instanceof WM||e.dispose()}))}(e.material),"geometry"in e&&e.geometry.dispose()}var QM=new fu,KM=new Ur,ZM=new zr;function JM(e,t,n){let r=e.cloner;if(r)for(let i of r.children){let r=KM.copy(i.matrixWorld).invert(),o=ZM.copy(t.ray).applyMatrix4(r),a=e.matrixWorld;o.applyMatrix4(a);let s=QM;s.set(o.origin,o.direction),s.near=t.near,s.far=t.far,s.intersectObject(e,!1).length>0&&n.push({object:e})}}var $M=new ur,eT=class extends(TA(ol)){constructor(e,t){super(),this.objectType="Scene",this.backupFog=new il(16777215,.1,2e3),this.fogUseBGColor=!1,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.bgColor=new XA(1,1,1,1),this.entityByUuid={},this.ambientLight=new Bc(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.postprocessing=e.postprocessing,this.init(e,t),this.matrixAutoUpdate=!1}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=function(e){let t=!1;return e.traverseEntity((e=>{if(e instanceof io)if(Array.isArray(e.material))for(let n=0;n<e.material.length;n++)YM(e,e.material[n])&&(t=!0);else YM(e,e.material)&&(t=!0)})),t}(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=function(e){let t=!1;return e.traverseEntity((e=>{if(e instanceof io)if(Array.isArray(e.material))for(let n=0;n<e.material.length;n++)qM(e,e.material[n])&&(t=!0);else qM(e,e.material)&&(t=!0)})),t}(this),this.needsNormalDirty=!1),this._needsNormal}find(e){if(""===e||void 0===e)return;let t=this.entityByUuid[e];return void 0===t?this.getObjectByProperty("uuid",e):t}get enableFog(){return null!==this.fog}set enableFog(e){this.fog=!0===e?this.backupFog:null}init(e,t){if(this.createChildrenObjects(e.objects,this,t),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(bA(e.backgroundColor,t)),this.updateFog(e.fog,t),this.updateAmbientLight(e.environment.ambientLight,t),this.activeCamera=this.personalCamera,null!==e.publish.playCamera){let t=this.find(e.publish.playCamera);t instanceof iM&&this.switchActiveCamera(t)}this.traverse((e=>{_A(e)&&e.recomputeBoolean()}))}clearScene(){this.traverseEntity((e=>{XM(e)}));for(let e of this.children)BA(e)&&e.removeFromParent()}resetAfterClear(e,t){this.init(e,t)}createPersonalCamera(){let e=iM.createFromState(eT.PERSONAL_CAMERA_ID,{..._x.defaultData,name:"Personal Camera"});return e.objectHelper.visible=!1,delete e.isEntity,this.registerObjectCreatedInLegacy(e),e}raycast(e){let t=[],n=r=>{for(let i of r.children)BA(i)&&!i.raycastLock&&i.visible&&((SA(i)||EA(i)&&this.enableHelpers&&i.objectHelper.visible)&&(e.intersectObject(i,!1,t),JM(i,e,t)),n(i))};return n(this),t}traverseEntity(e){for(let t of this.children)BA(t)&&t.traverseEntity(e)}traverseVisibleEntity(e){for(let t of this.children)BA(t)&&t.visible&&t.traverseVisibleEntity(e)}updateFog(e,t){this.enableFog=e.enabled,this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=bA(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}dispose(){this.clearScene()}updateAmbientLight(e,t){MA(this.ambientLight,e,t),void 0!==e.groundColor&&(this.ambientLight.groundColor=bA(e.groundColor,t)),void 0!==e.enabled&&(this.ambientLight.visible=e.enabled)}switchActiveCamera(e){this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1}setBackgroundColor(e){this.bgColor=e,!0===this.fogUseBGColor&&(this.backupFog.color=e)}createChildrenObjects(e,t,n){for(let r of e)this.createChildObject(r.id,r.data,r.children,t,n)}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createChildObject(e,t,n,r,i){let o=function(e,t,n){return"Mesh"===t.type?"TextGeometry"===t.geometry.type?new kM(e,t,n):HM(e,t,n):"Empty"===t.type?cM.createFromState(e,t):"PointLight"===t.type?dM.createFromState(e,t,n):"SpotLight"===t.type?mM.createFromState(e,t,n):"DirectionalLight"===t.type?uM.createFromState(e,t,n):rx.is(t.type)?iM.createFromState(e,t):(console.error(t),new cM)}(e,t,i);return o&&(this.entityByUuid[e]=o,r.add(o),_A(r)&&SA(o)&&(o.prevBooleanObjectParent=r),this.createChildrenObjects(n,o,i)),o}getCenter(e){let t=[];for(let r=0,i=e.length;r<i;++r){let{id:n,recursive:i}=e[r],o=this.find(n),a=i?o.recursiveBBox:o.singleBBox;t.push(...a.vertices)}let n=new fr;return n.setFromPoints(t),n.getCenter($M),$M}copyMatrixWorld(e,t){if(null===e)return void t.identity();let n=this.find(e);n?t.copy(n.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var n;if(null===e)return void t.identity();let r=null===(n=this.find(e))||void 0===n?void 0:n.parent;r?t.copy(r.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity((t=>{if(t instanceof QC)if(Array.isArray(t.material))for(let n=0;n<t.material.length;n++)t.material[n]instanceof zC&&e(t.material[n]);else t.material instanceof zC&&e(t.material)}))}updateCanvasSize(e,t){let n,r;this.activeCamera.setViewplaneSize(e,t),e>=t?(n=t/e,r=1):(n=1,r=e/t),this.traverseMaterial((e=>{e.getLayersOfType("transmission").forEach((e=>{e.uniforms["f".concat(e.id,"_aspectRatio")].value.x=n,e.uniforms["f".concat(e.id,"_aspectRatio")].value.y=r}))}))}},tT=eT;tT.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera";var nT=(e,t)=>{let n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},rT=e=>e*(Math.PI/180),iT=e=>e*(180/Math.PI),oT=new Map,aT=e=>{oT.has(e)&&clearTimeout(oT.get(e)),oT.set(e,setTimeout(e,100))},sT=(e,t,n)=>{let r,i=t.split(/[ ,]+/g);for(let o=0;o<i.length;o+=1)r=i[o],e.addEventListener?e.addEventListener(r,n,!1):e.attachEvent&&e.attachEvent(r,n)},lT=(e,t,n)=>{let r,i=t.split(/[ ,]+/g);for(let o=0;o<i.length;o+=1)r=i[o],e.removeEventListener?e.removeEventListener(r,n):e.detachEvent&&e.detachEvent(r,n)},cT=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),uT=()=>{if(typeof window>"u")return;return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},dT=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},hT=(e,t,n)=>{let r=fT(e);for(let i in r)if(r.hasOwnProperty(i))if("string"==typeof t)r[i]=t+" "+n;else{let e="";for(let r=0,i=t.length;r<i;r+=1)e+=t[r]+" "+n+", ";r[i]=e.slice(0,-2)}return r},fT=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach((function(n){t[n+e.charAt(0).toUpperCase()+e.slice(1)]=""})),t},pT=(e,t)=>{for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},mT=(e,t)=>{if(e.length)for(let n=0,r=e.length;n<r;n+=1)t(e[n]);else t(e)};typeof window<"u"&&(gT="ontouchstart"in window,vT=!!window.PointerEvent,yT=!!window.MSPointerEvent);var gT,vT,yT,xT,bT={start:"mousedown",move:"mousemove",end:"mouseup"},wT={};function ST(){}vT?xT={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:yT?xT={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:gT?(xT={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},wT=bT):xT=bT,ST.prototype.on=function(e,t){var n,r=this,i=e.split(/[ ,]+/g);r._handlers_=r._handlers_||{};for(var o=0;o<i.length;o+=1)n=i[o],r._handlers_[n]=r._handlers_[n]||[],r._handlers_[n].push(t);return r},ST.prototype.off=function(e,t){var n=this;return n._handlers_=n._handlers_||{},void 0===e?n._handlers_={}:void 0===t?n._handlers_[e]=null:n._handlers_[e]&&n._handlers_[e].indexOf(t)>=0&&n._handlers_[e].splice(n._handlers_[e].indexOf(t),1),n},ST.prototype.trigger=function(e,t){var n,r=this,i=e.split(/[ ,]+/g);r._handlers_=r._handlers_||{};for(var o=0;o<i.length;o+=1)n=i[o],r._handlers_[n]&&r._handlers_[n].length&&r._handlers_[n].forEach((function(e){e.call(r,{type:n,target:r},t)}))},ST.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=((e,t)=>{let n={};for(let r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)?n[r]=t[r]:e.hasOwnProperty(r)&&(n[r]=e[r]);return n})(t.options,e))},ST.prototype.bindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[t]=function(){"function"==typeof n["on"+t]?n["on"+t].apply(n,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},sT(e,xT[t],n._domHandlers_[t]),wT[t]&&sT(e,wT[t],n._domHandlers_[t]),n},ST.prototype.unbindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},lT(e,xT[t],n._domHandlers_[t]),wT[t]&&lT(e,wT[t],n._domHandlers_[t]),delete n._domHandlers_[t],this};var _T=ST;function AT(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=AT.id,AT.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}AT.prototype=new _T,AT.constructor=AT,AT.id=0,AT.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},AT.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=((e,t)=>{let n=fT(e);for(let r in n)n.hasOwnProperty(r)&&(n[r]=t);return n})("borderRadius","50%"),n=hT("transition","opacity",e),r={};return r.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},r.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},r.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},pT(r.el,n),"circle"===this.options.shape&&pT(r.back,t),pT(r.front,t),this.applyStyles(r),this},AT.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var n in e[t])this.ui[t].style[n]=e[t][n];return this},AT.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},AT.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},AT.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},AT.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout((function(){t.ui.el.style.opacity=1}),0),t.showTimeout=setTimeout((function(){t.trigger("shown",t.instance),"function"==typeof e&&e.call(this)}),t.options.fadeTime)),t},AT.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout((function(){var n="dynamic"===t.options.mode?"none":"block";t.ui.el.style.display=n,"function"==typeof e&&e.call(t),t.trigger("hidden",t.instance)}),t.options.fadeTime),t.options.restJoystick){let n=t.options.restJoystick,r={};r.x=!0===n||!1!==n.x?0:t.instance.frontPosition.x,r.y=!0===n||!1!==n.y?0:t.instance.frontPosition.y,t.setPosition(e,r)}return t},AT.prototype.setPosition=function(e,t){var n=this;n.frontPosition={x:t.x,y:t.y};var r=n.options.fadeTime+"ms",i={};i.front=hT("transition",["top","left"],r);var o={front:{}};o.front={left:n.frontPosition.x+"px",top:n.frontPosition.y+"px"},n.applyStyles(i),n.applyStyles(o),n.restTimeout=setTimeout((function(){"function"==typeof e&&e.call(n),n.restCallback()}),n.options.fadeTime)},AT.prototype.restCallback=function(){var e=this,t={};t.front=hT("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)},AT.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},AT.prototype.computeDirection=function(e){var t,n,r,i=e.angle.radian,o=Math.PI/4,a=Math.PI/2;if(i>o&&i<3*o&&!e.lockX?t="up":i>-o&&i<=o&&!e.lockY?t="left":i>3*-o&&i<=-o&&!e.lockX?t="down":e.lockY||(t="right"),e.lockY||(n=i>-a&&i<a?"left":"right"),e.lockX||(r=i>0?"up":"down"),e.force>this.options.threshold){var s,l={};for(s in this.direction)this.direction.hasOwnProperty(s)&&(l[s]=this.direction[s]);var c={};for(s in this.direction={x:n,y:r,angle:t},e.direction=this.direction,l)l[s]===this.direction[s]&&(c[s]=!0);if(c.x&&c.y&&c.angle)return e;(!c.x||!c.y)&&this.trigger("plain",e),c.x||this.trigger("plain:"+n,e),c.y||this.trigger("plain:"+r,e),c.angle||this.trigger("dir dir:"+t,e)}else this.resetDirection();return e};var ET=AT;function CT(e,t){var n=this;n.nipples=[],n.idles=[],n.actives=[],n.ids=[],n.pressureIntervals={},n.manager=e,n.id=CT.id,CT.id+=1,n.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},n.config(t),("static"===n.options.mode||"semi"===n.options.mode)&&(n.options.multitouch=!1),n.options.multitouch||(n.options.maxNumberOfNipples=1);let r=getComputedStyle(n.options.zone.parentElement);return r&&"flex"===r.display&&(n.parentIsFlex=!0),n.updateBox(),n.prepareNipples(),n.bindings(),n.begin(),n.nipples}CT.prototype=new _T,CT.constructor=CT,CT.id=0,CT.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(e){if(void 0===e)return t[0];for(var n=0,r=t.length;n<r;n+=1)if(t[n].identifier===e)return t[n];return!1}},CT.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"},CT.prototype.begin=function(){var e=this,t=e.options;if("static"===t.mode){var n=e.createNipple(t.position,e.manager.getIdentifier());n.add(),e.idles.push(n)}},CT.prototype.createNipple=function(e,t){var n=this,r=n.manager.scroll,i={},o=n.options,a=n.parentIsFlex?r.x:r.x+n.box.left,s=n.parentIsFlex?r.y:r.y+n.box.top;if(e.x&&e.y)i={x:e.x-a,y:e.y-s};else if(e.top||e.right||e.bottom||e.left){var l=document.createElement("DIV");l.style.display="hidden",l.style.top=e.top,l.style.right=e.right,l.style.bottom=e.bottom,l.style.left=e.left,l.style.position="absolute",o.zone.appendChild(l);var c=l.getBoundingClientRect();o.zone.removeChild(l),i=e,e={x:c.left+r.x,y:c.top+r.y}}var u=new ET(n,{color:o.color,size:o.size,threshold:o.threshold,fadeTime:o.fadeTime,dataOnly:o.dataOnly,restJoystick:o.restJoystick,restOpacity:o.restOpacity,mode:o.mode,identifier:t,position:e,zone:o.zone,frontPosition:{x:0,y:0},shape:o.shape});return o.dataOnly||(dT(u.ui.el,i),dT(u.ui.front,u.frontPosition)),n.nipples.push(u),n.trigger("added "+u.identifier+":added",u),n.manager.trigger("added "+u.identifier+":added",u),n.bindNipple(u),u},CT.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},CT.prototype.bindNipple=function(e){var t,n=this,r=function(e,r){t=e.type+" "+r.id+":"+e.type,n.trigger(t,r)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)},CT.prototype.pressureFn=function(e,t,n){var r=this,i=0;clearInterval(r.pressureIntervals[n]),r.pressureIntervals[n]=setInterval(function(){var n=e.force||e.pressure||e.webkitForce||0;n!==i&&(t.trigger("pressure",n),r.trigger("pressure "+t.identifier+":pressure",n),i=n)}.bind(r),100)},CT.prototype.onstart=function(e){var t=this,n=t.options,r=e;e=cT(e),t.updateBox();return mT(e,(function(i){t.actives.length<n.maxNumberOfNipples?t.processOnStart(i):r.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach((function(n){if(Object.values(r.touches).findIndex((function(e){return e.identifier===n}))<0){var i=[e[0]];i.identifier=n,t.processOnEnd(i)}})),t.actives.length<n.maxNumberOfNipples&&t.processOnStart(i))})),t.manager.bindDocument(),!1},CT.prototype.processOnStart=function(e){var t,n=this,r=n.options,i=n.manager.getIdentifier(e),o=e.force||e.pressure||e.webkitForce||0,a={x:e.pageX,y:e.pageY},s=n.getOrCreate(i,a);s.identifier!==i&&n.manager.removeIdentifier(s.identifier),s.identifier=i;var l=function(t){t.trigger("start",t),n.trigger("start "+t.id+":start",t),t.show(),o>0&&n.pressureFn(e,t,t.identifier),n.processOnMove(e)};if((t=n.idles.indexOf(s))>=0&&n.idles.splice(t,1),n.actives.push(s),n.ids.push(s.identifier),"semi"!==r.mode)l(s);else{if(!(nT(a,s.position)<=r.catchDistance))return s.destroy(),void n.processOnStart(e);l(s)}return s},CT.prototype.getOrCreate=function(e,t){var n,r=this,i=r.options;return/(semi|static)/.test(i.mode)?(n=r.idles[0])?(r.idles.splice(0,1),n):"semi"===i.mode?r.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1):n=r.createNipple(t,e)},CT.prototype.processOnMove=function(e){var t=this,n=t.options,r=t.manager.getIdentifier(e),i=t.nipples.get(r),o=t.manager.scroll;if((e=>isNaN(e.buttons)?0!==e.pressure:0!==e.buttons)(e)){if(!i)return console.error("Found zombie joystick with ID "+r),void t.manager.removeIdentifier(r);if(n.dynamicPage){var a=i.el.getBoundingClientRect();i.position={x:o.x+a.left,y:o.y+a.top}}i.identifier=r;var s=i.options.size/2,l={x:e.pageX,y:e.pageY};n.lockX&&(l.y=i.position.y),n.lockY&&(l.x=i.position.x);var c,u,d=nT(l,i.position),h=((e,t)=>{let n=t.x-e.x,r=t.y-e.y;return iT(Math.atan2(r,n))})(l,i.position),f=rT(h),p=d/s,m={distance:d,position:l};if("circle"===i.options.shape?(c=Math.min(d,s),u=((e,t,n)=>{let r={x:0,y:0};return n=rT(n),r.x=e.x-t*Math.cos(n),r.y=e.y-t*Math.sin(n),r})(i.position,c,h)):(u=((e,t,n)=>({x:Math.min(Math.max(e.x,t.x-n),t.x+n),y:Math.min(Math.max(e.y,t.y-n),t.y+n)}))(l,i.position,s),c=nT(u,i.position)),n.follow){if(d>s){let e=l.x-u.x,n=l.y-u.y;i.position.x+=e,i.position.y+=n,i.el.style.top=i.position.y-(t.box.top+o.y)+"px",i.el.style.left=i.position.x-(t.box.left+o.x)+"px",d=nT(l,i.position)}}else l=u,d=c;var g=l.x-i.position.x,v=l.y-i.position.y;i.frontPosition={x:g,y:v},n.dataOnly||dT(i.ui.front,i.frontPosition);var y={identifier:i.identifier,position:l,force:p,pressure:e.force||e.pressure||e.webkitForce||0,distance:d,angle:{radian:f,degree:h},vector:{x:g/s,y:-v/s},raw:m,instance:i,lockX:n.lockX,lockY:n.lockY};(y=i.computeDirection(y)).angle={radian:rT(180-h),degree:180-h},i.trigger("move",y),t.trigger("move "+i.id+":move",y)}else this.processOnEnd(e)},CT.prototype.processOnEnd=function(e){var t=this,n=t.options,r=t.manager.getIdentifier(e),i=t.nipples.get(r),o=t.manager.removeIdentifier(i.identifier);!i||(n.dataOnly||i.hide((function(){"dynamic"===n.mode&&(i.trigger("removed",i),t.trigger("removed "+i.id+":removed",i),t.manager.trigger("removed "+i.id+":removed",i),i.destroy())})),clearInterval(t.pressureIntervals[i.identifier]),i.resetDirection(),i.trigger("end",i),t.trigger("end "+i.id+":end",i),t.ids.indexOf(i.identifier)>=0&&t.ids.splice(t.ids.indexOf(i.identifier),1),t.actives.indexOf(i)>=0&&t.actives.splice(t.actives.indexOf(i),1),/(semi|static)/.test(n.mode)?t.idles.push(i):t.nipples.indexOf(i)>=0&&t.nipples.splice(t.nipples.indexOf(i),1),t.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(t.manager.ids[o.id]=o.identifier))},CT.prototype.onDestroyed=function(e,t){var n=this;n.nipples.indexOf(t)>=0&&n.nipples.splice(n.nipples.indexOf(t),1),n.actives.indexOf(t)>=0&&n.actives.splice(n.actives.indexOf(t),1),n.idles.indexOf(t)>=0&&n.idles.splice(n.idles.indexOf(t),1),n.ids.indexOf(t.identifier)>=0&&n.ids.splice(n.ids.indexOf(t.identifier),1),n.manager.removeIdentifier(t.identifier),n.manager.unbindDocument()},CT.prototype.destroy=function(){var e=this;for(var t in e.unbindEvt(e.options.zone,"start"),e.nipples.forEach((function(e){e.destroy()})),e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var MT=CT;function TT(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=uT(),t.config(e),t.prepareCollections();var n=function(){var e;t.collections.forEach((function(n){n.forEach((function(n){e=n.el.getBoundingClientRect(),n.position={x:t.scroll.x+e.left,y:t.scroll.y+e.top}}))}))};if(typeof window>"u")return t.collections;sT(window,"resize",(function(){aT(n)}));var r=function(){t.scroll=uT()};return sT(window,"scroll",(function(){aT(r)})),t.collections}TT.prototype=new _T,TT.constructor=TT,TT.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var n;return e.collections.every((function(e){return!(n=e.get(t))})),n}},TT.prototype.create=function(e){return this.createCollection(e)},TT.prototype.createCollection=function(e){var t=this,n=new MT(t,e);return t.bindCollection(n),t.collections.push(n),n},TT.prototype.bindCollection=function(e){var t,n=this,r=function(e,r){t=e.type+" "+r.id+":"+e.type,n.trigger(t,r)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)},TT.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)},TT.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||!0===e)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)},TT.prototype.getIdentifier=function(e){var t;return e?void 0===(t=void 0===e.identifier?e.pointerId:e.identifier)&&(t=this.latest||0):t=this.index,void 0===this.ids[t]&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]},TT.prototype.removeIdentifier=function(e){var t={};for(var n in this.ids)if(this.ids[n]===e){t.id=n,t.identifier=this.ids[n],delete this.ids[n];break}return t},TT.prototype.onmove=function(e){return this.onAny("move",e),!1},TT.prototype.onend=function(e){return this.onAny("end",e),!1},TT.prototype.oncancel=function(e){return this.onAny("end",e),!1},TT.prototype.onAny=function(e,t){var n,r=this,i="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=cT(t);var o=function(e,t,n){n.ids.indexOf(t)>=0&&(n[i](e),e._found_=!0)};return mT(t,(function(e){n=r.getIdentifier(e),mT(r.collections,o.bind(null,e,n)),e._found_||r.removeIdentifier(n)})),!1},TT.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach((function(e){e.destroy()})),e.off()},TT.prototype.onDestroyed=function(e,t){var n=this;if(n.collections.indexOf(t)<0)return!1;n.collections.splice(n.collections.indexOf(t),1)};var PT=new TT,DT=function(e){return PT.create(e)};function kT(e,t){let n=new zi,{positions:r,triIndices:i}=J_(e.getAttribute("position"),e.getIndex());return n.setAttribute("position",new Oi(r,3)),n.setIndex(i),t&&n.applyMatrix4(t),n}var OT=class extends fu{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.forEach((e=>{e.visible&&this.intersectObject(e,t,n)})),n}createRaycastLineHelper(){let e=new cl({color:65280,linewidth:10}),t=new ur(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),n=new ur(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),r=this.camera.far-this.camera.near,i=(new ur).addVectors(t,n.multiplyScalar(r)),o=new zi;return o.setFromPoints([t,i]),new ml(o,e)}},RT=pt(gt()),IT=new Map;function LT(e){if("string"==typeof e)return e;let t=IT.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},IT.set(e,t)),t.url}var NT,jT=class{constructor(e){let t,{src:n,volume:r,delay:i,loop:o}=e;this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)},t="string"==typeof n?{src:n}:{src:LT(n),format:"wav"},this.sound=new RT.Howl(t),this.sound.on("end",this.onEnd),this.src=n,void 0!==r&&(this.volume=r),void 0!==i&&(this.delay=i),void 0!==o&&(this.loop=o)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout((()=>{this.sound.play(),this.clearDelay()}),this.delay)}fade(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout((()=>{this.sound.fade(this._volume,0,t),this.clearFade()}),e)):this.sound.fade(this._volume,0,t)}on(e,t,n){this.sound.on(e,t,n)}off(e,t,n){this.sound.off(e,t,n)}play(){"playing"===this._status||this.sound.playing()||("paused"===this._status?(0===this.sound.seek()?this.replay():this.sound.play(),this._status="playing"):"stopped"===this._status&&(this.replay(),this._status="playing"))}pause(){"playing"===this._status&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},BT=new WeakMap,FT=class extends Ic{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){let i=new Nc(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(e=>{let n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)}),n,r)}decodeDracoFile(e,t,n,r){let i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){for(let s in t.attributeTypes){let e=t.attributeTypes[s];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[s]=e.name)}let n=JSON.stringify(t);if(BT.has(e)){let t=BT.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r,i=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(i,o).then((n=>(r=n,new Promise(((n,o)=>{r._callbacks[i]={resolve:n,reject:o},r.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return a.catch((()=>!0)).then((()=>{r&&i&&this._releaseTask(r,i)})),BT.set(e,{key:n,promise:a}),a}_createGeometry(e){let t=new zi;e.index&&t.setIndex(new Pi(e.index.array,1));for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n],i=r.name,o=r.array,a=r.itemSize;t.setAttribute(i,new Pi(o,a))}return t}_loadLibrary(e,t){let n=new Nc(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise(((t,r)=>{n.load(e,t,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{let n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);let r=zT.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){let e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){let n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));let n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}};function zT(){let e,t;function n(e,t,n,r,i,o){let a=o.num_components(),s=n.num_points()*a,l=s*i.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,o,c,l,u);let d=new i(e.HEAPF32.buffer,u,s).slice();return e._free(u),{name:r,array:d,itemSize:a}}onmessage=function(r){let i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":let r=i.buffer,o=i.taskConfig;t.then((e=>{let t=e.draco,a=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(r),r.byteLength);try{let e=function(e,t,r,i){let o,a,s=i.attributeIDs,l=i.attributeTypes,c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)o=new e.Mesh,a=t.DecodeBufferToMesh(r,o);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,a=t.DecodeBufferToPointCloud(r,o)}if(!a.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());let u={index:null,attributes:[]};for(let d in s){let r,a,c=self[l[d]];if(i.useUniqueIDs)a=s[d],r=t.GetAttributeByUniqueId(o,a);else{if(a=t.GetAttributeId(o,e[s[d]]),-1===a)continue;r=t.GetAttribute(o,a)}u.attributes.push(n(e,t,o,d,c,r))}return c===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){let r=3*n.num_faces(),i=4*r,o=e._malloc(i);t.GetTrianglesUInt32Array(n,i,o);let a=new Uint32Array(e.HEAPF32.buffer,o,r).slice();return e._free(o),{array:a,itemSize:1}}(e,t,o)),e.destroy(o),u}(t,a,s,o),r=e.attributes.map((e=>e.array.buffer));e.index&&r.push(e.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:e},r)}catch(ZR){console.error(ZR),self.postMessage({type:"error",id:i.id,error:ZR.message})}finally{t.destroy(s),t.destroy(a)}}))}}}async function UT(e){if(NT){let t,n={attributeIDs:NT.defaultAttributeIDs,attributeTypes:NT.defaultAttributeTypes,useUniqueIDs:!1};try{t=await NT.decodeGeometry(new Int8Array(e).buffer,n)}catch(JR){console.error(JR)}if(t)return{index:t.index?{array:t.index.array}:void 0,attributes:Object.entries(t.attributes).map((e=>{let[t,n]=e;return{name:t,itemSize:n.itemSize,array:n.array}}))}}return null}async function GT(e,t){let[n,r]=sv(Ty.deserialize(new Uint8Array(e)));cb(n);let i=[];n.scene.objects.traverse(((e,t)=>{"Mesh"===t.type&&"NonParametricGeometry"===t.geometry.type&&void 0!==t.geometry.data.draco&&i.push(t)})),i.length&&await(NT||(NT=new FT).setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload(),NT.decoderPending);for(let o of i){let e=await UT(cv(o.geometry.data.draco));if(e){e.index&&(o.geometry.data.index={array:e.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let t={};e.attributes.forEach((e=>{let{name:n,array:r,itemSize:i}=e;t[n]={array:r,itemSize:i,type:"Float32Array",normalized:!1}})),o.geometry.data.attributes=t,o.geometry.data.draco=void 0}}return t&&t(n),r.result().data}function VT(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var HT=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.deletedMaterial=new WM(px.defaultTwoLayerData("phong"),this),this.deletedImage=new bC(sb.emptyImage),this.materials={},this.images={},this.colors={},this.audios={},this.fonts={},this.penumbraSize=[],this.onImageLoad=()=>{this._onImageLoad&&this._onImageLoad()},this.onFontLoad=()=>{this._onFontLoad&&this._onFontLoad()},t.images)for(let[n,r]of Object.entries(t.images))this.addImage(n,r);if(t.audios)for(let[n,r]of Object.entries(t.audios))this.addAudio(n,r.data);this.reset(e)}setOnImageLoad(e){this._onImageLoad=e}setOnFontLoad(e){this._onFontLoad=e}reset(e){for(let[t,n]of Object.entries(e.images))this.addImage(t,n);for(let[t,n]of Object.entries(e.colors))this.addColor(t,n);for(let[t,n]of Object.entries(e.materials))this.addMaterial(t,new WM(n,this));for(let[t,n]of Object.entries(e.audios))this.addAudio(t,n.data);for(let[t,n]of Object.entries(e.fonts))this.addFont(t,n);this.penumbraSize=e.penumbraSize}addMaterial(e,t){t.uuid=e,this.materials[e]=t}deleteMaterial(e){this.materials[e]&&(this.materials[e].dispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){var t;return null!==(t=this.materials[e])&&void 0!==t?t:this.deletedMaterial}material(e){return"string"==typeof e?this.getMaterialOrDeletedPlaceholder(e):new zC(e,this)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.images[e].updateSrc(t.data),!0):(this.images[e]=new bC(t,this.onImageLoad),!1)}deleteImage(e){this.images[e]&&delete this.images[e]}getDefaultImage(){return this.images.image_0}getImage(e){var t;return null!==(t=this.images[e])&&void 0!==t?t:this.deletedImage}image(e){return"string"==typeof e?this.getImage(e):new xC(e,this.onImageLoad)}getImages(){return this.images}addColor(e,t){return this.colors[e]?("a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):(this.colors[e]=new pC(t.r,t.g,t.b,"a"in t?t.a:1),!1)}updateColor(e,t){if(this.colors[e]){var n,r,i,o;let a=this.colors[e];return this.colors[e].r=null!==(n=t.r)&&void 0!==n?n:a.r,this.colors[e].g=null!==(r=t.g)&&void 0!==r?r:a.g,this.colors[e].b=null!==(i=t.b)&&void 0!==i?i:a.b,this.colors[e].a=null!==(o=t.a)&&void 0!==o?o:a.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if("string"!=typeof e)return new XA(e.r,e.g,e.b,"a"in e?e.a:1);{let n=this.getColor(e);n?t=n:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new XA(0,0,0,0))}return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof jT)return t;{let n=new jT({src:t});return this.audios[e]=n,n}}deleteAudio(e){this.audios[e]&&delete this.audios[e]}addFont(e,t){this.fonts[e]=new class{constructor(e,t){var n;this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=null!==(n=e.isUserFont)&&void 0!==n&&n,this._loadingPromise=EM(e).then((e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,t())}))}update(e,t){var n;this._isLoaded=!1,this._isUserFont=null!==(n=e.isUserFont)&&void 0!==n&&n,this._loadingPromise=EM(e).then((e=>{e&&(this._arrayBuffer=e.arr,this._url=e.url,this.font=e.font,this._intercepted=e.intercepted,this._isLoaded=!0,t())}))}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}async reverseLigaturesTable(e,t,n){let{Bidi:r}=await wM,i=new r;i.registerModifier("glyphIndex",null,(t=>e.charToGlyphIndex(t.char))),i.applyFeatures(e,e.defaultRenderOptions.features),i.getTextGlyphs(t);let o=i.tokenizer.tokens,a=[],s=0,l=n.length===o.length;for(let c=0;c<n.length;c++){let r=n[c].index,i=String.fromCharCode(n[c].unicode),u=o[s];if(VT(r,u)||l)a.push({char:i,index:r,replacements:[u.state.glyphIndex],replacementChars:[u.char]}),s++;else{let n=u.char,o="",l=[u.state.glyphIndex],c=[],d=!1;for(;!d;)s++,o=t.charAt(s),n+=o,l.push(e.charToGlyphIndex(o)),c=e.stringToGlyphs(n),1===c.length&&c[0].index===r&&(d=!0),s>t.length&&(d=!0);a.push({char:i,index:r,replacements:l,replacementChars:Array.from(n)}),s++}}return a}async generateShapes(e,t){await this._loadingPromise;let n,r=this.font,i=t.fontSize/this.unitsPerEm,o=t.fontSize*t.lineHeight,a=e.map((e=>this.getTextWidth(e,t))),s=t.width,l=this.getCharWidth("\n",t),c=1===t.horizontalAlign?l:0,u=this.computeSpaceWidthForLine(e,0,t),d=this.getLineInitialOffsetX(a[0],s,t.horizontalAlign,e[0],l),h=this.getLineInitialOffsetY(o,e.length,t.height,i,t.verticalAlign),f=[],p=e.map((e=>[])),m=e.map((e=>[]));for(let v=0;v<e.length;v++){let g=e[v],y={features:{liga:!0}},x=[];try{x=r.stringToGlyphs(g,y)}catch(wG){console.warn(wG)}d=this.getLineInitialOffsetX(a[v],s,t.horizontalAlign,g,l);let b=[];try{b=await this.reverseLigaturesTable(r,g,x)}catch(wG){console.warn(wG)}u=this.computeSpaceWidthForLine(e,v,t);for(let e=0;e<x.length;e++){let o=x[e],a=0===o.index?"\n":o.unicode?String.fromCharCode(o.unicode):void 0,s=b[e],l=0,g=0;0===e&&2===t.horizontalAlign&&void 0!==o.leftSideBearing&&(g=-o.leftSideBearing*i),n&&(l=r.getKerningValue(o,n)*i),d+=g+l;let y=0;if("\n"===a)y=c;else if(" "===a)y=u;else{let e=this.createPath(o,i,d,h,t);e&&(y=e.offsetX-(l+g),f.push(e.path))}if(1===s.replacements.length)m[v].push([d,h]),p[v].push(y);else{let e=s.replacements.map((e=>{var t;return(null!==(t=r.glyphs.get(e).advanceWidth)&&void 0!==t?t:0)*i})),t=e.reduce(((e,t)=>e+t),0),n=e.map((e=>e/t)),o=d;for(let r=0;r<n.length;r++){let e=y*n[r];m[v].push([o,h]),p[v].push(e),o+=e}}d+=y,n=o}h-=o}let g=[];for(let v=0,y=f.length;v<y;v++)g.push(...f[v].toShapes());return{shapes:g,charWidths:p,lineWidths:a,charCoords:m}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.ascender)&&void 0!==e?e:0}get descender(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.descender)&&void 0!==e?e:0}get familyName(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.names.fontFamily)&&void 0!==e?e:""}get subfamilyName(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.names.fontSubfamily)&&void 0!==e?e:""}get unitsPerEm(){var e,t;return null!==(e=null===(t=this.font)||void 0===t?void 0:t.unitsPerEm)&&void 0!==e?e:1}getLineInitialOffsetX(e,t,n,r,i){return(3===n||2===n)&&r.indexOf("\n")>=0&&(e-=i),3===n?.5*t-.5*e:2===n?t-e:0}getLineInitialOffsetY(e,t,n,r,i){let o=t*e,a=e-Math.abs(this.ascender-this.descender)*r,s=-this.ascender*r-a/2;return 3===i?-(n-o-s):2===i?-(.5*n-.5*o-s):s}createPath(e,t,n,r,i){var o;let a=e.getPath(n,-r,i.fontSize,{kerning:!1,letterSpacing:i.letterSpacing});if(!a)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");let s=new class{constructor(){this.type="ShapePath",this.color=new $n,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Nl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var n;return null!==(n=this.currentPath)&&void 0!==n&&n.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){var i;return null!==(i=this.currentPath)&&void 0!==i&&i.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,o){var a;return null!==(a=this.currentPath)&&void 0!==a&&a.bezierCurveTo(e,t,n,r,i,o),this}splineThru(e){var t;return null!==(t=this.currentPath)&&void 0!==t&&t.splineThru(e),this}toShapes(){let e=0,t=1,n=2,r=3,i=4,o=5,a=6,s={loc:e,t:0};function l(t,r,i,o){let a=t.x,l=r.x,u=i.x,d=o.x,h=t.y,f=r.y,p=i.y,m=o.y,g=(d-u)*(h-p)-(m-p)*(a-u),v=(m-p)*(l-a)-(d-u)*(f-h),y=g/v,x=((l-a)*(h-p)-(f-h)*(a-u))/v;if(0===v&&0!==g||y<=0||y>=1||x<0||x>1)return null;if(0===g&&0===v){for(let u=0;u<2;u++){if(c(0===u?i:o,t,r),s.loc===e){let e=0===u?i:o;return{x:e.x,y:e.y,t:s.t}}if(s.loc===n)return{x:+(a+s.t*(l-a)).toPrecision(10),y:+(h+s.t*(f-h)).toPrecision(10),t:s.t}}return null}for(let n=0;n<2;n++)if(c(0===n?i:o,t,r),s.loc===e){let e=0===n?i:o;return{x:e.x,y:e.y,t:s.t}}return{x:+(a+y*(l-a)).toPrecision(10),y:+(h+y*(f-h)).toPrecision(10),t:y}}function c(l,c,u){let d,h=u.x-c.x,f=u.y-c.y,p=l.x-c.x,m=l.y-c.y,g=h*m-p*f;return l.x===c.x&&l.y===c.y?(s.loc=e,void(s.t=0)):l.x===u.x&&l.y===u.y?(s.loc=t,void(s.t=1)):void(g<-Number.EPSILON?s.loc=r:g>Number.EPSILON?s.loc=i:h*p<0||f*m<0?s.loc=o:Math.sqrt(h*h+f*f)<Math.sqrt(p*p+m*m)?s.loc=a:(d=0!==h?p/h:m/f,s.loc=n,s.t=d))}function u(e,t,n){let r=new jn;t.getCenter(r);let i=[];return n.forEach((t=>{t.boundingBox.containsPoint(r)&&function(e,t){let n=[],r=[];for(let i=1;i<e.length;i++){let o=e[i-1],a=e[i];for(let e=1;e<t.length;e++){let i=l(o,a,t[e-1],t[e]);null!==i&&void 0===n.find((e=>e.t<=i.t+Number.EPSILON&&e.t>=i.t-Number.EPSILON))&&(n.push(i),r.push(new jn(i.x,i.y)))}}return r}(e,t.points).forEach((e=>{i.push({identifier:t.identifier,isCW:t.isCW,point:e})}))})),i.sort(((e,t)=>e.point.x-t.point.x)),i}let d=0,h=999999999,f=-999999999,p=[];this.subPaths.forEach((e=>{let t=e.getPoints(),n=-999999999,r=999999999,i=-999999999,o=999999999;for(let a=0;a<t.length;a++){let e=t[a];e.y>n&&(n=e.y),e.y<r&&(r=e.y),e.x>i&&(i=e.x),e.x<o&&(o=e.x)}f<=i&&(f=i+1),h>=o&&(h=o-1),t.length&&p.push({curves:e.curves,points:t,isCW:mc.isClockWise(t),identifier:d++,boundingBox:new yu(new jn(o,r),new jn(i,n))})}));let m=p.map((e=>{var t;return function(e,t,n,r,i){(null==i||""===i)&&(i="nonzero");let o=new jn;e.boundingBox.getCenter(o);let a=u([new jn(n,o.y),new jn(r,o.y)],e.boundingBox,t);a.sort(((e,t)=>e.point.x-t.point.x));let s=[],l=[];a.forEach((t=>{t.identifier===e.identifier?s.push(t):l.push(t)}));let c=s[0].point.x,d=[],h=0;for(;h<l.length&&l[h].point.x<c;)d.length>0&&d[d.length-1]===l[h].identifier?d.pop():d.push(l[h].identifier),h++;if(d.push(e.identifier),"evenodd"===i){let t=d.length%2===0,n=d[d.length-2];return{identifier:e.identifier,isHole:t,for:n}}if("nonzero"===i){let n=!0,r=null,i=null;for(let e=0;e<d.length;e++){let o=d[e];t[o]&&(n?(i=t[o].isCW,n=!1,r=o):i!==t[o].isCW&&(i=t[o].isCW,n=!0))}return{identifier:e.identifier,isHole:n,for:r}}console.warn('fill-rule: "'+i+'" is currently not implemented.')}(e,p,h,f,null===(t=this.userData)||void 0===t?void 0:t.style.fillRule)})),g=[];return p.forEach((e=>{let t=m[e.identifier];if(t&&!t.isHole){let t=new Gl;t.curves=e.curves,m.filter((t=>(null===t||void 0===t?void 0:t.isHole)&&t.for===e.identifier)).forEach((e=>{if(e){let n=p[e.identifier],r=new Nl;r.curves=n.curves,t.holes.push(r)}})),g.push(t)}})),g}},l=(null!==(o=e.advanceWidth)&&void 0!==o?o:1)*t;if(e)for(let u of a.commands){var c;let e=null===(c=s.currentPath)||void 0===c?void 0:c.currentPoint;if(!e||"Z"===u.type||e.x!==u.x||-e.y!==u.y)switch(u.type){case"M":s.moveTo(u.x,-u.y);break;case"L":s.lineTo(u.x,-u.y);break;case"Q":s.quadraticCurveTo(u.x1,-u.y1,u.x,-u.y);break;case"C":s.bezierCurveTo(u.x1,-u.y1,u.x2,-u.y2,u.x,-u.y)}}return s.subPaths.forEach((e=>{let t=function(e){if(e.length){let t=e[0];if(t instanceof Dl)return t.v1;if(t instanceof Pl||t instanceof Ol)return t.v0}}(e.curves);void 0!==t&&e.currentPoint.distanceTo(t)>0&&e.lineTo(t.x,t.y)})),{offsetX:l+i.fontSize*i.letterSpacing,path:s}}getCharWidth(e,t){var n,r;return null!==(n=null===(r=this.font)||void 0===r?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))&&void 0!==n?n:0}getTextWidth(e,t){var n,r;return null!==(n=null===(r=this.font)||void 0===r?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))&&void 0!==n?n:0}computeSpaceWidthForLine(e,t,n){let r=this.getCharWidth(" ",n),i=e[t];if(i){let o=this.countSpaces(i.trimEnd());if(4===n.horizontalAlign&&t<e.length-1&&o)return(n.width-(this.getTextWidth(i,n)-o*r))/o}return r}countSpaces(e){return(e.match(/ /g)||[]).length}}(t,this.onFontLoad)}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach((e=>this.deleteMaterial(e))),this._onImageLoad=void 0,Object.values(this.audios).forEach((e=>{e instanceof jT&&e.dispose()})),this.audios={}}};new HT(Gx.emptyData());function WT(e,t){return e.distance-t.distance}function qT(e,t,n){if(wA(t)&&t.visible&&!t.raycastLock){t.raycast(e,n);for(let r of t.children)qT(e,r,n)}}function YT(e,t,n){if(!n.some((t=>void 0!==QT(e,t))))return[];let r=[];return t.children.forEach((t=>qT(e,t,r))),r.sort(WT),r}function XT(e){let t=[];if(e.length){let n=e[0].object;wA(n)&&t.push(n);let r=n.parent;for(;r;)AA(r)&&t.push(r),r=r.parent}return t}function QT(e,t){if(SA(t)){if(!t.raycastLock&&t.visible){let n=[];return t.raycast(e,n),n.length?n[0]:void 0}}else if(AA(t))return KT(e,t)}function KT(e,t){if(SA(t)&&!t.raycastLock&&t.visible){let n=[];if(t.raycast(e,n),n.length)return n[0]}for(let n of t.children)if(wA(n)){let t=KT(e,n);if(t)return t}}function ZT(e){let t=e.getViewport(new ar),n=function(e){if(""!==e.style.transform){let t=getComputedStyle(e).getPropertyValue("transform");if("none"!==t){let e=t.replace("matrix(","").split(",");return{x:parseFloat(e[0]),y:parseFloat(e[3])}}}return{x:1,y:1}}(e.domElement);return{left:t.x*n.x,top:t.y*n.y,width:t.z*n.x,height:t.w*n.y}}var JT=(e=>(e[e.keydown=0]="keydown",e[e.keyup=1]="keyup",e[e.pointerdown=2]="pointerdown",e[e.pointerup=3]="pointerup",e[e.pointermove=4]="pointermove",e[e.wheel=5]="wheel",e))(JT||{}),$T=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set}connect(){}disconnect(){}},eP=new Map,tP=new Map,nP=class{constructor(e,t,n,r){this.data=t;let{audio:i,volume:o,delay:a,loop:s}=t;if(!i)throw new Error("Missing property");let l="string"==typeof i?r.getAudio(i).src:i.data;this.audioPlayer=new jT({src:l,volume:o,delay:a,loop:s}),tP.has(n.uuid)?tP.get(n.uuid).push(this):tP.set(n.uuid,[this]),eP.set(e,this)}playByToggle(){"stop"===this.data.toggle?"playing"===this.audioPlayer.status?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):"pause"===this.data.toggle?"playing"===this.audioPlayer.status?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},rP=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=eP.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()}),this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=tP.get(e);null===t||void 0===t||!t.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((()=>{t.forEach((e=>e.audioPlayer[this.data.interaction]())),this.disposeDelay()}),this.data.delay)):t.forEach((e=>e.audioPlayer[this.data.interaction]())))}pauseAllAudios(){let e=[...tP.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout((()=>{e.forEach((e=>{e.forEach((e=>{e.audioPlayer[this.data.interaction]()}))})),this.disposeDelay()}),this.data.delay)):e.forEach((e=>{e.forEach((e=>{e.audioPlayer[this.data.interaction]()}))})))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},iP=class{constructor(e,t,n,r){if(this.data=t,"play"===t.interaction)this.interaction=new nP(e,t,n,r);else{if("pause"!==t.interaction&&"stop"!==t.interaction)throw new Error("Missing property");this.interaction=new rP(t)}}dispatchBasic(){this.interaction instanceof nP?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof nP?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){this.interaction instanceof nP&&("start"===e?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},oP=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e));function aP(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return((e,t)=>{let{stripHash:n}=t,r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error("Invalid URL: ".concat(e));let{type:i,data:o,hash:a}=r.groups,s=i.split(";");a=n?"":a;let l=!1;"base64"===s[s.length-1]&&(s.pop(),l=!0);let c=(s.shift()||"").toLowerCase(),u=[...s.map((e=>{let[t,n=""]=e.split("=").map((e=>e.trim()));return"charset"===t&&(n=n.toLowerCase(),"us-ascii"===n)?"":"".concat(t).concat(n?"=".concat(n):"")})).filter(Boolean)];return l&&u.push("base64"),(u.length>0||c&&"text/plain"!==c)&&u.unshift(c),"data:".concat(u.join(";"),",").concat(l?o.trim():o).concat(a?"#".concat(a):"")})(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let n=e.startsWith("//");!n&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let r=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===r.protocol&&(r.protocol="http:"),t.forceHttps&&"http:"===r.protocol&&(r.protocol="https:"),t.stripAuthentication&&(r.username="",r.password=""),t.stripHash?r.hash="":t.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,"")),r.pathname){let e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,t=0,n="";for(;;){let i=e.exec(r.pathname);if(!i)break;let o=i[0],a=i.index;n+=r.pathname.slice(t,a).replace(/\/{2,}/g,"/"),n+=o,t=a+o.length}n+=r.pathname.slice(t,r.pathname.length).replace(/\/{2,}/g,"/"),r.pathname=n}if(r.pathname)try{r.pathname=decodeURI(r.pathname)}catch{}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=r.pathname.split("/"),n=e[e.length-1];oP(n,t.removeDirectoryIndex)&&(e=e.slice(0,-1),r.pathname=e.slice(1).join("/")+"/")}if(r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let o of[...r.searchParams.keys()])oP(o,t.removeQueryParameters)&&r.searchParams.delete(o);if(!0===t.removeQueryParameters&&(r.search=""),t.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}t.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,""));let i=e;return e=r.toString(),!t.removeSingleSlash&&"/"===r.pathname&&!i.endsWith("/")&&""===r.hash&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===r.pathname)&&""===r.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),n&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var sP={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},lP={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},cP=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],uP={CSS:{},springs:{}};function dP(e,t,n){return Math.min(Math.max(e,t),n)}function hP(e,t){return e.indexOf(t)>-1}function fP(e,t){return e.apply(null,t)}var pP={arr:function(e){return Array.isArray(e)},obj:function(e){return hP(Object.prototype.toString.call(e),"Object")},pth:function(e){return pP.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||pP.svg(e))},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return pP.hex(e)||pP.rgb(e)||pP.hsl(e)},key:function(e){return!sP.hasOwnProperty(e)&&!lP.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function mP(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function gP(e,t){var n=mP(e),r=dP(pP.und(n[0])?1:n[0],.1,100),i=dP(pP.und(n[1])?100:n[1],.1,100),o=dP(pP.und(n[2])?10:n[2],.1,100),a=dP(pP.und(n[3])?0:n[3],.1,100),s=Math.sqrt(i/r),l=o/(2*Math.sqrt(i*r)),c=l<1?s*Math.sqrt(1-l*l):0,u=l<1?(l*s-a)/c:-a+s;function d(e){var n=t?t*e/1e3:e;return n=l<1?Math.exp(-n*l*s)*(1*Math.cos(c*n)+u*Math.sin(c*n)):(1+u*n)*Math.exp(-n*s),0===e||1===e?e:1-n}return t?d:function(){var t=uP.springs[e];if(t)return t;for(var n=1/6,r=0,i=0;;)if(1===d(r+=n)){if(++i>=16)break}else i=0;var o=r*n*1e3;return uP.springs[e]=o,o}}function vP(e){return void 0===e&&(e=10),function(t){return Math.ceil(dP(t,1e-6,1)*e)*(1/e)}}var yP=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function r(e){return 3*e}function i(e,i,o){return((t(i,o)*e+n(i,o))*e+r(i))*e}function o(e,i,o){return 3*t(i,o)*e*e+2*n(i,o)*e+r(i)}return function(t,n,r,a){if(0<=t&&t<=1&&0<=r&&r<=1){var s=new Float32Array(11);if(t!==n||r!==a)for(var l=0;l<11;++l)s[l]=i(l*e,t,r);return function(e){return t===n&&r===a||0===e||1===e?e:i(c(e),n,a)}}function c(n){for(var a=0,l=1;10!==l&&s[l]<=n;++l)a+=e;--l;var c=a+(n-s[l])/(s[l+1]-s[l])*e,u=o(c,t,r);return u>=.001?function(e,t,n,r){for(var a=0;a<4;++a){var s=o(t,n,r);if(0===s)return t;t-=(i(t,n,r)-e)/s}return t}(n,c,t,r):0===u?c:function(e,t,n,r,o){var a,s,l=0;do{(a=i(s=t+(n-t)/2,r,o)-e)>0?n=s:t=s}while(Math.abs(a)>1e-7&&++l<10);return s}(n,a,a+e,t,r)}}}(),xP=function(){var e={linear:function(){return function(e){return e}}},t={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=dP(e,1,10),r=dP(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/r)}}};return["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,n){t[e]=function(){return function(e){return Math.pow(e,n+2)}}})),Object.keys(t).forEach((function(n){var r=t[n];e["easeIn"+n]=r,e["easeOut"+n]=function(e,t){return function(n){return 1-r(e,t)(1-n)}},e["easeInOut"+n]=function(e,t){return function(n){return n<.5?r(e,t)(2*n)/2:1-r(e,t)(-2*n+2)/2}}})),e}();function bP(e,t){if(pP.fnc(e))return e;var n=e.split("(")[0],r=xP[n],i=mP(e);switch(n){case"spring":return gP(e,t);case"cubicBezier":return fP(yP,i);case"steps":return fP(vP,i);default:return fP(r,i)}}function wP(e){try{return document.querySelectorAll(e)}catch{return}}function SP(e,t){for(var n=e.length,r=arguments.length>=2?arguments[1]:void 0,i=[],o=0;o<n;o++)if(o in e){var a=e[o];t.call(r,a,o,e)&&i.push(a)}return i}function _P(e){return e.reduce((function(e,t){return e.concat(pP.arr(t)?_P(t):t)}),[])}function AP(e){return pP.arr(e)?e:(pP.str(e)&&(e=wP(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function EP(e,t){return e.some((function(e){return e===t}))}function CP(e){var t={};for(var n in e)t[n]=e[n];return t}function MP(e,t){var n=CP(e);for(var r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function TP(e,t){var n=CP(e);for(var r in t)n[r]=pP.und(e[r])?t[r]:e[r];return n}function PP(e){return pP.rgb(e)?function(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}(e):pP.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):pP.hsl(e)?function(e){var t,n,r,i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),o=parseInt(i[1],10)/360,a=parseInt(i[2],10)/100,s=parseInt(i[3],10)/100,l=i[4]||1;function c(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==a)t=n=r=s;else{var u=s<.5?s*(1+a):s+a-s*a,d=2*s-u;t=c(d,u,o+1/3),n=c(d,u,o),r=c(d,u,o-1/3)}return"rgba("+255*t+","+255*n+","+255*r+","+l+")"}(e):void 0}function DP(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function kP(e,t){return pP.fnc(e)?e(t.target,t.id,t.total):e}function OP(e,t){return e.getAttribute(t)}function RP(e,t,n){if(EP([n,"deg","rad","turn"],DP(t)))return t;var r=uP.CSS[t+n];if(!pP.und(r))return r;var i=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(i),i.style.position="absolute",i.style.width=100+n;var a=100/i.offsetWidth;o.removeChild(i);var s=a*parseFloat(t);return uP.CSS[t+n]=s,s}function IP(e,t,n){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return n?RP(e,i,n):i}}function LP(e,t){return pP.dom(e)&&!pP.inp(e)&&(OP(e,t)||pP.svg(e)&&e[t])?"attribute":pP.dom(e)&&EP(cP,t)?"transform":pP.dom(e)&&"transform"!==t&&IP(e,t)?"css":null!=e[t]?"object":void 0}function NP(e){if(pP.dom(e)){for(var t,n=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map;t=r.exec(n);)i.set(t[1],t[2]);return i}}function jP(e,t,n,r){var i=hP(t,"scale")?1:0+function(e){return hP(e,"translate")||"perspective"===e?"px":hP(e,"rotate")||hP(e,"skew")?"deg":void 0}(t),o=NP(e).get(t)||i;return n&&(n.transforms.list.set(t,o),n.transforms.last=t),r?RP(e,o,r):o}function BP(e,t,n,r){switch(LP(e,t)){case"transform":return jP(e,t,r,n);case"css":return IP(e,t,n);case"attribute":return OP(e,t);default:return e[t]||0}}function FP(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var r=DP(e)||0,i=parseFloat(t),o=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return i+o+r;case"-":return i-o+r;case"*":return i*o+r}}function zP(e,t){if(pP.col(e))return PP(e);if(/\s/g.test(e))return e;var n=DP(e),r=n?e.substr(0,e.length-n.length):e;return t?r+t:r}function UP(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function GP(e){for(var t,n=e.points,r=0,i=0;i<n.numberOfItems;i++){var o=n.getItem(i);i>0&&(r+=UP(t,o)),t=o}return r}function VP(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*OP(e,"r")}(e);case"rect":return function(e){return 2*OP(e,"width")+2*OP(e,"height")}(e);case"line":return function(e){return UP({x:OP(e,"x1"),y:OP(e,"y1")},{x:OP(e,"x2"),y:OP(e,"y2")})}(e);case"polyline":return GP(e);case"polygon":return function(e){var t=e.points;return GP(e)+UP(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function HP(e,t){var n=t||{},r=n.el||function(e){for(var t=e.parentNode;pP.svg(t)&&pP.svg(t.parentNode);)t=t.parentNode;return t}(e),i=r.getBoundingClientRect(),o=OP(r,"viewBox"),a=i.width,s=i.height,l=n.viewBox||(o?o.split(" "):[0,0,a,s]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:s/l[3]}}function WP(e,t){function n(n){void 0===n&&(n=0);var r=t+n>=1?t+n:0;return e.el.getPointAtLength(r)}var r=HP(e.el,e.svg),i=n(),o=n(-1),a=n(1);switch(e.property){case"x":return(i.x-r.x)*r.w;case"y":return(i.y-r.y)*r.h;case"angle":return 180*Math.atan2(a.y-o.y,a.x-o.x)/Math.PI}}function qP(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=zP(pP.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:pP.str(e)||t?r.split(n):[]}}function YP(e){return SP(e?_P(pP.arr(e)?e.map(AP):AP(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function XP(e){var t=YP(e);return t.map((function(e,n){return{target:e,id:n,total:t.length,transforms:{list:NP(e)}}}))}function QP(e,t){var n=CP(t);if(/^spring/.test(n.easing)&&(n.duration=gP(n.easing)),pP.arr(e)){var r=e.length;2===r&&!pP.obj(e[0])?e={value:e}:pP.fnc(t.duration)||(n.duration=t.duration/r)}var i=pP.arr(e)?e:[e];return i.map((function(e,n){var r=pP.obj(e)&&!pP.pth(e)?e:{value:e};return pP.und(r.delay)&&(r.delay=n?0:t.delay),pP.und(r.endDelay)&&(r.endDelay=n===i.length-1?t.endDelay:0),r})).map((function(e){return TP(e,n)}))}function KP(e,t){var n=[],r=t.keyframes;for(var i in r&&(t=TP(function(e){for(var t=SP(_P(e.map((function(e){return Object.keys(e)}))),(function(e){return pP.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},r=function(r){var i=t[r];n[i]=e.map((function(e){var t={};for(var n in e)pP.key(n)?n==i&&(t.value=e[n]):t[n]=e[n];return t}))},i=0;i<t.length;i++)r(i);return n}(r),t)),t)pP.key(i)&&n.push({name:i,tweens:QP(t[i],e)});return n}function ZP(e,t){var n;return e.tweens.map((function(r){var i=function(e,t){var n={};for(var r in e){var i=kP(e[r],t);pP.arr(i)&&(i=i.map((function(e){return kP(e,t)})),1===i.length&&(i=i[0])),n[r]=i}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(r,t),o=i.value,a=pP.arr(o)?o[1]:o,s=DP(a),l=BP(t.target,e.name,s,t),c=n?n.to.original:l,u=pP.arr(o)?o[0]:c,d=DP(u)||DP(l),h=s||d;return pP.und(a)&&(a=c),i.from=qP(u,h),i.to=qP(FP(a,u),h),i.start=n?n.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=bP(i.easing,i.duration),i.isPath=pP.pth(o),i.isColor=pP.col(i.from.original),i.isColor&&(i.round=1),n=i,i}))}var JP={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,i){if(r.list.set(t,n),t===r.last||i){var o="";r.list.forEach((function(e,t){o+=t+"("+e+") "})),e.style.transform=o}}};function $P(e,t){XP(e).forEach((function(e){for(var n in t){var r=kP(t[n],e),i=e.target,o=DP(r),a=BP(i,n,o,e),s=FP(zP(r,o||DP(a)),a),l=LP(i,n);JP[l](i,n,s,e.transforms,!0)}}))}function eD(e,t){return SP(_P(e.map((function(e){return t.map((function(t){return function(e,t){var n=LP(e.target,t.name);if(n){var r=ZP(t,e),i=r[r.length-1];return{type:n,property:t.name,animatable:e,tweens:r,duration:i.end,delay:r[0].delay,endDelay:i.endDelay}}}(e,t)}))}))),(function(e){return!pP.und(e)}))}function tD(e,t){var n=e.length,r=function(e){return e.timelineOffset?e.timelineOffset:0},i={};return i.duration=n?Math.max.apply(Math,e.map((function(e){return r(e)+e.duration}))):t.duration,i.delay=n?Math.min.apply(Math,e.map((function(e){return r(e)+e.delay}))):t.delay,i.endDelay=n?i.duration-Math.max.apply(Math,e.map((function(e){return r(e)+e.duration-e.endDelay}))):t.endDelay,i}var nD=0;var rD,iD=[],oD=[],aD=function(){function e(){rD=requestAnimationFrame(t)}function t(t){var n=iD.length;if(n){for(var r=0;r<n;){var i=iD[r];if(i.paused){var o=iD.indexOf(i);o>-1&&(iD.splice(o,1),n=iD.length)}else i.tick(t);r++}e()}else rD=cancelAnimationFrame(rD)}return e}();function sD(e){void 0===e&&(e={});var t,n=0,r=0,i=0,o=0,a=null;function s(e){var t=window.Promise&&new Promise((function(e){return a=e}));return e.finished=t,t}var l=function(e){var t=MP(sP,e),n=MP(lP,e),r=KP(n,e),i=XP(e.targets),o=eD(i,r),a=tD(o,n),s=nD;return nD++,TP(t,{id:s,children:[],animatables:i,animations:o,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}(e);s(l);function c(){var e=l.direction;"alternate"!==e&&(l.direction="normal"!==e?"normal":"reverse"),l.reversed=!l.reversed,t.forEach((function(e){return e.reversed=l.reversed}))}function u(e){return l.reversed?l.duration-e:e}function d(){n=0,r=u(l.currentTime)*(1/sD.speed)}function h(e,t){t&&t.seek(e-t.timelineOffset)}function f(e){var t=0,n=l.animations,r=n.length;for(!0===l.reversePlayback&&!1===l.rewind&&(e=l.duration+l.delay-l.endDelay-e);t<r;){var i=n[t],o=i.animatable,a=i.tweens,s=a.length-1,c=a[s];s&&(c=SP(a,(function(t){return e<t.end}))[0]||c);for(var u=dP(e-c.start-c.delay,0,c.duration)/c.duration,d=isNaN(u)?1:c.easing(u),h=c.to.strings,f=c.round,p=[],m=c.to.numbers.length,g=void 0,v=0;v<m;v++){var y=void 0;if(!0===l.reversePlayback&&!1===l.rewind)var x=c.to.numbers[v],b=c.from.numbers[v]||0;else b=c.to.numbers[v],x=c.from.numbers[v]||0;y=c.isPath?WP(c.value,d*b):x+d*(b-x),f&&(c.isColor&&v>2||(y=Math.round(y*f)/f)),p.push(y)}var w=h.length;if(w){g=h[0];for(var S=0;S<w;S++){h[S];var _=h[S+1],A=p[S];isNaN(A)||(g+=_?A+_:A+" ")}}else g=p[0];JP[i.type](o.target,i.property,g,o.transforms),i.currentValue=g,t++}}function p(e){l[e]&&!l.passThrough&&l[e](l)}function m(e){var d=l.duration,m=l.delay,g=d-l.endDelay,v=u(e);l.progress=dP(v/d*100,0,100),l.reversePlayback=v<l.currentTime,t&&function(e){if(l.reversePlayback)for(var n=o;n--;)h(e,t[n]);else for(var r=0;r<o;r++)h(e,t[r])}(v),!l.began&&l.currentTime>=0&&(l.began=!0,p("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,p("loopBegin")),v<=m&&0!==l.currentTime&&(f(0),p("change")),(v>=g&&l.currentTime!==d||!d)&&(f(d),p("change")),v>m&&v<g?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,p("changeBegin")),p("change"),f(v)):l.changeBegan?(l.changeCompleted=!0,l.changeBegan=!1,p("change"),p("changeComplete")):l.began&&v>g&&(p("change"),p("changeComplete")),l.currentTime=dP(v,0,d),l.began&&p("update"),e>=d&&(r=0,l.remaining&&!0!==l.remaining&&l.remaining--,l.remaining?(n=i,p("loopComplete"),l.loopBegan=!1,"alternate"===l.direction&&c()):(l.paused=!0,l.completed||(l.completed=!0,p("loopComplete"),p("complete"),!l.passThrough&&"Promise"in window&&(a(),s(l)))))}return l.reset=function(){var e=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed="reverse"===e,l.remaining=l.loop,t=l.children;for(var n=o=t.length;n--;)l.children[n].reset();(l.reversed&&!0!==l.loop||"alternate"===e&&1===l.loop)&&l.remaining++,f(l.reversed?l.duration:0)},l.set=function(e,t){return $P(e,t),l},l.tick=function(e){i=e,n||(n=i),m((i+(r-n))*sD.speed)},l.seek=function(e){m(u(e))},l.pause=function(){l.paused=!0,d()},l.play=function(){!l.paused||(l.completed&&l.reset(),l.paused=!1,iD.push(l),d(),rD||aD())},l.reverse=function(){c(),l.completed=!l.reversed,d()},l.restart=function(){l.reset(),l.play()},l.reset(),l.autoplay&&l.play(),l}function lD(e,t){for(var n=t.length;n--;)EP(e,t[n].animatable.target)&&t.splice(n,1)}typeof document<"u"&&document.addEventListener("visibilitychange",(function(){document.hidden?(iD.forEach((function(e){return e.pause()})),oD=iD.slice(0),sD.running=iD=[]):oD.forEach((function(e){return e.play()}))})),sD.version="3.2.0",sD.speed=1,sD.running=iD,sD.remove=function(e){for(var t=YP(e),n=iD.length;n--;){var r=iD[n],i=r.animations,o=r.children;lD(t,i);for(var a=o.length;a--;){var s=o[a],l=s.animations;lD(t,l),!l.length&&!s.children.length&&o.splice(a,1)}!i.length&&!o.length&&r.pause()}},sD.get=BP,sD.set=$P,sD.convertPx=RP,sD.path=function(e,t){var n=pP.str(e)?wP(e)[0]:e,r=t||100;return function(e){return{property:e,el:n,svg:HP(n),totalLength:VP(n)*(r/100)}}},sD.setDashoffset=function(e){var t=VP(e);return e.setAttribute("stroke-dasharray",t),t},sD.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",r=t.easing?bP(t.easing):null,i=t.grid,o=t.axis,a=t.from||0,s="first"===a,l="center"===a,c="last"===a,u=pP.arr(e),d=parseFloat(u?e[0]:e),h=u?parseFloat(e[1]):0,f=DP(u?e[1]:e)||0,p=t.start||0+(u?d:0),m=[],g=0;return function(e,t,v){if(s&&(a=0),l&&(a=(v-1)/2),c&&(a=v-1),!m.length){for(var y=0;y<v;y++){if(i){var x=l?(i[0]-1)/2:a%i[0],b=l?(i[1]-1)/2:Math.floor(a/i[0]),w=x-y%i[0],S=b-Math.floor(y/i[0]),_=Math.sqrt(w*w+S*S);"x"===o&&(_=-w),"y"===o&&(_=-S),m.push(_)}else m.push(Math.abs(a-y));g=Math.max.apply(Math,m)}r&&(m=m.map((function(e){return r(e/g)*g}))),"reverse"===n&&(m=m.map((function(e){return o?e<0?-1*e:-e:Math.abs(g-e)})))}return p+(u?(h-d)/g:d)*(Math.round(100*m[t])/100)+f}},sD.timeline=function(e){void 0===e&&(e={});var t=sD(e);return t.duration=0,t.add=function(n,r){var i=iD.indexOf(t),o=t.children;function a(e){e.passThrough=!0}i>-1&&iD.splice(i,1);for(var s=0;s<o.length;s++)a(o[s]);var l=TP(n,MP(lP,e));l.targets=l.targets||e.targets;var c=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=pP.und(r)?c:FP(r,c),a(t),l.rewind=t.rewind,t.seek(l.timelineOffset);var u=sD(l);a(u),o.push(u);var d=tD(o,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},sD.easing=bP,sD.penner=xP,sD.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var cD=sD,uD=new ur,dD=new ur,hD=new cr;function fD(e,t,n,r){let i=n[e]?n[e]:void 0,o=r[e];if(null==o)return;let a=null!==i&&void 0!==i?i:t[e],s=o;return a!==s?{update:n=>{t[e]=Nn.lerp(a,s,n)},start:()=>{t[e]=a},end:()=>{t[e]=s}}:void 0}function pD(e,t,n,r){let i=n[e]?n[e]:void 0,o=r[e];if(!o)return;let a=t[e],s=i?(new ur).fromArray(i):a.clone(),l=(new ur).fromArray(o);return s.equals(l)?void 0:{update:e=>{a.lerpVectors(s,l,e)},start:()=>{a.copy(s)},end:()=>{a.copy(l)}}}function mD(e,t,n,r){let i=[];if(void 0!==n.intensity){let r=fD("intensity",e,t,n);r&&i.push(r)}if(void 0!==n.color){let o=function(e,t,n,r,i){let o=n[e]?n[e]:void 0,a=r[e];if(!a)return;let s=t[e],l=o?"string"==typeof o?i.getColor(o).clone():(new $n).setRGB(o.r,o.g,o.b):s.clone(),c="string"==typeof a?i.getColor(a).clone():(new $n).setRGB(a.r,a.g,a.b);if(l.equals(c))return;let u=s.clone();return t[e]=u,{update:e=>{u.lerpColors(l,c,e)},start:()=>{u.copy(l)},end:()=>{u.copy(c)}}}("color",e,t,n,r);o&&i.push(o)}return i}function gD(e,t,n,r){var i,o;let a,s,l=[];return"material"in n||"materials"in n?(a="materials"in t?null===(i=t.materials)||void 0===i?void 0:i[0]:"material"in t?t.material:{},a&&"string"!=typeof a?("materials"in n?s=null===(o=n.materials)||void 0===o?void 0:o[0]:"material"in n&&(s=n.material),s&&"string"!=typeof s?function(e,t,n,r){let i=[];for(let l of e.layers){var o,a,s;let e=null===(o=t.layers)||void 0===o?void 0:o.data(l.uuid),c=n.layers.data(l.uuid);if(!c||null!==(a=l.visible)&&void 0!==a&&!a||null!==(s=c.visible)&&void 0!==s&&!s)continue;let u=l.getNames().filter((e=>!Ox.some((t=>e.includes(t)))));for(let t of u)try{let n,o=l.getValue(t);if("colors"===t)n=_D(l,e,c,t);else if(Array.isArray(o))"steps"===t&&(n=SD(l,e,c,t));else if("number"==typeof o)n=vD(l,e,c,t);else{if("boolean"==typeof o)continue;o instanceof jn?n=yD(l,e,c,t):o instanceof ur?n=xD(l,e,c,t):o instanceof XA?n=wD(l,e,c,t,r):o instanceof $n?n=bD(l,e,c,t,r):"isTexture"in o&&(n=AD(l,e,c,t))}n&&(Array.isArray(n)?i.push(...n):i.push(n))}catch(rB){console.error("lerpMaterial: unexpected material layer for ".concat(t),rB)}}return i}(Array.isArray(e.material)?e.material[0]:e.material,a,s,r):l):l):l}function vD(e,t,n,r){if(!e.hasValue(r)||!(r in n))return;let i=t?t[r]:e.getValue(r),o=n[r];return i!==o?{update:t=>{e.setValue(r,Nn.lerp(i,o,t))},start:()=>{e.setValue(r,i)},end:()=>{e.setValue(r,o)}}:void 0}function yD(e,t,n,r){if(!e.hasValue(r)||!(r in n))return;let i=e.getValue(r),o=t?(new jn).fromArray(t[r]):i.clone(),a=(new jn).fromArray(n[r]);return o.equals(a)?void 0:{update:e=>{i.lerpVectors(o,a,e)},start:()=>{i.copy(o)},end:()=>{i.copy(a)}}}function xD(e,t,n,r){if(!e.hasValue(r)||!(r in n))return;let i=e.getValue(r),o=t?(new ur).fromArray(t[r]):i.clone(),a=(new ur).fromArray(n[r]);return o.equals(a)?void 0:{update:e=>{i.lerpVectors(o,a,e)},start:()=>{i.copy(o)},end:()=>{i.copy(a)}}}function bD(e,t,n,r,i){if(!e.hasValue(r)||!(r in n))return;let o=t?t[r]:void 0,a=n[r],s=e.getValue(r),l=o?"string"==typeof o?i.getColor(o).clone():(new $n).setRGB(o.r,o.g,o.b):s.clone(),c="string"==typeof a?i.getColor(a).clone():(new $n).setRGB(a.r,a.g,a.b);if(l.equals(c))return;let u=s.clone();return e.setValue(r,u),{update:e=>{u.lerpColors(l,c,e)},start:()=>{u.copy(l)},end:()=>{u.copy(c)}}}function wD(e,t,n,r,i){if(!e.hasValue(r)||!(r in n))return;let o=t?t[r]:void 0,a=n[r],s=e.getValue(r),l=o?"string"==typeof o?i.getColor(o).clone():(new $n).setRGB(o.r,o.g,o.b):s.clone(),c="string"==typeof a?i.getColor(a).clone():new XA(a.r,a.g,a.b,a.a);if(l.equals(c))return;let u=s.clone();return e.setValue(r,u),{update:e=>{u.lerpColors(l,c,e)},start:()=>{u.copy(l)},end:()=>{u.copy(c)}}}function SD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(!e.hasValue(r)||!(r in n))return;let i=[],o=e.getValue(r),a=t?t[r]:o,s=n[r];for(let l=0;l<o.length;++l){let e=a[l],t=s[l];e!==t&&i.push({update:n=>{o[l]=Nn.lerp(e,t,n)},start:()=>{o[l]=e},end:()=>{o[l]=t}})}return i.length?i:void 0}function _D(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"colors";if(!e.hasValue(r)||!(r in n))return;let i=[],o=e.getValue(r),a=t?t[r]:o.map((e=>e.toArray())),s=n[r];for(let l=0;l<o.length;++l){let e=[...a[l]],t=[...s[l]];Ky.isEqual(e,t)||i.push({update:n=>{o[l].fromArray(Ky.lerp(e,t,n))},start:()=>{o[l].fromArray(e)},end:()=>{o[l].fromArray(t)}})}return i.length?i:void 0}function AD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"texture";if(!e.hasValue(r)||!(r in n))return;let i=e.getNode("mat");if(!i)return;let o=t?t[r]:i,a=n[r],s=[...o.repeat],l=[...o.offset],c=[...a.repeat],u=[...a.offset];return Xy.isEqual(s,c)&&Xy.isEqual(l,u)?void 0:{update:e=>{i.repeat=Xy.lerp(s,c,e),i.offset=Xy.lerp(l,u,e),i.updateMatrix()},start:()=>{i.repeat=[...s],i.offset=[...l],i.updateMatrix()},end:()=>{i.repeat=[...c],i.offset=[...u],i.updateMatrix()}}}var ED=new ur,CD=new Zr;function MD(e,t,n,r){let i=[],o=pD("position",e,t,n);o&&i.push(o);let a=pD("scale",e,t,n);a&&i.push(a);let s=function(e,t,n,r){let i=null!==t&&void 0!==t&&t.rotation?t.rotation:void 0,o=n.rotation;if(!o)return;let a=i?(new ur).fromArray(i):(new ur).setFromEuler(e.rotation),s=(new ur).fromArray(o);if(a.equals(s))return;let l=ED.subVectors(s,a);if(r&&l.toArray().every((e=>Math.abs(e)<2*Math.PI))){let t=(new cr).setFromEuler(CD.setFromVector3(a)),n=(new cr).setFromEuler(CD.setFromVector3(s));return{update:r=>{!function(e,t,n,r){if(0===r)return n.copy(e);if(1===r)return n.copy(t);let i=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(i>=1)return n.copy(e);let o=1-i*i;if(o<=Number.EPSILON){let i=1-r;return n.w=i*e.w+r*t.w,n.x=i*e.x+r*t.x,n.y=i*e.y+r*t.y,n.z=i*e.z+r*t.z,n.normalize(),n}let a=Math.sqrt(o),s=Math.atan2(a,i),l=Math.sin((1-r)*s)/a,c=Math.sin(r*s)/a;n.w=e.w*l+t.w*c,n.x=e.x*l+t.x*c,n.y=e.y*l+t.y*c,n.z=e.z*l+t.z*c}(t,n,e.quaternion,r)},start:()=>{e.rotation.setFromVector3(a)},end:()=>{e.rotation.setFromVector3(s)}}}return{update:t=>{ED.lerpVectors(a,s,t),e.rotation.setFromVector3(ED)},start:()=>{e.rotation.setFromVector3(a)},end:()=>{e.rotation.setFromVector3(s)}}}(e,t,n,r);s&&i.push(s);let l=function(e,t,n,r){let i=n[e]?n[e]:void 0,o=r[e];if(!o)return;let a=t[e],s=i?(new Ur).fromArray(i):a.clone(),l=new ur,c=new cr,u=new ur;s.decompose(l,c,u);let d=(new Ur).fromArray(o),h=new ur,f=new cr,p=new ur;return d.decompose(h,f,p),s.equals(d)?void 0:{update:e=>{hD.slerpQuaternions(c,f,e),uD.lerpVectors(l,h,e),dD.lerpVectors(u,p,e),a.compose(uD,hD,dD)},start:()=>{a.compose(l,c,u)},end:()=>{a.compose(h,f,p)}}}("hiddenMatrix",e,t,n);if(l&&i.push(l),o||a||s||l){let t=()=>{var t;e.updateMatrix(),null!==(t=e.parent)&&void 0!==t&&t.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),SA(e)&&_A(e.parent)&&e.invalidateDownstreamBooleanData(!0)};i.push({update:t,start:t,end:t})}return i}function TD(e,t,n,r,i){let o=[];return(e.visible||_A(e.parent))&&o.push(...MD(e,t,n,i)),SA(e)?((e.visible||_A(e.parent))&&o.push(...function(e,t,n){let r=[];if(!("geometry"in n))return r;let i="geometry"in t?t.geometry:{},o=n.geometry,{width:a,height:s,depth:l}=i,{width:c,height:u,depth:d}=o;if(void 0!==c||void 0!==u||void 0!==d){let{width:t,height:n,depth:i}=e.geometry.userData.parameters,o=null!==a&&void 0!==a?a:t,h=null!==s&&void 0!==s?s:n,f=null!==l&&void 0!==l?l:i,p=null!==c&&void 0!==c?c:t,m=null!==u&&void 0!==u?u:n,g=null!==d&&void 0!==d?d:i;(o!==p||h!==m||f!==g)&&!_A(e)&&r.push({update:t=>{e.updateGeometry({parameters:{width:Nn.lerp(o,p,t),height:Nn.lerp(h,m,t),depth:Nn.lerp(f,g,t)}}),e.invalidateDownstreamBooleanData()},start:()=>{e.updateGeometry({parameters:{width:o,height:h,depth:f}}),e.invalidateDownstreamBooleanData()},end:()=>{e.updateGeometry({parameters:{width:p,height:m,depth:g}}),e.invalidateDownstreamBooleanData()}})}return r}(e,t,n)),e.visible&&o.push(...gD(e,t,n,r))):(e=>wA(e)&&("LightDirectional"===e.objectType||"LightSpot"===e.objectType||"LightPoint"===e.objectType))(e)?e.visible&&o.push(...mD(e,t,n,r)):(e=>"CombinedCamera"===e.objectType)(e)&&o.push(...function(e,t,n){var r,i,o,a;let s=[],l="OrthographicCamera"===e.cameraType?null===(r=t.orthographic)||void 0===r?void 0:r.zoom:null===(i=t.perspective)||void 0===i?void 0:i.zoom,c="OrthographicCamera"===e.cameraType?null===(o=n.orthographic)||void 0===o?void 0:o.zoom:null===(a=n.perspective)||void 0===a?void 0:a.zoom;if(void 0!==c){let t=null!==l&&void 0!==l?l:e.zoom,n=c;t!==n&&s.push({update:r=>{e.zoom=Nn.lerp(t,n,r),e.updateProjectionMatrix()},start:()=>{e.zoom=t,e.updateProjectionMatrix()},end:()=>{e.zoom=n,e.updateProjectionMatrix()}})}if(void 0!==n.targetOffset){let r=fD("targetOffset",e,t,n);r&&s.push(r)}return s}(e,t,n)),o.length?{update:e=>{o.forEach((t=>t.update(e)))},start:e=>{o.forEach((t=>{var n;return null===(n=t.start)||void 0===n?void 0:n.call(t,e)}))},end:e=>{o.forEach((t=>{var n;return null===(n=t.end)||void 0===n?void 0:n.call(t,e)}))}}:void 0}var PD=new ur,DD=new cr;function kD(e,t,n){"string"!=typeof t&&e.reset(t,n)}function OD(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!i&&0===t.states.length)return;let o=null===n?t:Cx.patch(t,t.states.data(n));if(CA(e,o),e instanceof QC&&"Mesh"===o.type){if(e instanceof UM?e.buildFromStore(o.geometry):e.updateGeometry({parameters:o.geometry},r),e.freeBooleanPointer(),_A(e.parent)&&e.parent.invalidateDownstreamBooleanData().recomputeBoolean(),"material"in o){if(e.material instanceof Array)return;kD(e.material,o.material,r)}else if("materials"in o){if(!(e.material instanceof Array))return;var a=0;for(let t of o.materials)kD(e.material[a],t,r),a++}}else if("DirectionalLight"===o.type)e.fromDirectionalLightState(o,r);else if("PointLight"===o.type)e.fromPointLightState(o,r);else if("SpotLight"===o.type)e.fromSpotLightState(o,r);else if(e instanceof iM&&rx.is(o.type)){let t=o;e.setZoom("PerspectiveCamera",t.perspective.zoom),e.setZoom("OrthographicCamera",t.orthographic.zoom),e.isUpVectorFlipped=t.isUpVectorFlipped,e.targetOffset=t.targetOffset,e.fov=t.perspective.fov}}function RD(e){let t={duration:e.duration,easing:"linear"};switch(e.easing){case 0:t.easing="cubicBezier( 0, 0, 1, 1 )";break;case 1:t.easing="cubicBezier( .25, .1, .25, 1 )";break;case 2:t.easing="cubicBezier( .42, 0, 1, 1 )";break;case 3:t.easing="cubicBezier( 0, 0, .58, 1 )";break;case 4:t.easing="cubicBezier( .42, 0, .58, 1 )";break;case 5:let{control1:n,control2:r}=e;t.easing="cubicBezier(\n\t\t\t\t".concat(n[0],", ").concat(n[1],", ").concat(r[0],", ").concat(r[1],"\n\t\t\t)");break;case 6:let{mass:i,stiffness:o,damping:a,velocity:s}=e;t.easing="spring( ".concat(i,", ").concat(o,", ").concat(a,", ").concat(s," )")}return t}function ID(e){let t={startOnceDelay:0,delay:0,repeatDelay:0,loop:-1===e.repeat||e.repeat+1};if(0===e.repeat)t.direction="normal",t.rewind="pingpong-rewind"===e.direction;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1}switch(e.delayDirection){case"start-once":break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay}return t}var LD=class{constructor(e,t,n,r){if(this.object=t,this.id=r,this.tweens=[],this._finished=!1,e.tweens.length<1)throw new Error("Missing property");try{var i;let r=new class{constructor(e,t,n,r,i,o,a){this.object=e,this.data=r,this.sharedAssets=i,this.allowSlerp=o,this.id=a,this.targets={t:0},this.firstLoop=!0,this.firstReverse=!0,this.reversed=!1,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),0===this.targets.t||1===this.targets.t?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{let e,t;this.reversed?(e=this.to,t=this.from):(e=this.from,t=this.to),this.object.currentState=t.id,this.object.dispatchEvent({type:"beginState",state:this.targets.t>.5?e.id:t.id})},this.onChangeComplete=()=>{let e,t;this.reversed?(e=this.to,t=this.from):(e=this.from,t=this.to),this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.currentState=t.id,this.object.dispatchEvent({type:"completeState",state:this.targets.t<.5?e.id:t.id})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=TD(this.object,this.reversed?this.to.data:this.from.data,this.reversed?this.from.data:this.to.data,this.sharedAssets,this.allowSlerp))};let s=this.getState(t);if(!s)throw new Error("Missing property");this.from=s;let l=this.getState(n);if(!l)throw new Error("Missing property");this.to=l,this.useCurrentState=void 0===t||void 0===n;let c={};this.object.hiddenMatrix0&&(c.hiddenMatrix=this.object.hiddenMatrix0.elements),this.callback=TD(this.object,void 0===t?c:this.from.data,void 0===n?c:this.to.data,this.sharedAssets,this.allowSlerp),this.core={targets:this.targets,t:1,autoplay:!1,...ID(r),...RD(r),change:this.onChange},this.startOnceDelay="start-once"===r.delayDirection?r.delay:0}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}getState(e){let t,n;if("string"==typeof e?(t=e,n=this.object.states[t]):null===e?(t=null,n=this.object.data):void 0===e&&(t=this.object.currentState,n=t?this.object.states[t]:this.object.data),void 0!==t&&void 0!==n)return{id:t,data:n}}toggle(e){this._changeBegan=!1,this._changeCompleted=!0,this.reversed=!e,this.targets.t=0,this.firstReverse?(this.firstReverse=!1,this.reversed=!1):this.callback=TD(this.object,{},e?this.to.data:this.from.data,this.sharedAssets,this.allowSlerp)}}(t,e.tweens[0].data.state,e.tweens[1].data.state,e.tweens[1].data,n,null!==(i=e.allowSlerp)&&void 0!==i&&i,"0");this.tween=r,this.core=cD({...r.core}),this.core.finished.then((()=>this._finished=!0)),this.startOnceDelay=r.startOnceDelay}catch{throw new Error("Missing property")}}get finished(){return this._finished}get paused(){return this.core.paused}play(){this._finished||(clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((()=>this.core.play()),this.startOnceDelay))}pause(){this.core.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}stop(){this.pause(),this.seek(0),this.core.reset(),this._finished=!1}seek(e){let t=e*this.core.duration;this.core.seek(t)}toggle(e){this.core.pause(),clearTimeout(this.timeoutId),this.tween.toggle(e),this.core=cD({...this.tween.core}),this.core.finished.then((()=>this._finished=!0)),this.tween.changeCompleted?this.timeoutId=window.setTimeout((()=>this.core.play()),this.startOnceDelay):this.core.play()}dispose(){this.pause()}},ND=class extends En{constructor(e,t,n,r){if(super(),this.id=e,this.data=t,this.sharedAssets=r,!t.object)throw new Error("Missing property");let i=n.find(t.object);if(!i)throw new Error("Missing property");this.object=i;try{this.timeline=new LD(this.data,this.object,this.sharedAssets,"0")}catch{throw new Error("Missing property")}}play(){var e;this.object.currentTransitionAction!==this&&(null!==(e=this.object.currentTransitionAction)&&void 0!==e&&e.dispose(),this.object.currentTransitionAction=this,this.timeline=new LD(this.data,this.object,this.sharedAssets,"0"),this.dispatchEvent({type:"reset"})),this.timeline.play()}stop(){this.timeline.stop()}seek(e){this.timeline.seek(e)}toggle(e){var t;this.object.currentTransitionAction!==this&&(null!==(t=this.object.currentTransitionAction)&&void 0!==t&&t.dispose(),this.object.currentTransitionAction=this,this.timeline=new LD(this.data,this.object,this.sharedAssets,"0"),this.dispatchEvent({type:"reset"})),this.timeline.toggle(e)}dispose(){this.timeline.dispose()}};function jD(e,t,n,r,i){let o={Audio:[],Link:[],Transition:[]};return t.forEach((t=>{let{id:a,data:s}=t;try{"Audio"===s.type?hx[e.type].includes("Audio")&&o.Audio.push(new iP(a,s,n,i)):"Link"===s.type?hx[e.type].includes("Link")&&o.Link.push(new class{constructor(e){let{url:t,context:n}=e;if(!t)throw new Error("Missing property");this.url=t.startsWith("mailto:")?t:aP(t),this.context=null!==n&&void 0!==n?n:"tab"}dispatch(){"tab"===this.context?window.open(this.url,"_blank"):"window"===this.context?window.open(this.url,"_blank","width=".concat(window.innerWidth,", height=").concat(window.innerHeight)):window.location.assign(this.url)}}(s)):"Transition"===s.type&&hx[e.type].includes("Transition")&&o.Transition.push(new ND(a,s,r,i))}catch{}})),o}function BD(e){Object.values(e).forEach((e=>{e.forEach((e=>{(e instanceof iP||e instanceof ND)&&e.dispose()}))}))}var FD,zD=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],UD=e=>{var t;return null===(t=zD.find((t=>{let[n,r]=t;return r===e})))||void 0===t?void 0:t[0]},GD=e=>{var t;return null===(t=zD.find((t=>{let[n]=t;return n===e})))||void 0===t?void 0:t[1]},VD=(e,t)=>{let n=UD(e);if(n){let e=new CustomEvent(n,{bubbles:!0});return Object.defineProperty(e,"target",{writable:!1,value:t}),e}},HD=class extends $T{constructor(e){super(e),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=e=>{var t;if(!e.eventName||!e.target)return;let n=null===(t=this.splineEvents[UD(e.eventName)])||void 0===t?void 0:t[e.target.uuid];if(!n)return;"Scroll"===e.eventName&&void 0!==e.deltaY&&Object.assign(n,{deltaY:e.deltaY});let{domElement:r}=this.eventContext;r.dispatchEvent(n)};let{scene:t}=this.eventContext;t.traverseEntity((e=>{var t;if(null!==(t=e.data)&&void 0!==t&&t.events.length)for(let[r,i]of zD)if(e.data.events.some((e=>e.data.type===i))){var n;this.objectsPerEvents.has(r)?null===(n=this.objectsPerEvents.get(r))||void 0===n||n.push(e):this.objectsPerEvents.set(r,[e]);let t={id:e.uuid,name:e.name},o=VD(i,t),a=this.splineEvents[r];a?a[e.uuid]=o:this.splineEvents[r]={[e.uuid]:o}}}))}connect(){this.objectsPerEvents.forEach((e=>{e.forEach((e=>{e.addEventListener("beginEvent",this.onBeginEvent)}))}))}disconnect(){this.objectsPerEvents.forEach((e=>{e.forEach((e=>{e.removeEventListener("beginEvent",this.onBeginEvent)}))}))}},WD=class{constructor(e,t,n,r){if(this.data=e,this.object=t,this.isToggleEnable=!1,this.onReset=()=>{this.isToggleEnable=!0},this.useToggle=e.toggle,("KeyDown"===e.type||"KeyUp"===e.type)&&!e.key)throw new Error("Missing property");this.actions=jD(e,e.actions,t,n,r),this.actions.Transition.forEach((e=>{e.addEventListener("reset",this.onReset)}))}disconnect(){BD(this.actions)}dispatch(){this.useToggle?(this.isToggleEnable=!this.isToggleEnable,this.actions.Transition.forEach((e=>{e.toggle(this.isToggleEnable)}))):this.actions.Transition.forEach((e=>{e.play()})),this.actions.Link.forEach((e=>{e.dispatch()})),this.actions.Audio.forEach((e=>{e.dispatchBasic()}))}dispatchUserEvent(e){this.actions.Transition.forEach((t=>{t.toggle(!e)})),this.actions.Link.forEach((e=>{e.dispatch()})),this.actions.Audio.forEach((e=>{e.dispatchBasic()}))}},qD=class extends $T{constructor(e){super(e),this.objectsPerTypes={MouseDown:[],MouseUp:[],KeyDown:[],KeyUp:[]},this.eventsPerObjects={MouseDown:{},MouseUp:{},KeyDown:{},KeyUp:{}},this.heldKeys={},this.onMouseDown=e=>{Vx.length>1||(this.eventContext.updateRaycaster(e),this.handleMouseEvent("MouseDown"))},this.onMouseUp=e=>{Vx.length>1||(this.eventContext.updateRaycaster(e),this.handleMouseEvent("MouseUp"))},this.onKeyDown=e=>{this.heldKeys[e.key]||this.handleKeyEvent(e,"KeyDown"),this.heldKeys[e.key]=!0},this.onKeyUp=e=>{this.handleKeyEvent(e,"KeyUp")},this.releaseHeldKey=e=>{delete this.heldKeys[e.key]},this._onUserEvent=e=>{var t,n,r,i;let{eventName:o,target:a,reverse:s}=e;if(!o||!a)return;let l=GD(o);l&&("MouseDown"===l||"MouseUp"===l?(a.dispatchEvent({type:"beginEvent",eventName:l}),null===(t=this.eventsPerObjects[l])||void 0===t||null===(n=t[a.uuid])||void 0===n||n.forEach((e=>{e.dispatchUserEvent(s)}))):("KeyDown"===l||"KeyUp"===l)&&(a.dispatchEvent({type:"beginEvent",eventName:l}),null===(r=this.eventsPerObjects[l])||void 0===r||null===(i=r[a.uuid])||void 0===i||i.forEach((e=>{e.dispatchUserEvent()}))))};let{scene:t,sharedAssets:n}=this.eventContext;t.traverseEntity((e=>{var r;if(null===(r=e.data)||void 0===r||!r.events.length)return;let i=e.visible?["MouseDown","MouseUp","KeyDown","KeyUp"]:["KeyDown","KeyUp"];for(let a of i){var o;let r=this.eventsPerObjects[a];e.data.events.filter((e=>{let{data:t}=e;return t.type===a})).forEach((i=>{let{data:o}=i;try{let i=new WD(o,e,t,n);r[e.uuid]?r[e.uuid].push(i):r[e.uuid]=[i]}catch{}})),(null===(o=r[e.uuid])||void 0===o?void 0:o.length)&&this.objectsPerTypes[a].push(e)}}))}connect(){var e,t,n,r;let{domElement:i}=this.eventContext;this.heldKeys={},this.domEventsNeeded.clear(),null!==(e=this.objectsPerTypes.MouseDown)&&void 0!==e&&e.length&&(this.domEventsNeeded.add("pointerdown"),i.addEventListener("pointerdown",this.onMouseDown)),null!==(t=this.objectsPerTypes.MouseUp)&&void 0!==t&&t.length&&(this.domEventsNeeded.add("pointerup"),i.addEventListener("pointerup",this.onMouseUp)),null!==(n=this.objectsPerTypes.KeyDown)&&void 0!==n&&n.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),null!==(r=this.objectsPerTypes.KeyUp)&&void 0!==r&&r.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),Object.entries(this.objectsPerTypes).forEach((e=>{let[t,n]=e;n.forEach((e=>{e.addEventListener("userEvent",this._onUserEvent)}))}))}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach((e=>{Object.values(e).forEach((e=>{e.forEach((e=>{e.disconnect()}))}))})),Object.entries(this.objectsPerTypes).forEach((e=>{let[t,n]=e;n.forEach((e=>{e.removeEventListener("userEvent",this._onUserEvent)}))}))}handleMouseEvent(e){let{stopRaycast:t,raycaster:n,scene:r}=this.eventContext,i=this.objectsPerTypes[e];if(i.length)if(t){XT(YT(n,r,i)).forEach((t=>{this.eventsPerObjects[e][t.uuid]&&this.handleObjectMouseEventDispatch(t,e)}))}else i.forEach((t=>{QT(n,t)&&this.handleObjectMouseEventDispatch(t,e)}))}handleObjectMouseEventDispatch(e,t){var n,r;e.dispatchEvent({type:"beginEvent",eventName:t}),null===(n=this.eventsPerObjects[t])||void 0===n||null===(r=n[e.uuid])||void 0===r||r.forEach((e=>{e.dispatch()}))}handleKeyEvent(e,t){this.objectsPerTypes[t].forEach((n=>{let r=this.eventsPerObjects[t][n.uuid];r.some((t=>{let{data:n}=t;return"key"in n&&n.key===e.key}))&&n.dispatchEvent({type:"beginEvent",eventName:t}),r.forEach((t=>{"key"in t.data&&t.data.key===e.key&&t.dispatch()}))}))}},YD=new ur,XD=new ur,QD=new Ur,KD=new Ur,ZD=class{constructor(e,t,n,r){this.actionsIn=jD(e,e.inActions,t,n,r),this.actionsOut=jD(e,e.outActions,t,n,r)}disconnect(){BD(this.actionsIn),BD(this.actionsOut)}},JD=class extends ZD{constructor(e,t,n,r){super(e,t,n,r),this.data=e,this.object=t,this.stage="out",this.objects=[],this.onUpdateMatrix=()=>{QD.copy(this.objects[0].matrixWorld),this.objects[0].matrixWorld0&&QD.multiply(this.objects[0].matrixWorld0);let e=YD.setFromMatrixPosition(QD);KD.copy(this.objects[1].matrixWorld),this.objects[1].matrixWorld0&&KD.multiply(this.objects[1].matrixWorld0);let t=XD.setFromMatrixPosition(KD),n=e.distanceTo(t)<=this.distance?"in":"out";if(this.stage!==n){this.stage=n;let e="in"===this.stage?this.actionsIn:this.actionsOut;e.Audio.forEach((e=>e.dispatchConditional())),e.Transition.forEach((e=>e.play()))}};let{distance:i,fromObject:o,toObject:a}=e.condition;this.distance=i;for(let s of[o,a]){if(!s)throw new Error("Missing property");let e=n.find(s);if(!e)throw new Error("Missing property");this.objects.push(e)}}connect(){this.objects.forEach((e=>{e.addEventListener("updateMatrix",this.onUpdateMatrix)})),this.onUpdateMatrix()}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach((e=>{e.removeEventListener("updateMatrix",this.onUpdateMatrix)}))}},$D=class extends ZD{constructor(e,t,n,r){super(e,t,n,r),this.data=e,this.object=t,this.onBegin=e=>{let{target:t,state:n}=e;this.toState!==n&&(this.actionsOut.Audio.forEach((e=>e.dispatchConditional())),this.actionsOut.Transition.forEach((e=>e.play())))},this.onComplete=e=>{let{target:t,state:n}=e;this.toState===n&&(this.actionsIn.Audio.forEach((e=>e.dispatchConditional())),this.actionsIn.Transition.forEach((e=>e.play())))};let{condition:i}=e;if(!i.object)throw new Error("Missing property");let o=n.find(i.object);if(!o)throw new Error("Missing property");if(this.toObject=o,i.state&&!this.toObject.states[i.state])throw new Error("Missing property");this.toState=i.state}connect(){(this.actionsOut.Audio.length||this.actionsOut.Transition.length)&&this.toObject.addEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Transition.length)&&this.toObject.addEventListener("completeState",this.onComplete)}disconnect(){super.disconnect(),(this.actionsOut.Audio.length||this.actionsOut.Transition.length)&&this.toObject.removeEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Transition.length)&&this.toObject.removeEventListener("completeState",this.onComplete)}},ek=class extends $T{constructor(e){super(e),this.eventsPerConditions={Comparison:[],Distance:[],State:[]};let{scene:t,sharedAssets:n}=this.eventContext;t.traverseEntity((e=>{var r;if(null!==(r=e.data)&&void 0!==r&&r.events.length)for(let{data:i}of e.data.events)if("Conditional"===i.type)try{let r;"Comparison"===i.condition.type||("Distance"===i.condition.type?r=new JD(i,e,t,n):"State"===i.condition.type&&(r=new $D(i,e,t,n))),r&&this.eventsPerConditions[i.condition.type].push(r)}catch{}}))}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach((e=>e.forEach((e=>e.connect()))))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach((e=>e.forEach((e=>e.disconnect()))))}},tk=new ur,nk=new wo,rk=new Ur,ik=new ur,ok=class extends $T{constructor(e){super(e),this.events=[],this.onMouseMove=e=>{if(Vx.length>1)return;let{camera:t,raycaster:n}=this.eventContext;this.eventContext.updateRaycaster(e),t.getWorldDirection(ik),ik.negate(),this.events.forEach((e=>{var t;null!==(t=e.object)&&void 0!==t&&t.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.dispatch(ik,n)}))};let{scene:t}=this.eventContext;t.traverseEntity((e=>{var t;let n=null===(t=e.data)||void 0===t?void 0:t.events.find((e=>"Follow"===e.data.type));n&&this.events.push(new class{constructor(e,t){this.data=e,this.object=t}dispatch(e,t){nk.setFromNormalAndCoplanarPoint(e,this.object.getWorldPosition(tk)),t.ray.intersectPlane(nk,tk),this.object.position.copy(tk),null!==this.object.parent&&this.object.position.applyMatrix4(rk.copy(this.object.parent.matrixWorld).invert()),this.object.position.applyMatrix4(rk.copy(this.object.hiddenMatrix).invert()),this.object.updateMatrix(),SA(this.object)&&_A(this.object.parent)&&this.object.invalidateDownstreamBooleanData(!0),this.object.dispatchEvent({type:"requestRender"})}}(n.data,e))}))}connect(){if(!this.events.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Bx&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove)}disconnect(){if(!this.events.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Bx&&e.removeEventListener("pointerdown",this.onMouseMove),e.removeEventListener("pointermove",this.onMouseMove)}},ak=new ur,sk=new wo,lk=new ur,ck=class extends $T{constructor(e){super(e),this.events=[],this.onMouseMove=e=>{if(Vx.length>1)return;let{camera:t,raycaster:n}=this.eventContext;this.eventContext.updateRaycaster(e),t.getWorldDirection(lk),lk.negate(),this.events.forEach((e=>{var t;null!==(t=e.object)&&void 0!==t&&t.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),e.dispatch(lk,n)}))};let{scene:t}=this.eventContext;t.traverseEntity((e=>{var t;let n=null===(t=e.data)||void 0===t?void 0:t.events.find((e=>"LookAt"===e.data.type));n&&this.events.push(new class{constructor(e,t){this.data=e,this.object=t}dispatch(e,t){sk.set(e,-this.data.distance),t.ray.intersectPlane(sk,ak),this.object.lookAt(ak),this.object.updateMatrix(),SA(this.object)&&_A(this.object.parent)&&this.object.invalidateDownstreamBooleanData(!0),this.object.dispatchEvent({type:"requestRender"}),this.object.dispatchEvent({type:"changeRotation"})}}(n.data,e))}))}connect(){if(!this.events.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Bx&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove)}disconnect(){if(!this.events.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Bx&&e.removeEventListener("pointerdown",this.onMouseMove),e.removeEventListener("pointermove",this.onMouseMove)}},uk=class{constructor(e,t,n,r){this.data=e,this.object=t,this.entered=!1,this.actions=jD(e,e.actions,t,n,r)}disconnect(){BD(this.actions)}dispatchEnter(){this.entered||(this.entered=!0,this.actions.Transition.forEach((e=>e.toggle(!0))))}dispatchLeave(){this.entered&&(this.entered=!1,this.actions.Transition.forEach((e=>e.toggle(!1))))}dispatchUserEvent(e){this.actions.Transition.forEach((t=>t.toggle(!e)))}},dk=class extends $T{constructor(e){super(e),this.eventsPerObjects={},this.objects=[],this._prevObjects=[],this.onMouseDown=e=>{Vx.length>1||(this.eventContext.updateRaycaster(e),this.handleMouseHoverEvent())},this.onMouseUp=e=>{Vx.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=e=>{Vx.length>1||(this.eventContext.updateRaycaster(e),this.handleMouseHoverEvent())},this.onUserEvent=e=>{var t;let{eventName:n,target:r,reverse:i}=e;if(!n||!r)return;let o=GD(n);o&&"MouseHover"===o&&(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),null===(t=this.eventsPerObjects[r.uuid])||void 0===t||t.forEach((e=>e.dispatchUserEvent(i))))};let{scene:t,sharedAssets:n}=this.eventContext;t.traverseEntity((e=>{var r;if(e.visible&&null!==(r=e.data)&&void 0!==r&&r.events.length){var i;for(let{data:r}of e.data.events)if("MouseHover"===r.type)try{let i=new uk(r,e,t,n);this.eventsPerObjects[e.uuid]?this.eventsPerObjects[e.uuid].push(i):this.eventsPerObjects[e.uuid]=[i]}catch{}(null===(i=this.eventsPerObjects[e.uuid])||void 0===i?void 0:i.length)&&this.objects.push(e)}}))}connect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Bx&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.objects.forEach((e=>{e.addEventListener("userEvent",this.onUserEvent)}))}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Bx&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach((e=>{e.forEach((e=>{e.disconnect()}))})),this.objects.forEach((e=>{e.removeEventListener("userEvent",this.onUserEvent)}))}handleMouseHoverEvent(){let e=[];if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){let{stopRaycast:t,raycaster:n,scene:r}=this.eventContext;if(t){let t=YT(n,r,this.objects);e=XT(t)}else this.objects.forEach((t=>{QT(n,t)&&e.push(t)}))}this._prevObjects.length&&this._prevObjects.forEach((t=>{var n;e.includes(t)||(t.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),null===(n=this.eventsPerObjects[t.uuid])||void 0===n||n.forEach((e=>e.dispatchLeave())))})),e.length&&e.forEach((e=>{var t;e.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),null===(t=this.eventsPerObjects[e.uuid])||void 0===t||t.forEach((e=>e.dispatchEnter()))})),this._prevObjects=e}},hk=class{constructor(e,t,n,r){this.data=e,this.object=t,this.scrollCounter=0,this.actions=jD(e,e.actions,t,n,r)}connect(){this.scrollCounter=0}disconnect(){BD(this.actions)}dispatch(e){let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let n=this.scrollCounter/this.data.steps;this.actions.Transition.forEach((e=>e.seek(n)))}dispatchUserEvent(e){this.actions.Transition.forEach((t=>{t.toggle(!e)}))}},fk=class extends $T{constructor(e){super(e),this.eventsPerObject=new Map,this.onWheel=e=>{[...this.eventsPerObject.entries()].forEach((t=>{let[n,r]=t;n.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:e.deltaY}),r.forEach((t=>t.dispatch(e.deltaY)))}))},this.onUserEvent=e=>{var t;let{eventName:n,target:r,reverse:i}=e;if(!n||!r)return;let o=GD(n);o&&"Scroll"===o&&(r.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),null===(t=this.eventsPerObject.get(r))||void 0===t||t.forEach((e=>{e.dispatchUserEvent(i)})))};let{scene:t,sharedAssets:n}=this.eventContext;t.traverseEntity((e=>{var r;if(null!==(r=e.data)&&void 0!==r&&r.events.length)for(let{data:o}of e.data.events){var i;if("Scroll"!==o.type)continue;let r=new hk(o,e,t,n);this.eventsPerObject.has(e)?null===(i=this.eventsPerObject.get(e))||void 0===i||i.push(r):this.eventsPerObject.set(e,[r])}}))}connect(){let{domElement:e}=this.eventContext;[...this.eventsPerObject.entries()].forEach((e=>{let[t,n]=e;n.forEach((e=>e.connect())),t.addEventListener("userEvent",this.onUserEvent)})),[...this.eventsPerObject.values()].some((e=>e.length))&&(this.domEventsNeeded.add("wheel"),e.addEventListener("wheel",this.onWheel))}disconnect(){let{domElement:e}=this.eventContext;e.removeEventListener("wheel",this.onWheel),this.domEventsNeeded.clear(),[...this.eventsPerObject.entries()].forEach((e=>{let[t,n]=e;n.forEach((e=>e.disconnect())),t.removeEventListener("userEvent",this.onUserEvent)}))}},pk=class{constructor(e,t,n,r){this.data=e,this.object=t,this.actions=jD(e,e.actions,t,n,r)}disconnect(){BD(this.actions)}dispatch(){this.actions.Transition.forEach((e=>{e.play()}))}dispatchAfter(e){this.actions.Audio.forEach((t=>{var n;(null!==(n=t.interaction.data.triggerAfter)&&void 0!==n?n:"any")===e&&(t.interaction instanceof nP?t.interaction.audioPlayer.play():t.interaction instanceof rP&&t.interaction.dispatch())}))}dispatchUserEvent(e){this.actions.Transition.forEach((t=>{t.toggle(!e)})),this.actions.Audio.forEach((e=>{e.interaction instanceof nP?e.interaction.audioPlayer.play():e.interaction instanceof rP&&e.interaction.dispatch()}))}},mk=class extends $T{constructor(e){super(e),this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach((e=>{let[t,n]=e;t.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach((e=>{e.dispatchAfter("mouseDown")}))}))},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach((e=>{let[t,n]=e;t.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach((e=>{e.dispatchAfter("keyDown")}))}))},this.onAny=()=>{let{domElement:e,isExport:t}=this.eventContext;(t?document:e).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach((e=>{let[t,n]=e;t.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach((e=>{e.dispatchAfter("any")}))}))},this.onUserEvent=e=>{var t,n;let{eventName:r,target:i,reverse:o}=e;if(!r||!i)return;let a=GD(r);a&&"Start"===a&&(i.dispatchEvent({type:"beginEvent",eventName:"Start"}),null!==(t=this.eventsPerObject.get(i))&&void 0!==t&&t.forEach((e=>{e.dispatchUserEvent(o)})),null===(n=this.eventsAfterPerObject.get(i))||void 0===n||n.forEach((e=>{e.dispatchUserEvent(o)})))};let{scene:t,sharedAssets:n}=this.eventContext;t.traverseEntity((e=>{var r;if(null!==(r=e.data)&&void 0!==r&&r.events.length)for(let{data:a}of e.data.events){var i,o;if("Start"!==a.type)continue;let r=new pk(a,e,t,n);r.actions.Transition.length&&(this.eventsPerObject.has(e)?null===(i=this.eventsPerObject.get(e))||void 0===i||i.push(r):this.eventsPerObject.set(e,[r])),r.actions.Audio.length&&(this.eventsAfterPerObject.has(e)?null===(o=this.eventsAfterPerObject.get(e))||void 0===o||o.push(r):this.eventsAfterPerObject.set(e,[r]))}}))}connect(){if([...this.eventsAfterPerObject.values()].some((e=>e.length))){let{domElement:e,isExport:t}=this.eventContext,n=t?document:e;n.addEventListener("pointerdown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),n.addEventListener("pointerdown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach((e=>{let[t,n]=e;t.addEventListener("userEvent",this.onUserEvent)}))}[...this.eventsPerObject.entries()].forEach((e=>{let[t,n]=e;t.dispatchEvent({type:"beginEvent",eventName:"Start"}),n.forEach((e=>e.dispatch())),t.addEventListener("userEvent",this.onUserEvent)}))}disconnect(){if([...this.eventsAfterPerObject.values()].some((e=>e.length))){let{domElement:e,isExport:t}=this.eventContext,n=t?document:e;n.removeEventListener("pointerdown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),n.removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach((e=>{let[t,n]=e;t.removeEventListener("userEvent",this.onUserEvent),n.forEach((e=>e.disconnect()))}))}[...this.eventsPerObject.entries()].forEach((e=>{let[t,n]=e;t.removeEventListener("userEvent",this.onUserEvent),n.forEach((e=>e.disconnect()))}))}},gk=class{constructor(e,t,n,r){this.data=e,this.object=t,this.isToggleEnable=!1,this.disabled=!0,this.actions=jD(e,e.actions,t,n,r),this.target=e.target,this.useToggle=e.toggle}disconnect(){BD(this.actions)}dispatch(){this.disabled||(this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?(this.isToggleEnable=!this.isToggleEnable,this.actions.Transition.forEach((e=>{e.toggle(this.isToggleEnable)}))):this.actions.Transition.forEach((e=>{e.play()})),this.actions.Link.forEach((e=>{e.dispatch()})),this.actions.Audio.forEach((e=>{e.dispatchBasic()})))}};wg.then((e=>FD=e));var vk=new Ur,yk=new ur(1,1,1),xk=new ur,bk=new cr,wk=new ur,Sk=new Zr(0,0,0,"YXZ"),_k={type:"updateMatrix"},Ak={type:"beginEvent",eventName:"Collision"},Ek={type:"change"},Ck={type:"lock"},Mk={type:"unlock"},Tk=new ur,Pk=new ur,Dk=new ur,kk=new ur,Ok=new ur,Rk=new ur,Ik=new Ur,Lk=new Ur,Nk=new Ur,jk=new Ur,Bk=new cr,Fk=new cr,zk=new Zr(0,0,0,"YXZ"),Uk=new ur(0,1,0),Gk=new ur(1,1,1),Vk=new wu,Hk=new fr,Wk=class extends En{constructor(e,t,n,r,i,o,a,s,l,c){var u,d,h,f,p,m,g,v,y,x,b,w,S,_,A,E,C;if(super(),this.object=e,this.sceneGraph=t,this.domElement=n,this.sharedGameControlGlobals=o,this.cameraFollow=a,this.camera=s,this.scene=l,this.sharedAssets=c,this.enableDamping=!0,this.position0=new ur,this.rotation0=new Zr(0,0,0,"XYZ"),this.scale0=new ur,this.hiddenMatrix0=new Ur,this.target0=new ur,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.euler0=new Zr(0,0,0,"YXZ"),this.position0Cam=new ur,this.quat0Cam=new cr,this.scale0Cam=new ur,this.hiddenMatrix0Cam=new Ur,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.collider={radius:40,segment:new wu(new ur(0,-40,0),new ur(0,40,0)),matrix:new Ur,position:new ur,rotation:new cr},this.euler=new Zr(0,0,0,"YXZ"),this.eulerDelta=new ur,this.lastQuaternion=new cr,this.lastPosition=new ur,this.lastCameraQuaternion=new cr,this.lastCameraPosition=new ur,this.PI_2=Math.PI/2,this.prevMouse=new jn,this.velocityTarget=new ur,this.velocity=new ur,this.directionXZ=new ur,this.rotVelocityStick=new ur,this.rotVelocityTarget=new ur,this.rotVelocity=new ur,this.rotDirection=new ur,this.objectRot={x:0,y:0},this.firstPointerId=-1,this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0},this.onObject=!1,this.actionState={},this.slopeAdjust=!1,this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new Ur,this.objectToTarget=new ur,this.objectToTarget0=new ur,this.objectToCamXZ=new ur,this.objectToCamXZ0=new ur,this.targetToCamera=new ur,this.targetToCamera0=new ur,this.cameraPolarAxis0=new ur,this.targetPos=new ur,this.targetQuat=new cr,this.lerpFactorPos=(new ur).setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new cr,this.objXZQuatInv=new cr,this.objXZRotMat=new Ur,this.isFirstPerson=!1,this.actions={},this.lastDummyPos=new ur,this.lastDummyPosDelta=new ur,this.hit=null,this.groundVelocity=new ur,this.pushedVelocity=new ur,this.groundYRotation=0,this.objectRealQuat=new cr,this.colliderWorldQuat=new cr,this.groundNormal=new ur,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.onPointerDown=e=>{e.target!==this.domElement||-1!==this.firstPointerId||(this.firstPointerId=e.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),"keys"!==this.rotBy&&!Bx&&(!Fx||zx>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(e.clientX,e.clientY))},this.onPointerUp=e=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),"mouse"===e.pointerType&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=e=>{if(e.pointerId!==this.firstPointerId)return;let t=e.clientX-this.prevMouse.x,n=e.clientY-this.prevMouse.y;this.prevMouse.set(e.clientX,e.clientY),"mouse"===e.pointerType&&"keys"!==this.rotBy&&(Fx&&zx<15.5&&!Bx?(this.eulerDelta.y=-t*this.mouseOrbitSensitivity,this.eulerDelta.x=-n*this.mouseOrbitSensitivity):(this.eulerDelta.y=-e.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-e.movementY*this.mouseOrbitSensitivity)),"mouse"!==e.pointerType&&"drag"===this.rotByTouch&&(this.eulerDelta.y=-t*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-n*this.mouseOrbitSensitivity*5),this.dispatchEvent(Ek)},this.onPointerlockChange=e=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(Ck),Wk.isLocked=!0):(this.dispatchEvent(Mk),Wk.isLocked=!1)},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.onKeyDown=e=>{e.preventDefault();for(let t of this.keyAssignments)if(e.key.toUpperCase()===t[1]||e.key===t[1]){this.movementState[t[0]]=1;break}this.dispatchEvent(Ek)},this.onKeyUp=e=>{for(let t of this.keyAssignments)if(e.key.toUpperCase()===t[1]||e.key===t[1]||e.code.slice(3,e.code.length).toUpperCase()===t[1]){this.movementState[t[0]]=0;break}},this.resetChildrenToBaseState=(e,t)=>{if(e===this.object.uuid)return;let n=this.scene.find(e);null!==n.currentState&&OD(n,t,null,this.sharedAssets)},"CombinedCamera"===e.objectType&&(this.isFirstPerson=!0),this.position0.copy(this.object.position),this.rotation0.copy(this.object.rotation),this.scale0.copy(this.object.scale),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.rotation.reorder("YXZ"),this.euler0.copy(this.object.rotation),!1===this.isFirstPerson){let e=this.object.rotation.y;this.objectRealQuat.copy(this.object.quaternion),this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,e,0)}if(this.object.matrixAutoUpdate=!1,this.isFirstPerson){let e=this.object;this.target0.copy(e.getTarget()),this.zoom0=e.zoom}else!0===this.cameraFollow&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom);if(!0===this.cameraFollow){var M,T;if(this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),null!==(M=this.camera)&&void 0!==M&&null!==(T=M.parent)&&void 0!==T&&T.parent){let e=this.camera.matrix.clone().invert().premultiply(this.camera.matrixWorld),t=e.clone().invert();this.camera.hiddenMatrix.multiply(t),this.camera.matrix.premultiply(e),this.camera.matrixWorld.decompose(this.camera.position,this.camera.quaternion,this.camera.scale)}this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let e,t=new ur(0,0,-1).applyQuaternion(this.camera.quaternion),n=(new ur).subVectors(this.object.position,this.camera.position);if(this.objectToCamXZ.copy(n),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ),Math.abs(t.y)<1e-6){n.y=0,t.y=0;let r=n.projectOnVector(t);this.targetToCamera0.copy(r).negate(),e=this.camera.position.clone().add(r)}else{let r=t.multiplyScalar(n.y/t.y);this.targetToCamera0.copy(r).negate(),e=r.clone().add(this.camera.position)}this.objectToTarget0.subVectors(e,this.object.position);let r=(new Zr).setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-r.x,r.x=0,r.z=0,r.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(r)}if(this.isObjectCamera="CombinedCamera"===this.object.objectType,this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.connect(),this.rotByTouch=null!==(u=r.rotByTouch)&&void 0!==u?u:"joystick",this.rotBy=null!==(d=r.rotBy)&&void 0!==d?d:"keys",this.rotationMode=null!==(h=r.rotationMode)&&void 0!==h?h:"normal",this.moveMode=null!==(f=r.moveMode)&&void 0!==f?f:"walk",this.collisionEnabled=r.collisionEnabled,this.speedTranslate=1*(null!==(p=r.speedTranslate)&&void 0!==p?p:250),this.speedOrbit=.025*(null!==(m=r.speedRotate)&&void 0!==m?m:100),this.mouseOrbitSensitivity=16e-6*(null!==(g=r.speedRotate)&&void 0!==g?g:100),this.keyAssignments=r.keyAssignments.map((e=>{let t=[e[0],e[1]];return"\u25b2"===t[1]?t[1]="ArrowUp":"\u25c0"===t[1]?t[1]="ArrowLeft":"\u25bc"===t[1]?t[1]="ArrowDown":"\u25b6"===t[1]?t[1]="ArrowRight":"\u21e7"===t[1]?t[1]="Shift":"\u21b5"===t[1]?t[1]="Enter":"Space"===t[1]?t[1]=" ":"\u2318"===t[1]?t[1]="Meta":"Ctrl"===t[1]?t[1]="Control":"Esc"===t[1]&&(t[1]="Escape"),t})),"mouse"===r.rotBy){let e;e=this.keyAssignments.findIndex((e=>"rotNegX"===e[0])),-1!==e&&(this.keyAssignments[e][1]=""),e=this.keyAssignments.findIndex((e=>"rotPosX"===e[0])),-1!==e&&(this.keyAssignments[e][1]=""),e=this.keyAssignments.findIndex((e=>"rotPosY"===e[0])),-1!==e&&(this.keyAssignments[e][1]=""),e=this.keyAssignments.findIndex((e=>"rotNegY"===e[0])),-1!==e&&(this.keyAssignments[e][1]="")}this.lerpFactorPosStart=1-.02**(1/(60*(null!==(v=r.delayPos[0])&&void 0!==v?v:.3))),this.lerpFactorPosEnd=1-.02**(1/(60*(null!==(y=r.delayPos[1])&&void 0!==y?y:.3))),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/(60*(null!==(x=r.delayRot[0])&&void 0!==x?x:.3))),this.lerpFactorRotEnd=1-.02**(1/(60*(null!==(b=r.delayRot[1])&&void 0!==b?b:.3))),this.lerpFactorPosCamera=1-.02**(1/(60*(null!==(w=r.delayPosCamera)&&void 0!==w?w:.3))),this.lerpFactorRotCamera=1-.02**(1/(60*(null!==(S=r.delayRotCamera)&&void 0!==S?S:.3))),this.gravity=12*(null!==(_=i.gravity)&&void 0!==_?_:Dx.defaultData.gravity),this.pixelsPerMeter=null!==(A=i.pixelsPerMeter)&&void 0!==A?A:Dx.defaultData.pixelsPerMeter,this.usePhysics=null!==(E=i.usePhysics)&&void 0!==E?E:Dx.defaultData.usePhysics,this.jumpPower=20*r.jumpPower,this.resetYPosition=r.resetYPosition,this.orientMode=r.autoOrientMove?r.orientMode:"none",this.orientWith=null!==(C=r.orientWith)&&void 0!==C?C:lb.defaultDataThirdPerson.orientWith,"capsule"===r.collider.type?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=r.collider.height/2-r.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y):"sphere"===r.collider.type&&(this.collider.radius=r.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0);let P=(new ur).fromArray(r.collider.position),D=(new cr).setFromEuler((new Zr).fromArray([...r.collider.rotation,"XYZ"]));this.collider.position.copy(P).multiply(this.object.scale),this.collider.rotation.copy(D),this.collider.matrix.compose(P,D,Gk),void 0!==r.cameraXAxis&&(this.cameraXAxis=r.cameraXAxis,this.cameraYAxis=r.cameraYAxis,this.minPolarAngle=r.cameraRotXLimits[0],this.maxPolarAngle=r.cameraRotXLimits[1],this.minAzimuthAngleRel=r.cameraRotYLimits[0],this.maxAzimuthAngleRel=r.cameraRotYLimits[1]),void 0!==r.gameActions&&Object.entries(r.gameActions).forEach(((t,n)=>{let[r,i]=t;i.forEach((t=>{let{id:n,data:i}=t;try{void 0===this.actions[r]&&(this.actions[r]=[]),"Transition"===i.type?this.actions[r].push(new ND(n,i,l,c)):"Audio"===i.type&&this.actions[r].push(new iP(n,i,e,c))}catch{}}))})),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle")}reset(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.object.rotation.copy(this.rotation0),this.object.position.copy(this.position0),this.object.scale.copy(this.scale0),this.object.hiddenMatrix.copy(this.hiddenMatrix0),!0===e){if(this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.object.position,this.object.quaternion,this.object.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.rotation.reorder("YXZ"),!1===this.isFirstPerson){let e=this.object.rotation.y;this.object.rotation.y=0,this.objXZQuat.copy(this.object.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.object.quaternion),this.object.rotation.set(0,e,0)}this.euler.setFromQuaternion(this.object.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}this.isObjectCamera?this.object.matrixAutoUpdate=!0:this.object.updateMatrix(),!0===this.cameraFollow&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.dispatchEvent(Ek)}connect(){this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError)}dispose(){this.disconnect(),Object.values(this.actions).forEach((e=>{e.forEach((e=>{(e instanceof ND||e instanceof iP)&&e.dispose()}))}))}resetTo(e,t,n){}dispatchStartEvent(e){void 0!==this.actions[e]&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].forEach((e=>{e instanceof ND?e.play():e instanceof iP&&e.dispatchGameControl("start")}))))}dispatchStopEvent(e){void 0!==this.actions[e]&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].forEach((e=>{e instanceof ND?e.stop():e instanceof iP&&e.dispatchGameControl("stop")})),this.sceneGraph.traverseFrom(this.object.uuid,this.resetChildrenToBaseState)))}update(e){if(this.gravity<0?this.object.position.y<this.resetYPosition:this.object.position.y>this.resetYPosition)return this.reset(!0),!0;let t=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let n=60*t;if(this.usePhysics){var r;let e=Ok.set(0,(0===this.velocity.y?-this.pixelsPerMeter:this.velocity.y)*t,0).divideScalar(this.pixelsPerMeter),n=this.sharedGameControlGlobals.rapierWorld.castShape(kk.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,e,null===(r=this.object.rigidBody)||void 0===r?void 0:r.collider(0).shape,1,void 0,void 0,void 0,this.object.rigidBody);if(this.slopeAdjust=!1,n){this.slopeAdjust=!1,this.groundNormal.set(n.normal2.x,n.normal2.y,n.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),180*Math.acos(this.groundNormal.y)/Math.PI>45||(this.slopeAdjust=!0),this.onObject=!0;let e=n.collider._parent;this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let n of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(n.rigidBody===e){n.matrixWorld.decompose(kk,Fk,Ok),this.groundVelocity.subVectors(kk,n.prevT),this.object.getWorldPosition(Ok).add(this.collider.position).sub(n.position),this.groundYRotation=zk.setFromQuaternion(Fk).y-n.prevR.y,Rk.copy(Ok).applyAxisAngle(Uk,this.groundYRotation),this.groundVelocity.add(Rk.sub(Ok)).divideScalar(t);break}}else this.onObject=!1}"walk"===this.moveMode&&this.collisionEnabled&&(1===this.movementState.jump&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.velocityTarget.y+=this.onObject?0:this.gravity*n),"fly"===this.moveMode&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.directionXZ.normalize(),this.movementState.moveNegZ||this.movementState.movePosZ?this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce:this.velocityTarget.z=0,this.movementState.moveNegX||this.movementState.movePosX?this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce:this.velocityTarget.x=0,("walk"===this.moveMode?this.velocityTarget.x+this.velocityTarget.z===0:0===this.velocityTarget.manhattanLength())?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),"walk"===this.moveMode&&(this.lerpFactorPos.y=1),null===this.hit&&0===this.pushedVelocity.manhattanLength()||!1===this.usePhysics?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**n),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**n),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**n)):this.velocity.copy(this.velocityTarget),("walk"===this.moveMode?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("move")));let i=Dk.copy(this.velocity);if("none"!==this.orientMode&&!1===this.isFirstPerson){let e=Ok.copy(i);e.y=0,i.set(0,i.y,-1*e.length())}if(i.applyQuaternion(this.object.quaternion),this.slopeAdjust&&(Fk.setFromUnitVectors(Uk,this.groundNormal),i.applyQuaternion(Fk)),!0===this.usePhysics){let e=Ok;this.pushedVelocity.set(0,0,0);for(let n of this.sharedGameControlGlobals.entitiesWithTransformAnim){var o,a;null!==(o=n.parent)&&void 0!==o&&o.matrixWorldFusedFalse?Ik.multiplyMatrices(null===(a=n.parent)||void 0===a?void 0:a.matrixWorldFusedFalse,n.matrix):Ik.multiplyMatrices(n.parent.matrixWorld,n.matrix);let r=Rk.setFromMatrixPosition(Ik).sub(n.prevT).divideScalar(t).divideScalar(this.pixelsPerMeter),s=n.rigidBody.collider(0).castCollider(r,this.object.rigidBody.collider(0),kk.copy(i).divideScalar(this.pixelsPerMeter),t);if(r.multiplyScalar(this.pixelsPerMeter),null!==s){this.pushedVelocity.copy(r),e.copy(s.normal1).applyQuaternion(n.quaternion);break}}if(0!==this.pushedVelocity.manhattanLength()){let t=e.dot(i);t<0&&i.addScaledVector(e,-t),i.add(this.pushedVelocity)}else i.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),"normal"===this.rotationMode&&(this.movementState.rotPosX||this.movementState.rotNegX)||"steer"===this.rotationMode&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||"walk"===this.moveMode)?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,"normal"===this.rotationMode&&(this.movementState.rotPosY||this.movementState.rotNegY)||"steer"===this.rotationMode&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(t),this.rotVelocityStick),0===this.rotVelocityTarget.manhattanLength()?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**n):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**n),this.euler.x+=this.rotVelocity.x*t,this.euler.y+=this.rotVelocity.y*t+this.groundYRotation,0===this.rotVelocityTarget.y&&0===this.directionXZ.manhattanLength()?this.rotationAccumWhenOrientWithCamera=0:(!1===this.cameraFollow||"Locked"===this.cameraYAxis)&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*t),!1===this.isFirstPerson&&"none"!==this.orientMode&&this.directionXZ.manhattanLength()>0){let e=kk,n=Ok.copy(this.directionXZ);n.x*=-1,this.camera.getWorldDirection(e);let r=Rk.copy(Uk).multiplyScalar(e.dot(Uk));if(e.sub(r),Rk.copy(this.collider.position).applyQuaternion(this.object.quaternion),"camera"===this.orientWith?this.object.rotation.y=e.angleTo(n)*(e.cross(n).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera:this.object.rotation.y=this.euler.y+Math.atan2(-this.directionXZ.z,this.directionXZ.x)-Math.PI/2,Pk.copy(this.collider.position).applyQuaternion(this.object.quaternion),Pk.sub(Rk),this.object.position.sub(Pk),"radial"===this.orientMode){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(Uk,this.euler.y-this.euler0.y);let e=Ok.copy(this.objectToCamXZ).normalize(),n=Rk.copy(i).multiplyScalar(t);n.y=0;let r=n.sub(kk.copy(e).multiplyScalar(n.dot(e))).cross(e).y;this.euler.y-=Math.atan2(r,this.objectToCamXZ.length())}}if(!0===this.cameraFollow&&"walk"===this.moveMode&&!1===this.isFirstPerson?"Limit"===this.cameraXAxis?this.euler.x=Nn.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=Nn.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):("Limit"===this.cameraXAxis||this.isFirstPerson||!0===this.cameraFollow)&&(this.euler.x=Nn.clamp(this.euler.x,-this.PI_2,this.PI_2)),(this.isFirstPerson||"walk"!==this.moveMode)&&(this.object.rotation.x=this.euler.x),(this.isFirstPerson||"none"===this.orientMode||0===this.directionXZ.manhattanLength())&&(Rk.copy(this.collider.position).applyQuaternion(this.object.quaternion),this.object.rotation.y+=this.rotVelocity.y*t+this.groundYRotation,0!==this.rotVelocityTarget.y&&(!1===this.cameraFollow||"Locked"===this.cameraYAxis)&&(this.euler.y=this.object.rotation.y),Pk.copy(this.collider.position).applyQuaternion(this.object.quaternion),Pk.sub(Rk),this.object.position.sub(Pk)),this.object.rotation.x=Nn.clamp(this.object.rotation.x,-this.PI_2,this.PI_2),this.objectRot.x=this.euler.x,this.objectRot.y=this.euler.y,this.objectRealQuat.multiplyQuaternions(this.object.quaternion,this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){var s,l,c;if(this.hit=this.sharedGameControlGlobals.rapierWorld.castShape(kk.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,Ok.copy(i).divideScalar(this.pixelsPerMeter),null===(s=this.object.rigidBody)||void 0===s?void 0:s.collider(0).shape,t,8,void 0,void 0,this.object.rigidBody),null!==this.hit){let e=this.sharedGameControlGlobals.colliderToEntity[this.hit.collider.handle];if(e!==this.lastHitObj){this.lastHitObj=e;let t=this.sharedGameControlGlobals.eventsPerObjects[null===e||void 0===e?void 0:e.uuid];if(t)for(let n of t)"character"===n.data.target&&(e.dispatchEvent(Ak),n.dispatch())}let n=kk.set(this.hit.normal2.x,this.hit.normal2.y,this.hit.normal2.z).applyQuaternion(this.colliderWorldQuat);if(this.hit.toi>0){var u,d;let e=Ok.copy(i).multiplyScalar(null===(u=this.hit)||void 0===u?void 0:u.toi).dot(n),r=this.hit.toi;e>2&&(r=this.hit.toi*(e-2)/e,this.object.position.addScaledVector(i,r));let o=Ok.copy(i).multiplyScalar(t-r);n.multiplyScalar(o.dot(n));let a=o.sub(n),s=this.sharedGameControlGlobals.rapierWorld.castShape(kk.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.object.position).divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,Rk.copy(a).divideScalar(this.pixelsPerMeter),null===(d=this.object.rigidBody)||void 0===d?void 0:d.collider(0).shape,20,8,void 0,void 0,this.object.rigidBody);if(null===s)this.object.position.add(a);else if(s.toi>1){let e=kk.set(s.normal2.x,s.normal2.y,s.normal2.z).applyQuaternion(this.colliderWorldQuat);Ok.copy(a).dot(e)>2&&this.object.position.add(a)}this.lastDummyPosDelta.subVectors(this.object.position,this.lastDummyPos),this.lastDummyPos.copy(this.object.position)}}else 0!==this.directionXZ.manhattanLength()&&(this.lastHitObj=null),this.object.position.addScaledVector(i,t);null!==(l=this.object.rigidBody)&&void 0!==l&&l.setTranslation(kk.copy(this.object.position).divideScalar(this.pixelsPerMeter),!0),null===(c=this.object.rigidBody)||void 0===c||c.setRotation(Bk.copy(this.object.quaternion).multiply(this.objXZQuat),!0)}else{let e=this.onObject?1:5,n=i.multiplyScalar(t/e);for(let r=0;r<e;r++)this.object.position.add(n),this.collisionAdjustment(t/e)}else this.object.position.addScaledVector(i,t);if("walk"===this.moveMode&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),!1===this.isFirstPerson&&this.object.quaternion.multiply(this.objXZQuat),this.isObjectCamera||this.object.updateMatrix(),!1===this.isFirstPerson&&this.object.quaternion.multiply(this.objXZQuatInv),!0===this.cameraFollow){this.updateFollowArms();let e=this.objectToTarget.add(this.object.position),t=this.targetToCamera.add(e);Ik.lookAt(t,e,Uk).setPosition(t),Ik.decompose(this.targetPos,this.targetQuat,kk),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**n),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**n),this.camera.updateMatrix(),this.camera.matrixWorldNeedsUpdate=!0,"Limit"===this.cameraYAxis&&"cartesian"===this.orientMode&&(this.euler.y=Nn.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=Nn.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),(!(this.lastPosition.distanceToSquared(this.object.position)<this.threshEndTranslate&&8*(1-this.lastQuaternion.dot(this.object.quaternion))<this.threshEndRotate&&(!this.camera||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate))||"walk"===this.moveMode&&!0!==this.onObject&&!1!==this.collisionEnabled)&&(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e,t=Bk.setFromAxisAngle(Uk,"Limit"===this.cameraYAxis&&"radial"!==this.orientMode?Nn.clamp(this.objectRot.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.objectRot.y-this.euler0.y);("Locked"!==this.cameraYAxis||"radial"===this.orientMode)&&this.objectToTarget.applyQuaternion(t),e="Limit"===this.cameraXAxis?Nn.clamp(this.objectRot.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):Nn.clamp(this.objectRot.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let n=kk.copy(this.cameraPolarAxis0);("Locked"!==this.cameraYAxis||"radial"===this.orientMode)&&n.applyQuaternion(t);let r=Fk.setFromAxisAngle(n,e);"Locked"!==this.cameraYAxis&&this.targetToCamera.applyQuaternion(t),"Locked"!==this.cameraXAxis&&this.targetToCamera.applyQuaternion(r)}collisionAdjustment(e){var t;let n=Pk.set(0,0,0);this.object.updateMatrix();let r=Ik.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(kk,Bk,Ok).compose(kk,Bk,Gk);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach((e=>{if(e===this.object||e.isDescendantOf(this.object))return;Hk.makeEmpty();let t=jk.copy(e.matrixWorld).decompose(kk,Bk,Ok).compose(kk,Bk,Gk),i=Lk.copy(t).invert(),o=Nk.copy(Lk).multiply(r);Vk.copy(this.collider.segment),Vk.start.applyMatrix4(o),Vk.end.applyMatrix4(o);let a=Tk.copy(this.object.position).applyMatrix4(i);Hk.expandByPoint(Vk.start),Hk.expandByPoint(Vk.end),Hk.min.addScalar(-this.collider.radius),Hk.max.addScalar(this.collider.radius),e.boundsTree.shapecast({intersectsBounds:e=>e.intersectsBox(Hk),intersectsTriangle:e=>{let r=kk,i=Ok,o=e.closestPointToSegment(Vk,r,i);if(o<this.collider.radius){let e=this.collider.radius-o,s=i.sub(r).normalize(),l=Rk.copy(a);l.addScaledVector(s,e);let c=l.applyMatrix4(t).sub(this.object.position);n.add(c),Vk.start.addScaledVector(s,e),Vk.end.addScaledVector(s,e)}}})})),Hk.makeEmpty(),Vk.copy(this.collider.segment),Vk.start.applyMatrix4(r),Vk.end.applyMatrix4(r),Hk.expandByPoint(Vk.start),Hk.expandByPoint(Vk.end),Hk.min.addScalar(-this.collider.radius),Hk.max.addScalar(this.collider.radius),null!==(t=this.sharedGameControlGlobals.staticMeshBVH)&&void 0!==t&&t.shapecast({intersectsBounds:e=>e.intersectsBox(Hk),intersectsTriangle:e=>{let t=kk,r=Ok,i=e.closestPointToSegment(Vk,t,r);if(i<this.collider.radius){let e=this.collider.radius-i,o=r.sub(t).normalize();n.addScaledVector(o,e),Vk.start.addScaledVector(o,e),Vk.end.addScaledVector(o,e)}}}),this.onObject=n.y>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let i=Math.max(0,n.length()-1e-5);n.normalize().multiplyScalar(i),this.object.position.add(n)}},qk=Wk;qk.isLocked=!1;var Yk={type:"change"},Xk={type:"changeZoom"},Qk={type:"changePan"},Kk={type:"start"},Zk={type:"end"},Jk=new cr,$k=new jn,eO=2*Math.PI,tO=2,nO=.125,rO=1,iO=.1,oO=class extends En{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.object=e,this.domElement=t,this.isExport=n,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,wt,xt],this.offset=new ur,this.eye=new ur,this.lastPosition=new ur,this.lastQuaternion=new cr,this.current=new jn,this.overShoot=new jn,this.overRatio=new jn,this.spherical=new gu,this.sphericalDelta=new gu,this.panOffset=new ur,this.panLeftV=new ur,this.panUpV=new ur,this.panV=new ur,this.rotateStart=new jn,this.rotateEnd=new jn,this.rotateDelta=new jn,this.panStart=new jn,this.panEnd=new jn,this.panDelta=new jn,this.dollyStart=new jn,this.dollyEnd=new jn,this.dollyDelta=new jn,this.rotationRangeFactor=new jn,this.panRangeFactor=new jn,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isFirstHover=!0,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.update=()=>{let e=this.object.position;this.offset.copy(e).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&-1===this.state&&this.rotateLeft((!0===this.autoRotateClockwise?1:-1)*this.getAutoRotationAngle()),0!==this.rotationLimitsMode&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),2!==this.rotationLimitsMode&&(this.spherical.phi+=this.sphericalDelta.phi),(1!==this.rotationLimitsMode||!0===this.autoRotate)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),0!==this.panLimitsMode&&(this.target.applyQuaternion(Jk.copy(this.object.quaternion).invert()),this.panOffset.applyQuaternion(Jk),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(this.object.quaternion),this.panOffset.applyQuaternion(this.object.quaternion)),2===this.panLimitsMode&&(this.panOffset.y=0),1===this.panLimitsMode&&(this.panOffset.x=0),-1!==this.state||this.gesture?(this.target.add(this.panOffset),this.panOffset.set(0,0,0)):(this.panOffset.multiplyScalar(1-nO),this.target.add(this.panOffset)),this.offset.setFromSpherical(this.spherical),e.copy(this.target).add(this.offset);let t=this.spherical.phi%eO;return this.eye.copy(this.offset).normalize(),this.object.up.copy(hi.DefaultUp).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),t>0&&t>Math.PI||t<0&&t>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),-1===this.state||!0===this.enableDamping?(this.sphericalDelta.theta*=1-nO,this.sphericalDelta.phi*=1-nO):this.sphericalDelta.set(0,0,0),this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>.01||8*(1-this.lastQuaternion.dot(this.object.quaternion))>1e-8?(this.dispatchEvent(Yk),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=e=>{!1!==this.enabled&&(this.isPointerDown=!0,1===Vx.length&&(this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)),"touch"===e.pointerType||"pen"===e.pointerType&&Bx?this.onPointerDownTouch(e):this.onPointerDownMouse(e))},this.onPointerMove=e=>{!1!==this.enabled&&("touch"===e.pointerType||"pen"===e.pointerType&&Bx?this.onPointerMoveTouch(e):this.onPointerMoveMouse(e))},this.onPointerUp=e=>{this.isPointerDown=!1,0===Vx.length&&(this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp)),this.dispatchEvent(Zk),this.state=-1},this.onPointerDownMouse=e=>{let t;switch(t=this.useKeyEvents?this.mouseButtons[e.button]:this.mouseButtonsPlay[e.button],t){case 0:if(!0!==e.altKey||e.shiftKey||Ux(e)){if(" "===this.key){if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2}}else{if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this.state=0}break;case 4:if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2;break;case 3:if(Ux(e)||e.shiftKey){if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2}else{if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this.state=0}break;case 5:if(Ux(e)||e.shiftKey){if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this.state=0}else{if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(Kk)},this.onPointerMoveMouse=e=>{switch(this.state){case 0:if(!1===this.enableRotate)return;this.handleMouseMoveRotate(e);break;case 1:if(!1===this.enableZoom)return;this.handleMouseMoveDolly(e);break;case 2:if(!1===this.enablePan)return;this.handleMouseMovePan(e)}},this.onPointerDownTouch=e=>{switch(this.touches[Vx.length-1]){case yt:if(!1===this.enableRotate)return void(this.state=-1);this.handleTouchStartRotate(),this.state=3;break;case xt:if(!1===this.enablePan)return void(this.state=-1);this.handleTouchStartPan(),this.state=4;break;case bt:if(!1===this.enableZoom&&!1===this.enablePan)return;this.handleTouchStartDollyPan(),this.state=5;break;case wt:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(Kk)},this.onPointerMoveTouch=e=>{switch(this.state){case 3:if(!1===this.enableRotate)return;this.handleTouchMoveRotate(e),this.update();break;case 4:if(!1===this.enablePan)return;this.handleTouchMovePan(e),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this.handleTouchMoveDollyPan(e),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.handleTouchMoveDollyRotate(e),this.update();break;default:this.state=-1}},this.dispatchEndDebounced=eg((()=>this.dispatchEvent(Zk)),33),this.onMouseWheel=e=>{!1===this.enabled||!1===this.enableZoom&&!1===this.enablePan||(!1===this.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&e.preventDefault(),this.dispatchEvent(Kk),this.handleMouseWheel(e),this.dispatchEndDebounced())},this.onGesture=e=>{if(!1!==this.enabled)if(e.preventDefault(),"gesturechange"===e.type){if(!1===this.enableZoom)return;this.dispatchEvent(Kk),e.scale>this.prevScale?this.dollyIn(this.getZoomScale()):e.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=e.scale,this.update()}else this.dispatchEvent(Zk)},this.onContextMenu=e=>{!1!==this.enabled&&e.preventDefault()},this.onTouchEnd=e=>{e.preventDefault()},this.onKeyDown=e=>{!1!==this.enabled&&(this.key=e.key)},this.onKeyUp=()=>{!1!==this.enabled&&(this.key=void 0,-1!==this.state&&this.onPointerUp(Vx[0]))},this.onPointerHover=e=>{if(!("mouse"!==e.pointerType||!1===this.enabled||-1!==this.state||2===this.hoverRotatePanMode&&this.isPanOverShoot||1===this.hoverRotatePanMode&&this.isRotateOverShoot)){if(window.clearTimeout(this.timerHover),this.isPointerDown=!0,this.isFirstHover){let e={clientX:window.innerWidth/2,clientY:window.innerHeight/2};2===this.hoverRotatePanMode?this.handleMouseDownPan(e):1===this.hoverRotatePanMode&&this.handleMouseDownRotate(e),this.isFirstHover=!1}2===this.hoverRotatePanMode?this.handleMouseMovePan(e,iO):1===this.hoverRotatePanMode&&this.handleMouseMoveRotate(e,iO),this.timerHover=window.setTimeout((()=>{this.isPointerDown=!1}),30)}},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.connect(),this.update()}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.isUpVectorFlipped=this.isUpVectorFlipped0,this.object.updateProjectionMatrix(),this.dispatchEvent(Yk),this.isFirstHover=!0,this.update(),this.state=-1}resetTo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.target.copy(e),this.object.position.copy(t),this.object.zoom=n,this.object.isUpVectorFlipped=r,this.object.updateProjectionMatrix(),this.dispatchEvent(Yk),this.update(),this.state=-1}fromJSON(e){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.isFirstHover=!0,0!==this.hoverRotatePanMode&&this.domElement.addEventListener("pointermove",this.onPointerHover),iO=(e.hoverRotatePanStrength/100)**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,tO=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let t=this.object.getTarget().applyQuaternion(Jk.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+t.y,this.maxV=e.panVerticalOffset.max+t.y,this.minH=-e.panHorizontalOffset.min+t.x,this.maxH=e.panHorizontalOffset.max+t.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=aO(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=aO(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=aO(this.spherical.theta-e.rotationHorizontalOffset.min),this.maxTheta=aO(this.spherical.theta+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,1===e.orbitTouches&&(this.touches[0]=yt),1===e.panTouches&&(this.touches[0]=xt),2===e.orbitTouches&&(this.touches[1]=wt),2===e.panTouches&&(this.touches[1]=bt),3===e.orbitTouches&&(this.touches[2]=yt),3===e.panTouches&&(this.touches[2]=xt)}connect(){this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),Nx||(this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture)),this.domElement.addEventListener("touchend",this.onTouchEnd)}dispose(){this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),Nx||(this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture)),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,n,r,i,o,a,s){let l,c,u;this.overShoot.set(0,0),e instanceof ur?(l=e.x,c=e.y,this.current.set(this.target.x,this.target.y),u=!0):(l=e.theta,c=e.phi,this.current.set(aO(this.spherical.theta),aO(this.spherical.phi)),u=!1),0===n&&(this.current.x+=l,this.current.y+=c),(3===t||2===t)&&(!u&&this.isThetaFlipped?this.current.x>r&&this.current.x<0?this.overShoot.x=r-this.current.x:this.current.x<i&&this.current.x>0&&(this.overShoot.x=i-this.current.x):this.current.x>r?this.overShoot.x=r-this.current.x:this.current.x<i&&(this.overShoot.x=i-this.current.x),r===i&&(l=0)),(3===t||1===t)&&(this.current.y>o?this.overShoot.y=o-this.current.y:this.current.y<a&&(this.overShoot.y=a-this.current.y),o===a&&(c=0)),u||(this.overShoot.x=aO(this.overShoot.x),this.overShoot.y=aO(this.overShoot.y)),0!==n?(this.overRatio.copy(this.overShoot).divide(s),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),1===n&&(this.overRatio.x=sO(Math.abs(this.overRatio.x)),this.overRatio.y=sO(Math.abs(this.overRatio.y))),this.isPointerDown||1===n?2===n&&(this.overRatio.x>.9||this.overRatio.y>.9)?this.isPointerDown=!1:(l*this.overShoot.x<0&&(l*=1-this.overRatio.x),c*this.overShoot.y<0&&(c*=1-this.overRatio.y)):2===n&&(!u&&(this.overRatio.x>.002||this.overRatio.y>.002)||u&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(l=.05*this.overShoot.x,c=.05*this.overShoot.y,u?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):u?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,c+=this.overShoot.y),e instanceof ur?(e.x=l,e.y=c):(e.theta=l,e.phi=c)}setEnableDampingSpeed(e){this.enableDamping=e,rO=!0===e?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*tO}getZoomScale(){return Math.pow(.95,2)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let n=this.domElement;if(n&&this.object.isPerspectiveCamera){let r=this.object.position;this.panV.copy(r).sub(this.target);let i=this.panV.length();i*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*i/n.clientHeight,this.object.matrix),this.panUp(2*t*i/n.clientHeight,this.object.matrix)}else n&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix));this.dispatchEvent(Qk)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(Xk)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(Xk)}zoomOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getZoomScale();this.dispatchEvent(Kk),this.dollyOut(e),this.dispatchEvent(Zk)}zoomIn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getZoomScale();this.dispatchEvent(Kk),this.dollyIn(e),this.dispatchEvent(Zk)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Fx&&zx<15.5&&!Bx?(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)):this.rotateDelta.set(e.movementX,e.movementY),this.rotateDelta.multiplyScalar(rO*t).rotateAround($k,-this.object.angleOffsetFromUp);let n=this.domElement;this.rotateLeft(2*Math.PI*this.rotateDelta.x/n.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/n.clientHeight),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Fx&&zx<15.5&&!Bx?(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)):this.panDelta.set(e.movementX,e.movementY),this.panDelta.multiplyScalar(1*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(!1===jx&&!1===Ux(e)&&!0===function(e){return 0===e.wheelDeltaY||0===e.deltaY?!(Lx&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120)&&(e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX:0===e.deltaMode):e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY:0===e.deltaMode}(e)){if(!1===this.enablePan)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(1),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout((()=>{this.gesture=!1,this.isPointerDown=!1}),30)}else{if(!1===this.enableZoom)return;0===e.deltaY?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(2===Vx.length){let e=.5*(Vx[0].pageX+Vx[1].pageX),t=.5*(Vx[0].pageY+Vx[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(Vx[0].pageX,Vx[0].pageY)}handleTouchStartPan(){if(2===Vx.length){let e=.5*(Vx[0].pageX+Vx[1].pageX),t=.5*(Vx[0].pageY+Vx[1].pageY);this.panStart.set(e,t)}else this.panStart.set(Vx[0].pageX,Vx[0].pageY)}handleTouchStartDolly(){let e=Vx[0].pageX-Vx[1].pageX,t=Vx[0].pageY-Vx[1].pageY,n=Math.sqrt(e*e+t*t);this.dollyStart.set(0,n)}handleTouchStartDollyPan(){this.enableZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(2===Vx.length){let t=Kx(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this.rotateEnd.set(n,r)}else{if(e.pointerId!==Vx[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(rO);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(2===Vx.length){let t=Kx(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this.panEnd.set(n,r)}else{if(e.pointerId!==Vx[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(1),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=Kx(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);this.dollyEnd.set(0,i),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,2)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}};function aO(e){let t=2*Math.PI;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function sO(e){return 1-Math.pow(1-e,4)}var lO=Object.keys(JT).filter((e=>isNaN(Number(e))));var cO=0,uO=1,dO="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",hO=class extends uo{constructor(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super({name:"BokehMaterial",defines:{PASS:arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"2":"1"},uniforms:{kernel64:new hu(null),kernel16:new hu(null),inputBuffer:new hu(null),cocBuffer:new hu(null),texelSize:new hu(new jn),scale:new hu(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;\n#if PASS == 1\nuniform vec4 kernel64[32];\n#else\nuniform vec4 kernel16[8];\n#endif\nvarying vec2 vUv;void main(){\n#ifdef FOREGROUND\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\n#else\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\n#endif\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\n#ifdef FOREGROUND\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\n#else\nvec2 step=texelSize*CoC;\n#endif\n#if PASS == 1\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\n#else\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\n#endif\n}}",vertexShader:dO}),this.toneMapped=!1,e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=new Float32Array(128),t=new Float32Array(32),n=0,r=0;for(let a=0;a<80;++a){let i=2.39996323*a,o=Math.sqrt(a)/Math.sqrt(80),s=o*Math.cos(i),l=o*Math.sin(i);a%5===0?(t[r++]=s,t[r++]=l):(e[n++]=s,e[n++]=l)}let i=[],o=[];for(let a=0;a<128;)i.push(new ar(e[a++],e[a++],e[a++],e[a++]));for(let a=0;a<32;)o.push(new ar(t[a++],t[a++],t[a++],t[a++]));this.uniforms.kernel64.value=i,this.uniforms.kernel16.value=o}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function fO(e,t,n){return e*(t-n)-t}function pO(e,t,n){return Math.min(Math.max((e+t)/(t-n),0),1)}var mO=class extends uo{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new hu(null),focusDistance:new hu(0),focusRange:new hu(0),cameraNear:new hu(.3),cameraFar:new hu(1e3)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}void main(){float depth=readDepth(vUv);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}",vertexShader:dO}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-fO(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=pO(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-fO(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=pO(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof fo?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},gO=class extends uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn;super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new hu(null),texelSize:new hu(new jn),halfTexelSize:new hu(new jn),kernel:new hu(0),scale:new hu(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",vertexShader:"uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let n=this.uniforms;n.texelSize.value.set(1/e,1/t),n.halfTexelSize.value.copy(n.texelSize.value).multiplyScalar(.5)}},vO=class extends uo{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new hu(null),opacity:new hu(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n}",vertexShader:dO}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},yO={DEPTH:0,LUMA:1,COLOR:2},xO={DISABLED:0,DEPTH:1,CUSTOM:2},bO=class extends uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yO.COLOR;super({name:"EdgeDetectionMaterial",defines:{LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new hu(null),depthBuffer:new hu(null),predicationBuffer:new hu(null),texelSize:new hu(e)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},wO={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},SO=class extends uo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super({name:"EffectMaterial",defines:{THREE_REVISION:vt.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new hu(null),depthBuffer:new hu(null),resolution:new hu(new jn),texelSize:new hu(new jn),cameraNear:new hu(.3),cameraFar:new hu(1e3),aspect:new hu(1),time:new hu(0)},blending:0,depthWrite:!1,depthTest:!1,dithering:i}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),n&&this.setUniforms(n),this.adoptCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(wO.FRAGMENT_HEAD,e.get(wO.FRAGMENT_HEAD)).replace(wO.FRAGMENT_MAIN_UV,e.get(wO.FRAGMENT_MAIN_UV)).replace(wO.FRAGMENT_MAIN_IMAGE,e.get(wO.FRAGMENT_MAIN_IMAGE)),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(wO.VERTEX_HEAD,e.get(wO.VERTEX_HEAD)).replace(wO.VERTEX_MAIN_SUPPORT,e.get(wO.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof fo?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let n=this.uniforms;n.resolution.value.set(e,t),n.texelSize.value.set(1/e,1/t),n.aspect.value=e/t}static get Section(){return wO}},_O=class extends uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super({name:"LuminanceMaterial",uniforms:{inputBuffer:new hu(null),threshold:new hu(0),smoothing:new hu(1),range:new hu(null)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:dO}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return null!==this.luminanceRange}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},AO=0,EO=1,CO=class extends uo{constructor(){super({name:"MaskMaterial",uniforms:{maskTexture:new hu(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),inputBuffer:new hu(null),strength:new hu(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef MASK_PRECISION_HIGH\nuniform mediump sampler2D maskTexture;\n#else\nuniform lowp sampler2D maskTexture;\n#endif\n#if MASK_FUNCTION != 0\nuniform float strength;\n#endif\nvarying vec2 vUv;void main(){\n#if COLOR_CHANNEL == 0\nfloat mask=texture2D(maskTexture,vUv).r;\n#elif COLOR_CHANNEL == 1\nfloat mask=texture2D(maskTexture,vUv).g;\n#elif COLOR_CHANNEL == 2\nfloat mask=texture2D(maskTexture,vUv).b;\n#else\nfloat mask=texture2D(maskTexture,vUv).a;\n#endif\n#if MASK_FUNCTION == 0\n#ifdef INVERTED\nmask=step(mask,0.0);\n#else\nmask=1.0-step(mask,0.0);\n#endif\n#else\nmask=clamp(mask*strength,0.0,1.0);\n#ifdef INVERTED\nmask=1.0-mask;\n#endif\n#endif\n#if MASK_FUNCTION == 2\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\n#else\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\n#endif\n}",vertexShader:dO}),this.toneMapped=!1,this.setColorChannel(cO),this.setMaskFunction(AO)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Ot&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return void 0!==this.defines.INVERTED}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},MO=class extends uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn;super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new hu(null),searchTexture:new hu(null),areaTexture:new hu(null),resolution:new hu(t),texelSize:new hu(e)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return void 0===this.defines.DISABLE_DIAG_DETECTION}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return void 0===this.defines.DISABLE_CORNER_DETECTION}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let n=this.uniforms;n.texelSize.value.set(1/e,1/t),n.resolution.value.set(e,t)}},TO=new ho,PO=null;var DO=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Pass",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ol,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:TO;this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();null!==t&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new io(function(){if(null===PO){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(PO=new zi).setAttribute?(PO.setAttribute("position",new Pi(e,3)),PO.setAttribute("uv",new Pi(t,2))):(PO.addAttribute("position",new Pi(e,3)),PO.addAttribute("uv",new Pi(t,2)))}return PO}(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new ol),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e){}render(e,t,n,r,i){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(null!==t&&"function"==typeof t.dispose){if(t instanceof ol||t===this.renderer)continue;this[e].dispose()}}}},kO=class extends DO{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super("CopyPass"),this.fullscreenMaterial=new vO,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new sr(1,1,{minFilter:Dt,magFilter:Dt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTarget.texture.type=n,n!==Ot?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===vn&&(this.renderTarget.texture.encoding=vn))}},OO=class extends DO{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,r,i){let o=e.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},RO=new $n,IO=class extends DO{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,n){this.color=e,this.depth=t,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,n,r,i){let o=this.overrideClearColor,a=this.overrideClearAlpha,s=e.getClearAlpha(),l=null!==o,c=a>=0;l?(RO.copy(e.getClearColor(RO)),e.setClearColor(o,c?a:s)):c&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(RO,s):c&&e.setClearAlpha(s)}},LO=-1,NO=class extends En{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LO,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:LO,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.resizable=e,this.base=new jn(1,1),this.preferred=new jn(t,n),this.target=this.preferred,this.s=r}get width(){let e,{base:t,preferred:n,scale:r}=this;return e=n.width!==LO?n.width:n.height!==LO?Math.round(n.height*(t.width/Math.max(t.height,1))):Math.round(t.width*r),e}set width(e){this.preferredWidth=e}get height(){let e,{base:t,preferred:n,scale:r}=this;return e=n.height!==LO?n.height:n.width!==LO?Math.round(n.width/Math.max(t.width/Math.max(t.height,1),1)):Math.round(t.height*r),e}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(LO),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return LO}},jO=!1,BO=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case 2:t=this.materialsFlatShadedDoubleSide;break;case 1:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded}else switch(e.material.side){case 2:t=this.materialsDoubleSide;break;case 1:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let n of t)n.uniforms=Object.assign({},e.uniforms),n.side=0;t[2].skinning=!0,this.materialsBackSide=t.map((t=>{let n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=1,n})),this.materialsDoubleSide=t.map((t=>{let n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=2,n})),this.materialsFlatShaded=t.map((t=>{let n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n})),this.materialsFlatShadedBackSide=t.map((t=>{let n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=1,n})),this.materialsFlatShadedDoubleSide=t.map((t=>{let n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=2,n}))}}render(e,t,n){let r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,jO){let r=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);for(let e of r)e[0].material=e[1];this.meshCount!==r.size&&r.clear()}else{let r=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=r}e.shadowMap.enabled=r}disposeMaterials(){if(null!==this.material){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return jO}static set workaroundEnabled(e){jO=e}},FO=class extends DO{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new IO,this.overrideMaterialManager=null===n?null:new BO(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new BO(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,n,r,i){let o=this.scene,a=this.camera,s=this.selection,l=a.layers.mask,c=o.background,u=e.shadowMap.autoUpdate,d=this.renderToScreen?null:t;null!==s&&a.layers.set(s.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(d),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,o,a):e.render(o,a),a.layers.mask=l,o.background=c,e.shadowMap.autoUpdate=u}},zO=class extends DO{constructor(e,t){let{resolutionScale:n=1,width:r=NO.AUTO_SIZE,height:i=NO.AUTO_SIZE,renderTarget:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super("DepthPass"),this.needsSwap=!1,this.renderPass=new FO(e,t,new Vs({depthPacking:3201}));let a=this.renderPass;a.skipShadowMapUpdate=!0,a.ignoreBackground=!0;let s=a.getClearPass();s.overrideClearColor=new $n(16777215),s.overrideClearAlpha=1,this.renderTarget=o,void 0===this.renderTarget&&(this.renderTarget=new sr(1,1,{minFilter:Pt,magFilter:Pt,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new NO(this,r,i,n);l.addEventListener("change",(e=>this.setSize(l.baseWidth,l.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){let o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,o)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}},UO=(new Float32Array([255/256/256**3,255/256/65536,255/256/256,255/256]),{SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18}),GO=new Map([[UO.SKIP,null],[UO.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}"],[UO.ALPHA,"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}"],[UO.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}"],[UO.COLOR_BURN,"float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[UO.COLOR_DODGE,"float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[UO.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}"],[UO.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}"],[UO.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}"],[UO.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}"],[UO.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}"],[UO.DIVIDE,"float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[UO.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}"],[UO.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}"],[UO.OVERLAY,"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[UO.REFLECT,"float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[UO.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}"],[UO.SOFT_LIGHT,"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[UO.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}"]]),VO=class extends En{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.f=e,this.opacity=new hu(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return GO.get(this.blendFunction)}},HO={NONE:0,DEPTH:1,CONVOLUTION:2},WO=class extends En{constructor(e,t){let{attributes:n=HO.NONE,blendFunction:r=UO.SCREEN,defines:i=new Map,uniforms:o=new Map,extensions:a=null,vertexShader:s=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.name=e,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=s,this.defines=i,this.uniforms=o,this.extensions=a,this.blendMode=new VO(r),this.blendMode.addEventListener("change",(e=>this.setChanged()))}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(null!==t&&"function"==typeof t.dispose){if(t instanceof ol||t===this.renderer)continue;this[e].dispose()}}}};function qO(e,t,n){for(let r of t){let t="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),i=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(let e of n.entries())null!==e[1]&&n.set(e[0],e[1].replace(i,t))}}function YO(e,t,n,r,i,o,a){let s=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=void 0!==s.get("fragment")&&/mainImage/.test(s.get("fragment")),c=void 0!==s.get("fragment")&&/mainUv/.test(s.get("fragment")),u=[],d=[],h=!1,f=!1;if(void 0===s.get("fragment"))console.error("Missing fragment shader",t);else if(c&&0!==(a&HO.CONVOLUTION))console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(l||c){let p=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,m=SO.Section;if(c){let t="\t".concat(e,"MainUv(UV);\n");n.set(m.FRAGMENT_MAIN_UV,n.get(m.FRAGMENT_MAIN_UV)+t),h=!0}if(null!==s.get("vertex")&&/mainSupport/.test(s.get("vertex"))){let t="\t".concat(e,"MainSupport(");t+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s.get("vertex"))?"vUv);\n":");\n",n.set(m.VERTEX_MAIN_SUPPORT,n.get(m.VERTEX_MAIN_SUPPORT)+t),u=u.concat([...s.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map((e=>e[1]))),d=d.concat(u).concat([...s.get("vertex").matchAll(p)].map((e=>e[1])))}d=d.concat([...s.get("fragment").matchAll(p)].map((e=>e[1]))),d=d.concat([...t.defines.keys()].map((e=>e.replace(/\([\w\s,]*\)/g,"")))),d=d.concat([...t.uniforms.keys()]),t.uniforms.forEach(((t,n)=>o.set(e+n.charAt(0).toUpperCase()+n.slice(1),t))),t.defines.forEach(((t,n)=>i.set(e+n.charAt(0).toUpperCase()+n.slice(1),t))),qO(e,d,i),qO(e,d,s);let g=t.blendMode;if(r.set(g.blendFunction,g),l){let t=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,r="".concat(e,"MainImage(color0, UV, ");0!==(a&HO.DEPTH)&&t.test(s.get("fragment"))&&(r+="depth, ",f=!0),r+="color1);\n\t";let i=e+"BlendOpacity";o.set(i,g.opacity),r+="color0 = blend".concat(g.blendFunction,"(color0, color1, ").concat(i,");\n\n\t"),n.set(m.FRAGMENT_MAIN_IMAGE,n.get(m.FRAGMENT_MAIN_IMAGE)+r),r="uniform float ".concat(i,";\n\n"),n.set(m.FRAGMENT_HEAD,n.get(m.FRAGMENT_HEAD)+r)}n.set(m.FRAGMENT_HEAD,n.get(m.FRAGMENT_HEAD)+s.get("fragment")+"\n"),null!==s.get("vertex")&&n.set(m.VERTEX_HEAD,n.get(m.VERTEX_HEAD)+s.get("vertex")+"\n")}else console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);return{varyings:u,transformedUv:h,readDepth:f}}var XO=class extends DO{constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];super("EffectPass"),this.fullscreenMaterial=new SO(null,null,null,e),this.effects=n.sort(((e,t)=>t.attributes-e.attributes)),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=SO.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),n=new Map,r=new Map,i=new Map,o=new Set,a=0,s=0,l=0,c=!1,u=!1;for(let h of this.effects)if(h.blendMode.blendFunction===UO.SKIP)l|=h.getAttributes()&HO.DEPTH;else if(0!==(l&h.getAttributes()&HO.CONVOLUTION))console.error("Convolution effects cannot be merged",h);else{l|=h.getAttributes();let e=YO("e"+a++,h,t,n,r,i,l);if(s+=e.varyings.length,c=c||e.transformedUv,u=u||e.readDepth,null!==h.extensions)for(let t of h.extensions)o.add(t)}let d=/\bblend\b/g;for(let h of n.values()){let n=h.getShaderCode().replace(d,"blend".concat(h.blendFunction));t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+n+"\n")}if(0!==(l&HO.DEPTH)){if(u){let n="float depth = readDepth(UV);\n\n\t";t.set(e.FRAGMENT_MAIN_IMAGE,n+t.get(e.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=null===this.getDepthTexture()}else this.needsDepthTexture=!1;if(c){let n="vec2 transformedUv = vUv;\n";t.set(e.FRAGMENT_MAIN_UV,n+t.get(e.FRAGMENT_MAIN_UV)),r.set("UV","transformedUv")}else r.set("UV","vUv");t.forEach(((e,t,n)=>n.set(t,e.trim().replace(/^#/,"\n#")))),this.uniformCount=i.size,this.varyingCount=s,this.skipRendering=0===a,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(o).setUniforms(i).setDefines(r)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let n of this.effects)n.setDepthTexture(e,t)}render(e,t,n,r,i){for(let o of this.effects)o.update(e,t,r);if(!this.skipRendering||this.renderToScreen){let i=this.fullscreenMaterial;i.inputBuffer=t.texture,i.time+=r,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let n of this.effects)n.setSize(e,t)}initialize(e,t,n){this.renderer=e;for(let r of this.effects)r.initialize(e,t,n),r.addEventListener("change",(e=>this.handleEvent(e)));this.updateMaterial(),this.verifyResources(),void 0!==n&&n!==Ot&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){if("change"===e.type)this.recompile()}},QO=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],KO=class extends DO{constructor(){let{resolutionScale:e=.5,width:t=NO.AUTO_SIZE,height:n=NO.AUTO_SIZE,kernelSize:r=tR.LARGE}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("KawaseBlurPass"),this.renderTargetA=new sr(1,1,{minFilter:Dt,magFilter:Dt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let i=this.resolution=new NO(this,t,n,e);i.addEventListener("change",(e=>this.setSize(i.baseWidth,i.baseHeight))),this.blurMaterial=new gO,this.ditheredBlurMaterial=new gO,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=r}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){let o,a,s=this.scene,l=this.camera,c=this.renderTargetA,u=this.renderTargetB,d=QO[this.kernelSize],h=this.blurMaterial,f=t;for(this.fullscreenMaterial=h,o=0,a=d.length-1;o<a;++o){let t=0===(1&o)?c:u;h.kernel=d[o],h.inputBuffer=f.texture,e.setRenderTarget(t),e.render(s,l),f=t}this.dithering&&(h=this.ditheredBlurMaterial,this.fullscreenMaterial=h),h.kernel=d[o],h.inputBuffer=f.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(s,l)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t);let r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(r,i),this.ditheredBlurMaterial.setSize(r,i)}initialize(e,t,n){void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==Ot?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===vn&&(this.renderTargetA.texture.encoding=vn,this.renderTargetB.texture.encoding=vn))}static get AUTO_SIZE(){return NO.AUTO_SIZE}},ZO=class extends DO{constructor(){let{width:e=NO.AUTO_SIZE,height:t=NO.AUTO_SIZE,renderTarget:n,luminanceRange:r,colorOutput:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("LuminancePass"),this.fullscreenMaterial=new _O(i,r),this.needsSwap=!1,this.renderTarget=n,void 0===this.renderTarget&&(this.renderTarget=new sr(1,1,{minFilter:Dt,magFilter:Dt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let o=this.resolution=new NO(this,e,t);o.addEventListener("change",(e=>this.setSize(o.baseWidth,o.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height)}initialize(e,t,n){void 0!==n&&n!==Ot&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},JO=class extends DO{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new IO(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,n,r,i){let o=e.getContext(),a=e.state.buffers,s=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,d=1-u;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.stencil.setFunc(o.ALWAYS,u,4294967295),a.stencil.setClear(d),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,l)):(e.setRenderTarget(t),e.render(s,l),e.setRenderTarget(n),e.render(s,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(o.EQUAL,1,4294967295),a.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.stencil.setLocked(!0)}},$O=class extends DO{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inputBuffer";super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,null!==this.fullscreenMaterial){let t=this.fullscreenMaterial.uniforms;void 0!==t&&void 0!==t[e]&&(this.inputBufferUniform=t[e])}}render(e,t,n,r,i){null!==this.inputBufferUniform&&null!==t&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}initialize(e,t,n){void 0!==n&&n!==Ot&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},eR=.001,tR={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},nR=class extends WO{constructor(){let{blendFunction:e=UO.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:n=.025,resolutionScale:r=.5,intensity:i=1,width:o=NO.AUTO_SIZE,height:a=NO.AUTO_SIZE,kernelSize:s=tR.LARGE}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}",{blendFunction:e,uniforms:new Map([["map",new hu(null)],["intensity",new hu(i)]])}),this.renderTarget=new sr(1,1,{minFilter:Dt,magFilter:Dt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new ZO({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=n,this.blurPass=new KO({resolutionScale:r,width:o,height:a,kernelSize:s});let l=this.blurPass.getResolution();l.addEventListener("change",(e=>this.setSize(l.baseWidth,l.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,n){let r=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,r),this.blurPass.render(e,r,r)):this.blurPass.render(e,t,r)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t),this.renderTarget.setSize(n.width,n.height),this.luminancePass.resolution.copy(n)}initialize(e,t,n){this.blurPass.initialize(e,t,n),void 0!==n&&(this.renderTarget.texture.type=n,e.outputEncoding===vn&&(this.renderTarget.texture.encoding=vn))}},rR=class extends WO{constructor(){let{blendFunction:e=UO.NORMAL,brightness:t=0,contrast:n=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["brightness",new hu(t)],["contrast",new hu(n)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},iR=class extends WO{constructor(){super("ColorAverageEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",{blendFunction:arguments.length>0&&void 0!==arguments[0]?arguments[0]:UO.NORMAL})}},oR=class extends WO{constructor(){let{blendFunction:e=UO.NORMAL,offset:t=new jn(.001,5e-4)}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("ChromaticAberrationEffect","varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",{vertexShader:"uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",blendFunction:e,attributes:HO.CONVOLUTION,uniforms:new Map([["offset",new hu(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},aR=class extends WO{constructor(e){let{blendFunction:t=UO.NORMAL,worldFocusDistance:n,worldFocusRange:r,focusDistance:i=0,focalLength:o=.1,focusRange:a=o,bokehScale:s=1,width:l=NO.AUTO_SIZE,height:c=NO.AUTO_SIZE}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super("DepthOfFieldEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;\n#else\nuniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;\n#endif\nuniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}",{blendFunction:t,attributes:HO.DEPTH,uniforms:new Map([["nearColorBuffer",new hu(null)],["farColorBuffer",new hu(null)],["nearCoCBuffer",new hu(null)],["scale",new hu(1)]])}),this.camera=e,this.renderTarget=new sr(1,1,{minFilter:Dt,magFilter:Dt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new $O(new mO(e));let u=this.cocMaterial;u.focusDistance=i,u.focusRange=a,void 0!==n&&(u.worldFocusDistance=n),void 0!==r&&(u.worldFocusRange=r),this.blurPass=new KO({kernelSize:tR.MEDIUM,width:l,height:c});let d=this.blurPass.getResolution();d.addEventListener("change",(e=>this.setSize(d.getBaseWidth(),d.getBaseHeight()))),this.maskPass=new $O(new CO(this.renderTargetCoC.texture));let h=this.maskPass.fullscreenMaterial;h.maskFunction=EO,h.colorChannel=uO,this.bokehNearBasePass=new $O(new hO(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new $O(new hO(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new $O(new hO(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new $O(new hO(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=s}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let n of t)n.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera;return pO(-t.position.distanceTo(e),t.near,t.far)}setDepthTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,n){let r=this.renderTarget,i=this.renderTargetCoC,o=this.renderTargetCoCBlurred,a=this.renderTargetMasked;if(null!==this.target){let e=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=e}this.cocPass.render(e,null,i),this.blurPass.render(e,i,o),this.maskPass.render(e,t,a),this.bokehFarBasePass.render(e,a,r),this.bokehFarFillPass.render(e,r,this.renderTargetFar),this.bokehNearBasePass.render(e,t,r),this.bokehNearFillPass.render(e,r,this.renderTargetNear)}setSize(e,t){let n=this.resolution;n.setBaseSize(e,t);let r=n.width,i=n.height,o=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];o.push(this.renderTargetCoC,this.renderTargetMasked),o.forEach((n=>n.setSize(e,t))),o=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],o.forEach((e=>e.setSize(r,i))),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach((e=>e.fullscreenMaterial.setSize(r,i)))}initialize(e,t,n){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach((r=>r.initialize(e,t,n))),this.blurPass.initialize(e,t,Ot),void 0!==n&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n,e.outputEncoding===vn&&(this.renderTarget.texture.encoding=vn,this.renderTargetNear.texture.encoding=vn,this.renderTargetFar.texture.encoding=vn,this.renderTargetMasked.texture.encoding=vn))}},sR=(new ur,new Ur,class extends WO{constructor(){let{blendFunction:e=UO.NORMAL,hue:t=0,saturation:n=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["hue",new hu(new ur)],["saturation",new hu(n)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((3*e.x-1)/2)}set hue(e){let t=Math.sin(e),n=Math.cos(e);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}}),lR=(new $n,class extends WO{constructor(){let{blendFunction:e=UO.SCREEN,premultiply:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("NoiseEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\n#ifdef PREMULTIPLY\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}",{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}}),cR=class extends WO{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;super("PixelationEffect","uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",{uniforms:new Map([["active",new hu(!1)],["d",new hu(new jn)]])}),this.resolution=new jn,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}},uR=(Math.PI,new ur,new ur,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC"),dR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",hR={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},fR=class extends WO{constructor(){let e,t,{preset:n=hR.MEDIUM,edgeDetectionMode:r=yO.COLOR,predicationMode:i=xO.DISABLED}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:UO.NORMAL,attributes:HO.CONVOLUTION|HO.DEPTH,uniforms:new Map([["weightMap",new hu(null)]])}),arguments.length>1&&(e=arguments[0],t=arguments[1],arguments.length>2&&(n=arguments[2]),arguments.length>3&&(r=arguments[3])),this.renderTargetEdges=new sr(1,1,{minFilter:Dt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new IO(!0,!1,!1),this.clearPass.overrideClearColor=new $n(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new $O(new bO),this.edgeDetectionMaterial.edgeDetectionMode=r,this.edgeDetectionMaterial.predicationMode=i,this.weightsPass=new $O(new MO);let o=new Oc;o.onLoad=()=>{let n=new or(e);n.name="SMAA.Search",n.magFilter=Pt,n.minFilter=Pt,n.generateMipmaps=!1,n.needsUpdate=!0,n.flipY=!0,this.weightsMaterial.searchTexture=n;let r=new or(t);r.name="SMAA.Area",r.magFilter=Dt,r.minFilter=Dt,r.generateMipmaps=!1,r.needsUpdate=!0,r.flipY=!1,this.weightsMaterial.areaTexture=r,this.dispatchEvent({type:"load"})},o.itemStart("search"),o.itemStart("area"),void 0!==e&&void 0!==t?(o.itemEnd("search"),o.itemEnd("area")):typeof Image<"u"&&(e=new Image,t=new Image,e.addEventListener("load",(()=>o.itemEnd("search"))),t.addEventListener("load",(()=>o.itemEnd("area"))),e.src=uR,t.src=dR),this.applyPreset(n)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,n=this.weightsMaterial;switch(e){case hR.LOW:t.edgeDetectionThreshold=.15,n.orthogonalSearchSteps=4,n.diagonalDetection=!1,n.cornerDetection=!1;break;case hR.MEDIUM:t.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=8,n.diagonalDetection=!1,n.cornerDetection=!1;break;case hR.HIGH:t.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=16,n.diagonalSearchSteps=8,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0;break;case hR.ULTRA:t.edgeDetectionThreshold=.05,n.orthogonalSearchSteps=32,n.diagonalSearchSteps=16,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0}}setDepthTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,n){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;null!==e&&null!==t&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return uR}static get areaImageDataURL(){return dR}},pR={DEFAULT:0,ESKIL:1},mR=class extends WO{constructor(){let{blendFunction:e=UO.NORMAL,technique:t=pR.DEFAULT,eskil:n=!1,offset:r=.5,darkness:i=.5}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new hu(r)],["darkness",new hu(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===pR.ESKIL}set eskil(e){this.technique=e?pR.ESKIL:pR.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}};new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]),new Map([[vR(0,0,0,0),new Float32Array([0,0,0,0])],[vR(0,0,0,1),new Float32Array([0,0,0,1])],[vR(0,0,1,0),new Float32Array([0,0,1,0])],[vR(0,0,1,1),new Float32Array([0,0,1,1])],[vR(0,1,0,0),new Float32Array([0,1,0,0])],[vR(0,1,0,1),new Float32Array([0,1,0,1])],[vR(0,1,1,0),new Float32Array([0,1,1,0])],[vR(0,1,1,1),new Float32Array([0,1,1,1])],[vR(1,0,0,0),new Float32Array([1,0,0,0])],[vR(1,0,0,1),new Float32Array([1,0,0,1])],[vR(1,0,1,0),new Float32Array([1,0,1,0])],[vR(1,0,1,1),new Float32Array([1,0,1,1])],[vR(1,1,0,0),new Float32Array([1,1,0,0])],[vR(1,1,0,1),new Float32Array([1,1,0,1])],[vR(1,1,1,0),new Float32Array([1,1,1,0])],[vR(1,1,1,1),new Float32Array([1,1,1,1])]]);function gR(e,t,n){return e+(t-e)*n}function vR(e,t,n,r){let i=gR(e,t,.75),o=gR(n,r,.75);return gR(i,o,.875)}var yR=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(e){this.effect.blendMode.opacity.value=e},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(e){this.effect.blendMode.setBlendFunction(Number(e))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=UO.NORMAL}},xR=class extends yR{constructor(){super(nR),this.blendFunction=UO.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},bR=class extends yR{constructor(){super(rR)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},wR=class extends yR{constructor(){super(oR),this.effect.offset=new jn(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[1e3*this.effect.offset.x,1e3*this.effect.offset.y]}},SR=class extends yR{constructor(){super(iR)}},_R=class extends yR{constructor(){super(sR),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},AR=class extends yR{constructor(){super(lR),this.blendFunction=UO.OVERLAY}},ER=class extends yR{constructor(){super(mR)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},CR=class extends yR{constructor(e){super(aR,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},MR=class extends yR{constructor(){super(cR)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},TR=class extends DO{constructor(e,t,n){super("TransmissionPass",e,t),this.copyPass=new kO(n.transmissionRenderTarget),this.depthPass=new zO(e,t,{renderTarget:n.transmissionDepthTarget}),this.needsSwap=!1}updatePasses(e){this.copyPass=new kO(e.transmissionRenderTarget),this.depthPass=new zO(this.scene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.scene=e}render(e,t,n){let r=this.camera.layers.mask;this.copyPass.render(e,t,n),this.camera.layers.disable(3),this.depthPass.render(e,t,n),e.shadowMap.needsUpdate=!1,e.shadowMap.autoUpdate=!1;let i=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(i),e.render(this.scene,this.camera),this.camera.layers.mask=r}},PR=new ol,DR=new uo({transparent:!0,vertexShader:"\n        void main() {\n            gl_Position = vec4(0.0);\n        }\n    ",fragmentShader:"\n        void main() {\n            gl_FragColor = vec4(0.0);\n        }\n    "}),kR=class extends DO{constructor(e,t){super("OpaquePass",null!==e&&void 0!==e?e:PR,t),this.hasTransmissionPass=!1,this.clear=!0,this.needsSwap=!1,this.originalMaterials=new Map}setCamera(e){this.camera=e}setScene(e){this.scene=null!==e&&void 0!==e?e:PR}getScene(){return this.scene}render(e,t){this.originalMaterials.clear(),this.camera.layers.enable(3),this.hasTransmissionPass&&this.scene.traverse((e=>{e.layers.isEnabled(3)&&e instanceof QC&&(this.originalMaterials.set(e.id,e.material),e.material=DR)})),this.camera.layers.enable(8),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0;let n=this.renderToScreen?null:t;e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),this.hasTransmissionPass&&this.originalMaterials.forEach(((e,t)=>{let n=this.scene.getObjectById(t);n&&(n.material=e)}))}};function OR(e,t){return t&&t.enabled&&e.push(t.effect),e}var RR=class extends En{constructor(e){super(),this.postprocessingState=ax.defaultData,this._scene=new ol,this._camera=new iM,this.effects=new Map,this._renderToScreen=!0,this.clock=new class{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=eu(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=eu();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},this.renderer=e,this.debug=!1,this.effects.set("bloom",new xR),this.effects.set("chromaticAberration",new wR),this.effects.set("vignette",new ER),this.effects.set("noise",new AR),this.effects.set("colorAverage",new SR),this.effects.set("hueSaturation",new _R),this.effects.set("brightnessContrast",new bR),this.effects.set("depthOfField",new CR),this.effects.set("pixelation",new MR),this.effectComposer=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.renderer=null,this.inputBuffer=this.createBuffer(t,n,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new kO,this.depthTexture=null,this.passes=[],this.timer=new class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*eR}getFixedDelta(){return this.fixedDelta*eR}setFixedDelta(e){return this.fixedDelta=1e3*e,this}getElapsed(){return this.elapsed*eR}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=void 0!==e?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,null!==e){let t=e.getSize(new jn),n=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===Ot&&e.outputEncoding===vn&&(this.inputBuffer.texture.encoding=vn,this.outputBuffer.texture.encoding=vn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(let i of this.passes)i.initialize(e,n,r)}}replaceRenderer(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(e),t&&null!==r&&(r.removeChild(n.domElement),r.appendChild(e.domElement)),n}createDepthTexture(){let e=this.depthTexture=new $s;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=zt,e.type=jt):e.type=It,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,r){let i,o=this.renderer,a=null===o?new jn:o.getDrawingBufferSize(new jn),s={minFilter:Dt,magFilter:Dt,stencilBuffer:t,depthBuffer:e,type:n};return r>0?(i=Number(vt.replace(/\D+/g,""))<138?new Gu(a.width,a.height,s):new sr(a.width,a.height,s),i.ignoreDepthForMultisampleCopy=!1,i.samples=r):i=new sr(a.width,a.height,s),n===Ot&&null!==o&&o.outputEncoding===vn&&(i.texture.encoding=vn),i.texture.name="EffectComposer.Buffer",i.texture.generateMipmaps=!1,i}addPass(e,t){let n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new jn),o=r.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(i.width,i.height),e.initialize(r,o,a),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){let t=this.createDepthTexture();for(e of n)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}removePass(e){let t=this.passes,n=t.indexOf(e);if(-1!==n&&t.splice(n,1).length>0){if(null!==this.depthTexture){let n=(e,t)=>e||t.needsDepthTexture;t.reduce(n,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t,n,r,i=this.renderer,o=this.copyPass,a=this.inputBuffer,s=this.outputBuffer,l=!1;void 0===e&&(e=this.timer.update().getDelta());for(let c of this.passes)c.enabled&&(c.render(i,a,s,e,l),c.needsSwap&&(l&&(o.renderToScreen=c.renderToScreen,t=i.getContext(),n=i.state.buffers.stencil,n.setFunc(t.NOTEQUAL,1,4294967295),o.render(i,a,s,e,l),n.setFunc(t.EQUAL,1,4294967295)),r=a,a=s,s=r),c instanceof JO?l=!0:c instanceof OO&&(l=!1))}setSize(e,t,n){let r=this.renderer;if(void 0===e||void 0===t){let n=r.getSize(new jn);e=n.width,t=n.height}r.setSize(e,t,n);let i=r.getDrawingBufferSize(new jn);this.inputBuffer.setSize(i.width,i.height),this.outputBuffer.setSize(i.width,i.height);for(let o of this.passes)o.setSize(i.width,i.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}}(this.renderer),this.opaquePass=new kR(this.scene,this.camera),this.transmissionPass=new TR(this.scene,this.camera,this.renderer),this.helperPass=new kR(void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperClearPass=new IO(!1,!0,!1),this.helperPassOnTop=new kR(void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this._initCopyPass(),this._initSmaa(),this._initPasses()}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}get camera(){return this._camera}set camera(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}disableHelpers(){this.helperPass.enabled=!1,this.helperClearPass.enabled=!1,this.helperPassOnTop.enabled=!1}enableHelpers(){this.helperPass.enabled=!0,this.helperClearPass.enabled=!0,this.helperPassOnTop.enabled=!0}_initSmaa(){let e=new fR({preset:hR.ULTRA,edgeDetectionMode:yO.COLOR}),t=()=>{e.removeEventListener("load",t),this.dispatchEvent({type:"smaaloaded"})};e.addEventListener("load",t),e.edgeDetectionMaterial.predicationMode=xO.DEPTH,e.edgeDetectionMaterial.edgeDetectionThreshold=.05,e.edgeDetectionMaterial.predicationThreshold=.002,e.edgeDetectionMaterial.predicationScale=1,this.smaaPass=new XO(this.camera,e)}_initPasses(){var e,t;if(null!==(e=this.uvEffectPass)&&void 0!==e&&e.dispose(),null!==(t=this.effectPass)&&void 0!==t&&t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.postprocessingState.enabled){let e=[this.effects.get("pixelation")].reduce(OR,[]);e.length>0&&(this.uvEffectPass=new XO(this.camera,...e),this.effectComposer.addPass(this.uvEffectPass));let t=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(OR,[]);t.length>0&&(this.effectPass=new XO(this.camera,...t),this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.helperClearPass),this.effectComposer.addPass(this.helperPassOnTop),this.effectComposer.addPass(this.smaaPass)}_initCopyPass(){if(this._savePass)return;let e=new jn;this.renderer.getDrawingBufferSize(e),this._rt=new sr(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Ct,wrapT:Ct}),this._rt.samples=0,this._savePass=new kO(this._rt,!1),this._savePass.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(!0===e?(t.removePass(this._savePass),t.passes[t.passes.length-1].renderToScreen=!0,t.autoRenderToScreen=!0):(t.autoRenderToScreen=!1,t.passes[t.passes.length-1].renderToScreen=!1,this._savePass.renderToScreen=!1,this.postprocessingState.enabled||(this._savePass.needsDepthTexture=!0),t.addPass(this._savePass)),this._renderToScreen=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...n}=e,r=!1;t!==this.postprocessingState.enabled&&(r=!0);for(let i of Object.entries(n)){let e=i[1],t=this.effects.get(i[0]);if(t){t.enabled!==e.enabled&&(r=!0),t.enabled=e.enabled;for(let[n,r]of Object.entries(e))t[n]=r}}this.postprocessingState=e,r&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,n,r){e instanceof ar?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,n,r),this.effectComposer.outputBuffer.scissor.set(e,t,n,r));let i=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(i),this.effectComposer.outputBuffer.scissor.multiplyScalar(i),this.renderer.setScissor(e,t,n,r)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,n,r){e instanceof ar?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,n,r),this.effectComposer.outputBuffer.viewport.set(e,t,n,r))}resize(e,t,n){if(this.effectComposer.setSize(e,t,n),this._rt){let n=this.renderer.getPixelRatio();this._rt.setSize(e*n,t*n)}}dispose(){var e,t;null!==(e=this.uvEffectPass)&&void 0!==e&&e.dispose(),null!==(t=this.effectPass)&&void 0!==t&&t.dispose(),this.effectComposer.dispose()}},IR=new or,LR=class extends rl{constructor(e){var t;super(e),t=this,this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new jn,this.pipeline=new RR(this),this.overrideTransmission=null===e||void 0===e?void 0:e.overrideTransmission,this.autoClear=!1;let n=this.setPixelRatio.bind(this),r=this.setSize.bind(this);this.setPixelRatio=e=>{this._pixelRatio=e,n(e)},this.setSize=function(e,n){var i,o,a;let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(t.viewportWidth!==e||t.viewportHeight!==n)&&(t.viewportWidth=e,t.viewportHeight=n,r(e,n,s),null!==(i=t.normalRenderTarget)&&void 0!==i&&i.setSize(e*t._pixelRatio,n*t._pixelRatio),null!==(o=t.transmissionRenderTarget)&&void 0!==o&&o.setSize(e*t._pixelRatio/2,n*t._pixelRatio/2),null!==(a=t.transmissionDepthTarget)&&void 0!==a&&a.setSize(e*t._pixelRatio/2,n*t._pixelRatio/2),t.pipeline.resize(e,n,s))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createTransmissionRenderTarget(){void 0===this.transmissionRenderTarget&&(this.transmissionRenderTarget=new sr(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{generateMipmaps:!0,minFilter:kt,magFilter:Dt,wrapS:Mt,wrapT:Mt,depthBuffer:!1}),this.transmissionDepthTarget=new sr(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:Pt,magFilter:Pt,depthBuffer:!1}))}createNormalRenderTarget(){void 0===this.normalRenderTarget&&(this.normalRenderTarget=new sr(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Pt,magFilter:Pt,type:Lt,depthTexture:new $s(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t){this.normalRenderTarget&&(this.setClearColor(0),t.layers.enable(8),t.layers.disable(0),t.layers.disable(3),this.setRenderTarget(this.normalRenderTarget),this.clear(),qC.uniforms.depthContrast.value=t instanceof iM?(t.far-t.near)/1e4:1,e.overrideMaterial=qC,this.render(e,t),this.setClearColor(e.bgColor,e.bgColor.a),this.setRenderTarget(null),e.overrideMaterial=null,t.layers.enable(0),t.layers.enable(3))}renderSplineScene(e,t,n,r,i){this.setClearColor(e.bgColor,e.bgColor.a),n.penumbraSize.forEach(((e,t)=>{sC.penumbraSize.value[t]=e})),sC.pixelRatioNode.value=this.getPixelRatio(),0!==this.resolution.x&&0!==this.resolution.y?sC.resolution.value.set(this.resolution.x,this.resolution.y):sC.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),void 0!==this.overrideNormal?(sC.normalRenderTarget.value=this.overrideNormal,sC.normalRenderTargetDepth.value=IR):e.needsNormal()&&(this.createNormalRenderTarget(),sC.normalRenderTarget.value=this.normalRenderTarget.texture,sC.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(e,t));let o=!1;if(void 0!==this.overrideTransmission)sC.transmissionRenderTarget.value=this.overrideTransmission,sC.transmissionRenderTargetDepth.value=IR,this.pipeline.setTransmissionPassEnabled(!1);else{let t=e.needsTransmission();t&&(void 0===this.transmissionRenderTarget&&(o=!0),this.createTransmissionRenderTarget(),sC.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,sC.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(t)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=r,this.pipeline.sceneHelpersOnTop=i,this.pipeline.scene=e,this.pipeline.camera=t,o&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==e.postprocessing&&this.pipeline.updatePostprocessing(e.postprocessing),void 0!==this.clearAlphaOverride&&this.setClearAlpha(this.clearAlphaOverride),this.pipeline.render()}_currentDispose(){var e,t,n,r,i;this._superDispose(),this.pipeline.dispose(),null!==(e=this.transmissionRenderTarget)&&void 0!==e&&e.dispose(),null!==(t=this.transmissionDepthTarget)&&void 0!==t&&t.dispose(),null!==(n=this.normalRenderTarget)&&void 0!==n&&n.dispose(),null===(r=this.normalRenderTarget)||void 0===r||null===(i=r.depthTexture)||void 0===i||i.dispose()}};function NR(e){let t;if(e.index)for(let n=0;n<e.index.array.length;n+=3)t=e.index.array[n],e.index.array[n]=e.index.array[n+2],e.index.array[n+2]=t}function jR(e){return"SubdivObject"===e||"NonParametric"===e?e:"Mesh"}function BR(e,t){let n=function(e,t){let n={};return e.traverseEntity((e=>{if("Mesh"!==e.type||!("material"in e)||!e.visible||!(e instanceof QC)||Array.isArray(e.material)||Object.keys(e.states).length)return;let r=e.parent;for(;r;){if(r instanceof QC&&Object.keys(e.states).length)return;r=r.parent}let i=e.material.uuid,o=t.shared.materials[i];if(o){if(!px.isMergable(o))return}else{var a;let n=null===(a=t.scene.objects.get(e.uuid))||void 0===a?void 0:a.data;if(n&&"material"in n&&"string"!=typeof n.material){if(!px.isMergable(n.material))return;i=px.getHash(n.material)}}n[i]||(n[i]={});let s=n[i][jR(e.objectType)];if(s){if(s.push(e),e.cloner)for(let t of e.cloner.children)s.push(t)}else if(n[i][jR(e.objectType)]=[e],e.cloner)for(let t of e.cloner.children)n[i][jR(e.objectType)].push(t)})),n}(t,e),r=function(e){let t=0;return Object.values(e).forEach((e=>{Object.values(e).forEach((e=>{let n=e.length;n>t&&(t=n)}))})),t}(n),i=new Array(r),o=0,a=new Array(r),s=0,l=new Array(r),c=0,u=new Array(r),d=0;for(let h of Object.values(n))for(let e of Object.values(h)){if(s=0,c=0,e.forEach((e=>{e instanceof QC&&(a[s++]=e.geometry.clone(),l[c++]=e)})),c<2)continue;for(let e=0;e<c;e++)l[e].updateWorldMatrix(!0,!1),a[e].applyMatrix4(l[e].matrixWorld),l[e].matrixWorld.determinant()<0&&NR(a[e]);let r=ub(a.slice(0,s),!1);if(r){let a;if("SubdivObject"===e[0].objectType)console.warn("Turning subdiv object into mesh"),a=new io(r,l[0].material);else a=new io(r,l[0].material);a.castShadow=l[0].castShadow,a.receiveShadow=l[0].receiveShadow,t.add(a);let s=e=>{d=0;for(let t of e)t.children&&s(t.children),t instanceof QC&&(Array.isArray(t.material)||n[t.material.uuid]&&n[t.material.uuid][t.objectType]&&n[t.material.uuid][t.objectType].length>1||(u[d++]=t));for(let n=0;n<d;n++)t.attach(u[n])};for(let e=0;e<c;e++){let t=l[e];s(t.children),i[o++]=t}}}for(let h=0;h<o;h++)i[h].removeFromParent()}var FR=new jn;var zR=Object.defineProperty,UR=Object.getOwnPropertySymbols,GR=Object.prototype.hasOwnProperty,VR=Object.prototype.propertyIsEnumerable,HR=(e,t,n)=>t in e?zR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,WR=(e,t)=>{for(var n in t||(t={}))GR.call(t,n)&&HR(e,n,t[n]);if(UR)for(var n of UR(t))VR.call(t,n)&&HR(e,n,t[n]);return e};var qR={exports:{}},YR={},XR=e,QR=Symbol.for("react.element"),KR=Symbol.for("react.fragment"),ZR=Object.prototype.hasOwnProperty,JR=XR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$R={key:!0,ref:!0,__self:!0,__source:!0};function eI(e,t,n){var r,i={},o=null,a=null;for(r in void 0!==n&&(o=""+n),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(a=t.ref),t)ZR.call(t,r)&&!$R.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:QR,type:e,key:o,ref:a,props:i,_owner:JR.current}}YR.Fragment=KR,YR.jsx=eI,YR.jsxs=eI,qR.exports=YR;const tI=qR.exports.jsx,nI=(0,e.forwardRef)(((t,n)=>{var r=t,{scene:i,style:o,onMouseDown:a,onMouseUp:s,onMouseHover:l,onKeyDown:c,onKeyUp:u,onStart:d,onLookAt:h,onFollow:f,onWheel:p,onLoad:m,renderOnDemand:g=!0}=r,v=((e,t)=>{var n={};for(var r in e)GR.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&UR)for(var r of UR(e))t.indexOf(r)<0&&VR.call(e,r)&&(n[r]=e[r]);return n})(r,["scene","style","onMouseDown","onMouseUp","onMouseHover","onKeyDown","onKeyUp","onStart","onLookAt","onFollow","onWheel","onLoad","renderOnDemand"]);const y=(0,e.useRef)(null),[x,b]=(0,e.useState)(!0);return(0,e.useEffect)((()=>{let e;b(!0);const t=[{name:"mouseDown",cb:a},{name:"mouseUp",cb:s},{name:"mouseHover",cb:l},{name:"keyDown",cb:c},{name:"keyUp",cb:u},{name:"start",cb:d},{name:"lookAt",cb:h},{name:"follow",cb:f},{name:"scroll",cb:p}];if(y.current){async function n(){await e.load(i);for(let n of t)n.cb&&e.addEventListener(n.name,n.cb);b(!1),null==m||m(e)}e=new class{constructor(e){let{renderOnDemand:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._lastTime=performance.now(),this.time=performance.now(),this.dt=0,this._skipRender=!1,this.renderOnDemand=!0,this.disposed=!1,this.requestRender=()=>{this._skipRender=!1},this.render=e=>{var t,n,r,i;!this._renderer||(this._rafId=requestAnimationFrame(this.render),this.time=e,this.dt=this.time-this._lastTime,this._lastTime=this.time,null!==(t=this._perfs)&&void 0!==t&&t.start(),(!this.renderOnDemand||!this._skipRender)&&(this._skipRender=null===(n=null===(r=this._controls)||void 0===r?void 0:r.update(this.dt))||void 0===n||n,this._eventManager&&!this._eventManager.isEnable&&this._eventManager.activate(),this._scene&&this._camera&&this._renderer.renderSplineScene(this._scene,this._camera,this._sharedAssetsManager),null===(i=this._perfs)||void 0===i||i.end()))},this._resize=eg((()=>{var e,t,n;!this._renderer||(1===this._viewportMode&&this._frameView&&(this._frameView.frameSize=FR.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),1!==this._viewportMode&&null!==(e=this._frameView)&&void 0!==e&&e.updateViewport(),this._camera&&(null!==(t=this._frameView)&&void 0!==t&&t.updateCamera(),"PerspectiveCamera"===this._camera.cameraType&&1===this._viewportMode&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()),null!==(n=this._eventManager)&&void 0!==n&&n.resize(),this.requestRender())}),10),this.canvas=e,this.renderOnDemand=t,window.location.search.includes("perfs")&&(this._perfs=new class{constructor(e){let{x:t=10,y:n=10}=e;this._startTime=0;let r=document.getElementById("spe-perfs");r?this.element=r:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left="".concat(t,"px"),this.element.style.top="".concat(n,"px")}dispose(){var e;null===(e=this.element.parentElement)||void 0===e||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}}({x:10,y:10})),function(e){e.addEventListener("pointerdown",Yx,!0),e.addEventListener("pointerdown",Qx,!0),e.addEventListener("pointermove",Qx,!0),e.addEventListener("pointerup",Xx,!0),e.addEventListener("pointercancel",Xx,!0),e.addEventListener("pointerleave",Xx,!0),window.addEventListener("keydown",Zx,!0),window.addEventListener("keyup",Jx,!0)}(e)}async load(e,t){!function(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}(e);let n=await(await fetch(e,t)).arrayBuffer();await this.start(n)}async start(e){var t;let{interactive:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.disposed)return;let r=await GT(e);await Promise.all([aM(r)&&uA(),zM(r)&&W_(),r.scene.environment.usePhysics&&_g(),PM(r)&&_M()].filter(Boolean)),this._eventManager&&this._eventManager.deactivate(),this._controls&&this._controls.dispose(),null===(t=this._scene)||void 0===t||t.dispose();let i=new class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.sharedAssets=new HT(e.shared,t),this.scene=new tT(e.scene,this.sharedAssets),this.scene.switchActiveCamera(this.scene.activeCamera)}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}dispose(){this.scene.dispose()}}(r);if(this._scene=i.scene,this._sharedAssetsManager=i.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let e=performance.now();BR(r,i.scene);let t=performance.now();console.log("Merged geometries in ",t-e," ms")}if(aM(r)&&this._scene.traverse((e=>{_A(e)&&e.recomputeBoolean()})),this._sharedAssetsManager.setOnImageLoad((()=>{this.requestRender()})),this._sharedAssetsManager.setOnFontLoad((()=>{this.requestRender()})),function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[];e.objects.traverse(((o,a)=>{let s=t.find(o);if(s&&(s.states={},a.states)){var l;i.some((t=>e.objects.isDescendantOf(o,t)))||!0===(null===(l=a.physics)||void 0===l?void 0:l.fusedBody)&&"dynamic"===a.physics.rigidBody&&i.push(o),s.data=a,s.currentState=null,s.currentTransitionAction=null;for(let t of a.states){if(!0===e.environment.usePhysics&&a.physics&&("dynamic"===a.physics.rigidBody||i.some((t=>e.objects.isDescendantOf(o,t))))&&(void 0!==t.data.position||void 0!==t.data.rotation||void 0!==t.data.hiddenMatrix))return;s.states[t.id]=Cx.patch(a,t.data)}if(r){var c,u,d,h,f,p,m,g;if(void 0!==s.matrixWorld0?(s.matrixWorld.identity(),null!==(c=s.rigidBody)&&void 0!==c&&c.setTranslation(PD,!0),null!==(u=s.rigidBody)&&void 0!==u&&u.setRotation(DD,!0),null!==(d=s.rigidBody)&&void 0!==d&&d.setLinvel(PD,!0),null===(h=s.rigidBody)||void 0===h||h.setAngvel(PD,!0)):s.rigidBody&&(null!==(f=s.rigidBody)&&void 0!==f&&f.setTranslation(s.position0,!0),null!==(p=s.rigidBody)&&void 0!==p&&p.setRotation(s.rotation0,!0),null!==(m=s.rigidBody)&&void 0!==m&&m.setLinvel(PD,!0),null===(g=s.rigidBody)||void 0===g||g.setAngvel(PD,!0)),void 0!==s.hiddenMatrix0&&(s.hiddenMatrix.copy(s.hiddenMatrix0),s.hiddenMatrix.premultiply(s.parent.matrixWorld0)),s instanceof QC&&"Mesh"===a.type)if("material"in a){if(s.material instanceof Array)return;kD(s.material,a.material,n)}else if("materials"in a){if(!(s.material instanceof Array))return;var v=0;for(let e of a.materials)kD(s.material[v],e,n),v++}return}OD(s,a,null,n,void 0!==a.events.find((e=>"Follow"===e.data.type||"LookAt"===e.data.type)))}}))}(r.scene,this._scene,this._sharedAssetsManager),this._renderer||(this._renderer=new LR({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this.requestRender),this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=r.scene.environment.ambientLight.softShadows?1:2,function(){if(HC)return;HC=!0;let e=WC(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"medium");To.shadowmap_pars_fragment=UC(e);let t=GC.slice();t=t.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + ".concat(3,", spotShadowMap[ i ]")),t=t.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),To.lights_fragment_begin=t;let n=VC.slice();n=n.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),To.shadowmask_pars_fragment=n}(r.scene.environment.ambientLight.softShadowQuality)),this._frameView)this._frameView.setCamera(this._camera);else{let e=Object.values(r.frames)[0];if("fullscreen"===e.preset){this._viewportMode=1;let{width:e,height:t}=window.getComputedStyle(this.canvas);!this.canvas.parentElement||"300px"!==e&&"auto"!==e?this._viewportWidth=this.canvas.clientWidth:(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),!this.canvas.parentElement||"150px"!==t&&"auto"!==t?this._viewportHeight=this.canvas.clientHeight:(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")}else this._viewportMode=2,this._viewportWidth=e.size[0],this._viewportHeight=e.size[1],this.canvas.style.width="".concat(this._viewportWidth,"px"),this.canvas.style.height="".concat(this._viewportHeight,"px");this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new class{constructor(e,t,n,r,i){this._aspect=1,this._renderer=e,this._camera=t,this._frameSize=(new jn).copy(n),this._editorSize=(new jn).copy(r),this._aspect=t.aspect,this._fov=null!==i&&void 0!==i?i:t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewportForImageExport(){if(!this._renderer||!this._camera||"PerspectiveCamera"!==this._camera.cameraType)return;let e=this._frameSize.x,t=this._frameSize.y,n=this._editorSize.x,r=this._editorSize.y;this._aspect=e/t,this._camera.zoom*=Math.min(n/e,r/t),this._renderer.setViewport(0,0,e,t)}updateViewport(){if(!this._renderer||!this._camera||"PerspectiveCamera"!==this._camera.cameraType)return;let e=this._frameSize.x,t=this._frameSize.y,n=this._editorSize.x,r=this._editorSize.y,i=0,o=0,a=e,s=t;e<n&&(i=.5*(n-e),i=-i,a=n),t<r&&(o=.5*(r-t),o=-o,s=r),this._aspect=a/s,this._renderer.setViewport(i,o,a,s)}updateCamera(){if(this._camera)if("PerspectiveCamera"===this._camera.cameraType){let e=this._frameSize.y,t=this._editorSize.y,n=this._fov;if(e>t){let r=function(e,t,n,r,i){return(e-t)/(2160-t)*(15-r)+r}(e,1080,0,1)/100;n*=e/t,n*=1-r}this._camera.aspect=this._aspect,this._camera.fov=n,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t),this._camera.updateProjectionMatrix())}}(this._renderer,this._camera,new jn(this._viewportWidth,this._viewportHeight),new jn(window.innerWidth,window.innerHeight))}if(n&&(this._scene.updateMatrixWorld(!0),this._controls=new class{constructor(e,t,n,r,i){var o,a,s,l;let c,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.scene=t,this.sharedAssets=i,this.isExport=u,this.gameControls=[],this.gameControlStates=[],this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],eventsPerObjects:{},colliderToEntity:{}},this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.processRigidBody=e=>{if(e.bodyType()!==FD.RigidBodyType.Dynamic)return;e.isSleeping()||this.nActiveRigidBodies++;let t=e.translation(),n=e.rotation(),r=this.rigidBodyToMesh.get(e.handle);if(xk.set(t.x,t.y,t.z),xk.multiplyScalar(this.pixelsPerMeter),bk.set(n.x,n.y,n.z,n.w),r[0].matrixWorld.compose(xk,bk,r[0].matrixWorld0?yk:r[1]),r[0].dispatchEvent(_k),r[2])for(let i of r[0].children)i.updateMatrixWorld(!0)},this.handleCollisionEvents=(e,t,n)=>{if(!1!==n)if(this.gameControls.some((t=>t.object===this.sharedGameControlGlobals.colliderToEntity[e]))){let e=this.sharedGameControlGlobals.colliderToEntity[t],n=this.sharedGameControlGlobals.eventsPerObjects[e.uuid];if(void 0===n)return;for(let t of n)"character"===t.data.target&&this.dispatchCollisionEvent(t,e)}else if(this.gameControls.some((e=>e.object===this.sharedGameControlGlobals.colliderToEntity[t]))){let t=this.sharedGameControlGlobals.colliderToEntity[e],n=this.sharedGameControlGlobals.eventsPerObjects[t.uuid];if(void 0===n)return;for(let e of n)"character"===e.data.target&&this.dispatchCollisionEvent(e,t)}else{let n=this.sharedGameControlGlobals.colliderToEntity[e],r=this.sharedGameControlGlobals.eventsPerObjects[n.uuid];if(void 0===r)return;for(let e of r)"scene"===e.data.target&&this.dispatchCollisionEvent(e,n);let i=this.sharedGameControlGlobals.colliderToEntity[t],o=this.sharedGameControlGlobals.eventsPerObjects[null===i||void 0===i?void 0:i.uuid];if(void 0===o)return;for(let e of o)"scene"===e.data.target&&this.dispatchCollisionEvent(e,i)}},this.domElement=n.domElement,c=null===e.scene.publish.playCamera?tT.PERSONAL_CAMERA_ID:e.scene.publish.playCamera;let d,h=this.scene.find(c),f=!1,p=!1,m=5,g=8,v=9,y="drag";if(this.usePhysics=null!==(o=e.scene.environment.usePhysics)&&void 0!==o?o:Dx.defaultData.usePhysics,this.pixelsPerMeter=null!==(a=e.scene.environment.pixelsPerMeter)&&void 0!==a?a:Dx.defaultData.pixelsPerMeter,this.sceneGraph=e.scene.objects,null!==(s=e.scene.objects.data(e.scene.publish.gameControlObject))&&void 0!==s&&s.events.forEach((e=>{"GameControl"===e.data.type&&(d=e.data.keyAssignments,m=e.data.joystickPosLoc,g=e.data.joystickRotLoc,v=e.data.jumpTouchButtonLoc,y=e.data.rotByTouch)})),this.sceneGraph.traverse(((e,t)=>{t.events.forEach((n=>{if("GameControl"!==n.data.type)return;let r=this.scene.find(e),i=r;for(;null!==(null===(o=i=i.parent)||void 0===o?void 0:o.parent);){var o,a,s;if(null!==(a=this.sceneGraph.data(i.uuid))&&void 0!==a&&null!==(s=a.physics)&&void 0!==s&&s.fusedBody)return}n.data.collisionEnabled&&(this.needsCollisionDetection=!0),this.gameControlStates.push([r,t,n.data])}))})),this.usePhysics&&(0===this.gameControlStates.length||this.needsCollisionDetection)&&this.initPhysics(null!==(l=e.scene.environment.gravity)&&void 0!==l?l:Dx.defaultData.gravity),this.gameControlStates.forEach((t=>{let[o,a,s]=t;rx.is(a.type)&&(p=!0),f=f||s.camera===h.uuid;let l=new qk(o,e.scene.objects,n.domElement,{...s,keyAssignments:d},e.scene.environment,this.sharedGameControlGlobals,s.camera===h.uuid,h,this.scene,i);l.addEventListener("change",r),l.addEventListener("end",r),l.addEventListener("start",r),this.gameControls.push(l),Bx&&s.touchControl&&(void 0!==this.joystickToGameControls[m]?this.joystickToGameControls[m].push([l,"pos"]):this.joystickToGameControls[m]=[[l,"pos"]],"walk"===s.moveMode&&(void 0!==this.joystickToGameControls[v]?this.joystickToGameControls[v].push([l,"jmp"]):this.joystickToGameControls[v]=[[l,"jmp"]]),"joystick"===y&&(void 0!==this.joystickToGameControls[g]?this.joystickToGameControls[g].push([l,"rot"]):this.joystickToGameControls[g]=[[l,"rot"]]))})),!1===f){let{enableRotate:t,enablePan:i,enableZoom:o,autoRotate:a,hoverRotatePanMode:s}=e.scene.publish.orbitControls;!1===p&&(t||i||o||a||0!==s)&&!Object.keys(h.states).length&&(this.orbitControls=new oO(h,n.domElement,this.isExport),this.orbitControls.addEventListener("change",r),this.orbitControls.addEventListener("end",r),this.orbitControls.addEventListener("start",r),this.orbitControls.fromJSON(e.scene.publish.orbitControls),this.orbitControls.useKeyEvents=!1)}let x=n.domElement.width/n.getPixelRatio(),b=n.domElement.height/n.getPixelRatio();this.joystickToGameControls.forEach(((t,n)=>{var i;let o=document.body.appendChild(document.createElement("div")),[a,s,l]=(null!==(i=e.scene.publish.joystickSizeAndXYOffset)&&void 0!==i?i:Px.defaultData.joystickSizeAndXYOffset)[n],c=(x-5*a)/4+a,u={},d=t.some((e=>"jmp"===e[1])),h=d?0:a;n<10?(n<5?u.top=h/2:u.bottom=h/2,u.left=h/2+n%5*c):10===n?(u.left=h/2,u.top=b/2):(u.right=h/2,u.top=b/2),u.top?u.top-=s[1]:u.bottom+=s[1],u.left?u.left+=s[0]:u.right-=s[0];for(let e in u)u[e]+="px";if(d){let e=o.appendChild(document.createElement("div"));Object.assign(e.style,u,{position:"absolute",width:a+"px",height:a+"px",backgroundColor:"rgba(255,255,255,".concat("show"===l?.4:0,")"),zIndex:"9999",borderRadius:a+"px",border:"solid 2px rgba(0, 0, 0, .1)",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let i=a/16*16*.4;return e.innerHTML='\n\t\t\t\t\t<svg width="'.concat(i,'" height="').concat(.4*a,'" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t\t\t\t\t\t<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n\t\t\t\t\t</svg>\n\t\t\t\t'),e.addEventListener("pointerdown",(()=>{t.forEach((e=>{e[0].movementState.jump=1})),r()})),e.addEventListener("touchend",(e=>e.preventDefault())),void(this.joysticks[n]=[void 0,o])}let f={zone:o,mode:"static",position:u,size:a};"hide"===l&&(f.restOpacity=0);let p=DT(f);p.on("move",((e,n)=>{t.forEach((e=>{let t=e[0];"pos"===e[1]?n.force<.2?t.moveForce=0:(t.movementState.movePosZ=Math.sin(-n.angle.radian),t.movementState.movePosX=Math.cos(-n.angle.radian),n.force<.3?t.moveForce=(n.force-.2)/.1:t.moveForce=1):n.force<.2?t.rotForce=0:(t.movementState.rotPosX=n.vector.y,t.movementState.rotPosY=-n.vector.x,n.force<.3?t.rotForce=(n.force-.2)/.1:t.rotForce=1)})),r()})),p.on("end",((e,n)=>{t.forEach((e=>{let t=e[0];"pos"===e[1]?(t.movementState.movePosZ=0,t.movementState.movePosX=0,t.moveForce=1):(t.movementState.rotPosX=0,t.movementState.rotPosY=0,t.rotForce=1)}))})),this.joysticks[n]=[p,o]})),!1===this.usePhysics&&this.needsCollisionDetection&&this.initBVH(),this.initializationCounter++,window.setTimeout((()=>this.collisionEvents.forEach((e=>e.disabled=!1))),80)}initBVH(){let e=[];this.scene.updateMatrixWorld(!0);let t=new Set;if(this.scene.traverse((n=>{var r;if(wA(n))if(!n.visible||t.has(n))n.children.forEach((e=>wA(e)&&t.add(e)));else if(Object.keys(n.states).length||null!==(r=n.data)&&void 0!==r&&r.events.some((e=>"GameControl"===e.data.type))){let e=[];n.matrixWorld.decompose(xk,bk,wk);let t=(new Ur).compose(xk,bk,yk);SA(n)&&e.push(kT(n.geometry,vk.makeScale(wk.x,wk.y,wk.z))),n.updateMatrixWorld();let r=t.clone().invert();if(n.traverse((t=>{!SA(t)||(t.updateMatrixWorld(),vk.multiplyMatrices(r,t.matrixWorld),e.push(kT(t.geometry,vk)))})),e.length>0){let t=ub(e,!1);n.boundsTree=new Cw(t),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(n)}}else SA(n)&&!this.sharedGameControlGlobals.entitiesWithTransformAnim.some((e=>n.isDescendantOf(e)))&&e.push(kT(n.geometry,n.matrixWorld))})),e.length>0){let t=ub(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new Cw(t)}}addCollider(e,t,n,r){var i;let o,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=e.rigidBody;o=void 0!==r?"sphere"===r.collider.type?FD.ColliderDesc.ball(r.collider.radius/this.pixelsPerMeter):"capsule"===r.collider.type?FD.ColliderDesc.capsule((r.collider.height/2-r.collider.radius)/this.pixelsPerMeter,r.collider.radius/this.pixelsPerMeter):FD.ColliderDesc.cuboid(r.collider.width/this.pixelsPerMeter/2,r.collider.height/this.pixelsPerMeter/2,r.collider.depth/this.pixelsPerMeter/2):"trimesh"===n.colliderType?FD.ColliderDesc.trimesh(t.getAttribute("position").array,t.getIndex().array):FD.ColliderDesc.convexMesh(t.getAttribute("position").array,a?t.getIndex().array:void 0),o.setFrictionCombineRule(FD.CoefficientCombineRule.Average).setRestitutionCombineRule(FD.CoefficientCombineRule.Average).setDensity(n.density).setFriction(n.friction).setRestitution(n.restitution);let l=this.sharedGameControlGlobals.rapierWorld.createCollider(o,s);if(this.sharedGameControlGlobals.colliderToEntity[l.handle]=e,void 0!==r){xk.fromArray(r.collider.position).multiply(wk.setFromMatrixScale(e.matrixWorld)).divideScalar(this.pixelsPerMeter),l.setTranslationWrtParent(xk);let t=(new cr).setFromEuler((new Zr).setFromVector3((new ur).fromArray(r.collider.rotation)));l.setRotationWrtParent(t),l.setActiveEvents(FD.ActiveEvents.COLLISION_EVENTS)}else"dynamic"===n.rigidBody&&(null===(i=this.sharedGameControlGlobals.eventsPerObjects[e.uuid])||void 0===i?void 0:i.some((e=>"scene"===e.target)))&&l.setActiveEvents(FD.ActiveEvents.COLLISION_EVENTS)}initPhysics(e){this.sharedGameControlGlobals.rapierWorld=new FD.World(new FD.Vector3(0,null!==e&&void 0!==e?e:-10,0)),this.events=new FD.EventQueue(!0);let t=[],n=[],r=[];if(this.sceneGraph.traverse(((e,i)=>{let o=this.scene.find(e);if(o&&wA(o)&&o.visible){let a,s=i.states.some((e=>void 0!==e.data.position||void 0!==e.data.rotation||void 0!==e.data.hiddenMatrix)),l=!1;for(let e of i.events)if("GameControl"===e.data.type)a=e.data;else if("Collision"===e.data.type){l=!0;let t=new gk(e.data,o,this.scene,this.sharedAssets);this.collisionEvents.push(t),this.sharedGameControlGlobals.eventsPerObjects[o.uuid]?this.sharedGameControlGlobals.eventsPerObjects[o.uuid].push(t):this.sharedGameControlGlobals.eventsPerObjects[o.uuid]=[t]}if(n.some((t=>this.sceneGraph.isDescendantOf(e,t))))return;if(!i.physics)return void n.push(e);if(r.some((t=>this.sceneGraph.isDescendantOf(e,t))))return;if(!0===i.physics.fusedBody&&r.push(e),"dynamic"===i.physics.rigidBody&&!1===i.physics.fusedBody&&(o.matrixWorldFusedFalse=o.matrixWorld.clone()),"dynamic"===i.physics.rigidBody||s||l||void 0!==a){let e=[];void 0===a&&"dynamic"===i.physics.rigidBody&&!function(e){return e.elements.every(((e,t)=>t%5===0&&Math.abs(1-e)<1e-8||Math.abs(e)<1e-8))}(o.hiddenMatrix)&&(o.matrixWorld0=o.matrixWorld.clone(),o.matrixWorld.identity()),o instanceof QC&&void 0!==o.geometry.getAttribute("position")&&(void 0!==o.matrixWorld0&&o.geometry.applyMatrix4(o.matrixWorld0),e.push(kT(o.geometry)));let t=o.matrixWorld.clone().invert();if(i.physics.fusedBody&&o.traverse((n=>{n!==o&&(o.matrixWorld0?(vk.copy(n.matrixWorld),n.parent===o&&(n.hiddenMatrix0=n.hiddenMatrix.clone(),n.hiddenMatrix.premultiply(o.matrixWorld0))):vk.multiplyMatrices(t,n.matrixWorld),n instanceof QC&&void 0!==n.geometry.getAttribute("position")&&e.push(kT(n.geometry,vk)))})),e.length>0){let t;void 0!==a?t=FD.RigidBodyDesc.kinematicPositionBased():"dynamic"===i.physics.rigidBody?(t=FD.RigidBodyDesc.dynamic(),t.setLinearDamping(i.physics.damping).setAdditionalMass(1e-9).setGravityScale(i.physics.gravityScale).enabledRotations(...i.physics.enabledRotation).enabledTranslations(...i.physics.enabledTranslation)):s?(t=FD.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(o)):t=FD.RigidBodyDesc.fixed();let n=ub(e);void 0===o.matrixWorld0&&(o.matrixWorld.decompose(xk,bk,wk),xk.divideScalar(this.pixelsPerMeter),o.position0=xk.clone(),o.rotation0=bk.clone(),t.setTranslation(xk.x,xk.y,xk.z).setRotation(bk),n.scale(wk.x,wk.y,wk.z)),n.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let r=this.sharedGameControlGlobals.rapierWorld.createRigidBody(t);void 0===a&&"dynamic"===i.physics.rigidBody&&this.rigidBodyToMesh.set(r.handle,[o,wk.clone(),i.physics.fusedBody]),o.rigidBody=r;let l=!(void 0===i.geometry||"SubdivGeometry"===i.geometry.type||"NonParametricGeometry"===i.geometry.type||"BooleanGeometry"===i.geometry.type||"VectorGeometry"===i.geometry.type||"StarGeometry"===i.geometry.type||"RectangleGeometry"===i.geometry.type||"EllipseGeometry"===i.geometry.type||"TriangleGeometry"===i.geometry.type||"TorusGeometry"===i.geometry.type||"HelixGeometry"===i.geometry.type);try{this.addCollider(o,n,i.physics,a,l)}catch{this.addCollider(o,n,i.physics,a,!1)}}}else this.gameControlStates.some((e=>{let[t]=e;return o.isDescendantOf(t)}))||(SA(o)&&t.push(kT(o.geometry,o.matrixWorld)),i.physics.fusedBody&&o.traverse((e=>{!SA(e)||e===o||t.push(kT(e.geometry,e.matrixWorld))})))}})),0===t.length)return;let i=ub(t);i.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let o=FD.RigidBodyDesc.fixed(),a=this.sharedGameControlGlobals.rapierWorld.createRigidBody(o),s=FD.ColliderDesc.trimesh(i.getAttribute("position").array,i.getIndex().array).setFrictionCombineRule(FD.CoefficientCombineRule.Multiply).setRestitutionCombineRule(FD.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(s,a)}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}dispose(){var e,t;this.scene.traverse((e=>{let t=e;if(t.matrixWorld0){let e=vk.copy(t.matrixWorld0).invert();t instanceof QC&&t.geometry.applyMatrix4(e),t.matrixWorld.copy(t.matrixWorld0),t.matrixWorld0=void 0}t.hiddenMatrix0&&(t.hiddenMatrix=t.hiddenMatrix0,t.hiddenMatrix0=void 0),t.matrixWorldFusedFalse&&(t.matrixWorldFusedFalse=void 0),t.rigidBody&&(t.rigidBody=void 0),t.position0&&(t.position0=void 0),t.rotation0&&(t.rotation0=void 0)})),null!==(e=this.sharedGameControlGlobals.rapierWorld)&&void 0!==e&&e.free(),this.sharedGameControlGlobals.staticMeshBVH=void 0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.gameControls.forEach((e=>{e.reset(),e.dispose()})),this.gameControls=[],this.joysticks.forEach((e=>{let[t,n]=e;null!==t&&void 0!==t&&t.destroy(),n.remove()})),this.joystickToGameControls=[],this.joysticks=[],null!==(t=this.orbitControls)&&void 0!==t&&t.dispose(),this.orbitControls=void 0;for(let n of Object.values(this.sharedGameControlGlobals.eventsPerObjects))n.forEach((e=>e.disconnect()));this.sharedGameControlGlobals.eventsPerObjects={},this.scene.updateMatrixWorld(!0)}update(e){let t=!0;if(void 0!==this.orbitControls&&(t=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2)this.initializationCounter++,t=!1;else if(2===this.initializationCounter)for(let r of this.gameControls)t=!r.update(e)&&t;if(this.usePhysics&&(0===this.gameControls.length||this.needsCollisionDetection)){var n;for(let e of this.sharedGameControlGlobals.entitiesWithTransformAnim){e.matrixWorld.decompose(xk,bk,wk),Sk.setFromQuaternion(bk);let t=e;void 0===t.prevR?(t.prevR=Sk.clone(),t.prevT=xk.clone()):(t.prevR.copy(Sk),t.prevT.copy(xk)),e.rigidBody.setNextKinematicTranslation(xk.divideScalar(this.pixelsPerMeter)),e.rigidBody.setNextKinematicRotation(bk)}this.sharedGameControlGlobals.rapierWorld.step(this.events),null!==(n=this.events)&&void 0!==n&&n.drainCollisionEvents(this.handleCollisionEvents),t=!this.updatePositions()&&t}return t}dispatchCollisionEvent(e,t){t.dispatchEvent(Ak),e.dispatch()}}(r,this._scene,this._renderer,this.requestRender,this._sharedAssetsManager,!0),this._eventManager=new class{constructor(e,t,n,r,i,o,a,s){this.preventScroll=i,this.requestRender=a,this.isEnable=!1,this.onResetRaycaster=()=>{this.eventContext.raycasterNeedsUpdate=!0},this.onTouchMovePreventScroll=e=>{(e.touches.length>1||this.preventScroll)&&e.preventDefault()},this.onMouseWheelPreventScroll=e=>{this.preventScroll&&e.preventDefault()},this.eventContext=new class{constructor(e,t,n,r,i,o){this.isExport=o,this.raycaster=new OT,this.raycasterNeedsUpdate=!0,this.stopRaycast=!1,this.sharedAssets=new HT(Gx.emptyData()),this.scene=new tT({...kx.defaultData},this.sharedAssets),this.camera=new iM,this.renderer=e,this.domElement=e.domElement,this._domRect=this.domElement.getBoundingClientRect(),this._viewRect=ZT(this.renderer),this.stopRaycast=i,this.sharedAssets=r,this.scene=t,this.camera=n}get domRect(){return this._domRect}get viewRect(){return this._viewRect}updaterRect(){this._domRect=this.domElement.getBoundingClientRect(),this._viewRect=ZT(this.renderer)}updateRaycaster(e){if(!this.raycasterNeedsUpdate)return;this.raycasterNeedsUpdate=!1;let{pageX:t,pageY:n}=void 0!==e.touches&&e.touches.length>0?e.touches[0]:e;this.raycaster.setFromCamera(function(e,t,n,r){let i=n.height-r.height,o=(e-r.left-n.left)*(n.width/r.width),a=(t-i+r.top-n.top)*(n.height/r.height);return{x:o/n.width*2-1,y:-a/n.height*2+1}}(t,n,this._domRect,this._viewRect),this.camera)}}(e,t,n,o,r,null!==s&&void 0!==s&&s),this.handlers={Spline:new HD(this.eventContext),Conditional:new ek(this.eventContext),Start:new mk(this.eventContext),Basic:new qD(this.eventContext),MouseHover:new dk(this.eventContext),Scroll:new fk(this.eventContext),Follow:new ok(this.eventContext),LookAt:new ck(this.eventContext)}}activate(){let{scene:e,domElement:t}=this.eventContext;this.isEnable=!0,e.traverseEntity((e=>{e.addEventListener("requestRender",this.requestRender)})),Object.values(this.handlers).forEach((e=>e.connect())),this.resize(),lO.forEach((e=>{Object.values(this.handlers).some((t=>t.domEventsNeeded.has(e)))&&t.addEventListener(e,this.onResetRaycaster)})),t.addEventListener("wheel",this.onMouseWheelPreventScroll),t.addEventListener("touchmove",this.onTouchMovePreventScroll)}deactivate(){let{scene:e,domElement:t}=this.eventContext;this.isEnable=!1,Object.values(this.handlers).forEach((e=>e.disconnect())),e.traverseEntity((e=>{e.removeEventListener("requestRender",this.requestRender)})),lO.forEach((e=>{t.removeEventListener(e,this.onResetRaycaster)})),t.removeEventListener("touchmove",this.onTouchMovePreventScroll),t.removeEventListener("wheel",this.onMouseWheelPreventScroll)}reset(){this.deactivate(),this.activate()}resize(){this.eventContext.updaterRect()}}(this._renderer,this._scene,this._camera,r.scene.publish.stopRaycast,r.scene.publish.preventScroll,this._sharedAssetsManager,this.requestRender,!0)),this._resize(),!this._resizeObserver&&this.canvas.parentElement){let e=!0;this._resizeObserver=new ResizeObserver((()=>{e?e=!1:(this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._resize())})),this._resizeObserver.observe(this.canvas.parentElement)}void 0===this._rafId?this.render(performance.now()):this.requestRender()}findObjectById(e){var t;let n=null===(t=this._scene)||void 0===t?void 0:t.getObjectByProperty("uuid",e);return this._createProxyObject(n)}findObjectByName(e){var t;let n=null===(t=this._scene)||void 0===t?void 0:t.getObjectByName(e);return this._createProxyObject(n)}getSplineEvents(){var e;return(null===(e=this._eventManager)||void 0===e?void 0:e.handlers.Spline).splineEvents}emitEvent(e,t){var n;null===(n=this.findObjectById(t)||this.findObjectByName(t))||void 0===n||n.emitEvent(e)}emitEventReverse(e,t){var n;null===(n=this.findObjectById(t)||this.findObjectByName(t))||void 0===n||n.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,n;(null===(t=this._controls)||void 0===t?void 0:t.orbitControls)instanceof oO&&(null===(n=this._controls)||void 0===n||n.orbitControls.zoomOut(e))}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}dispose(){var e,t,n,r,i,o;this.disposed=!0,null!==(e=this._eventManager)&&void 0!==e&&e.deactivate(),null!==(t=this._scene)&&void 0!==t&&t.dispose(),null!==(n=this._sharedAssetsManager)&&void 0!==n&&n.dispose(),this._rafId&&cancelAnimationFrame(this._rafId),this._proxyObjectCache.forEach((e=>{Td.unsubscribe(e)})),null!==(r=this._renderer)&&void 0!==r&&r.dispose(),null!==(i=this._sharedAssetsManager)&&void 0!==i&&i.dispose(),this._resizeObserver&&this._resizeObserver.disconnect(),this.canvas.style.width="",this.canvas.style.height="",null!==(o=this._controls)&&void 0!==o&&o.dispose(),function(e){e.removeEventListener("pointerdown",Yx,!0),e.removeEventListener("pointerdown",Qx,!0),e.removeEventListener("pointermove",Qx,!0),e.removeEventListener("pointerup",Xx,!0),e.removeEventListener("pointercancel",Xx,!0),e.removeEventListener("pointerleave",Xx,!0),window.removeEventListener("keydown",Zx,!0),window.removeEventListener("keyup",Jx,!0)}(this.canvas)}_createProxyObject(e){if(null==e)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,emitEvent(t){e.dispatchEvent({type:"userEvent",eventName:t})},emitEventReverse(t){e.dispatchEvent({type:"userEvent",eventName:t,reverse:!0})}},n=Td(t,((t,n)=>{var r;"object"!=typeof e[t]&&null!==(r=Object.getOwnPropertyDescriptor(e,t))&&void 0!==r&&r.writable&&(e[t]=n),this.requestRender(),e.updateMatrix()}));return this._proxyObjectCache.set(e.uuid,n),n}}(y.current,{renderOnDemand:g}),n()}return()=>{for(let n of t)n.cb&&e.removeEventListener(n.name,n.cb);e.dispose()}}),[i]),tI("canvas",WR({ref:(w=[n,y],function(e){w.forEach((function(t){"function"===typeof t?t(e):null!=t&&(t.current=e)}))}),style:WR({display:x?"none":"block"},o)},v));var w})),rI=(0,e.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),iI=(0,e.createContext)({});const oI=(0,e.createContext)(null),aI="undefined"!==typeof document,sI=aI?e.useLayoutEffect:e.useEffect,lI=(0,e.createContext)({strict:!1});function cI(t,n,r,i){const o=(0,e.useContext)(iI).visualElement,a=(0,e.useContext)(lI),s=(0,e.useContext)(oI),l=(0,e.useContext)(rI).reducedMotion,c=(0,e.useRef)(void 0);i=i||a.renderer,!c.current&&i&&(c.current=i(t,{visualState:n,parent:o,props:r,presenceId:s?s.id:void 0,blockInitialAnimation:!!s&&!1===s.initial,reducedMotionConfig:l}));const u=c.current;return sI((()=>{u&&u.syncRender()})),(0,e.useEffect)((()=>{u&&u.animationState&&u.animationState.animateChanges()})),sI((()=>()=>u&&u.notifyUnmount()),[]),u}function uI(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function dI(e){return"string"===typeof e||Array.isArray(e)}function hI(e){return"object"===typeof e&&"function"===typeof e.start}const fI=["initial","animate","exit","whileHover","whileDrag","whileTap","whileFocus","whileInView"];function pI(e){return hI(e.animate)||fI.some((t=>dI(e[t])))}function mI(e){return Boolean(pI(e)||e.variants)}function gI(t){const{initial:n,animate:r}=function(e,t){if(pI(e)){const{initial:t,animate:n}=e;return{initial:!1===t||dI(t)?t:void 0,animate:dI(n)?n:void 0}}return!1!==e.inherit?t:{}}(t,(0,e.useContext)(iI));return(0,e.useMemo)((()=>({initial:n,animate:r})),[vI(n),vI(r)])}function vI(e){return Array.isArray(e)?e.join(" "):e}const yI=e=>({isEnabled:t=>e.some((e=>!!t[e]))}),xI={measureLayout:yI(["layout","layoutId","drag"]),animation:yI(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:yI(["exit"]),drag:yI(["drag","dragControls"]),focus:yI(["whileFocus"]),hover:yI(["whileHover","onHoverStart","onHoverEnd"]),tap:yI(["whileTap","onTap","onTapStart","onTapCancel"]),pan:yI(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:yI(["whileInView","onViewportEnter","onViewportLeave"])};function bI(t){const n=(0,e.useRef)(null);return null===n.current&&(n.current=t()),n.current}const wI={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let SI=1;const _I=(0,e.createContext)({});class AI extends e.Component{getSnapshotBeforeUpdate(){const{visualElement:e,props:t}=this.props;return e&&e.setProps(t),null}componentDidUpdate(){}render(){return this.props.children}}const EI=(0,e.createContext)({}),CI=Symbol.for("motionComponentSymbol");function MI(t){let{preloadedFeatures:n,createVisualElement:r,projectionNodeConstructor:i,useRender:o,useVisualState:a,Component:s}=t;n&&function(e){for(const t in e)"projectionNodeConstructor"===t?xI.projectionNodeConstructor=e[t]:xI[t].Component=e[t]}(n);const l=(0,e.forwardRef)((function(t,l){const c={...(0,e.useContext)(rI),...t,layoutId:TI(t)},{isStatic:u}=c;let d=null;const h=gI(t),f=u?void 0:bI((()=>{if(wI.hasEverUpdated)return SI++})),p=a(t,u);if(!u&&aI){h.visualElement=cI(s,p,c,r);const t=(0,e.useContext)(lI).strict,o=(0,e.useContext)(EI);h.visualElement&&(d=h.visualElement.loadFeatures(c,t,n,f,i||xI.projectionNodeConstructor,o))}return e.createElement(AI,{visualElement:h.visualElement,props:c},d,e.createElement(iI.Provider,{value:h},o(s,t,f,function(t,n,r){return(0,e.useCallback)((e=>{e&&t.mount&&t.mount(e),n&&(e?n.mount(e):n.unmount()),r&&("function"===typeof r?r(e):uI(r)&&(r.current=e))}),[n])}(p,h.visualElement,l),p,u,h.visualElement)))}));return l[CI]=s,l}function TI(t){let{layoutId:n}=t;const r=(0,e.useContext)(_I).id;return r&&void 0!==n?r+"-"+n:n}function PI(e){function t(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return MI(e(t,n))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const DI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function kI(e){return"string"===typeof e&&!e.includes("-")&&!!(DI.indexOf(e)>-1||/[A-Z]/.test(e))}const OI={};const RI=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],II=new Set(RI);function LI(e,t){let{layout:n,layoutId:r}=t;return II.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!OI[e]||"opacity"===e)}const NI=e=>!!(null===e||void 0===e?void 0:e.getVelocity),jI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},BI=(e,t)=>RI.indexOf(e)-RI.indexOf(t);function FI(e){return e.startsWith("--")}const zI=(e,t)=>t&&"number"===typeof e?t.transform(e):e,UI=(e,t)=>n=>Math.max(Math.min(n,t),e),GI=e=>e%1?Number(e.toFixed(5)):e,VI=/(-)?([\d]*\.?[\d])+/g,HI=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,WI=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function qI(e){return"string"===typeof e}const YI=e=>({test:t=>qI(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),XI=YI("deg"),QI=YI("%"),KI=YI("px"),ZI=YI("vh"),JI=YI("vw"),$I=Object.assign(Object.assign({},QI),{parse:e=>QI.parse(e)/100,transform:e=>QI.transform(100*e)}),eL={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},tL=Object.assign(Object.assign({},eL),{transform:UI(0,1)}),nL=Object.assign(Object.assign({},eL),{default:1}),rL={...eL,transform:Math.round},iL={borderWidth:KI,borderTopWidth:KI,borderRightWidth:KI,borderBottomWidth:KI,borderLeftWidth:KI,borderRadius:KI,radius:KI,borderTopLeftRadius:KI,borderTopRightRadius:KI,borderBottomRightRadius:KI,borderBottomLeftRadius:KI,width:KI,maxWidth:KI,height:KI,maxHeight:KI,size:KI,top:KI,right:KI,bottom:KI,left:KI,padding:KI,paddingTop:KI,paddingRight:KI,paddingBottom:KI,paddingLeft:KI,margin:KI,marginTop:KI,marginRight:KI,marginBottom:KI,marginLeft:KI,rotate:XI,rotateX:XI,rotateY:XI,rotateZ:XI,scale:nL,scaleX:nL,scaleY:nL,scaleZ:nL,skew:XI,skewX:XI,skewY:XI,distance:KI,translateX:KI,translateY:KI,translateZ:KI,x:KI,y:KI,z:KI,perspective:KI,transformPerspective:KI,opacity:tL,originX:$I,originY:$I,originZ:KI,zIndex:rL,fillOpacity:tL,strokeOpacity:tL,numOctaves:rL};function oL(e,t,n,r){const{style:i,vars:o,transform:a,transformKeys:s,transformOrigin:l}=e;s.length=0;let c=!1,u=!1,d=!0;for(const h in t){const e=t[h];if(FI(h)){o[h]=e;continue}const n=iL[h],r=zI(e,n);if(II.has(h)){if(c=!0,a[h]=r,s.push(h),!d)continue;e!==(n.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=r):i[h]=r}if(t.transform||(c||r?i.transform=function(e,t,n,r){let{transform:i,transformKeys:o}=e,{enableHardwareAcceleration:a=!0,allowTransformNone:s=!0}=t,l="";o.sort(BI);for(const c of o)l+="".concat(jI[c]||c,"(").concat(i[c],") ");return a&&!i.z&&(l+="translateZ(0)"),l=l.trim(),r?l=r(i,n?"":l):s&&n&&(l="none"),l}(e,n,d,r):i.transform&&(i.transform="none")),u){const{originX:e="50%",originY:t="50%",originZ:n=0}=l;i.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const aL=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}});function sL(e,t,n){for(const r in t)NI(t[r])||LI(r,n)||(e[r]=t[r])}function lL(t,n,r){const i={};return sL(i,t.style||{},t),Object.assign(i,function(t,n,r){let{transformTemplate:i}=t;return(0,e.useMemo)((()=>{const e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};return oL(e,n,{enableHardwareAcceleration:!r},i),Object.assign({},e.vars,e.style)}),[n])}(t,n,r)),t.transformValues?t.transformValues(i):i}function cL(e,t,n){const r={},i=lL(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),r.style=i,r}const uL=new Set(["initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","onHoverStart","onHoverEnd","layoutScroll","whileInView","onViewportEnter","onViewportLeave","viewport","whileTap","onTap","onTapStart","onTapCancel","animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView","onPan","onPanStart","onPanSessionStart","onPanEnd"]);function dL(e){return uL.has(e)}let hL=e=>!dL(e);try{(fL=require("@emotion/is-prop-valid").default)&&(hL=e=>e.startsWith("on")?!dL(e):fL(e))}catch(hR){}var fL;function pL(e,t,n){const r={};for(const i in e)(hL(i)||!0===n&&dL(i)||!t&&!dL(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function mL(e,t,n){return"string"===typeof e?e:KI.transform(t+n*e)}const gL={offset:"stroke-dashoffset",array:"stroke-dasharray"},vL={offset:"strokeDashoffset",array:"strokeDasharray"};function yL(e,t,n,r){let{attrX:i,attrY:o,originX:a,originY:s,pathLength:l,pathSpacing:c=1,pathOffset:u=0,...d}=t;oL(e,d,n,r),e.attrs=e.style,e.style={};const{attrs:h,style:f,dimensions:p}=e;h.transform&&(p&&(f.transform=h.transform),delete h.transform),p&&(void 0!==a||void 0!==s||f.transform)&&(f.transformOrigin=function(e,t,n){const r=mL(t,e.x,e.width),i=mL(n,e.y,e.height);return"".concat(r," ").concat(i)}(p,void 0!==a?a:.5,void 0!==s?s:.5)),void 0!==i&&(h.x=i),void 0!==o&&(h.y=o),void 0!==l&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const o=i?gL:vL;e[o.offset]=KI.transform(-r);const a=KI.transform(t),s=KI.transform(n);e[o.array]="".concat(a," ").concat(s)}(h,l,c,u,!1)}const xL=()=>({style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{},attrs:{}});function bL(t,n){const r=(0,e.useMemo)((()=>{const e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{},attrs:{}};return yL(e,n,{enableHardwareAcceleration:!1},t.transformTemplate),{...e.attrs,style:{...e.style}}}),[n]);if(t.style){const e={};sL(e,t.style,t),r.style={...e,...r.style}}return r}function wL(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=(n,r,i,o,a,s)=>{let{latestValues:l}=a;const c=(kI(n)?bL:cL)(r,l,s),u={...pL(r,"string"===typeof n,t),...c,ref:o};return i&&(u["data-projection-id"]=i),(0,e.createElement)(n,u)};return n}const SL=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function _L(e,t,n,r){let{style:i,vars:o}=t;Object.assign(e.style,i,r&&r.getProjectionStyles(n));for(const a in o)e.style.setProperty(a,o[a])}const AL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function EL(e,t,n,r){_L(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(AL.has(i)?i:SL(i),t.attrs[i])}function CL(e){const{style:t}=e,n={};for(const r in t)(NI(t[r])||LI(r,e))&&(n[r]=t[r]);return n}function ML(e){const t=CL(e);for(const n in e)if(NI(e[n])){t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]}return t}function TL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),t}const PL=e=>Array.isArray(e),DL=e=>PL(e)?e[e.length-1]||0:e;function kL(e){const t=NI(e)?e.get():e;return(e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue))(t)?t.toValue():t}const OL=t=>(n,r)=>{const i=(0,e.useContext)(iI),o=(0,e.useContext)(oI),a=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:o,onMount:a}=e;const s={latestValues:RL(t,n,r,i),renderState:o()};return a&&(s.mount=e=>a(t,e,s)),s}(t,n,i,o);return r?a():bI(a)};function RL(e,t,n,r){const i={},o=r(e);for(const h in o)i[h]=kL(o[h]);let{initial:a,animate:s}=e;const l=pI(e),c=mI(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===s&&(s=t.animate));let u=!!n&&!1===n.initial;u=u||!1===a;const d=u?s:a;if(d&&"boolean"!==typeof d&&!hI(d)){(Array.isArray(d)?d:[d]).forEach((t=>{const n=TL(e,t);if(!n)return;const{transitionEnd:r,transition:o,...a}=n;for(const e in a){let t=a[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(i[e]=t)}for(const e in r)i[e]=r[e]}))}return i}const IL={useVisualState:OL({scrapeMotionValuesFromProps:ML,createRenderState:xL,onMount:(e,t,n)=>{let{renderState:r,latestValues:i}=n;try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(UV){r.dimensions={x:0,y:0,width:0,height:0}}yL(r,i,{enableHardwareAcceleration:!1},e.transformTemplate),EL(t,r)}})},LL={useVisualState:OL({scrapeMotionValuesFromProps:CL,createRenderState:aL})};var NL;function jL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function BL(t,n,r,i){(0,e.useEffect)((()=>{const e=t.current;if(r&&e)return jL(e,n,r,i)}),[t,n,r,i])}function FL(e){return"undefined"!==typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function zL(e){return!!e.touches}function UL(e){return t=>{const n=t instanceof MouseEvent;(!n||n&&0===t.button)&&e(t)}}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.InView="whileInView",e.Exit="exit"}(NL||(NL={}));const GL={pageX:0,pageY:0};function VL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";const n=e.touches[0]||e.changedTouches[0],r=n||GL;return{x:r[t+"X"],y:r[t+"Y"]}}function HL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{x:e[t+"X"],y:e[t+"Y"]}}function WL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:zL(e)?VL(e,t):HL(e,t)}}const qL=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t=>e(t,WL(t));return t?UL(n):n},YL={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},XL={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function QL(e){return aI&&null===window.onpointerdown?e:aI&&null===window.ontouchstart?XL[e]:aI&&null===window.onmousedown?YL[e]:e}function KL(e,t,n,r){return jL(e,QL(t),qL(n,"pointerdown"===t),r)}function ZL(e,t,n,r){return BL(e,QL(t),n&&qL(n,"pointerdown"===t),r)}function JL(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const $L=JL("dragHorizontal"),eN=JL("dragVertical");function tN(e){let t=!1;if("y"===e)t=eN();else if("x"===e)t=$L();else{const e=$L(),n=eN();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function nN(){const e=tN(!0);return!e||(e(),!1)}function rN(e,t,n){return(r,i)=>{FL(r)&&!nN()&&(e.animationState&&e.animationState.setActive(NL.Hover,t),n&&n(r,i))}}const iN=(e,t)=>!!t&&(e===t||iN(e,t.parentElement));function oN(t){return(0,e.useEffect)((()=>()=>t()),[])}const aN=(e,t)=>n=>t(e(n)),sN=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(aN)};const lN=new Set;function cN(e,t,n){e||lN.has(t)||(console.warn(t),n&&console.warn(n),lN.add(t))}const uN=new WeakMap,dN=new WeakMap,hN=e=>{const t=uN.get(e.target);t&&t(e)},fN=e=>{e.forEach(hN)};function pN(e,t,n){const r=function(e){let{root:t,...n}=e;const r=t||document;dN.has(r)||dN.set(r,{});const i=dN.get(r),o=JSON.stringify(n);return i[o]||(i[o]=new IntersectionObserver(fN,{root:t,...n})),i[o]}(t);return uN.set(e,n),r.observe(e),()=>{uN.delete(e),r.unobserve(e)}}const mN={some:0,all:1};function gN(t,n,r,i){let{root:o,margin:a,amount:s="some",once:l}=i;(0,e.useEffect)((()=>{if(!t)return;const e={root:null===o||void 0===o?void 0:o.current,rootMargin:a,threshold:"number"===typeof s?s:mN[s]};return pN(r.getInstance(),e,(e=>{const{isIntersecting:t}=e;if(n.isInView===t)return;if(n.isInView=t,l&&!t&&n.hasEnteredView)return;t&&(n.hasEnteredView=!0),r.animationState&&r.animationState.setActive(NL.InView,t);const i=r.getProps(),o=t?i.onViewportEnter:i.onViewportLeave;o&&o(e)}))}),[t,o,a,s])}function vN(t,n,r,i){let{fallback:o=!0}=i;(0,e.useEffect)((()=>{t&&o&&requestAnimationFrame((()=>{n.hasEnteredView=!0;const{onViewportEnter:e}=r.getProps();e&&e(null),r.animationState&&r.animationState.setActive(NL.InView,!0)}))}),[t])}const yN=e=>t=>(e(t),null),xN={inView:yN((function(t){let{visualElement:n,whileInView:r,onViewportEnter:i,onViewportLeave:o,viewport:a={}}=t;const s=(0,e.useRef)({hasEnteredView:!1,isInView:!1});let l=Boolean(r||i||o);a.once&&s.current.hasEnteredView&&(l=!1),("undefined"===typeof IntersectionObserver?vN:gN)(l,s.current,n,a)})),tap:yN((function(t){let{onTap:n,onTapStart:r,onTapCancel:i,whileTap:o,visualElement:a}=t;const s=n||r||i||o,l=(0,e.useRef)(!1),c=(0,e.useRef)(null),u={passive:!(r||n||i||m)};function d(){c.current&&c.current(),c.current=null}function h(){return d(),l.current=!1,a.animationState&&a.animationState.setActive(NL.Tap,!1),!nN()}function f(e,t){h()&&(iN(a.getInstance(),e.target)?n&&n(e,t):i&&i(e,t))}function p(e,t){h()&&i&&i(e,t)}function m(e,t){d(),l.current||(l.current=!0,c.current=sN(KL(window,"pointerup",f,u),KL(window,"pointercancel",p,u)),a.animationState&&a.animationState.setActive(NL.Tap,!0),r&&r(e,t))}ZL(a,"pointerdown",s?m:void 0,u),oN(d)})),focus:yN((function(e){let{whileFocus:t,visualElement:n}=e;const{animationState:r}=n;BL(n,"focus",t?()=>{r&&r.setActive(NL.Focus,!0)}:void 0),BL(n,"blur",t?()=>{r&&r.setActive(NL.Focus,!1)}:void 0)})),hover:yN((function(e){let{onHoverStart:t,onHoverEnd:n,whileHover:r,visualElement:i}=e;ZL(i,"pointerenter",t||r?rN(i,!0,t):void 0,{passive:!t}),ZL(i,"pointerleave",n||r?rN(i,!1,n):void 0,{passive:!n})}))};function bN(){const t=(0,e.useContext)(oI);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,o=(0,e.useId)();(0,e.useEffect)((()=>i(o)),[]);return!n&&r?[!1,()=>r&&r(o)]:[!0]}function wN(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function SN(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;const _N=(e,t,n)=>Math.min(Math.max(n,e),t),AN=.001;function EN(e){let t,n,{duration:r=800,bounce:i=.25,velocity:o=0,mass:a=1}=e,s=1-i;s=_N(.05,1,s),r=_N(.01,10,r/1e3),s<1?(t=e=>{const t=e*s,n=t*r,i=t-o,a=CN(e,s),l=Math.exp(-n);return AN-i/a*l},n=e=>{const n=e*s*r,i=n*o+o,a=Math.pow(s,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=CN(Math.pow(e,2),s);return(-t(e)+AN>0?-1:1)*((i-a)*l)/c}):(t=e=>Math.exp(-e*r)*((e-o)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(o-e)));const l=function(e,t,n){let r=n;for(let i=1;i<12;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r*=1e3,isNaN(l))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(l,2)*a;return{stiffness:e,damping:2*s*Math.sqrt(a*e),duration:r}}}function CN(e,t){return e*Math.sqrt(1-t*t)}const MN=["duration","bounce"],TN=["stiffness","damping","mass"];function PN(e,t){return t.some((t=>void 0!==e[t]))}function DN(e){var{from:t=0,to:n=1,restSpeed:r=2,restDelta:i}=e,o=SN(e,["from","to","restSpeed","restDelta"]);const a={done:!1,value:t};let{stiffness:s,damping:l,mass:c,velocity:u,duration:d,isResolvedFromDuration:h}=function(e){let t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!PN(e,TN)&&PN(e,MN)){const n=EN(e);t=Object.assign(Object.assign(Object.assign({},t),n),{velocity:0,mass:1}),t.isResolvedFromDuration=!0}return t}(o),f=kN,p=kN;function m(){const e=u?-u/1e3:0,r=n-t,o=l/(2*Math.sqrt(s*c)),a=Math.sqrt(s/c)/1e3;if(void 0===i&&(i=Math.min(Math.abs(n-t)/100,.4)),o<1){const t=CN(a,o);f=i=>{const s=Math.exp(-o*a*i);return n-s*((e+o*a*r)/t*Math.sin(t*i)+r*Math.cos(t*i))},p=n=>{const i=Math.exp(-o*a*n);return o*a*i*(Math.sin(t*n)*(e+o*a*r)/t+r*Math.cos(t*n))-i*(Math.cos(t*n)*(e+o*a*r)-t*r*Math.sin(t*n))}}else if(1===o)f=t=>n-Math.exp(-a*t)*(r+(e+a*r)*t);else{const t=a*Math.sqrt(o*o-1);f=i=>{const s=Math.exp(-o*a*i),l=Math.min(t*i,300);return n-s*((e+o*a*r)*Math.sinh(l)+t*r*Math.cosh(l))/t}}}return m(),{next:e=>{const t=f(e);if(h)a.done=e>=d;else{const o=1e3*p(e),s=Math.abs(o)<=r,l=Math.abs(n-t)<=i;a.done=s&&l}return a.value=a.done?n:t,a},flipTarget:()=>{u=-u,[t,n]=[n,t],m()}}}DN.needsInterpolation=(e,t)=>"string"===typeof e||"string"===typeof t;const kN=e=>0,ON=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},RN=(e,t,n)=>-n*e+n*t+e,IN=(e,t)=>n=>Boolean(qI(n)&&WI.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),LN=(e,t,n)=>r=>{if(!qI(r))return r;const[i,o,a,s]=r.match(VI);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},NN=UI(0,255),jN=Object.assign(Object.assign({},eL),{transform:e=>Math.round(NN(e))}),BN={test:IN("rgb","red"),parse:LN("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+jN.transform(t)+", "+jN.transform(n)+", "+jN.transform(r)+", "+GI(tL.transform(i))+")"}};const FN={test:IN("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2),i=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),i=e.substr(4,1),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:BN.transform},zN={test:IN("hsl","hue"),parse:LN("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+QI.transform(GI(n))+", "+QI.transform(GI(r))+", "+GI(tL.transform(i))+")"}};function UN(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function GN(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let o=0,a=0,s=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;o=UN(i,e,t+1/3),a=UN(i,e,t),s=UN(i,e,t-1/3)}else o=a=s=r;return{red:Math.round(255*o),green:Math.round(255*a),blue:Math.round(255*s),alpha:i}}const VN=(e,t,n)=>{const r=e*e,i=t*t;return Math.sqrt(Math.max(0,n*(i-r)+r))},HN=[FN,BN,zN],WN=e=>HN.find((t=>t.test(e))),qN=e=>"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),YN=(e,t)=>{let n=WN(e),r=WN(t);qN(e),qN(t);let i=n.parse(e),o=r.parse(t);n===zN&&(i=GN(i),n=BN),r===zN&&(o=GN(o),r=BN);const a=Object.assign({},i);return e=>{for(const t in a)"alpha"!==t&&(a[t]=VN(i[t],o[t],e));return a.alpha=RN(i.alpha,o.alpha,e),n.transform(a)}},XN={test:e=>BN.test(e)||FN.test(e)||zN.test(e),parse:e=>BN.test(e)?BN.parse(e):zN.test(e)?zN.parse(e):FN.parse(e),transform:e=>qI(e)?e:e.hasOwnProperty("red")?BN.transform(e):zN.transform(e)},QN="${c}",KN="${n}";function ZN(e){"number"===typeof e&&(e="".concat(e));const t=[];let n=0;const r=e.match(HI);r&&(n=r.length,e=e.replace(HI,QN),t.push(...r.map(XN.parse)));const i=e.match(VI);return i&&(e=e.replace(VI,KN),t.push(...i.map(eL.parse))),{values:t,numColors:n,tokenised:e}}function JN(e){return ZN(e).values}function $N(e){const{values:t,numColors:n,tokenised:r}=ZN(e),i=t.length;return e=>{let t=r;for(let r=0;r<i;r++)t=t.replace(r<n?QN:KN,r<n?XN.transform(e[r]):GI(e[r]));return t}}const ej=e=>"number"===typeof e?0:e;const tj={test:function(e){var t,n,r,i;return isNaN(e)&&qI(e)&&(null!==(n=null===(t=e.match(VI))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(i=null===(r=e.match(HI))||void 0===r?void 0:r.length)&&void 0!==i?i:0)>0},parse:JN,createTransformer:$N,getAnimatableNone:function(e){const t=JN(e);return $N(e)(t.map(ej))}},nj=e=>"number"===typeof e;function rj(e,t){return nj(e)?n=>RN(e,t,n):XN.test(e)?YN(e,t):sj(e,t)}const ij=(e,t)=>{const n=[...e],r=n.length,i=e.map(((e,n)=>rj(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}},oj=(e,t)=>{const n=Object.assign(Object.assign({},e),t),r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=rj(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}};function aj(e){const t=tj.parse(e),n=t.length;let r=0,i=0,o=0;for(let a=0;a<n;a++)r||"number"===typeof t[a]?r++:void 0!==t[a].hue?o++:i++;return{parsed:t,numNumbers:r,numRGB:i,numHSL:o}}const sj=(e,t)=>{const n=tj.createTransformer(t),r=aj(e),i=aj(t);return r.numHSL===i.numHSL&&r.numRGB===i.numRGB&&r.numNumbers>=i.numNumbers?sN(ij(r.parsed,i.parsed),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),n=>"".concat(n>0?t:e))},lj=(e,t)=>n=>RN(e,t,n);function cj(e,t,n){const r=[],i=n||function(e){return"number"===typeof e?lj:"string"===typeof e?XN.test(e)?YN:sj:Array.isArray(e)?ij:"object"===typeof e?oj:void 0}(e[0]),o=e.length-1;for(let a=0;a<o;a++){let n=i(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]:t;n=sN(e,n)}r.push(n)}return r}function uj(e,t){let[n,r]=e,[i]=t;return e=>i(ON(n,r,e))}function dj(e,t){const n=e.length,r=n-1;return i=>{let o=0,a=!1;if(i<=e[0]?a=!0:i>=e[r]&&(o=r-1,a=!0),!a){let t=1;for(;t<n&&!(e[t]>i||t===r);t++);o=t-1}const s=ON(e[o],e[o+1],i);return t[o](s)}}function hj(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e.length;t.length,!r||!Array.isArray(r)||r.length,e[0]>e[o-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());const a=cj(t,r,i),s=2===o?uj(e,a):dj(e,a);return n?t=>s(_N(e[0],e[o-1],t)):s}const fj=e=>t=>1-e(1-t),pj=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,mj=e=>t=>t*t*((e+1)*t-e),gj=e=>e,vj=(yj=2,e=>Math.pow(e,yj));var yj;const xj=fj(vj),bj=pj(vj),wj=e=>1-Math.sin(Math.acos(e)),Sj=fj(wj),_j=pj(Sj),Aj=mj(1.525),Ej=fj(Aj),Cj=pj(Aj),Mj=(e=>{const t=mj(e);return e=>(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))})(1.525),Tj=e=>{if(1===e||0===e)return e;const t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},Pj=fj(Tj);function Dj(e,t){return e.map((()=>t||bj)).splice(0,e.length-1)}function kj(e){let{from:t=0,to:n=1,ease:r,offset:i,duration:o=300}=e;const a={done:!1,value:t},s=Array.isArray(n)?n:[t,n],l=function(e,t){return e.map((e=>e*t))}(i&&i.length===s.length?i:function(e){const t=e.length;return e.map(((e,n)=>0!==n?n/(t-1):0))}(s),o);function c(){return hj(l,s,{ease:Array.isArray(r)?r:Dj(s,r)})}let u=c();return{next:e=>(a.value=u(e),a.done=e>=o,a),flipTarget:()=>{s.reverse(),u=c()}}}const Oj={keyframes:kj,spring:DN,decay:function(e){let{velocity:t=0,from:n=0,power:r=.8,timeConstant:i=350,restDelta:o=.5,modifyTarget:a}=e;const s={done:!1,value:n};let l=r*t;const c=n+l,u=void 0===a?c:a(c);return u!==c&&(l=u-n),{next:e=>{const t=-l*Math.exp(-e/i);return s.done=!(t>o||t<-o),s.value=s.done?u:u+t,s},flipTarget:()=>{}}}};const Rj=1/60*1e3,Ij="undefined"!==typeof performance?()=>performance.now():()=>Date.now(),Lj="undefined"!==typeof window?e=>window.requestAnimationFrame(e):e=>setTimeout((()=>e(Ij())),Rj);let Nj=!0,jj=!1,Bj=!1;const Fj={delta:0,timestamp:0},zj=["read","update","preRender","render","postRender"],Uj=zj.reduce(((e,t)=>(e[t]=function(e){let t=[],n=[],r=0,i=!1,o=!1;const a=new WeakSet,s={schedule:function(e){const o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,s=o?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(e),-1===s.indexOf(e)&&(s.push(e),o&&i&&(r=t.length)),e},cancel:e=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1),a.delete(e)},process:l=>{if(i)o=!0;else{if(i=!0,[t,n]=[n,t],n.length=0,r=t.length,r)for(let n=0;n<r;n++){const r=t[n];r(l),a.has(r)&&(s.schedule(r),e())}i=!1,o&&(o=!1,s.process(l))}}};return s}((()=>jj=!0)),e)),{}),Gj=zj.reduce(((e,t)=>{const n=Uj[t];return e[t]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return jj||Yj(),n.schedule(e,t,r)},e}),{}),Vj=zj.reduce(((e,t)=>(e[t]=Uj[t].cancel,e)),{}),Hj=zj.reduce(((e,t)=>(e[t]=()=>Uj[t].process(Fj),e)),{}),Wj=e=>Uj[e].process(Fj),qj=e=>{jj=!1,Fj.delta=Nj?Rj:Math.max(Math.min(e-Fj.timestamp,40),1),Fj.timestamp=e,Bj=!0,zj.forEach(Wj),Bj=!1,jj&&(Nj=!1,Lj(qj))},Yj=()=>{jj=!0,Nj=!0,Bj||Lj(qj)},Xj=()=>Fj,Qj=Gj;function Kj(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e-t-n}const Zj=e=>{const t=t=>{let{delta:n}=t;return e(n)};return{start:()=>Qj.update(t,!0),stop:()=>Vj.update(t)}};function Jj(e){var t,n,{from:r,autoplay:i=!0,driver:o=Zj,elapsed:a=0,repeat:s=0,repeatType:l="loop",repeatDelay:c=0,onPlay:u,onStop:d,onComplete:h,onRepeat:f,onUpdate:p}=e,m=SN(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let g,v,y,{to:x}=m,b=0,w=m.duration,S=!1,_=!0;const A=function(e){if(Array.isArray(e.to))return kj;if(Oj[e.type])return Oj[e.type];const t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?kj:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?DN:kj}(m);(null===(n=(t=A).needsInterpolation)||void 0===n?void 0:n.call(t,r,x))&&(y=hj([0,100],[r,x],{clamp:!1}),r=0,x=100);const E=A(Object.assign(Object.assign({},m),{from:r,to:x}));function C(){b++,"reverse"===l?(_=b%2===0,a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?t-(e-t)+n:Kj(t+-e,t,n)}(a,w,c,_)):(a=Kj(a,w,c),"mirror"===l&&E.flipTarget()),S=!1,f&&f()}function M(e){if(_||(e=-e),a+=e,!S){const e=E.next(Math.max(0,a));v=e.value,y&&(v=y(v)),S=_?e.done:a<=0}null===p||void 0===p||p(v),S&&(0===b&&(null!==w&&void 0!==w||(w=a)),b<s?function(e,t,n,r){return r?e>=t+n:e<=-n}(a,w,c,_)&&C():(g.stop(),h&&h()))}return i&&(null===u||void 0===u||u(),g=o(M),g.start()),{stop:()=>{null===d||void 0===d||d(),g.stop()}}}function $j(e,t){return t?e*(1e3/t):0}const eB=e=>1e3*e,tB=(e,t)=>1-3*t+3*e,nB=(e,t)=>3*t-6*e,rB=e=>3*e,iB=(e,t,n)=>((tB(t,n)*e+nB(t,n))*e+rB(t))*e,oB=(e,t,n)=>3*tB(t,n)*e*e+2*nB(t,n)*e+rB(t);const aB=.1;function sB(e,t,n,r){if(e===t&&n===r)return gj;const i=new Float32Array(11);for(let a=0;a<11;++a)i[a]=iB(a*aB,e,n);function o(t){let r=0,o=1;for(;10!==o&&i[o]<=t;++o)r+=aB;--o;const a=r+(t-i[o])/(i[o+1]-i[o])*aB,s=oB(a,e,n);return s>=.001?function(e,t,n,r){for(let i=0;i<8;++i){const i=oB(t,n,r);if(0===i)return t;t-=(iB(t,n,r)-e)/i}return t}(t,a,e,n):0===s?a:function(e,t,n,r,i){let o,a,s=0;do{a=t+(n-t)/2,o=iB(a,r,i)-e,o>0?n=a:t=a}while(Math.abs(o)>1e-7&&++s<10);return a}(t,r,r+aB,e,n)}return e=>0===e||1===e?e:iB(o(e),t,r)}const lB={linear:gj,easeIn:vj,easeInOut:bj,easeOut:xj,circIn:wj,circInOut:_j,circOut:Sj,backIn:Aj,backInOut:Cj,backOut:Ej,anticipate:Mj,bounceIn:Pj,bounceInOut:e=>e<.5?.5*(1-Tj(1-2*e)):.5*Tj(2*e-1)+.5,bounceOut:Tj},cB=e=>{if(Array.isArray(e)){e.length;const[t,n,r,i]=e;return sB(t,n,r,i)}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),lB[e]):e},uB=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!tj.test(t)||t.startsWith("url("))),dB=()=>({type:"spring",stiffness:500,damping:25,restSpeed:10}),hB=e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}),fB=()=>({type:"keyframes",ease:"linear",duration:.3}),pB=e=>({type:"keyframes",duration:.8,values:e}),mB={x:dB,y:dB,z:dB,rotate:dB,rotateX:dB,rotateY:dB,rotateZ:dB,scaleX:hB,scaleY:hB,scale:hB,opacity:fB,backgroundColor:fB,color:fB,default:hB},gB=(e,t)=>{let n;return n=PL(t)?pB:mB[e]||mB.default,{to:t,...n(t)}},vB=new Set(["brightness","contrast","saturate","opacity"]);function yB(e){let[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(VI)||[];if(!r)return e;const i=n.replace(r,"");let o=vB.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const xB=/([a-z-]*)\(.*?\)/g,bB=Object.assign(Object.assign({},tj),{getAnimatableNone:e=>{const t=e.match(xB);return t?t.map(yB).join(" "):e}}),wB={...iL,color:XN,backgroundColor:XN,outlineColor:XN,fill:XN,stroke:XN,borderColor:XN,borderTopColor:XN,borderRightColor:XN,borderBottomColor:XN,borderLeftColor:XN,filter:bB,WebkitFilter:bB},SB=e=>wB[e];function _B(e,t){var n;let r=SB(e);return r!==bB&&(r=tj),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,t)}const AB=!1;function EB(e,t){const n=performance.now(),r=i=>{let{timestamp:o}=i;const a=o-n;a>=t&&(Vj.read(r),e(a-t))};return Qj.read(r,!0),()=>Vj.read(r)}let CB=!1;function MB(e){let{ease:t,times:n,yoyo:r,flip:i,loop:o,...a}=e;const s={...a};return n&&(s.offset=n),a.duration&&(s.duration=eB(a.duration)),a.repeatDelay&&(s.repeatDelay=eB(a.repeatDelay)),t&&(s.ease=(e=>Array.isArray(e)&&"number"!==typeof e[0])(t)?t.map(cB):cB(t)),"tween"===a.type&&(s.type="keyframes"),(r||o||i)&&(CB=!0,r?s.repeatType="reverse":o?s.repeatType="loop":i&&(s.repeatType="mirror"),s.repeat=o||r||i||a.repeat),"spring"!==a.type&&(s.type="keyframes"),s}function TB(e,t){var n,r;return null!==(r=null!==(n=(RB(e,t)||{}).delay)&&void 0!==n?n:e.delay)&&void 0!==r?r:0}function PB(e,t,n){return Array.isArray(t.to)&&void 0===e.duration&&(e.duration=.8),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=[...e.to],e.to[0]=e.from)}(t),function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:o,repeat:a,repeatType:s,repeatDelay:l,from:c,...u}=e;return!!Object.keys(u).length}(e)||(e={...e,...gB(n,t.to)}),{...t,...MB(e)}}function DB(e,t,n,r,i){const o=RB(r,e)||{};let a=void 0!==o.from?o.from:t.get();const s=uB(e,n);"none"===a&&s&&"string"===typeof n?a=_B(e,n):kB(a)&&"string"===typeof n?a=OB(n):!Array.isArray(n)&&kB(n)&&"string"===typeof a&&(n=OB(a));const l=uB(e,a);return"You are trying to animate ".concat(e,' from "').concat(a,'" to "').concat(n,'". ').concat(a," is not an animatable value - to enable this animation set ").concat(a," to a value animatable to ").concat(n," via the `style` property."),l&&s&&!1!==o.type?function(){const r={from:a,to:n,velocity:t.getVelocity(),onComplete:i,onUpdate:e=>t.set(e)};return"inertia"===o.type||"decay"===o.type?function(e){let t,{from:n=0,velocity:r=0,min:i,max:o,power:a=.8,timeConstant:s=750,bounceStiffness:l=500,bounceDamping:c=10,restDelta:u=1,modifyTarget:d,driver:h,onUpdate:f,onComplete:p,onStop:m}=e;function g(e){return void 0!==i&&e<i||void 0!==o&&e>o}function v(e){return void 0===i?o:void 0===o||Math.abs(i-e)<Math.abs(o-e)?i:o}function y(e){null===t||void 0===t||t.stop(),t=Jj(Object.assign(Object.assign({},e),{driver:h,onUpdate:t=>{var n;null===f||void 0===f||f(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:p,onStop:m}))}function x(e){y(Object.assign({type:"spring",stiffness:l,damping:c,restDelta:u},e))}if(g(n))x({from:n,velocity:r,to:v(n)});else{let e=a*r+n;"undefined"!==typeof d&&(e=d(e));const t=v(e),o=t===i?-1:1;let l,c;const h=e=>{l=c,c=e,r=$j(e-l,Xj().delta),(1===o&&e>t||-1===o&&e<t)&&x({from:e,to:t,velocity:r})};y({type:"decay",from:n,velocity:r,timeConstant:s,power:a,restDelta:u,modifyTarget:d,onUpdate:g(e)?h:void 0})}return{stop:()=>null===t||void 0===t?void 0:t.stop()}}({...r,...o}):Jj({...PB(o,r,e),onUpdate:e=>{r.onUpdate(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{r.onComplete(),o.onComplete&&o.onComplete()}})}:function(){const e=DL(n);return t.set(e),i(),o.onUpdate&&o.onUpdate(e),o.onComplete&&o.onComplete(),{stop:()=>{}}}}function kB(e){return 0===e||"string"===typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function OB(e){return"number"===typeof e?0:_B("",e)}function RB(e,t){return e[t]||e.default||e}function IB(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return AB&&(r={type:!1}),t.start((i=>{let o;const a=DB(e,t,n,r,i),s=TB(r,e),l=()=>o=a();let c;return s?c=EB(l,eB(s)):l(),()=>{c&&c(),o&&o.stop()}}))}const LB=e=>/^\-?\d*\.?\d+$/.test(e),NB=e=>/^0[^.\s]+$/.test(e);function jB(e,t){-1===e.indexOf(t)&&e.push(t)}function BB(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class FB{constructor(){this.subscriptions=[]}add(e){return jB(this.subscriptions,e),()=>BB(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}class zB{constructor(e){var t,n=this;this.version="7.6.1",this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new FB,this.velocityUpdateSubscribers=new FB,this.renderSubscribers=new FB,this.canTrackVelocity=!1,this.updateAndNotify=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.prev=n.current,n.current=e;const{delta:r,timestamp:i}=Xj();n.lastUpdated!==i&&(n.timeDelta=r,n.lastUpdated=i,Qj.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.updateSubscribers.notify(n.current),n.velocityUpdateSubscribers.getSize()&&n.velocityUpdateSubscribers.notify(n.getVelocity()),t&&n.renderSubscribers.notify(n.current)},this.scheduleVelocityCheck=()=>Qj.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.velocityUpdateSubscribers.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t)))}onChange(e){return this.updateSubscribers.add(e)}clearListeners(){this.updateSubscribers.clear()}onRenderRequest(e){return e(this.get()),this.renderSubscribers.add(e)}attach(e){this.passiveEffect=e}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?$j(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.stopAnimation=e(t)})).then((()=>this.clearAnimation()))}stop(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()}isAnimating(){return!!this.stopAnimation}clearAnimation(){this.stopAnimation=null}destroy(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()}}function UB(e){return new zB(e)}const GB=e=>t=>t.test(e),VB=[eL,KI,QI,XI,JI,ZI,{test:e=>"auto"===e,parse:e=>e}],HB=e=>VB.find(GB(e)),WB=[...VB,XN,tj],qB=e=>WB.find(GB(e));function YB(e,t,n){const r=e.getProps();return TL(r,t,void 0!==n?n:r.custom,function(e){const t={};return e.forEachValue(((e,n)=>t[n]=e.get())),t}(e),function(e){const t={};return e.forEachValue(((e,n)=>t[n]=e.getVelocity())),t}(e))}function XB(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,UB(n))}function QB(e,t){const n=YB(e,t);let{transitionEnd:r={},transition:i={},...o}=n?e.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const a in o){XB(e,a,DL(o[a]))}}function KB(e,t){[...t].reverse().forEach((n=>{var r;const i=e.getVariant(n);i&&QB(e,i),null===(r=e.variantChildren)||void 0===r||r.forEach((e=>{KB(e,t)}))}))}function ZB(e,t){if(!t)return;return(t[e]||t.default||t).from}function JB(e){return Boolean(NI(e)&&e.add)}function $B(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notifyAnimationStart(t),Array.isArray(t)){const i=t.map((t=>eF(e,t,r)));n=Promise.all(i)}else if("string"===typeof t)n=eF(e,t,r);else{const i="function"===typeof t?YB(e,t,r.custom):t;n=tF(e,i,r)}return n.then((()=>e.notifyAnimationComplete(t)))}function eF(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;const i=YB(e,t,n.custom);let{transition:o=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const a=i?()=>tF(e,i,n):()=>Promise.resolve(),s=(null===(r=e.variantChildren)||void 0===r?void 0:r.size)?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:i=0,staggerChildren:a,staggerDirection:s}=o;return nF(e,t,i+r,a,s,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[e,t]="beforeChildren"===l?[a,s]:[s,a];return e().then(t)}return Promise.all([a(),s(n.delay)])}function tF(e,t){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o;let{transition:a=e.getDefaultTransition(),transitionEnd:s,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(a=r);const u=[],d=i&&(null===(o=e.animationState)||void 0===o?void 0:o.getState()[i]);for(const h in l){const t=e.getValue(h),r=l[h];if(!t||void 0===r||d&&iF(d,h))continue;let i={delay:n,...a};e.shouldReduceMotion&&II.has(h)&&(i={...i,type:!1,delay:0});let o=IB(h,t,r,i);JB(c)&&(c.add(h),o=o.then((()=>c.remove(h)))),u.push(o)}return Promise.all(u).then((()=>{s&&QB(e,s)}))}function nF(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0;const a=[],s=(e.variantChildren.size-1)*r,l=1===i?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e*r}:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return s-e*r};return Array.from(e.variantChildren).sort(rF).forEach(((e,r)=>{a.push(eF(e,t,{...o,delay:n+l(r)}).then((()=>e.notifyAnimationComplete(t))))})),Promise.all(a)}function rF(e,t){return e.sortNodePosition(t)}function iF(e,t){let{protectedKeys:n,needsAnimating:r}=e;const i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}const oF=[NL.Animate,NL.InView,NL.Focus,NL.Hover,NL.Tap,NL.Drag,NL.Exit],aF=[...oF].reverse(),sF=oF.length;function lF(e){let t=function(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:r}=t;return $B(e,n,r)})))}(e);const n={[NL.Animate]:uF(!0),[NL.InView]:uF(),[NL.Hover]:uF(),[NL.Tap]:uF(),[NL.Drag]:uF(),[NL.Focus]:uF(),[NL.Exit]:uF()};let r=!0;const i=(t,n)=>{const r=YB(e,n);if(r){const{transition:e,transitionEnd:n,...i}=r;t={...t,...i,...n}}return t};function o(o,a){var s;const l=e.getProps(),c=e.getVariantContext(!0)||{},u=[],d=new Set;let h={},f=1/0;for(let t=0;t<sF;t++){const p=aF[t],m=n[p],g=null!==(s=l[p])&&void 0!==s?s:c[p],v=dI(g),y=p===a?m.isActive:null;!1===y&&(f=t);let x=g===c[p]&&g!==l[p]&&v;if(x&&r&&e.manuallyAnimateOnMount&&(x=!1),m.protectedKeys={...h},!m.isActive&&null===y||!g&&!m.prevProp||hI(g)||"boolean"===typeof g)continue;const b=cF(m.prevProp,g);let w=b||p===a&&m.isActive&&!x&&v||t>f&&v;const S=Array.isArray(g)?g:[g];let _=S.reduce(i,{});!1===y&&(_={});const{prevResolvedValues:A={}}=m,E={...A,..._},C=e=>{w=!0,d.delete(e),m.needsAnimating[e]=!0};for(const e in E){const t=_[e],n=A[e];h.hasOwnProperty(e)||(t!==n?PL(t)&&PL(n)?!wN(t,n)||b?C(e):m.protectedKeys[e]=!0:void 0!==t?C(e):d.add(e):void 0!==t&&d.has(e)?C(e):m.protectedKeys[e]=!0)}m.prevProp=g,m.prevResolvedValues=_,m.isActive&&(h={...h,..._}),r&&e.blockInitialAnimation&&(w=!1),w&&!x&&u.push(...S.map((e=>({animation:e,options:{type:p,...o}}))))}if(d.size){const t={};d.forEach((n=>{const r=e.getBaseTarget(n);void 0!==r&&(t[n]=r)})),u.push({animation:t})}let p=Boolean(u.length);return r&&!1===l.initial&&!e.manuallyAnimateOnMount&&(p=!1),r=!1,p?t(u):Promise.resolve()}return{animateChanges:o,setActive:function(t,r,i){var a;if(n[t].isActive===r)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;const s=o(i,t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function cF(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!wN(t,e)}function uF(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}const dF={animation:yN((t=>{let{visualElement:n,animate:r}=t;n.animationState||(n.animationState=lF(n)),hI(r)&&(0,e.useEffect)((()=>r.subscribe(n)),[r])})),exit:yN((t=>{const{custom:n,visualElement:r}=t,[i,o]=bN(),a=(0,e.useContext)(oI);(0,e.useEffect)((()=>{r.isPresent=i;const e=r.animationState&&r.animationState.setActive(NL.Exit,!i,{custom:a&&a.custom||n});e&&!i&&e.then(o)}),[i])}))},hF=e=>e.hasOwnProperty("x")&&e.hasOwnProperty("y"),fF=e=>hF(e)&&e.hasOwnProperty("z"),pF=(e,t)=>Math.abs(e-t);function mF(e,t){if(nj(e)&&nj(t))return pF(e,t);if(hF(e)&&hF(t)){const n=pF(e.x,t.x),r=pF(e.y,t.y),i=fF(e)&&fF(t)?pF(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}}class gF{constructor(e,t){let{transformPagePoint:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=xF(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=mF(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=Xj();this.history.push({...r,timestamp:i});const{onStart:o,onMove:a}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=vF(t,this.transformPagePoint),FL(e)&&0===e.buttons?this.handlePointerUp(e,t):Qj.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r}=this.handlers,i=xF(vF(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),r&&r(e,i)},zL(e)&&e.touches.length>1)return;this.handlers=t,this.transformPagePoint=n;const r=vF(WL(e),this.transformPagePoint),{point:i}=r,{timestamp:o}=Xj();this.history=[{...i,timestamp:o}];const{onSessionStart:a}=t;a&&a(e,xF(r,this.history)),this.removeListeners=sN(KL(window,"pointermove",this.handlePointerMove),KL(window,"pointerup",this.handlePointerUp),KL(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Vj.update(this.updatePoint)}}function vF(e,t){return t?{point:t(e.point)}:e}function yF(e,t){return{x:e.x-t.x,y:e.y-t.y}}function xF(e,t){let{point:n}=e;return{point:n,delta:yF(n,wF(t)),offset:yF(n,bF(t)),velocity:SF(t,.1)}}function bF(e){return e[0]}function wF(e){return e[e.length-1]}function SF(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=wF(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>eB(t)));)n--;if(!r)return{x:0,y:0};const o=(i.timestamp-r.timestamp)/1e3;if(0===o)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function _F(e){return e.max-e.min}function AF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return mF(e,t)<n}function EF(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=RN(t.min,t.max,e.origin),e.scale=_F(n)/_F(t),(AF(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=RN(n.min,n.max,e.origin)-e.originPoint,(AF(e.translate)||isNaN(e.translate))&&(e.translate=0)}function CF(e,t,n,r){EF(e.x,t.x,n.x,null===r||void 0===r?void 0:r.originX),EF(e.y,t.y,n.y,null===r||void 0===r?void 0:r.originY)}function MF(e,t,n){e.min=n.min+t.min,e.max=e.min+_F(t)}function TF(e,t,n){e.min=t.min-n.min,e.max=e.min+_F(t)}function PF(e,t,n){TF(e.x,t.x,n.x),TF(e.y,t.y,n.y)}function DF(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function kF(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const OF=.35;function RF(e,t,n){return{min:IF(e,t),max:IF(e,n)}}function IF(e,t){var n;return"number"===typeof e?e:null!==(n=e[t])&&void 0!==n?n:0}function LF(e){return[e("x"),e("y")]}function NF(e){let{top:t,left:n,right:r,bottom:i}=e;return{x:{min:n,max:r},y:{min:t,max:i}}}function jF(e){return void 0===e||1===e}function BF(e){let{scale:t,scaleX:n,scaleY:r}=e;return!jF(t)||!jF(n)||!jF(r)}function FF(e){return BF(e)||zF(e)||e.z||e.rotate||e.rotateX||e.rotateY}function zF(e){return UF(e.x)||UF(e.y)}function UF(e){return e&&"0%"!==e}function GF(e,t,n){return n+t*(e-n)}function VF(e,t,n,r,i){return void 0!==i&&(e=GF(e,i,r)),GF(e,n,r)+t}function HF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=VF(e.min,t,n,r,i),e.max=VF(e.max,t,n,r,i)}function WF(e,t){let{x:n,y:r}=t;HF(e.x,n.translate,n.scale,n.originPoint),HF(e.y,r.translate,r.scale,r.originPoint)}function qF(e,t){e.min=e.min+t,e.max=e.max+t}function YF(e,t,n){let[r,i,o]=n;const a=void 0!==t[o]?t[o]:.5,s=RN(e.min,e.max,a);HF(e,t[r],t[i],s,t.scale)}const XF=["x","scaleX","originX"],QF=["y","scaleY","originY"];function KF(e,t){YF(e.x,t,XF),YF(e.y,t,QF)}function ZF(e,t){return NF(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const JF=new WeakMap;class $F{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!1===this.visualElement.isPresent)return;this.panSession=new gF(e,{onSessionStart:e=>{this.stopAnimation(),t&&this.snapToCursor(WL(e,"page").point)},onStart:(e,t)=>{var n;const{drag:r,dragPropagation:i,onDragStart:o}=this.getProps();(!r||i||(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=tN(r),this.openGlobalLock))&&(this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),LF((e=>{var t,n;let r=this.getAxisMotionValue(e).get()||0;if(QI.test(r)){const i=null===(n=null===(t=this.visualElement.projection)||void 0===t?void 0:t.layout)||void 0===n?void 0:n.actual[e];if(i){r=_F(i)*(parseFloat(r)/100)}}this.originPoint[e]=r})),null===o||void 0===o||o(e,t),null===(n=this.visualElement.animationState)||void 0===n||n.setActive(NL.Drag,!0))},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:o}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:a}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&(null===i||void 0===i||i(this.currentDirection)));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.syncRender(),null===o||void 0===o||o(e,t)},onSessionEnd:(e,t)=>this.stop(e,t)},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();null===i||void 0===i||i(e,t)}cancel(){var e,t;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(e=this.panSession)||void 0===e||e.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(NL.Drag,!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!ez(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,t,n){let{min:r,max:i}=t;return void 0!==r&&e<r?e=n?RN(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?RN(i,e,n.max):Math.min(e,i)),e}(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),{layout:n}=this.visualElement.projection||{},r=this.constraints;e&&uI(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!n)&&function(e,t){let{top:n,left:r,bottom:i,right:o}=t;return{x:DF(e.x,r,o),y:DF(e.y,n,i)}}(n.actual,e),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:OF;return!1===e?e=0:!0===e&&(e=OF),{x:RF(e,"left","right"),y:RF(e,"top","bottom")}}(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&LF((e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(n.actual[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!uI(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=ZF(e,n),{scroll:i}=t;return i&&(qF(r.x,i.x),qF(r.y,i.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let o=function(e,t){return{x:kF(e.x,t.x),y:kF(e.y,t.y)}}(r.layout.actual,i);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=NF(e))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),s=this.constraints||{},l=LF((a=>{var l;if(!ez(a,t,this.currentDirection))return;let c=null!==(l=null===s||void 0===s?void 0:s[a])&&void 0!==l?l:{};o&&(c={min:0,max:0});const u=r?200:1e6,d=r?40:1e7,h={type:"inertia",velocity:n?e[a]:0,bounceStiffness:u,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...i,...c};return this.startAxisValueAnimation(a,h)}));return Promise.all(l).then(a)}startAxisValueAnimation(e,t){return IB(e,this.getAxisMotionValue(e),0,t)}stopAnimation(){LF((e=>this.getAxisMotionValue(e).stop()))}getAxisMotionValue(e){var t,n;const r="_drag"+e.toUpperCase(),i=this.visualElement.getProps()[r];return i||this.visualElement.getValue(e,null!==(n=null===(t=this.visualElement.getProps().initial)||void 0===t?void 0:t[e])&&void 0!==n?n:0)}snapToCursor(e){LF((t=>{const{drag:n}=this.getProps();if(!ez(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:o}=r.layout.actual[t];i.set(e[t]-RN(n,o,.5))}}))}scalePositionWithinConstraints(){var e;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!uI(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};LF((e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();i[e]=function(e,t){let n=.5;const r=_F(e),i=_F(t);return i>r?n=ON(t.min,t.max-r,e.min):r>i&&(n=ON(e.min,e.max-i,t.min)),_N(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.getInstance().style.transform=o?o({},""):"none",null===(e=r.root)||void 0===e||e.updateScroll(),r.updateLayout(),this.resolveConstraints(),LF((e=>{if(!ez(e,t,null))return;const n=this.getAxisMotionValue(e),{min:r,max:o}=this.constraints[e];n.set(RN(r,o,i[e]))}))}addListeners(){var e;JF.set(this.visualElement,this);const t=KL(this.visualElement.getInstance(),"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),n=()=>{const{dragConstraints:e}=this.getProps();uI(e)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",n);r&&!r.layout&&(null===(e=r.root)||void 0===e||e.updateScroll(),r.updateLayout()),n();const o=jL(window,"resize",(()=>this.scalePositionWithinConstraints())),a=r.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(LF((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.syncRender())}));return()=>{o(),t(),i(),null===a||void 0===a||a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=OF,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function ez(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const tz={pan:yN((function(t){let{onPan:n,onPanStart:r,onPanEnd:i,onPanSessionStart:o,visualElement:a}=t;const s=n||r||i||o,l=(0,e.useRef)(null),{transformPagePoint:c}=(0,e.useContext)(rI),u={onSessionStart:o,onStart:r,onMove:n,onEnd:(e,t)=>{l.current=null,i&&i(e,t)}};(0,e.useEffect)((()=>{null!==l.current&&l.current.updateHandlers(u)})),ZL(a,"pointerdown",s&&function(e){l.current=new gF(e,u,{transformPagePoint:c})}),oN((()=>l.current&&l.current.end()))})),drag:yN((function(t){const{dragControls:n,visualElement:r}=t,i=bI((()=>new $F(r)));(0,e.useEffect)((()=>n&&n.subscribe(i)),[i,n]),(0,e.useEffect)((()=>i.addListeners()),[i])}))},nz={current:null},rz={current:!1};function iz(){if(rz.current=!0,aI)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>nz.current=e.matches;e.addListener(t),t()}else nz.current=!1}const oz=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","LayoutAnimationStart","SetAxisTarget","Unmount"];function az(){const e=oz.map((()=>new FB)),t={},n={clearAllListeners:()=>e.forEach((e=>e.clear())),updatePropListeners:e=>{oz.forEach((r=>{var i;const o="on"+r,a=e[o];null===(i=t[r])||void 0===i||i.call(t),a&&(t[r]=n[o](a))}))}};return e.forEach(((e,t)=>{n["on"+oz[t]]=t=>e.add(t),n["notify"+oz[t]]=function(){return e.notify(...arguments)}})),n}function sz(e,t,n){const{willChange:r}=t;for(const i in t){const o=t[i],a=n[i];if(NI(o))e.addValue(i,o),JB(r)&&r.add(i);else if(NI(a))e.addValue(i,UB(o)),JB(r)&&r.remove(i);else if(a!==o)if(e.hasValue(i)){const t=e.getValue(i);!t.hasAnimated&&t.set(o)}else{const t=e.getStaticValue(i);e.addValue(i,UB(void 0!==t?t:o))}}for(const i in n)void 0===t[i]&&e.removeValue(i);return t}const lz=Object.keys(xI),cz=lz.length,uz=t=>{let{treeType:n="",build:r,getBaseTarget:i,makeTargetAnimatable:o,measureViewportBox:a,render:s,readValueFromInstance:l,removeValueFromRenderState:c,sortNodePosition:u,scrapeMotionValuesFromProps:d}=t;return function(t){let{parent:h,props:f,presenceId:p,blockInitialAnimation:m,visualState:g,reducedMotionConfig:v}=t,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},x=!1;const{latestValues:b,renderState:w}=g;let S;const _=az(),A=new Map,E=new Map;let C={};const M={...b},T=f.initial?{...b}:{};let P;function D(){S&&x&&(k(),s(S,w,f.style,B.projection))}function k(){r(B,w,b,y,f)}function O(){_.notifyUpdate(b)}function R(e,t){const n=t.onChange((t=>{b[e]=t,f.onUpdate&&Qj.update(O,!1,!0)})),r=t.onRenderRequest(B.scheduleRender);E.set(e,(()=>{n(),r()}))}const{willChange:I,...L}=d(f);for(const e in L){const t=L[e];void 0!==b[e]&&NI(t)&&(t.set(b[e],!1),JB(I)&&I.add(e))}if(f.values)for(const e in f.values){const t=f.values[e];void 0!==b[e]&&NI(t)&&t.set(b[e])}const N=pI(f),j=mI(f),B={treeType:n,current:null,depth:h?h.depth+1:0,parent:h,children:new Set,presenceId:p,shouldReduceMotion:null,variantChildren:j?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null===h||void 0===h?void 0:h.isMounted()),blockInitialAnimation:m,isMounted:()=>Boolean(S),mount(e){x=!0,S=B.current=e,B.projection&&B.projection.mount(e),j&&h&&!N&&(P=null===h||void 0===h?void 0:h.addVariantChild(B)),A.forEach(((e,t)=>R(t,e))),rz.current||iz(),B.shouldReduceMotion="never"!==v&&("always"===v||nz.current),null===h||void 0===h||h.children.add(B),B.setProps(f)},unmount(){var e;null===(e=B.projection)||void 0===e||e.unmount(),Vj.update(O),Vj.render(D),E.forEach((e=>e())),null===P||void 0===P||P(),null===h||void 0===h||h.children.delete(B),_.clearAllListeners(),S=void 0,x=!1},loadFeatures(t,n,r,i,o,a){const s=[];for(let l=0;l<cz;l++){const n=lz[l],{isEnabled:r,Component:i}=xI[n];r(t)&&i&&s.push((0,e.createElement)(i,{key:n,...t,visualElement:B}))}if(!B.projection&&o){B.projection=new o(i,B.getLatestValues(),h&&h.projection);const{layoutId:e,layout:n,drag:r,dragConstraints:s,layoutScroll:l}=t;B.projection.setOptions({layoutId:e,layout:n,alwaysMeasureLayout:Boolean(r)||s&&uI(s),visualElement:B,scheduleRender:()=>B.scheduleRender(),animationType:"string"===typeof n?n:"both",initialPromotionConfig:a,layoutScroll:l})}return s},addVariantChild(e){var t;const n=B.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),()=>n.variantChildren.delete(e)},sortNodePosition:e=>u&&n===e.treeType?u(B.getInstance(),e.getInstance()):0,getClosestVariantNode:()=>j?B:null===h||void 0===h?void 0:h.getClosestVariantNode(),getLayoutId:()=>f.layoutId,getInstance:()=>S,getStaticValue:e=>b[e],setStaticValue:(e,t)=>b[e]=t,getLatestValues:()=>b,setVisibility(e){B.isVisible!==e&&(B.isVisible=e,B.scheduleRender())},makeTargetAnimatable(e){return o(B,e,f,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])},measureViewportBox:()=>a(S,f),addValue(e,t){B.hasValue(e)&&B.removeValue(e),A.set(e,t),b[e]=t.get(),R(e,t)},removeValue(e){var t;A.delete(e),null===(t=E.get(e))||void 0===t||t(),E.delete(e),delete b[e],c(e,w)},hasValue:e=>A.has(e),getValue(e,t){if(f.values&&f.values[e])return f.values[e];let n=A.get(e);return void 0===n&&void 0!==t&&(n=UB(t),B.addValue(e,n)),n},forEachValue:e=>A.forEach(e),readValue:e=>void 0!==b[e]?b[e]:l(S,e,y),setBaseTarget(e,t){M[e]=t},getBaseTarget(e){var t;const{initial:n}=f,r="string"===typeof n||"object"===typeof n?null===(t=TL(f,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;if(i){const t=i(f,e);if(void 0!==t&&!NI(t))return t}return void 0!==T[e]&&void 0===r?void 0:M[e]},..._,build:()=>(k(),w),scheduleRender(){Qj.render(D,!1,!0)},syncRender:D,setProps(e){(e.transformTemplate||f.transformTemplate)&&B.scheduleRender(),f=e,_.updatePropListeners(e),C=sz(B,d(f),C)},getProps:()=>f,getVariant:e=>{var t;return null===(t=f.variants)||void 0===t?void 0:t[e]},getDefaultTransition:()=>f.transition,getTransformPagePoint:()=>f.transformPagePoint,getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return null===h||void 0===h?void 0:h.getVariantContext();if(!N){const e=(null===h||void 0===h?void 0:h.getVariantContext())||{};return void 0!==f.initial&&(e.initial=f.initial),e}const e={};for(let t=0;t<hz;t++){const n=dz[t],r=f[n];(dI(r)||!1===r)&&(e[n]=r)}return e}};return B}},dz=["initial",...oF],hz=dz.length;function fz(e){return"string"===typeof e&&e.startsWith("var(--")}const pz=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function mz(e){const t=pz.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function gz(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');const[r,i]=mz(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);return o?o.trim():fz(i)?gz(i,t,n+1):i}const vz=new Set(["width","height","top","left","right","bottom","x","y"]),yz=e=>vz.has(e),xz=(e,t)=>{e.set(t,!1),e.set(t)},bz=e=>e===eL||e===KI;var wz;!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(wz||(wz={}));const Sz=(e,t)=>parseFloat(e.split(", ")[t]),_z=(e,t)=>(n,r)=>{let{transform:i}=r;if("none"===i||!i)return 0;const o=i.match(/^matrix3d\((.+)\)$/);if(o)return Sz(o[1],t);{const t=i.match(/^matrix\((.+)\)$/);return t?Sz(t[1],e):0}},Az=new Set(["x","y","z"]),Ez=RI.filter((e=>!Az.has(e)));function Cz(e){const t=[];return Ez.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.syncRender(),t}const Mz={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:_z(4,13),y:_z(5,14)},Tz=(e,t,n)=>{const r=t.measureViewportBox(),i=t.getInstance(),o=getComputedStyle(i),{display:a}=o,s={};"none"===a&&t.setStaticValue("display",e.display||"block"),n.forEach((e=>{s[e]=Mz[e](r,o)})),t.syncRender();const l=t.measureViewportBox();return n.forEach((n=>{const r=t.getValue(n);xz(r,s[n]),e[n]=Mz[n](l,o)})),e};function Pz(e,t,n,r){return(e=>Object.keys(e).some(yz))(t)?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t={...t},r={...r};const i=Object.keys(t).filter(yz);let o=[],a=!1;const s=[];if(i.forEach((i=>{const l=e.getValue(i);if(!e.hasValue(i))return;let c=n[i],u=HB(c);const d=t[i];let h;if(PL(d)){const e=d.length,t=null===d[0]?1:0;c=d[t],u=HB(c);for(let n=t;n<e;n++)h?HB(d[n]):(h=HB(d[n]),h===u||bz(u)&&bz(h))}else h=HB(d);if(u!==h)if(bz(u)&&bz(h)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof d?t[i]=parseFloat(d):Array.isArray(d)&&h===KI&&(t[i]=d.map(parseFloat))}else(null===u||void 0===u?void 0:u.transform)&&(null===h||void 0===h?void 0:h.transform)&&(0===c||0===d)?0===c?l.set(h.transform(c)):t[i]=u.transform(d):(a||(o=Cz(e),a=!0),s.push(i),r[i]=void 0!==r[i]?r[i]:t[i],xz(l,d))})),s.length){const n=s.indexOf("height")>=0?window.pageYOffset:null,i=Tz(t,e,s);return o.length&&o.forEach((t=>{let[n,r]=t;e.getValue(n).set(r)})),e.syncRender(),aI&&null!==n&&window.scrollTo({top:n}),{target:i,transitionEnd:r}}return{target:t,transitionEnd:r}}(e,t,n,r):{target:t,transitionEnd:r}}const Dz=(e,t,n,r)=>{const i=function(e,t,n){let{...r}=t;const i=e.getInstance();if(!(i instanceof Element))return{target:r,transitionEnd:n};n&&(n={...n}),e.forEachValue((e=>{const t=e.get();if(!fz(t))return;const n=gz(t,i);n&&e.set(n)}));for(const o in r){const e=r[o];if(!fz(e))continue;const t=gz(e,i);t&&(r[o]=t,n&&void 0===n[o]&&(n[o]=e))}return{target:r,transitionEnd:n}}(e,t,r);return Pz(e,t=i.target,n,r=i.transitionEnd)};const kz={treeType:"dom",readValueFromInstance(e,t){if(II.has(t)){const e=SB(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),i=(FI(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof i?i.trim():i}var n},sortNodePosition:(e,t)=>2&e.compareDocumentPosition(t)?1:-1,getBaseTarget(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]},measureViewportBox(e,t){let{transformPagePoint:n}=t;return ZF(e,n)},resetTransform(e,t,n){const{transformTemplate:r}=n;t.style.transform=r?r({},""):"none",e.scheduleRender()},restoreTransform(e,t){e.style.transform=t.style.transform},removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]},makeTargetAnimatable(e,t,n){let{transition:r,transitionEnd:i,...o}=t,{transformValues:a}=n,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=function(e,t,n){var r;const i={};for(const o in e){const e=ZB(o,t);i[o]=void 0!==e?e:null===(r=n.getValue(o))||void 0===r?void 0:r.get()}return i}(o,r||{},e);if(a&&(i&&(i=a(i)),o&&(o=a(o)),l&&(l=a(l))),s){!function(e,t,n){var r,i;const o=Object.keys(t).filter((t=>!e.hasValue(t))),a=o.length;if(a)for(let s=0;s<a;s++){const a=o[s],l=t[a];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(i=null!==(r=n[a])&&void 0!==r?r:e.readValue(a))&&void 0!==i?i:t[a]),void 0!==c&&null!==c&&("string"===typeof c&&(LB(c)||NB(c))?c=parseFloat(c):!qB(c)&&tj.test(l)&&(c=_B(a,l)),e.addValue(a,UB(c)),void 0===n[a]&&(n[a]=c),e.setBaseTarget(a,c))}}(e,o,l);const t=Dz(e,o,l,i);i=t.transitionEnd,o=t.target}return{transition:r,transitionEnd:i,...o}},scrapeMotionValuesFromProps:CL,build(e,t,n,r,i){void 0!==e.isVisible&&(t.style.visibility=e.isVisible?"visible":"hidden"),oL(t,n,r,i.transformTemplate)},render:_L},Oz=uz(kz),Rz=uz({...kz,getBaseTarget:(e,t)=>e[t],readValueFromInstance(e,t){var n;return II.has(t)?(null===(n=SB(t))||void 0===n?void 0:n.default)||0:(t=AL.has(t)?t:SL(t),e.getAttribute(t))},scrapeMotionValuesFromProps:ML,build(e,t,n,r,i){yL(t,n,r,i.transformTemplate)},render:EL}),Iz=(e,t)=>kI(e)?Rz(t,{enableHardwareAcceleration:!1}):Oz(t,{enableHardwareAcceleration:!0});function Lz(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Nz={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!KI.test(e))return e;e=parseFloat(e)}const n=Lz(e,t.target.x),r=Lz(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},jz="_$css",Bz={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const i=e,o=e.includes("var("),a=[];o&&(e=e.replace(pz,(e=>(a.push(e),jz))));const s=tj.parse(e);if(s.length>5)return i;const l=tj.createTransformer(e),c="number"!==typeof s[0]?1:0,u=r.x.scale*n.x,d=r.y.scale*n.y;s[0+c]/=u,s[1+c]/=d;const h=RN(u,d,.5);"number"===typeof s[2+c]&&(s[2+c]/=h),"number"===typeof s[3+c]&&(s[3+c]/=h);let f=l(s);if(o){let e=0;f=f.replace(jz,(()=>{const t=a[e];return e++,t}))}return f}};class Fz extends e.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;var o;o=zz,Object.assign(OI,o),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),wI.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,o=n.projection;return o?(o.isPresent=i,r||e.layoutDependency!==t||void 0===t?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Qj.postRender((()=>{var e;(null===(e=o.getStack())||void 0===e?void 0:e.members.length)||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),(null===t||void 0===t?void 0:t.group)&&t.group.remove(r),(null===n||void 0===n?void 0:n.deregister)&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;null===e||void 0===e||e()}render(){return null}}const zz={borderRadius:{...Nz,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Nz,borderTopRightRadius:Nz,borderBottomLeftRadius:Nz,borderBottomRightRadius:Nz,boxShadow:Bz},Uz={measureLayout:function(t){const[n,r]=bN(),i=(0,e.useContext)(_I);return e.createElement(Fz,{...t,layoutGroup:i,switchLayoutGroup:(0,e.useContext)(EI),isPresent:n,safeToRemove:r})}};const Gz=["TopLeft","TopRight","BottomLeft","BottomRight"],Vz=Gz.length,Hz=e=>"string"===typeof e?parseFloat(e):e,Wz=e=>"number"===typeof e||KI.test(e);function qz(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e.borderRadius}const Yz=Qz(0,.5,Sj),Xz=Qz(.5,.95,gj);function Qz(e,t,n){return r=>r<e?0:r>t?1:n(ON(e,t,r))}function Kz(e,t){e.min=t.min,e.max=t.max}function Zz(e,t){Kz(e.x,t.x),Kz(e.y,t.y)}function Jz(e,t,n,r,i){return e=GF(e-=t,1/n,r),void 0!==i&&(e=GF(e,1/i,r)),e}function $z(e,t,n,r,i){let[o,a,s]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;QI.test(t)&&(t=parseFloat(t),t=RN(a.min,a.max,t/100)-a.min);if("number"!==typeof t)return;let s=RN(o.min,o.max,r);e===o&&(s-=t),e.min=Jz(e.min,t,n,s,i),e.max=Jz(e.max,t,n,s,i)}(e,t[o],t[a],t[s],t.scale,r,i)}const eU=["x","scaleX","originX"],tU=["y","scaleY","originY"];function nU(e,t,n,r){$z(e.x,t,eU,null===n||void 0===n?void 0:n.x,null===r||void 0===r?void 0:r.x),$z(e.y,t,tU,null===n||void 0===n?void 0:n.y,null===r||void 0===r?void 0:r.y)}function rU(e){return 0===e.translate&&1===e.scale}function iU(e){return rU(e.x)&&rU(e.y)}function oU(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function aU(e){return _F(e.x)/_F(e.y)}class sU{constructor(){this.members=[]}add(e){jB(this.members,e),e.scheduleRender()}remove(e){if(BB(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){var n;const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues,e.snapshot.isShared=!0),(null===(n=e.root)||void 0===n?void 0:n.isUpdating)&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;!1===i&&r.hide()}}exitAnimationComplete(){this.members.forEach((e=>{var t,n,r,i,o;null===(n=(t=e.options).onExitComplete)||void 0===n||n.call(t),null===(o=null===(r=e.resumingFrom)||void 0===r?void 0:(i=r.options).onExitComplete)||void 0===o||o.call(i)}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function lU(e,t,n){const r=e.x.translate/t.x,i=e.y.translate/t.y;let o="translate3d(".concat(r,"px, ").concat(i,"px, 0) ");if(o+="scale(".concat(1/t.x,", ").concat(1/t.y,") "),n){const{rotate:e,rotateX:t,rotateY:r}=n;e&&(o+="rotate(".concat(e,"deg) ")),t&&(o+="rotateX(".concat(t,"deg) ")),r&&(o+="rotateY(".concat(r,"deg) "))}const a=e.x.scale*t.x,s=e.y.scale*t.y;return o+="scale(".concat(a,", ").concat(s,")"),"translate3d(0px, 0px, 0) scale(1, 1) scale(1, 1)"===o?"none":o}const cU=(e,t)=>e.depth-t.depth;class uU{constructor(){this.children=[],this.isDirty=!1}add(e){jB(this.children,e),this.isDirty=!0}remove(e){BB(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cU),this.isDirty=!1,this.children.forEach(e)}}const dU=["","X","Y","Z"];function hU(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:o}=e;return class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===n||void 0===n?void 0:n();this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.nodes.forEach(xU),this.nodes.forEach(bU)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=e,this.latestValues=t,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0,e&&this.root.registerPotentialNode(e,this);for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new uU)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new FB),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===t||void 0===t||t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}registerPotentialNode(e,t){this.potentialNodes.set(e,t)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r;if(this.instance)return;this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;const{layoutId:i,layout:o,visualElement:a}=this.options;if(a&&!a.getInstance()&&a.mount(e),this.root.nodes.add(this),null===(r=this.parent)||void 0===r||r.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),n&&(o||i)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=EB(r,250),wI.hasAnimatedSinceResize&&(wI.hasAnimatedSinceResize=!1,this.nodes.forEach(yU))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&a&&(i||o)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:i}=e;var o,s,l,c,u;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const d=null!==(s=null!==(o=this.options.transition)&&void 0!==o?o:a.getDefaultTransition())&&void 0!==s?s:CU,{onLayoutAnimationStart:h,onLayoutAnimationComplete:f}=a.getProps(),p=!this.targetLayout||!oU(this.targetLayout,i)||r,m=!n&&r;if((null===(l=this.resumeFrom)||void 0===l?void 0:l.instance)||m||n&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,m);const e={...RB(d,"layout"),onPlay:h,onComplete:f};a.shouldReduceMotion&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||0!==this.animationProgress||yU(this),this.isLead()&&(null===(u=(c=this.options).onExitComplete)||void 0===u||u.call(c));this.targetLayout=i}))}unmount(){var e,t;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(e=this.getStack())||void 0===e||e.remove(this),null===(t=this.parent)||void 0===t||t.children.delete(this),this.instance=void 0,Vj.preRender(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){var e;return this.isAnimationBlocked||(null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimationBlocked())||!1}startUpdate(){var e;this.isUpdateBlocked()||(this.isUpdating=!0,null===(e=this.nodes)||void 0===e||e.forEach(wU))}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t,n,r;if(this.root.isUpdateBlocked())return void(null===(n=(t=this.options).onExitComplete)||void 0===n||n.call(t));if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll()}const{layoutId:i,layout:o}=this.options;if(void 0===i&&!o)return;const a=null===(r=this.options.visualElement)||void 0===r?void 0:r.getProps().transformTemplate;this.prevTransformTemplateValue=null===a||void 0===a?void 0:a(this.latestValues,""),this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}didUpdate(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(gU);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(MU),this.potentialNodes.clear()),this.nodes.forEach(vU),this.nodes.forEach(fU),this.nodes.forEach(pU),this.clearAllSnapshots(),Hj.update(),Hj.preRender(),Hj.render())}clearAllSnapshots(){this.nodes.forEach(mU),this.sharedNodes.forEach(SU)}scheduleUpdateProjection(){Qj.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){Qj.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){if(this.snapshot||!this.instance)return;const e=this.measure(),t=this.removeTransform(this.removeElementScroll(e));PU(t),this.snapshot={measured:e,layout:t,latestValues:{}}}updateLayout(){var e;if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++){this.path[r].updateScroll()}const t=this.measure();PU(t);const n=this.layout;this.layout={measured:t,actual:this.removeElementScroll(t)},this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(e=this.options.visualElement)||void 0===e||e.notifyLayoutMeasure(this.layout.actual,null===n||void 0===n?void 0:n.actual)}updateScroll(){this.options.layoutScroll&&this.instance&&(this.isScrollRoot=i(this.instance),this.scroll=r(this.instance))}resetTransform(){var e;if(!o)return;const t=this.isLayoutDirty||this.shouldResetTransform,n=this.projectionDelta&&!iU(this.projectionDelta),r=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate,i=null===r||void 0===r?void 0:r(this.latestValues,""),a=i!==this.prevTransformTemplateValue;t&&(n||FF(this.latestValues)||a)&&(o(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(qF(t.x,n.x),qF(t.y,n.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Zz(t,e);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:o,isScrollRoot:a}=r;if(r!==this.root&&i&&o.layoutScroll){if(a){Zz(t,e);const{scroll:n}=this.root;n&&(qF(t.x,-n.x),qF(t.y,-n.y))}qF(t.x,i.x),qF(t.y,i.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Zz(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&KF(n,{x:-e.scroll.x,y:-e.scroll.y}),FF(e.latestValues)&&KF(n,e.latestValues)}return FF(this.latestValues)&&KF(n,this.latestValues),n}removeTransform(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};Zz(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];if(!e.instance)continue;if(!FF(e.latestValues))continue;BF(e.latestValues)&&e.updateSnapshot();const i={x:{min:0,max:0},y:{min:0,max:0}};Zz(i,e.measure()),nU(n,e.latestValues,null===(t=e.snapshot)||void 0===t?void 0:t.layout,i)}return FF(this.latestValues)&&nU(n,this.latestValues),n}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection()}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}resolveTargetDelta(){var e;const{layout:t,layoutId:n}=this.options;var r,i,o;this.layout&&(t||n)&&(this.targetDelta||this.relativeTarget||(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},PF(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),Zz(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&(null===(e=this.relativeParent)||void 0===e?void 0:e.target)?(r=this.target,i=this.relativeTarget,o=this.relativeParent.target,MF(r.x,i.x,o.x),MF(r.y,i.y,o.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):Zz(this.target,this.layout.actual),WF(this.target,this.targetDelta)):Zz(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},PF(this.relativeTargetOrigin,this.target,this.relativeParent.target),Zz(this.relativeTarget,this.relativeTargetOrigin)))))}getClosestProjectingParent(){if(this.parent&&!BF(this.parent.latestValues)&&!zF(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()}calcProjection(){var e;const{layout:t,layoutId:n}=this.options;if(this.isTreeAnimating=Boolean((null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!t&&!n)return;const r=this.getLead();Zz(this.layoutCorrected,this.layout.actual),function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var i,o;const a=n.length;if(!a)return;let s,l;t.x=t.y=1;for(let c=0;c<a;c++)s=n[c],l=s.projectionDelta,"contents"!==(null===(o=null===(i=s.instance)||void 0===i?void 0:i.style)||void 0===o?void 0:o.display)&&(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&KF(e,{x:-s.scroll.x,y:-s.scroll.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,WF(e,l)),r&&FF(s.latestValues)&&KF(e,s.latestValues))}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==r);const{target:i}=r;if(!i)return;this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const o=this.treeScale.x,a=this.treeScale.y,s=this.projectionTransform;CF(this.projectionDelta,this.layoutCorrected,i,this.latestValues),this.projectionTransform=lU(this.projectionDelta,this.treeScale),this.projectionTransform===s&&this.treeScale.x===o&&this.treeScale.y===a||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",i))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t,n,r;null===(n=(t=this.options).scheduleRender)||void 0===n||n.call(t),e&&(null===(r=this.getStack())||void 0===r||r.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;const r=this.snapshot,i=(null===r||void 0===r?void 0:r.latestValues)||{},o={...this.latestValues},a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!t;const s={x:{min:0,max:0},y:{min:0,max:0}},l=null===r||void 0===r?void 0:r.isShared,c=((null===(n=this.getStack())||void 0===n?void 0:n.members.length)||0)<=1,u=Boolean(l&&!c&&!0===this.options.crossfade&&!this.path.some(EU));this.animationProgress=0,this.mixTargetDelta=t=>{var n;const r=t/1e3;_U(a.x,e.x,r),_U(a.y,e.y,r),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&(null===(n=this.relativeParent)||void 0===n?void 0:n.layout)&&(PF(s,this.layout.actual,this.relativeParent.layout.actual),function(e,t,n,r){AU(e.x,t.x,n.x,r),AU(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,s,r)),l&&(this.animationValues=o,function(e,t,n,r,i,o){var a,s,l,c;i?(e.opacity=RN(0,null!==(a=n.opacity)&&void 0!==a?a:1,Yz(r)),e.opacityExit=RN(null!==(s=t.opacity)&&void 0!==s?s:1,0,Xz(r))):o&&(e.opacity=RN(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(c=n.opacity)&&void 0!==c?c:1,r));for(let u=0;u<Vz;u++){const i="border".concat(Gz[u],"Radius");let o=qz(t,i),a=qz(n,i);void 0===o&&void 0===a||(o||(o=0),a||(a=0),0===o||0===a||Wz(o)===Wz(a)?(e[i]=Math.max(RN(Hz(o),Hz(a),r),0),(QI.test(a)||QI.test(o))&&(e[i]+="%")):e[i]=a)}(t.rotate||n.rotate)&&(e.rotate=RN(t.rotate||0,n.rotate||0,r))}(o,i,this.latestValues,r,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(0)}startAnimation(e){var t,n;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),this.resumingFrom&&(null===(n=this.resumingFrom.currentAnimation)||void 0===n||n.stop()),this.pendingAnimation&&(Vj.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qj.update((()=>{wI.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=NI(e)?e:UB(e);return IB("",r,t,n),{stop:()=>r.stop(),isAnimating:()=>r.isAnimating()}}(0,1e3,{...e,onUpdate:t=>{var n;this.mixTargetDelta(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:()=>{var t;null===(t=e.onComplete)||void 0===t||t.call(e),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){var e;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(e=this.getStack())||void 0===e||e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){var e;this.currentAnimation&&(null===(e=this.mixTargetDelta)||void 0===e||e.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&DU(this.options.animationType,this.layout.actual,r.actual)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=_F(this.layout.actual.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=_F(this.layout.actual.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Zz(t,n),KF(t,i),CF(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){var n,r,i;this.sharedNodes.has(e)||this.sharedNodes.set(e,new sU);this.sharedNodes.get(e).add(t),t.promote({transition:null===(n=t.options.initialPromotionConfig)||void 0===n?void 0:n.transition,preserveFollowOpacity:null===(i=null===(r=t.options.initialPromotionConfig)||void 0===r?void 0:r.shouldPreserveFollowOpacity)||void 0===i?void 0:i.call(r,t)})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const n={};for(let r=0;r<dU.length;r++){const i="rotate"+dU[r];e.getStaticValue(i)&&(t=!0,n[i]=e.getStaticValue(i),e.setStaticValue(i,0))}if(t){null===e||void 0===e||e.syncRender();for(const t in n)e.setStaticValue(t,n[t]);e.scheduleRender()}}getProjectionStyles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,n,r;const i={};if(!this.instance||this.isSVG)return i;if(!this.isVisible)return{visibility:"hidden"};i.visibility="";const o=null===(t=this.options.visualElement)||void 0===t?void 0:t.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=kL(e.pointerEvents)||"",i.transform=o?o(this.latestValues,""):"none",i;const a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=kL(e.pointerEvents)||""),this.hasProjected&&!FF(this.latestValues)&&(t.transform=o?o({},""):"none",this.hasProjected=!1),t}const s=a.animationValues||a.latestValues;this.applyTransformsToTarget(),i.transform=lU(this.projectionDeltaWithTransform,this.treeScale,s),o&&(i.transform=o(s,i.transform));const{x:l,y:c}=this.projectionDelta;i.transformOrigin="".concat(100*l.origin,"% ").concat(100*c.origin,"% 0"),a.animationValues?i.opacity=a===this?null!==(r=null!==(n=s.opacity)&&void 0!==n?n:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:i.opacity=a===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const u in OI){if(void 0===s[u])continue;const{correct:e,applyTo:t}=OI[u],n=e(s[u],a);if(t){const e=t.length;for(let r=0;r<e;r++)i[t[r]]=n}else i[u]=n}return this.options.layoutId&&(i.pointerEvents=a===this?kL(e.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(gU),this.root.sharedNodes.clear()}}}function fU(e){e.updateLayout()}function pU(e){var t,n,r;const i=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){const{actual:t,measured:n}=e.layout,{animationType:r}=e.options;"size"===r?LF((e=>{const n=i.isShared?i.measured[e]:i.layout[e],r=_F(n);n.min=t[e].min,n.max=n.min+r})):DU(r,i.layout,t)&&LF((e=>{const n=i.isShared?i.measured[e]:i.layout[e],r=_F(t[e]);n.max=n.min+r}));const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};CF(o,t,i.layout);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i.isShared?CF(a,e.applyTransform(n,!0),i.measured):CF(a,t,i.layout);const s=!iU(o);let l=!1;if(!e.resumeFrom&&(e.relativeParent=e.getClosestProjectingParent(),e.relativeParent&&!e.relativeParent.resumeFrom)){const{snapshot:n,layout:r}=e.relativeParent;if(n&&r){const e={x:{min:0,max:0},y:{min:0,max:0}};PF(e,i.layout,n.layout);const o={x:{min:0,max:0},y:{min:0,max:0}};PF(o,t,r.actual),oU(e,o)||(l=!0)}}e.notifyListeners("didUpdate",{layout:t,snapshot:i,delta:a,layoutDelta:o,hasLayoutChanged:s,hasRelativeTargetChanged:l})}else e.isLead()&&(null===(r=(n=e.options).onExitComplete)||void 0===r||r.call(n));e.options.transition=void 0}function mU(e){e.clearSnapshot()}function gU(e){e.clearMeasurements()}function vU(e){const{visualElement:t}=e.options;(null===t||void 0===t?void 0:t.getProps().onBeforeLayoutMeasure)&&t.notifyBeforeLayoutMeasure(),e.resetTransform()}function yU(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function xU(e){e.resolveTargetDelta()}function bU(e){e.calcProjection()}function wU(e){e.resetRotation()}function SU(e){e.removeLeadSnapshot()}function _U(e,t,n){e.translate=RN(t.translate,0,n),e.scale=RN(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function AU(e,t,n,r){e.min=RN(t.min,n.min,r),e.max=RN(t.max,n.max,r)}function EU(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const CU={duration:.45,ease:[.4,0,.1,1]};function MU(e,t){let n=e.root;for(let i=e.path.length-1;i>=0;i--)if(Boolean(e.path[i].instance)){n=e.path[i];break}const r=(n&&n!==e.root?n.instance:document).querySelector('[data-projection-id="'.concat(t,'"]'));r&&e.mount(r,!0)}function TU(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function PU(e){TU(e.x),TU(e.y)}function DU(e,t,n){return"position"===e||"preserve-aspect"===e&&!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;return mF(e,t)<=n}(aU(t),aU(n),.2)}const kU=hU({attachResizeListener:(e,t)=>jL(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),OU={current:void 0},RU=hU({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!OU.current){const e=new kU(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),OU.current=e}return OU.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),IU={...dF,...xN,...tz,...Uz},LU=PI(((e,t)=>function(e,t,n,r,i){let{forwardMotionProps:o=!1}=t;return{...kI(e)?IL:LL,preloadedFeatures:n,useRender:wL(o),createVisualElement:r,projectionNodeConstructor:i,Component:e}}(e,t,IU,Iz,RU)));const NU=(e,t)=>{const{type:n}=t;switch(n){case"OPEN_NAVIGATION":return{isOpen:!0};case"CLOSE_NAVIGATION":return{isOpen:!1}}};var jU=n(184);const BU=(0,e.createContext)();function FU(){return(0,e.useContext)(BU)}BU.displayName="NavigationContext";const zU=t=>{let{children:n}=t;const[r,i]=(0,e.useReducer)(NU,{isOpen:!1});return(0,jU.jsx)(BU.Provider,{value:{...r,dispatchNavigation:i},children:n})},UU=()=>{const[t,n]=(0,e.useState)(!1),[r,i]=(0,e.useState)(!1),o=Ue();(0,e.useEffect)((()=>{o.pathname.includes("/chat/")&&(o.pathname.includes("/chat/chat-main/")?i(!0):i(!1))}),[o]);const{isOpen:a,dispatchNavigation:s}=FU();return(0,jU.jsxs)("div",{className:"fixed ".concat(a||r?"bottom-[-120px]":"bottom-10","\n        z-50 flex h-[80px] w-[80px] cursor-pointer items-center justify-center rounded-full duration-300 hover:scale-105 active:scale-95 800:h-[92px] 800:w-[92px]"),onClick:()=>{s({type:"OPEN_NAVIGATION"})},children:[(0,jU.jsx)(LU.div,{initial:{top:"-16px",opacity:1,scale:1},animate:{top:"12px",opacity:0,scale:.5},transition:{duration:.3,delay:10,ease:"easeInOut"},className:"absolute -top-3 rounded-lg bg-white/80 px-2 py-1 text-[16px] backdrop-blur-sm duration-300 dark:bg-dmGrey900/80",children:(0,jU.jsx)("span",{className:"text-lmGrey600 drop-shadow-lg dark:text-dmGrey25",children:"Menu"})}),(0,jU.jsx)(nI,{onLoad:()=>n(!0),className:"z-10 drop-shadow-lg",scene:"https://prod.spline.design/og6CZMxsQfdlo-uE/scene.splinecode"}),!t&&(0,jU.jsx)("div",{className:"z-10 h-[60px] w-[60px] rounded-full bg-lmPrimary"})]})};function GU(e,t){if(e in t){let o=t[e];for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return"function"==typeof o?o(...r):o}let o=new Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map((e=>'"'.concat(e,'"'))).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(o,GU),o}var VU=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(VU||{}),HU=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(HU||{});function WU(e){let{ourProps:t,theirProps:n,slot:r,defaultTag:i,features:o,visible:a=!0,name:s}=e,l=XU(n,t);if(a)return qU(l,r,i,s);let c=null!=o?o:0;if(2&c){let{static:e=!1,...t}=l;if(e)return qU(t,r,i,s)}if(1&c){let{unmount:e=!0,...t}=l;return GU(e?0:1,{0:()=>null,1:()=>qU({...t,hidden:!0,style:{display:"none"}},r,i,s)})}return qU(l,r,i,s)}function qU(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,{as:o=r,children:a,refName:s="ref",...l}=ZU(t,["unmount","static"]),c=void 0!==t.ref?{[s]:t.ref}:{},u="function"==typeof a?a(n):a;l.className&&"function"==typeof l.className&&(l.className=l.className(n));let d={};if(n){let e=!1,t=[];for(let[r,i]of Object.entries(n))"boolean"==typeof i&&(e=!0),!0===i&&t.push(r);e&&(d["data-headlessui-state"]=t.join(" "))}if(o===e.Fragment&&Object.keys(KU(l)).length>0){if(!(0,e.isValidElement)(u)||Array.isArray(u)&&u.length>1)throw new Error(['Passing props on "Fragment"!',"","The current component <".concat(i,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(l).map((e=>"  - ".concat(e))).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>"  - ".concat(e))).join("\n")].join("\n"));return(0,e.cloneElement)(u,Object.assign({},XU(u.props,KU(ZU(l,["ref"]))),d,c,YU(u.ref,c.ref)))}return(0,e.createElement)(o,Object.assign({},ZU(l,["ref"]),o!==e.Fragment&&c,o!==e.Fragment&&d),u)}function YU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{ref:t.every((e=>null==e))?void 0:e=>{for(let n of t)null!=n&&("function"==typeof n?n(e):n.current=e)}}}function XU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},i={};for(let o of t)for(let e in o)e.startsWith("on")&&"function"==typeof o[e]?(null!=i[e]||(i[e]=[]),i[e].push(o[e])):r[e]=o[e];if(r.disabled||r["aria-disabled"])return Object.assign(r,Object.fromEntries(Object.keys(i).map((e=>[e,void 0]))));for(let o in i)Object.assign(r,{[o](e){let t=i[o];for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(let i of t){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;i(e,...r)}}});return r}function QU(t){var n;return Object.assign((0,e.forwardRef)(t),{displayName:null!=(n=t.displayName)?n:t.name})}function KU(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function ZU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function JU(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}function $U(){let e=[],t=[],n={enqueue(e){t.push(e)},addEventListener:(e,t,r,i)=>(e.addEventListener(t,r,i),n.add((()=>e.removeEventListener(t,r,i)))),requestAnimationFrame(){let e=requestAnimationFrame(...arguments);return n.add((()=>cancelAnimationFrame(e)))},nextFrame(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.requestAnimationFrame((()=>n.requestAnimationFrame(...t)))},setTimeout(){let e=setTimeout(...arguments);return n.add((()=>clearTimeout(e)))},microTask(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let i={current:!0};return JU((()=>{i.current&&t[0]()})),n.add((()=>{i.current=!1}))},add:t=>(e.push(t),()=>{let n=e.indexOf(t);if(n>=0){let[t]=e.splice(n,1);t()}}),dispose(){for(let t of e.splice(0))t()},async workQueue(){for(let e of t.splice(0))await e()}};return n}function eG(){let[t]=(0,e.useState)($U);return(0,e.useEffect)((()=>()=>t.dispose()),[t]),t}const tG="undefined"==typeof window||"undefined"==typeof document;let nG=tG?e.useEffect:e.useLayoutEffect;function rG(t){let n=(0,e.useRef)(t);return nG((()=>{n.current=t}),[t]),n}let iG=function(t){let n=rG(t);return e.useCallback((function(){return n.current(...arguments)}),[n])},oG=Symbol();function aG(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(e,{[oG]:t})}function sG(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=(0,e.useRef)(n);(0,e.useEffect)((()=>{i.current=n}),[n]);let o=iG((e=>{for(let t of i.current)null!=t&&("function"==typeof t?t(e):t.current=e)}));return n.every((e=>null==e||(null==e?void 0:e[oG])))?void 0:o}let lG={serverHandoffComplete:!1};function cG(){let[t,n]=(0,e.useState)(lG.serverHandoffComplete);return(0,e.useEffect)((()=>{!0!==t&&n(!0)}),[t]),(0,e.useEffect)((()=>{!1===lG.serverHandoffComplete&&(lG.serverHandoffComplete=!0)}),[]),t}var uG;let dG=0;function hG(){return++dG}let fG=null!=(uG=e.useId)?uG:function(){let t=cG(),[n,r]=e.useState(t?hG:null);return nG((()=>{null===n&&r(hG())}),[n]),null!=n?""+n:void 0};var pG=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(pG||{});var mG=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(mG||{});function gG(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=null!=r?r:-1,o=(()=>{switch(e.focus){case 0:return n.findIndex((e=>!t.resolveDisabled(e)));case 1:{let e=n.slice().reverse().findIndex(((e,n,r)=>!(-1!==i&&r.length-n-1>=i)&&!t.resolveDisabled(e)));return-1===e?e:n.length-1-e}case 2:return n.findIndex(((e,n)=>!(n<=i)&&!t.resolveDisabled(e)));case 3:{let e=n.slice().reverse().findIndex((e=>!t.resolveDisabled(e)));return-1===e?e:n.length-1-e}case 4:return n.findIndex((n=>t.resolveId(n)===e.id));case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}})();return-1===o?r:o}function vG(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=""===(null==t?void 0:t.getAttribute("disabled"));return(!r||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(n))&&r}function yG(e){return tG?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let xG=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>"".concat(e,":not([tabindex='-1'])"))).join(",");var bG=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(bG||{}),wG=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(wG||{}),SG=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(SG||{});function _G(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(xG))}var AG=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(AG||{});function EG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var n;return e!==(null==(n=yG(e))?void 0:n.body)&&GU(t,{0:()=>e.matches(xG),1(){let t=e;for(;null!==t;){if(t.matches(xG))return!0;t=t.parentElement}return!1}})}function CG(e){let t=yG(e);$U().nextFrame((()=>{t&&!EG(t.activeElement,0)&&MG(e)}))}function MG(e){null==e||e.focus({preventScroll:!0})}let TG=["textarea","input"].join(",");function PG(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,TG))&&n}function DG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return e.slice().sort(((e,n)=>{let r=t(e),i=t(n);if(null===r||null===i)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function kG(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?DG(e):e:_G(e);r=null!=r?r:i.activeElement;let a,s=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,o.indexOf(r))-1;if(4&t)return Math.max(0,o.indexOf(r))+1;if(8&t)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=32&t?{preventScroll:!0}:{},u=0,d=o.length;do{if(u>=d||u+d<=0)return 0;let e=l+u;if(16&t)e=(e+d)%d;else{if(e<0)return 3;if(e>=d)return 1}a=o[e],null==a||a.focus(c),u+=s}while(a!==i.activeElement);return 6&t&&PG(a)&&a.select(),a.hasAttribute("tabindex")||a.setAttribute("tabindex","0"),2}function OG(t,n,r){let i=rG(n);(0,e.useEffect)((()=>{function e(e){i.current(e)}return document.addEventListener(t,e,r),()=>document.removeEventListener(t,e,r)}),[t,r])}function RG(t,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(0,e.useRef)(!1);function o(e,r){if(!i.current||e.defaultPrevented)return;let o=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(t),a=r(e);if(null!==a&&a.ownerDocument.documentElement.contains(a)){for(let e of o){if(null===e)continue;let t=e instanceof HTMLElement?e:e.current;if(null!=t&&t.contains(a))return}return!EG(a,AG.Loose)&&-1!==a.tabIndex&&e.preventDefault(),n(e,a)}}(0,e.useEffect)((()=>{requestAnimationFrame((()=>{i.current=r}))}),[r]);let a=(0,e.useRef)(null);OG("mousedown",(e=>{var t,n;i.current&&(a.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)}),!0),OG("click",(e=>{!a.current||(o(e,(()=>a.current)),a.current=null)}),!0),OG("blur",(e=>o(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}function IG(t){let{container:n,accept:r,walk:i,enabled:o=!0}=t,a=(0,e.useRef)(r),s=(0,e.useRef)(i);(0,e.useEffect)((()=>{a.current=r,s.current=i}),[r,i]),nG((()=>{if(!n||!o)return;let e=yG(n);if(!e)return;let t=a.current,r=s.current,i=Object.assign((e=>t(e)),{acceptNode:t}),l=e.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,i,!1);for(;l.nextNode();)r(l.currentNode)}),[n,o,a,s])}let LG=(0,e.createContext)(null);LG.displayName="OpenClosedContext";var NG=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(NG||{});function jG(){return(0,e.useContext)(LG)}function BG(t){let{value:n,children:r}=t;return e.createElement(LG.Provider,{value:n},r)}function FG(e){var t;if(e.type)return e.type;let n=null!=(t=e.as)?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function zG(t,n){let[r,i]=(0,e.useState)((()=>FG(t)));return nG((()=>{i(FG(t))}),[t.type,t.as]),nG((()=>{r||!n.current||n.current instanceof HTMLButtonElement&&!n.current.hasAttribute("type")&&i("button")}),[r,n]),r}function UG(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(0,e.useMemo)((()=>yG(...n)),[...n])}var GG=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(GG||{}),VG=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(VG||{}),HG=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(HG||{});function WG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,n=null!==e.activeItemIndex?e.items[e.activeItemIndex]:null,r=DG(t(e.items.slice()),(e=>e.dataRef.current.domRef.current)),i=n?r.indexOf(n):null;return-1===i&&(i=null),{items:r,activeItemIndex:i}}let qG={1:e=>1===e.menuState?e:{...e,activeItemIndex:null,menuState:1},0:e=>0===e.menuState?e:{...e,menuState:0},2:(e,t)=>{var n;let r=WG(e),i=gG(t,{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeItemIndex:i,activationTrigger:null!=(n=t.trigger)?n:1}},3:(e,t)=>{let n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(null!==e.activeItemIndex?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find((e=>{var t;return(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))&&!e.dataRef.current.disabled})),o=i?e.items.indexOf(i):-1;return-1===o||o===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:o,activationTrigger:1}},4:e=>""===e.searchQuery?e:{...e,searchQuery:"",searchActiveItemIndex:null},5:(e,t)=>{let n=WG(e,(e=>[...e,{id:t.id,dataRef:t.dataRef}]));return{...e,...n}},6:(e,t)=>{let n=WG(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}}},YG=(0,e.createContext)(null);function XG(t){let n=(0,e.useContext)(YG);if(null===n){let e=new Error("<".concat(t," /> is missing a parent <Menu /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(e,XG),e}return n}function QG(e,t){return GU(t.type,qG,e,t)}YG.displayName="MenuContext";let KG=e.Fragment,ZG=QU((function(t,n){let r=(0,e.useReducer)(QG,{menuState:1,buttonRef:(0,e.createRef)(),itemsRef:(0,e.createRef)(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:i,itemsRef:o,buttonRef:a},s]=r,l=sG(n);RG([a,o],((e,t)=>{var n;s({type:1}),EG(t,AG.Loose)||(e.preventDefault(),null==(n=a.current)||n.focus())}),0===i);let c=(0,e.useMemo)((()=>({open:0===i})),[i]),u=t,d={ref:l};return e.createElement(YG.Provider,{value:r},e.createElement(BG,{value:GU(i,{0:NG.Open,1:NG.Closed})},WU({ourProps:d,theirProps:u,slot:c,defaultTag:KG,name:"Menu"})))})),JG=QU((function(t,n){var r;let[i,o]=XG("Menu.Button"),a=sG(i.buttonRef,n),s="headlessui-menu-button-".concat(fG()),l=eG(),c=iG((e=>{switch(e.key){case pG.Space:case pG.Enter:case pG.ArrowDown:e.preventDefault(),e.stopPropagation(),o({type:0}),l.nextFrame((()=>o({type:2,focus:mG.First})));break;case pG.ArrowUp:e.preventDefault(),e.stopPropagation(),o({type:0}),l.nextFrame((()=>o({type:2,focus:mG.Last})))}})),u=iG((e=>{if(e.key===pG.Space)e.preventDefault()})),d=iG((e=>{if(vG(e.currentTarget))return e.preventDefault();t.disabled||(0===i.menuState?(o({type:1}),l.nextFrame((()=>{var e;return null==(e=i.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),o({type:0})))})),h=(0,e.useMemo)((()=>({open:0===i.menuState})),[i]),f=t;return WU({ourProps:{ref:a,id:s,type:zG(t,i.buttonRef),"aria-haspopup":!0,"aria-controls":null==(r=i.itemsRef.current)?void 0:r.id,"aria-expanded":t.disabled?void 0:0===i.menuState,onKeyDown:c,onKeyUp:u,onClick:d},theirProps:f,slot:h,defaultTag:"button",name:"Menu.Button"})})),$G=VU.RenderStrategy|VU.Static,eV=QU((function(t,n){var r,i;let[o,a]=XG("Menu.Items"),s=sG(o.itemsRef,n),l=UG(o.itemsRef),c="headlessui-menu-items-".concat(fG()),u=eG(),d=jG(),h=null!==d?d===NG.Open:0===o.menuState;(0,e.useEffect)((()=>{let e=o.itemsRef.current;!e||0===o.menuState&&e!==(null==l?void 0:l.activeElement)&&e.focus({preventScroll:!0})}),[o.menuState,o.itemsRef,l]),IG({container:o.itemsRef.current,enabled:0===o.menuState,accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let f=iG((e=>{var t,n;switch(u.dispose(),e.key){case pG.Space:if(""!==o.searchQuery)return e.preventDefault(),e.stopPropagation(),a({type:3,value:e.key});case pG.Enter:if(e.preventDefault(),e.stopPropagation(),a({type:1}),null!==o.activeItemIndex){let{dataRef:e}=o.items[o.activeItemIndex];null==(n=null==(t=e.current)?void 0:t.domRef.current)||n.click()}CG(o.buttonRef.current);break;case pG.ArrowDown:return e.preventDefault(),e.stopPropagation(),a({type:2,focus:mG.Next});case pG.ArrowUp:return e.preventDefault(),e.stopPropagation(),a({type:2,focus:mG.Previous});case pG.Home:case pG.PageUp:return e.preventDefault(),e.stopPropagation(),a({type:2,focus:mG.First});case pG.End:case pG.PageDown:return e.preventDefault(),e.stopPropagation(),a({type:2,focus:mG.Last});case pG.Escape:e.preventDefault(),e.stopPropagation(),a({type:1}),$U().nextFrame((()=>{var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case pG.Tab:e.preventDefault(),e.stopPropagation(),a({type:1}),$U().nextFrame((()=>{!function(e,t){kG(_G(),t,!0,e)}(o.buttonRef.current,e.shiftKey?bG.Previous:bG.Next)}));break;default:1===e.key.length&&(a({type:3,value:e.key}),u.setTimeout((()=>a({type:4})),350))}})),p=iG((e=>{if(e.key===pG.Space)e.preventDefault()})),m=(0,e.useMemo)((()=>({open:0===o.menuState})),[o]),g=t;return WU({ourProps:{"aria-activedescendant":null===o.activeItemIndex||null==(r=o.items[o.activeItemIndex])?void 0:r.id,"aria-labelledby":null==(i=o.buttonRef.current)?void 0:i.id,id:c,onKeyDown:f,onKeyUp:p,role:"menu",tabIndex:0,ref:s},theirProps:g,slot:m,defaultTag:"div",features:$G,visible:h,name:"Menu.Items"})})),tV=e.Fragment,nV=QU((function(t,n){let{disabled:r=!1,...i}=t,[o,a]=XG("Menu.Item"),s="headlessui-menu-item-".concat(fG()),l=null!==o.activeItemIndex&&o.items[o.activeItemIndex].id===s,c=(0,e.useRef)(null),u=sG(n,c);nG((()=>{if(0!==o.menuState||!l||0===o.activationTrigger)return;let e=$U();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=c.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[c,l,o.menuState,o.activationTrigger,o.activeItemIndex]);let d=(0,e.useRef)({disabled:r,domRef:c});nG((()=>{d.current.disabled=r}),[d,r]),nG((()=>{var e,t;d.current.textValue=null==(t=null==(e=c.current)?void 0:e.textContent)?void 0:t.toLowerCase()}),[d,c]),nG((()=>(a({type:5,id:s,dataRef:d}),()=>a({type:6,id:s}))),[d,s]);let h=iG((e=>{if(r)return e.preventDefault();a({type:1}),CG(o.buttonRef.current)})),f=iG((()=>{if(r)return a({type:2,focus:mG.Nothing});a({type:2,focus:mG.Specific,id:s})})),p=iG((()=>{r||l||a({type:2,focus:mG.Specific,id:s,trigger:0})})),m=iG((()=>{r||!l||a({type:2,focus:mG.Nothing})})),g=(0,e.useMemo)((()=>({active:l,disabled:r})),[l,r]);return WU({ourProps:{id:s,ref:u,role:"menuitem",tabIndex:!0===r?void 0:-1,"aria-disabled":!0===r||void 0,disabled:void 0,onClick:h,onFocus:f,onPointerMove:p,onMouseMove:p,onPointerLeave:m,onMouseLeave:m},theirProps:i,slot:g,defaultTag:tV,name:"Menu.Item"})})),rV=Object.assign(ZG,{Button:JG,Items:eV,Item:nV});function iV(){let t=(0,e.useRef)(!1);return nG((()=>(t.current=!0,()=>{t.current=!1})),[]),t}function oV(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&n.length>0&&e.classList.add(...n)}function aV(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&n.length>0&&e.classList.remove(...n)}var sV=(e=>(e.Ended="ended",e.Cancelled="cancelled",e))(sV||{});function lV(e,t,n,r){let i=n?"enter":"leave",o=$U(),a=void 0!==r?function(e){let t={called:!1};return function(){if(!t.called)return t.called=!0,e(...arguments)}}(r):()=>{};"enter"===i&&(e.removeAttribute("hidden"),e.style.display="");let s=GU(i,{enter:()=>t.enter,leave:()=>t.leave}),l=GU(i,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),c=GU(i,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return aV(e,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),oV(e,...s,...c),o.nextFrame((()=>{aV(e,...c),oV(e,...l),function(e,t){let n=$U();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:i}=getComputedStyle(e),[o,a]=[r,i].map((e=>{let[t=0]=e.split(",").filter(Boolean).map((e=>e.includes("ms")?parseFloat(e):1e3*parseFloat(e))).sort(((e,t)=>t-e));return t}));if(o+a!==0){let r=[];r.push(n.addEventListener(e,"transitionrun",(i=>{i.target===i.currentTarget&&(r.splice(0).forEach((e=>e())),r.push(n.addEventListener(e,"transitionend",(e=>{e.target===e.currentTarget&&(t("ended"),r.splice(0).forEach((e=>e())))})),n.addEventListener(e,"transitioncancel",(e=>{e.target===e.currentTarget&&(t("cancelled"),r.splice(0).forEach((e=>e())))}))))})))}else t("ended");n.add((()=>t("cancelled"))),n.dispose}(e,(n=>("ended"===n&&(aV(e,...s),oV(e,...t.entered)),a(n))))})),o.dispose}function cV(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(" ").filter((e=>e.trim().length>1))}let uV=(0,e.createContext)(null);uV.displayName="TransitionContext";var dV=(e=>(e.Visible="visible",e.Hidden="hidden",e))(dV||{});let hV=(0,e.createContext)(null);function fV(e){return"children"in e?fV(e.children):e.current.filter((e=>{let{el:t}=e;return null!==t.current})).filter((e=>{let{state:t}=e;return"visible"===t})).length>0}function pV(t,n){let r=rG(t),i=(0,e.useRef)([]),o=iV(),a=eG(),s=iG((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:HU.Hidden,n=i.current.findIndex((t=>{let{el:n}=t;return n===e}));-1!==n&&(GU(t,{[HU.Unmount](){i.current.splice(n,1)},[HU.Hidden](){i.current[n].state="hidden"}}),a.microTask((()=>{var e;!fV(i)&&o.current&&(null==(e=r.current)||e.call(r))})))})),l=iG((e=>{let t=i.current.find((t=>{let{el:n}=t;return n===e}));return t?"visible"!==t.state&&(t.state="visible"):i.current.push({el:e,state:"visible"}),()=>s(e,HU.Unmount)})),c=(0,e.useRef)([]),u=(0,e.useRef)(Promise.resolve()),d=(0,e.useRef)({enter:[],leave:[],idle:[]}),h=iG(((e,t,r)=>{c.current.splice(0),n&&(n.chains.current[t]=n.chains.current[t].filter((t=>{let[n]=t;return n!==e}))),null==n||n.chains.current[t].push([e,new Promise((e=>{c.current.push(e)}))]),null==n||n.chains.current[t].push([e,new Promise((e=>{Promise.all(d.current[t].map((e=>{let[t,n]=e;return n}))).then((()=>e()))}))]),"enter"===t?u.current=u.current.then((()=>null==n?void 0:n.wait.current)).then((()=>r(t))):r(t)})),f=iG(((e,t,n)=>{Promise.all(d.current[t].splice(0).map((e=>{let[t,n]=e;return n}))).then((()=>{var e;null==(e=c.current.shift())||e()})).then((()=>n(t)))}));return(0,e.useMemo)((()=>({children:i,register:l,unregister:s,onStart:h,onStop:f,wait:u,chains:d})),[l,s,i,h,f,d,u])}function mV(){}hV.displayName="NestingContext";let gV=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function vV(e){var t;let n={};for(let r of gV)n[r]=null!=(t=e[r])?t:mV;return n}let yV=VU.RenderStrategy,xV=QU((function(t,n){let{beforeEnter:r,afterEnter:i,beforeLeave:o,afterLeave:a,enter:s,enterFrom:l,enterTo:c,entered:u,leave:d,leaveFrom:h,leaveTo:f,...p}=t,m=(0,e.useRef)(null),g=sG(m,n),v=p.unmount?HU.Unmount:HU.Hidden,{show:y,appear:x,initial:b}=function(){let t=(0,e.useContext)(uV);if(null===t)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}(),[w,S]=(0,e.useState)(y?"visible":"hidden"),_=function(){let t=(0,e.useContext)(hV);if(null===t)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}(),{register:A,unregister:E}=_,C=(0,e.useRef)(null);(0,e.useEffect)((()=>A(m)),[A,m]),(0,e.useEffect)((()=>{if(v===HU.Hidden&&m.current)return y&&"visible"!==w?void S("visible"):GU(w,{hidden:()=>E(m),visible:()=>A(m)})}),[w,m,A,E,y,v]);let M=rG({enter:cV(s),enterFrom:cV(l),enterTo:cV(c),entered:cV(u),leave:cV(d),leaveFrom:cV(h),leaveTo:cV(f)}),T=function(t){let n=(0,e.useRef)(vV(t));return(0,e.useEffect)((()=>{n.current=vV(t)}),[t]),n}({beforeEnter:r,afterEnter:i,beforeLeave:o,afterLeave:a}),P=cG();(0,e.useEffect)((()=>{if(P&&"visible"===w&&null===m.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}),[m,w,P]);let D=b&&!x,k=!P||D||C.current===y?"idle":y?"enter":"leave",O=iG((e=>GU(e,{enter:()=>T.current.beforeEnter(),leave:()=>T.current.beforeLeave(),idle:()=>{}}))),R=iG((e=>GU(e,{enter:()=>T.current.afterEnter(),leave:()=>T.current.afterLeave(),idle:()=>{}}))),I=pV((()=>{S("hidden"),E(m)}),_);(function(e){let{container:t,direction:n,classes:r,onStart:i,onStop:o}=e,a=iV(),s=eG(),l=rG(n);nG((()=>{let e=$U();s.add(e.dispose);let n=t.current;if(n&&"idle"!==l.current&&a.current)return e.dispose(),i.current(l.current),e.add(lV(n,r.current,"enter"===l.current,(t=>{e.dispose(),GU(t,{[sV.Ended](){o.current(l.current)},[sV.Cancelled]:()=>{}})}))),e.dispose}),[n])})({container:m,classes:M,direction:k,onStart:rG((e=>{I.onStart(m,e,O)})),onStop:rG((e=>{I.onStop(m,e,R),"leave"===e&&!fV(I)&&(S("hidden"),E(m))}))}),(0,e.useEffect)((()=>{!D||(v===HU.Hidden?C.current=null:C.current=y)}),[y,D,w]);let L=p,N={ref:g};return e.createElement(hV.Provider,{value:I},e.createElement(BG,{value:GU(w,{visible:NG.Open,hidden:NG.Closed})},WU({ourProps:N,theirProps:L,defaultTag:"div",features:yV,visible:"visible"===w,name:"Transition.Child"})))})),bV=QU((function(t,n){let{show:r,appear:i=!1,unmount:o,...a}=t,s=(0,e.useRef)(null),l=sG(s,n);cG();let c=jG();if(void 0===r&&null!==c&&(r=GU(c,{[NG.Open]:!0,[NG.Closed]:!1})),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=(0,e.useState)(r?"visible":"hidden"),h=pV((()=>{d("hidden")})),[f,p]=(0,e.useState)(!0),m=(0,e.useRef)([r]);nG((()=>{!1!==f&&m.current[m.current.length-1]!==r&&(m.current.push(r),p(!1))}),[m,r]);let g=(0,e.useMemo)((()=>({show:r,appear:i,initial:f})),[r,i,f]);(0,e.useEffect)((()=>{if(r)d("visible");else if(fV(h)){let e=s.current;if(!e)return;let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&d("hidden")}else d("hidden")}),[r,h]);let v={unmount:o};return e.createElement(hV.Provider,{value:h},e.createElement(uV.Provider,{value:g},WU({ourProps:{...v,as:e.Fragment,children:e.createElement(xV,{ref:l,...v,...a})},theirProps:{},defaultTag:e.Fragment,features:yV,visible:"visible"===u,name:"Transition"})))})),wV=QU((function(t,n){let r=null!==(0,e.useContext)(uV),i=null!==jG();return e.createElement(e.Fragment,null,!r&&i?e.createElement(bV,{ref:n,...t}):e.createElement(xV,{ref:n,...t}))})),SV=Object.assign(bV,{Child:wV,Root:bV});const _V=(e,t)=>{const{type:n}=t;switch(n){case"SET_TO_DARK":return{darkMode:!0};case"SET_TO_LIGHT":return{darkMode:!1}}},AV=(0,e.createContext)();function EV(){return(0,e.useContext)(AV)}AV.displayName="DarkModeContext";const CV=t=>{let{children:n}=t;const[r,i]=(0,e.useReducer)(_V,{darkMode:!1});return(0,jU.jsx)(AV.Provider,{value:{...r,dispatchDarkMode:i},children:n})},MV=()=>{let{darkMode:t,dispatchDarkMode:n}=EV();(0,e.useEffect)((()=>r()),[]);const r=()=>{if("dark"===localStorage.theme||window.matchMedia("(prefers-color-scheme: dark)").matches)return document.documentElement.classList.contains("dark")||document.documentElement.classList.add("dark"),void(t||n({type:"SET_TO_DARK"}));document.documentElement.classList.contains("dark")&&document.documentElement.classList.remove("dark"),t&&n({type:"SET_TO_LIGHT"})},i=e=>{"light"===e?localStorage.setItem("theme","light"):"dark"===e?localStorage.setItem("theme","dark"):localStorage.removeItem("theme"),r()};return(0,jU.jsx)(rV,{as:"div",className:" relative flex h-fit w-full flex-col",children:t=>{let{open:n}=t;return(0,jU.jsxs)(jU.Fragment,{children:[(0,jU.jsxs)(rV.Button,{className:"flex w-full items-center gap-2 rounded-lg bg-white px-3 py-[10px] shadow-sm hover:bg-lmGrey50 dark:bg-dmGrey800",children:[(0,jU.jsx)("i",{className:"".concat("light"===localStorage.theme?"fa-solid fa-sun":"dark"===localStorage.theme?"fa-solid fa-moon":"fa-solid fa-desktop"," flex h-[14px] w-[14px] items-center justify-center text-sm text-lmGrey600 duration-300 dark:text-lmGrey100")}),(0,jU.jsx)("span",{className:"flex w-full  text-sm text-lmGrey600 dark:text-lmGrey100",children:"Appearance"}),(0,jU.jsx)("i",{className:"fa-solid fa-chevron-down ".concat(n?"rotate-180":"rotate-0"," flex h-[14px] w-[14px] items-center justify-center text-sm text-lmGrey600 duration-500 dark:text-lmGrey100")})]}),(0,jU.jsx)(SV,{as:e.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,jU.jsxs)(rV.Items,{className:"absolute left-0 mt-12 flex w-full flex-col gap-y-1 rounded-lg bg-white py-2 px-2 shadow-sm dark:bg-dmGrey800",children:[(0,jU.jsx)(rV.Item,{children:e=>{let{active:t}=e;return(0,jU.jsxs)("button",{onClick:()=>i("light"),className:"flex w-full items-center gap-2 rounded-lg px-3 py-2 ".concat(t?"bg-lmGrey50 dark:bg-dmGrey700":"bg-white dark:bg-dmGrey800"," duration-300"),children:[(0,jU.jsx)("i",{className:"fa-solid fa-sun flex h-[14px] w-[14px] items-center justify-center text-sm  text-lmGrey600 dark:text-lmGrey100"}),(0,jU.jsx)("span",{className:"text-sm text-lmGrey600 dark:text-lmGrey100",children:"Light Mode"})]})}}),(0,jU.jsx)(rV.Item,{children:e=>{let{active:t}=e;return(0,jU.jsxs)("button",{onClick:()=>i("dark"),className:"flex w-full items-center gap-2 rounded-lg px-3 py-2 ".concat(t?"bg-lmGrey50 dark:bg-dmGrey700":"bg-white dark:bg-dmGrey800"," duration-300"),children:[(0,jU.jsx)("i",{className:"fa-solid fa-moon flex h-[14px] w-[14px] items-center justify-center text-sm  text-lmGrey600 dark:text-lmGrey100"}),(0,jU.jsx)("span",{className:"text-sm text-lmGrey600 dark:text-lmGrey100",children:"Dark Mode"})]})}}),(0,jU.jsx)(rV.Item,{children:e=>{let{active:t}=e;return(0,jU.jsxs)("button",{onClick:()=>i("system"),className:"flex w-full items-center gap-2 rounded-lg px-3 py-2 ".concat(t?"bg-lmGrey50 dark:bg-dmGrey700":"bg-white dark:bg-dmGrey800"," duration-300"),children:[(0,jU.jsx)("i",{className:"fa-solid fa-desktop flex h-[14px] w-[14px] items-center justify-center text-sm  text-lmGrey600 dark:text-lmGrey100"}),(0,jU.jsx)("span",{className:"text-sm text-lmGrey600 dark:text-lmGrey100",children:"System"})]})}})]})})]})}})};var TV=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(TV||{});let PV=QU((function(e,t){let{features:n=1,...r}=e;return WU({ourProps:{ref:t,"aria-hidden":2===(2&n)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4===(4&n)&&2!==(2&n)&&{display:"none"}}},theirProps:r,slot:{},defaultTag:"div",name:"Hidden"})}));var DV=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(DV||{});function kV(){let t=(0,e.useRef)(0);return function(t,n,r){let i=rG(n);(0,e.useEffect)((()=>{function e(e){i.current(e)}return window.addEventListener(t,e,r),()=>window.removeEventListener(t,e,r)}),[t,r])}("keydown",(e=>{"Tab"===e.key&&(t.current=e.shiftKey?1:0)}),!0),t}function OV(t,n,r,i){let o=rG(r);(0,e.useEffect)((()=>{function e(e){o.current(e)}return(t=null!=t?t:window).addEventListener(n,e,i),()=>t.removeEventListener(n,e,i)}),[t,n,i])}function RV(t,n){let r=(0,e.useRef)([]),i=iG(t);(0,e.useEffect)((()=>{let e=[...r.current];for(let[t,o]of n.entries())if(r.current[t]!==o){let t=i(n,e);return r.current=n,t}}),[i,...n])}var IV=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(IV||{});let LV=Object.assign(QU((function(t,n){let r=(0,e.useRef)(null),i=sG(r,n),{initialFocus:o,containers:a,features:s=30,...l}=t;cG()||(s=1);let c=UG(r);!function(t,n){let{ownerDocument:r}=t,i=(0,e.useRef)(null);OV(null==r?void 0:r.defaultView,"focusout",(e=>{!n||i.current||(i.current=e.target)}),!0),RV((()=>{n||((null==r?void 0:r.activeElement)===(null==r?void 0:r.body)&&MG(i.current),i.current=null)}),[n]);let o=(0,e.useRef)(!1);(0,e.useEffect)((()=>(o.current=!1,()=>{o.current=!0,JU((()=>{!o.current||(MG(i.current),i.current=null)}))})),[])}({ownerDocument:c},Boolean(16&s));let u=function(t,n){let{ownerDocument:r,container:i,initialFocus:o}=t,a=(0,e.useRef)(null),s=iV();return RV((()=>{if(!n)return;let e=i.current;!e||JU((()=>{if(!s.current)return;let t=null==r?void 0:r.activeElement;if(null!=o&&o.current){if((null==o?void 0:o.current)===t)return void(a.current=t)}else if(e.contains(t))return void(a.current=t);null!=o&&o.current?MG(o.current):kG(e,bG.First)===wG.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.current=null==r?void 0:r.activeElement}))}),[n]),a}({ownerDocument:c,container:r,initialFocus:o},Boolean(2&s));!function(e,t){let{ownerDocument:n,container:r,containers:i,previousActiveElement:o}=e,a=iV();OV(null==n?void 0:n.defaultView,"focus",(e=>{if(!t||!a.current)return;let n=new Set(null==i?void 0:i.current);n.add(r);let s=o.current;if(!s)return;let l=e.target;l&&l instanceof HTMLElement?function(e,t){var n;for(let r of e)if(null!=(n=r.current)&&n.contains(t))return!0;return!1}(n,l)?(o.current=l,MG(l)):(e.preventDefault(),e.stopPropagation(),MG(s)):MG(o.current)}),!0)}({ownerDocument:c,container:r,containers:a,previousActiveElement:u},Boolean(8&s));let d=kV(),h=iG((()=>{let e=r.current;!e||GU(d.current,{[DV.Forwards]:()=>kG(e,bG.First),[DV.Backwards]:()=>kG(e,bG.Last)})})),f={ref:i};return e.createElement(e.Fragment,null,Boolean(4&s)&&e.createElement(PV,{as:"button",type:"button",onFocus:h,features:TV.Focusable}),WU({ourProps:f,theirProps:l,defaultTag:"div",name:"FocusTrap"}),Boolean(4&s)&&e.createElement(PV,{as:"button",type:"button",onFocus:h,features:TV.Focusable}))})),{features:IV});let NV=new Set,jV=new Map;function BV(e){e.setAttribute("aria-hidden","true"),e.inert=!0}function FV(e){let t=jV.get(e);!t||(null===t["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",t["aria-hidden"]),e.inert=t.inert)}var zV=n(164);let UV=(0,e.createContext)(!1);function GV(){return(0,e.useContext)(UV)}function VV(t){return e.createElement(UV.Provider,{value:t.force},t.children)}let HV=e.Fragment,WV=QU((function(t,n){let r=t,i=(0,e.useRef)(null),o=sG(aG((e=>{i.current=e})),n),a=UG(i),s=function(t){let n=GV(),r=(0,e.useContext)(YV),i=UG(t),[o,a]=(0,e.useState)((()=>{if(!n&&null!==r||tG)return null;let e=null==i?void 0:i.getElementById("headlessui-portal-root");if(e)return e;if(null===i)return null;let t=i.createElement("div");return t.setAttribute("id","headlessui-portal-root"),i.body.appendChild(t)}));return(0,e.useEffect)((()=>{null!==o&&(null!=i&&i.body.contains(o)||null==i||i.body.appendChild(o))}),[o,i]),(0,e.useEffect)((()=>{n||null!==r&&a(r.current)}),[r,a,n]),o}(i),[l]=(0,e.useState)((()=>{var e;return tG?null:null!=(e=null==a?void 0:a.createElement("div"))?e:null})),c=cG(),u=(0,e.useRef)(!1);return nG((()=>{if(u.current=!1,s&&l)return s.contains(l)||(l.setAttribute("data-headlessui-portal",""),s.appendChild(l)),()=>{u.current=!0,JU((()=>{var e;!u.current||!s||!l||(s.removeChild(l),s.childNodes.length<=0&&(null==(e=s.parentElement)||e.removeChild(s)))}))}}),[s,l]),c&&s&&l?(0,zV.createPortal)(WU({ourProps:{ref:o},theirProps:r,defaultTag:HV,name:"Portal"}),l):null})),qV=e.Fragment,YV=(0,e.createContext)(null),XV=QU((function(t,n){let{target:r,...i}=t,o={ref:sG(n)};return e.createElement(YV.Provider,{value:r},WU({ourProps:o,theirProps:i,defaultTag:qV,name:"Popover.Group"}))})),QV=Object.assign(WV,{Group:XV}),KV=(0,e.createContext)(null);function ZV(){let t=(0,e.useContext)(KV);if(null===t){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,ZV),e}return t}let JV=QU((function(e,t){let n=ZV(),r="headlessui-description-".concat(fG()),i=sG(t);nG((()=>n.register(r)),[r,n.register]);let o=e;return WU({ourProps:{ref:i,...n.props,id:r},theirProps:o,slot:n.slot||{},defaultTag:"p",name:n.name||"Description"})})),$V=(0,e.createContext)((()=>{}));$V.displayName="StackContext";var eH=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(eH||{});function tH(t){let{children:n,onUpdate:r,type:i,element:o,enabled:a}=t,s=(0,e.useContext)($V),l=iG((function(){null==r||r(...arguments),s(...arguments)}));return nG((()=>{let e=void 0===a||!0===a;return e&&l(0,i,o),()=>{e&&l(1,i,o)}}),[l,i,o,a]),e.createElement($V.Provider,{value:l},n)}var nH=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(nH||{}),rH=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(rH||{});let iH={0:(e,t)=>e.titleId===t.id?e:{...e,titleId:t.id}},oH=(0,e.createContext)(null);function aH(t){let n=(0,e.useContext)(oH);if(null===n){let e=new Error("<".concat(t," /> is missing a parent <Dialog /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(e,aH),e}return n}function sH(t,n){(0,e.useEffect)((()=>{var e;if(!n||!t)return;let r=$U();function i(e,t,n){let i=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),r.add((()=>{Object.assign(e.style,{[t]:i})}))}let o=t.documentElement,a=(null!=(e=t.defaultView)?e:window).innerWidth-o.clientWidth;if(i(o,"overflow","hidden"),a>0){let e=o.clientWidth-o.offsetWidth;i(o,"paddingRight","".concat(a-e,"px"))}if(/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0){let e=window.pageYOffset;i(o,"position","fixed"),i(o,"marginTop","-".concat(e,"px")),i(o,"width","100%"),r.add((()=>window.scrollTo(0,e)))}return r.dispose}),[t,n])}function lH(e,t){return GU(t.type,iH,e,t)}oH.displayName="DialogContext";let cH=VU.RenderStrategy|VU.Static,uH=QU((function(t,n){let{open:r,onClose:i,initialFocus:o,__demoMode:a=!1,...s}=t,[l,c]=(0,e.useState)(0),u=jG();void 0===r&&null!==u&&(r=GU(u,{[NG.Open]:!0,[NG.Closed]:!1}));let d=(0,e.useRef)(new Set),h=(0,e.useRef)(null),f=sG(h,n),p=(0,e.useRef)(null),m=UG(h),g=t.hasOwnProperty("open")||null!==u,v=t.hasOwnProperty("onClose");if(!g&&!v)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!g)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!v)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if("boolean"!=typeof r)throw new Error("You provided an `open` prop to the `Dialog`, but the value is not a boolean. Received: ".concat(r));if("function"!=typeof i)throw new Error("You provided an `onClose` prop to the `Dialog`, but the value is not a function. Received: ".concat(i));let y=r?0:1,[x,b]=(0,e.useReducer)(lH,{titleId:null,descriptionId:null,panelRef:(0,e.createRef)()}),w=iG((()=>i(!1))),S=iG((e=>b({type:0,id:e}))),_=!!cG()&&(!a&&0===y),A=l>1,E=null!==(0,e.useContext)(oH),C=A?"parent":"leaf";(function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];nG((()=>{if(!t||!e.current)return;let n=e.current,r=yG(n);if(r){NV.add(n);for(let e of jV.keys())e.contains(n)&&(FV(e),jV.delete(e));return r.querySelectorAll("body > *").forEach((e=>{if(e instanceof HTMLElement){for(let t of NV)if(e.contains(t))return;1===NV.size&&(jV.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),BV(e))}})),()=>{if(NV.delete(n),NV.size>0)r.querySelectorAll("body > *").forEach((e=>{if(e instanceof HTMLElement&&!jV.has(e)){for(let t of NV)if(e.contains(t))return;jV.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),BV(e)}}));else for(let e of jV.keys())FV(e),jV.delete(e)}}}),[t])})(h,!!A&&_),RG((()=>{var e,t;return[...Array.from(null!=(e=null==m?void 0:m.querySelectorAll("body > *, [data-headlessui-portal]"))?e:[]).filter((e=>!(!(e instanceof HTMLElement)||e.contains(p.current)||x.panelRef.current&&e.contains(x.panelRef.current)))),null!=(t=x.panelRef.current)?t:h.current]}),w,_&&!A),OV(null==m?void 0:m.defaultView,"keydown",(e=>{e.defaultPrevented||e.key===pG.Escape&&0===y&&(A||(e.preventDefault(),e.stopPropagation(),w()))})),sH(m,0===y&&!E),(0,e.useEffect)((()=>{if(0!==y||!h.current)return;let e=new IntersectionObserver((e=>{for(let t of e)0===t.boundingClientRect.x&&0===t.boundingClientRect.y&&0===t.boundingClientRect.width&&0===t.boundingClientRect.height&&w()}));return e.observe(h.current),()=>e.disconnect()}),[y,h,w]);let[M,T]=function(){let[t,n]=(0,e.useState)([]);return[t.length>0?t.join(" "):void 0,(0,e.useMemo)((()=>function(t){let r=iG((e=>(n((t=>[...t,e])),()=>n((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),i=(0,e.useMemo)((()=>({register:r,slot:t.slot,name:t.name,props:t.props})),[r,t.slot,t.name,t.props]);return e.createElement(KV.Provider,{value:i},t.children)}),[n])]}(),P="headlessui-dialog-".concat(fG()),D=(0,e.useMemo)((()=>[{dialogState:y,close:w,setTitleId:S},x]),[y,x,w,S]),k=(0,e.useMemo)((()=>({open:0===y})),[y]),O={ref:f,id:P,role:"dialog","aria-modal":0===y||void 0,"aria-labelledby":x.titleId,"aria-describedby":M};return e.createElement(tH,{type:"Dialog",enabled:0===y,element:h,onUpdate:iG(((e,t,n)=>{"Dialog"===t&&GU(e,{[eH.Add](){d.current.add(n),c((e=>e+1))},[eH.Remove](){d.current.add(n),c((e=>e-1))}})}))},e.createElement(VV,{force:!0},e.createElement(QV,null,e.createElement(oH.Provider,{value:D},e.createElement(QV.Group,{target:h},e.createElement(VV,{force:!1},e.createElement(T,{slot:k,name:"Dialog.Description"},e.createElement(LV,{initialFocus:o,containers:d,features:_?GU(C,{parent:LV.features.RestoreFocus,leaf:LV.features.All&~LV.features.FocusLock}):LV.features.None},WU({ourProps:O,theirProps:s,slot:k,defaultTag:"div",features:cH,visible:0===y,name:"Dialog"})))))))),e.createElement(PV,{features:TV.Hidden,ref:p}))})),dH=QU((function(t,n){let[{dialogState:r,close:i}]=aH("Dialog.Overlay"),o=sG(n),a="headlessui-dialog-overlay-".concat(fG()),s=iG((e=>{if(e.target===e.currentTarget){if(vG(e.currentTarget))return e.preventDefault();e.preventDefault(),e.stopPropagation(),i()}}));return WU({ourProps:{ref:o,id:a,"aria-hidden":!0,onClick:s},theirProps:t,slot:(0,e.useMemo)((()=>({open:0===r})),[r]),defaultTag:"div",name:"Dialog.Overlay"})})),hH=QU((function(t,n){let[{dialogState:r},i]=aH("Dialog.Backdrop"),o=sG(n),a="headlessui-dialog-backdrop-".concat(fG());(0,e.useEffect)((()=>{if(null===i.panelRef.current)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")}),[i.panelRef]);let s=(0,e.useMemo)((()=>({open:0===r})),[r]);return e.createElement(VV,{force:!0},e.createElement(QV,null,WU({ourProps:{ref:o,id:a,"aria-hidden":!0},theirProps:t,slot:s,defaultTag:"div",name:"Dialog.Backdrop"})))})),fH=QU((function(t,n){let[{dialogState:r},i]=aH("Dialog.Panel"),o=sG(n,i.panelRef),a="headlessui-dialog-panel-".concat(fG()),s=(0,e.useMemo)((()=>({open:0===r})),[r]),l=iG((e=>{e.stopPropagation()}));return WU({ourProps:{ref:o,id:a,onClick:l},theirProps:t,slot:s,defaultTag:"div",name:"Dialog.Panel"})})),pH=QU((function(t,n){let[{dialogState:r,setTitleId:i}]=aH("Dialog.Title"),o="headlessui-dialog-title-".concat(fG()),a=sG(n);(0,e.useEffect)((()=>(i(o),()=>i(null))),[o,i]);let s=(0,e.useMemo)((()=>({open:0===r})),[r]);return WU({ourProps:{ref:a,id:o},theirProps:t,slot:s,defaultTag:"h2",name:"Dialog.Title"})})),mH=Object.assign(uH,{Backdrop:hH,Panel:fH,Overlay:dH,Title:pH,Description:JV});const gH=()=>(0,jU.jsx)("div",{className:"flex w-[360px] px-10 py-2 ",children:(0,jU.jsx)("div",{className:"h-[1px] w-full rounded-full bg-lmGrey300 dark:bg-dmGrey600"})}),vH=e=>{let{signedIn:t,handleClickNavigation:n}=e;const r=Ue();return(0,jU.jsxs)("div",{className:"flex w-[360px] flex-col gap-y-2 px-8 py-3 text-lmGrey400 dark:text-dmGrey100",children:[(0,jU.jsx)("span",{className:"text-sm font-semibold",children:"Menu"}),(0,jU.jsxs)("div",{onClick:()=>n("/homepage"),className:"flex cursor-pointer items-center gap-x-2 rounded-lg text-base duration-300 hover:bg-white dark:hover:bg-dmGrey800",children:[(0,jU.jsx)("div",{className:"fa-solid fa-house flex h-11 w-11 items-center justify-center text-[18px]"}),(0,jU.jsx)("span",{children:"Homepage"})]}),(0,jU.jsxs)("div",{onClick:()=>n("/explore/map"),className:"flex cursor-pointer items-center gap-x-2 rounded-lg text-base duration-300 hover:bg-white dark:hover:bg-dmGrey800",children:[(0,jU.jsx)("div",{className:"fa-solid fa-map flex h-11 w-11 items-center justify-center text-[18px]"}),(0,jU.jsx)("span",{children:"Explore Map"})]}),(0,jU.jsxs)("div",{onClick:()=>n("/explore/catalog"),className:"flex cursor-pointer items-center gap-x-2 rounded-lg text-base duration-300 hover:bg-white dark:hover:bg-dmGrey800",children:[(0,jU.jsx)("div",{className:"fa-solid fa-list flex h-11 w-11 items-center justify-center text-[18px]"}),(0,jU.jsx)("span",{children:"Explore Catalog"})]}),(0,jU.jsxs)("div",{onClick:()=>n("/favorites"),className:"flex cursor-pointer items-center gap-x-2 rounded-lg text-base duration-300 hover:bg-white dark:hover:bg-dmGrey800",children:[(0,jU.jsx)("div",{className:"fa-solid fa-heart flex h-11 w-11 items-center justify-center text-[18px]"}),(0,jU.jsx)("span",{children:"Favorites"})]}),(0,jU.jsxs)("div",{onClick:()=>n("/user-offers"),className:"flex cursor-pointer items-center gap-x-2 rounded-lg text-base duration-300 hover:bg-white dark:hover:bg-dmGrey800",children:[(0,jU.jsx)("div",{className:"fa-solid fa-file flex h-11 w-11 items-center justify-center text-[18px]"}),(0,jU.jsx)("span",{children:"Your Offers"})]}),(0,jU.jsxs)("div",{onClick:()=>n("/upload"),className:"flex cursor-pointer items-center gap-x-2 rounded-lg text-base duration-300 hover:bg-white dark:hover:bg-dmGrey800",children:[(0,jU.jsx)("div",{className:"fa-solid fa-plus flex h-11 w-11 items-center justify-center text-[18px]"}),(0,jU.jsx)("span",{children:"Upload"})]}),(0,jU.jsxs)("div",{onClick:()=>n("/chat"),className:"flex cursor-pointer items-center gap-x-2 rounded-lg text-base duration-300 hover:bg-white dark:hover:bg-dmGrey800",children:[(0,jU.jsx)("div",{className:"fa-solid fa-comments flex h-11 w-11 items-center justify-center text-[18px]"}),(0,jU.jsx)("span",{children:"Chats"})]}),(0,jU.jsxs)("div",{onClick:()=>n("/profile"),className:"flex cursor-pointer items-center gap-x-2 rounded-lg text-base duration-300 hover:bg-white dark:hover:bg-dmGrey800",children:[(0,jU.jsx)("div",{className:"fa-solid fa-user flex h-11 w-11 items-center justify-center text-[18px]"}),(0,jU.jsx)("span",{children:"Your Profile"})]}),(0,jU.jsxs)("div",{onClick:()=>{"/sign-in"===r.pathname?n("sign-up"):("/sign-up"===r.pathname||r.pathname,n("sign-in"))},className:"flex cursor-pointer items-center gap-x-2 rounded-lg text-base duration-300 hover:bg-white dark:hover:bg-dmGrey800",children:[(0,jU.jsx)("div",{className:"fa-solid ".concat(t&&"/sign-in"!==r.pathname&&"/sign-up"!==r.pathname&&"forgot-password"===r.pathname&&"rotate-180"," fa-right-from-bracket flex h-11 w-11 items-center justify-center text-[18px]")}),(0,jU.jsxs)("span",{children:["Sign"," ","/sign-in"===r.pathname?"Up":"/sign-up"===r.pathname||"forgot-password"===r.pathname?"In":t?"Out":"In"]})]})]})},yH=e=>{let{handleClickNavigation:t}=e;return(0,jU.jsxs)("div",{className:"flex w-[360px] flex-col gap-y-2 py-3 px-8",children:[(0,jU.jsx)("span",{className:"text-sm font-semibold text-lmGrey400 dark:text-dmGrey100",children:"Message"}),(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-2 rounded-xl bg-white p-3 text-sm text-lmGrey500 dark:bg-dmGrey900 dark:text-dmGrey100",children:[(0,jU.jsxs)("div",{onClick:()=>t("/chat"),className:"flex w-full cursor-pointer items-center gap-x-2 rounded-lg bg-white px-4 py-2 duration-300 hover:bg-lmGrey50 dark:bg-dmGrey900 dark:hover:bg-dmGrey800",children:[(0,jU.jsx)("div",{className:"h-11 w-11 min-w-[44px] rounded-full bg-lmPrimary bg-cover bg-center",style:{backgroundImage:"url(https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1160&q=80)"}}),(0,jU.jsx)("span",{className:"w-full",children:"Gustavo Bravo"}),(0,jU.jsx)("div",{className:"min-w-6 flex h-6 items-center justify-center",children:(0,jU.jsx)("div",{className:"h-2 w-2 rounded-full bg-lmPrimary"})})]}),(0,jU.jsxs)("div",{onClick:()=>t("/chat"),className:"flex w-full cursor-pointer items-center gap-x-2 rounded-lg bg-white px-4 py-2 duration-300 hover:bg-lmGrey50 dark:bg-dmGrey900 dark:hover:bg-dmGrey800",children:[(0,jU.jsx)("div",{className:"h-11 w-11 min-w-[44px] rounded-full bg-lmPrimary bg-cover bg-center",style:{backgroundImage:"url(https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80)"}}),(0,jU.jsx)("span",{className:"w-full",children:"Alina Mertens"}),(0,jU.jsx)("div",{className:"min-w-6 flex h-6 items-center justify-center",children:(0,jU.jsx)("div",{className:"h-2 w-2 rounded-full bg-lmPrimary"})})]}),(0,jU.jsxs)("div",{onClick:()=>t("/chat"),className:"flex w-full cursor-pointer items-center gap-x-2 rounded-lg bg-white px-4 py-2 duration-300 hover:bg-lmGrey50 dark:bg-dmGrey900 dark:hover:bg-dmGrey800",children:[(0,jU.jsx)("div",{className:"h-11 w-11 min-w-[44px] rounded-full bg-lmPrimary bg-cover bg-center",style:{backgroundImage:"url(https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2264&q=80)"}}),(0,jU.jsx)("span",{className:"w-full",children:"Nele Langrock"}),(0,jU.jsx)("div",{className:"min-w-6 flex h-6 items-center justify-center"})]}),(0,jU.jsxs)("div",{onClick:()=>t("/chat"),className:"flex w-full cursor-pointer items-center gap-x-2 rounded-lg bg-white px-4 py-2 duration-300 hover:bg-lmGrey50 dark:bg-dmGrey900 dark:hover:bg-dmGrey800",children:[(0,jU.jsx)("div",{className:"h-11 w-11 min-w-[44px] rounded-full bg-lmPrimary bg-cover bg-center",style:{backgroundImage:"url(https://images.unsplash.com/photo-1580489944761-15a19d654956?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2261&q=80)"}}),(0,jU.jsx)("span",{className:"w-full",children:"Olivia Kahn"}),(0,jU.jsx)("div",{className:"min-w-6 flex h-6 items-center justify-center"})]})]})]})},xH=[{title:"Create a new account"},{title:"Confirm your Email Address"},{title:"Your new Password"},{title:"Almost finished"},{title:"Last step, promised \ud83e\udd1e"}],bH=[{title:"Forgot your password?",btnTitle:"Send Email"},{title:"Reset your password",btnTitle:"Reset password"}],wH={list:["Berlin","Dresden","Cologne","Munich","Paris","New York"]},SH={condition:{title:"Condition",value:"Very Good",icon:"fa-solid fa-car-on"},transmission:{title:"Transmission",value:"Manual",icon:"fa-solid fa-gears"},fuelType:{title:"Fuel Type",value:"Gas",icon:"fa-solid fa-gas-pump"},carType:{title:"Car Type",value:"Oldtimer",icon:"fa-solid fa-car"},milage:{title:"Milage",value:"250.000",icon:"fa-solid fa-gauge"},color:{title:"Color",value:"White",icon:"fa-solid fa-palette"},trunkVolume:{title:"Trunk Volume",value:"4 Suitcases",icon:"fa-solid fa-suitcase"},seats:{title:"Seats",value:"5 Seats",icon:"fa-solid fa-chair"},smoking:{title:"Smoking",value:"Yes",icon:"fa-solid fa-smoking"},eating:{title:"Eating",value:"No",icon:"fa-solid fa-utensils"},placeholderOne:{title:"",value:"",icon:""},placeholderTwo:{title:"",value:"",icon:""}},_H=["transmission","fuelType","color","trunkVolume","seats","smoking"],AH={label:null,icon:"fa-solid fa-utensils",placeholder:"Eating allowed?",list:["Yes","No"]},EH={label:null,icon:"fa-solid fa-car",placeholder:"Which transmission?",list:["Coupe","Sedan","SUV","Hatchback","Sport","Minivan"]},CH={label:null,icon:"fa-solid fa-gears",placeholder:"Which transmission?",list:["Automatic","Manual"]},MH={label:null,icon:"fa-solid fa-gas-pump",placeholder:"Which fuel type?",list:["Diesel","Gas","Electro"]},TH={label:null,icon:"fa-solid fa-chair",placeholder:"How many seats?",list:["2 seats","3 seats","4 seats","5 seats","6 seats","7 seats"]},PH={label:null,icon:"fa-solid fa-suitcase",placeholder:"How much trunk volume?",list:["3 suitcases","4 suitcases","5 suitcases","6 suitcases","7 suitcases","8 suitcases"]},DH={label:null,icon:"fa-solid fa-palette",placeholder:"Which color?",list:["Yellow","Green","Blue","Violet","Red","Orange","White","Black"]},kH={label:null,icon:"fa-solid fa-smoking",placeholder:"Smoking allowed?",list:["Yes","No"]},OH={transmissionSelect:{...CH},fuelSelect:{...MH},seatSelect:{...TH},trunkSelect:{...PH},colorSelect:{...DH},smokingSelect:{...kH}},RH={photoUrl:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofilePic.webp?alt=media&token=6c64dddf-daf8-4d44-9b88-b2d8dd58be4a",firstName:"Meggle",lastName:"Bande",birthday:"2001/10/21",email:"megglebande@web.de",joined:"July 2021",reviewsCount:"125",identityVerified:!0},IH={totalAmount:102,ratingDetailed:{ratingFive:24,ratingFour:46,ratingThree:10,ratingTwo:2,ratingOne:20}},LH=[{displayName:"Gustavo Bravo",userId:"3985235c-702a-44be-943f-6a58045d273c",userProfilePicture:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileGustavoBravo.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",timestamp:"5. July 2022",rating:4,reviewContent:"Tortor mi adipiscing et enim arcu cursus. Faucibus ac auctor commodo lobortis egestas convallis. Morbi scelerisque diam porta pellentesque. Vel vitae, justo, dui vel in praesent."},{displayName:"Alina Mertens",userId:"713376b8-bc65-4709-9e69-cf45c5c7bb37",userProfilePicture:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileAlinaMertens.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",timestamp:"8. April 2022",rating:3,reviewContent:"Proin sed mauris faucibus malesuada. Leo tincidunt tortor lectus sagittis, neque. Viverra mi vulputate quis amet neque tempor vitae nam nisi. Nulla sodales maecenas feugiat feugiat pellentesque sed. Faucibus posuere diam nibh odio non sed et egestas lectus. Tellus at ac dictum gravida viverra pellentesque arcu."},{displayName:"Maria Bierhoff",userId:"79598150-5d15-4542-9808-c8743fef26aa",userProfilePicture:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileMariaBierhoff.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",timestamp:"4. April 2022",rating:5,reviewContent:"Lobortis pellentesque non leo ac lorem interdum odio. Donec facilisi ut egestas commodo viverra pulvinar commodo."},{displayName:"Nele Langrock",userId:"58be4286-ee5b-4c00-8ade-3019f744de20",userProfilePicture:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileNeleLangrock.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",timestamp:"18. April 2022",rating:4,reviewContent:"Augue fringilla viverra id tristique malesuada cras urna. A mi elementum ultrices bibendum mi sed turpis."}],NH={...IH,reviews:LH},jH={name:"Tesla Model 3",location:"Salzburger Stra\xdfe 18",priceDay:"30",priceWeek:"150",priceMonth:"600",transmission:"Automatic",seats:5},BH={label:null,icon:"fa-solid fa-person",placeholder:"Gender",list:["Male","feMale","Divers"]},FH=[{id:1,owner:!1,text:"Nibh venenatis eleifend turpis arcu eget. Urna, viverra dignissim nulla aliquet suspendisse a."},{id:2,owner:!0,text:"Dolor risus, risus non rhoncus, leo sed platea sed. Tellus in convallis sagittis, risus accumsan sed orci, mattis blandit. Bibendum elementum ultrices nulla dictumst rhoncus, mauris, tristique justo."},{id:3,owner:!1,text:"Nam quis faucibus consequat auctor."},{id:4,owner:!1,text:"Neque sed molestie orci ut. Et diam vel vitae tristique amet aliquet at."},{id:5,owner:!0,text:"Suscipit dictum fusce posuere ullamcorper integer sed. Praesent praesent montes, nisi, et elementum urna."},{id:6,owner:!1,text:"Sed nisl, ullamcorper amet molestie massa, accumsan."},{id:7,owner:!0,text:"Consectetur leo lorem facilisis urna consectetur tellus. Et, porttitor eget suspendisse arcu sem commodo."},{id:8,owner:!0,text:"Faucibus mollis porttitor est in eleifend convallis."},{id:9,owner:!1,text:"Nibh venenatis eleifend turpis arcu eget. Urna, viverra dignissim nulla aliquet suspendisse a."}],zH=[{chatId:"9575065e-659f-46a8-b021-20b284f4c406",newMsg:!0,lastMsg:"Thank your for the offer but no thanks.",displayName:"Nele Langrock",photoUrl:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2264&q=80"},{chatId:"4cc0d8da-004d-4348-8651-24da06414dbd",newMsg:!0,lastMsg:"Bye bye.",displayName:"Adiana Hall",photoUrl:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80"},{chatId:"96c9653b-c546-4207-91fc-3cbcfb297326",newMsg:!1,lastMsg:"Hey, can we talk about your latest offer.",displayName:"Olaf Koch",photoUrl:"https://images.unsplash.com/photo-1580489944761-15a19d654956?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2261&q=80"},{chatId:"e569a76d-c4b6-4f14-94fd-ed652a42eb47",newMsg:!0,lastMsg:"Nice offer",displayName:"Belarin Paul",photoUrl:"https://images.unsplash.com/photo-1570295999919-56ceb5ecca61?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1160&q=80"},{chatId:"e7127111-348e-4909-aab6-c3ca70ed16a1",newMsg:!1,lastMsg:"Lets meet in the middle!",displayName:"Richard Mitschel",photoUrl:"https://images.unsplash.com/photo-1542909168-82c3e7fdca5c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1180&q=80"}],UH=[{name:"VW Golf",extraInfo:"Blandit facilisis viverra etiam ut ultrices feugiat commodo amet ullamcorper. Nulla volutpat at praesent faucibus. Risus pulvinar purus a id urna sed risus.",offerId:"ec641c7b-5a7e-421d-ac5a-fa915c65cb54",location:{lat:52.4199,lng:13.29384,street:"Goerzallee",number:156,city:"Berlin",state:"Berlin",country:"Germany",formatted:"Goerzallee 156"},price:{day:30,week:250,month:400},calendar:{startDate:"13.03.2023",endDate:"23.03.2023"},carSpecs:{condition:"Very Good",transmission:"Manual",fuelType:"Gas",carType:"Sedan",milage:3e4,color:"Blue",trunkVolume:4,seats:5,smoking:!1,eating:!1},ownerId:"85c48b9a-32f8-4279-9c89-3a459455d994",ratingId:"",status:"Active",liked:!0,photoUrl:["https://images.unsplash.com/photo-1666346167029-d8bf4466fab3?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=930&q=80","https://images.unsplash.com/photo-1666346166820-67cc5ccdd678?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=928&q=80","https://images.unsplash.com/photo-1666346166850-e5ee1857ea18?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80","https://images.unsplash.com/photo-1666346166835-a70595660aca?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=928&q=80","https://images.unsplash.com/photo-1666346166849-8443c47f50fa?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=930&q=80"]},{name:"Ford Focus",extraInfo:"Blandit facilisis viverra etiam ut ultrices feugiat commodo amet ullamcorper. Nulla volutpat at praesent faucibus. Risus pulvinar purus a id urna sed risus.",offerId:"4469d428-3ee6-42a3-ad96-a5e42b481379",location:{lat:52.4168112,lng:13.2896103,street:"Goerzallee",number:189,city:"Berlin",state:"Berlin",country:"Germany",formatted:"Goerzallee 189"},price:{day:50,week:300,month:700},calendar:{startDate:"15.03.2023",endDate:"20.03.2023"},carSpecs:{condition:"Very Good",transmission:"Manual",fuelType:"Gas",carType:"Sedan",milage:45400,color:"White",trunkVolume:4,seats:5,smoking:!0,eating:!1},ownerId:"ae5cdceb-1e5b-4b84-9bab-bab3d55a1abb",ratingId:"",status:"Reserved",liked:!1,photoUrl:["https://images.unsplash.com/photo-1610535650161-21e7f7ffea31?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=654&q=80","https://images.unsplash.com/photo-1610535650181-314c70b5dfe4?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=654&q=80","https://images.unsplash.com/photo-1610535650139-67895955fe3c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=654&q=80","https://images.unsplash.com/photo-1610535650136-df6ca3e6f796?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=654&q=80","https://images.unsplash.com/photo-1610535650134-781e16f4648f?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=654&q=80"]},{name:"VW Tiguan",extraInfo:"Blandit facilisis viverra etiam ut ultrices feugiat commodo amet ullamcorper. Nulla volutpat at praesent faucibus. Risus pulvinar purus a id urna sed risus.",offerId:"a36e91f5-c9f3-4bc1-9b26-08099879303c",location:{lat:52.4182,lng:13.29016,street:"Kolonie Parkkol. Amselweg",number:935,city:"Berlin",state:"Berlin",country:"Germany",formatted:"Kolonie Parkkol. Amselweg 935"},price:{day:35,week:260,month:400},calendar:{startDate:"01.03.2023",endDate:"13.05.2023"},carSpecs:{condition:"Good",transmission:"Automatic",fuelType:"Electro",carType:"Sedan",milage:45e3,color:"Black",trunkVolume:4,seats:5,smoking:!0,eating:!0},ownerId:"505616ab-eb1e-45d3-b83f-13bcc11e94c4",ratingId:"",status:"Active",liked:!0,photoUrl:["https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fyee.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-8b6XX81mj9s-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-JcGztSmOrzc-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-OiHz7yru4o0-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-CMj1OjV7-gA-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd"]},{name:"Skoda Octavia",extraInfo:"Blandit facilisis viverra etiam ut ultrices feugiat commodo amet ullamcorper. Nulla volutpat at praesent faucibus. Risus pulvinar purus a id urna sed risus.",offerId:"cc4ae289-e33b-4db7-b0a2-1760bf586121",location:{lat:52.418,lng:13.28999,street:"Lichterfelder Weg",number:932,city:"Berlin",state:"Berlin",country:"Germany",formatted:"Lichterfelder Weg 932"},price:{day:120,week:300,month:720},calendar:{startDate:"26.03.2023",endDate:"15.04.2023"},carSpecs:{condition:"Reliable",transmission:"Manual",fuelType:"Gas",carType:"Sedan",milage:12e4,color:"Green",trunkVolume:6,seats:5,smoking:!0,eating:!0},ownerId:"56891419-1d0c-4244-b793-124af05b6517",ratingId:"",status:"Active",liked:!1,photoUrl:["https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fyee.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-8b6XX81mj9s-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-JcGztSmOrzc-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-OiHz7yru4o0-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-CMj1OjV7-gA-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd"]},{name:"VW Passat",extraInfo:"Blandit facilisis viverra etiam ut ultrices feugiat commodo amet ullamcorper. Nulla volutpat at praesent faucibus. Risus pulvinar purus a id urna sed risus.",offerId:"6752948f-37fe-4913-8f9a-be23e01bcbc0",location:{lat:52.4184817,lng:13.2857082,street:"Billy-Wilder-Promenade",number:42,city:"Berlin",state:"Berlin",country:"Germany",formatted:"Billy-Wilder-Promenade 42"},price:{day:60,week:320,month:760},calendar:{startDate:"10.06.2023",endDate:"29.06.2023"},carSpecs:{condition:"Very Good",transmission:"Manual",fuelType:"Gas",carType:"Sedan",milage:8e4,color:"Blue",trunkVolume:4,seats:6,smoking:!0,eating:!1},ownerId:"ae5cdceb-1e5b-4b84-9bab-bab3d55a1abb",ratingId:"",status:"Active",liked:!0,photoUrl:["https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fyee.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-8b6XX81mj9s-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-JcGztSmOrzc-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-OiHz7yru4o0-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-CMj1OjV7-gA-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd"]},{name:"Opel Corsea",extraInfo:"Blandit facilisis viverra etiam ut ultrices feugiat commodo amet ullamcorper. Nulla volutpat at praesent faucibus. Risus pulvinar purus a id urna sed risus.",offerId:"85b76ab2-3cb1-4da2-9a3a-e712b4c4ef73",location:{lat:52.41673,lng:13.28629,street:"Am Stichkanal",number:1,city:"Berlin",state:"Berlin",country:"Germany",formatted:"Am Stichkanal 1"},price:{day:60,week:240,month:540},calendar:{startDate:"13.03.2023",endDate:"13.04.2023"},carSpecs:{condition:"Fair",transmission:"Manual",fuelType:"Gas",carType:"Hatchback",milage:230100,color:"White",trunkVolume:4,seats:5,smoking:!0,eating:!1},ownerId:"56891419-1d0c-4244-b793-124af05b6517",ratingId:"",status:"Active",liked:!0,photoUrl:["https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fyee.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-8b6XX81mj9s-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-JcGztSmOrzc-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-OiHz7yru4o0-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-CMj1OjV7-gA-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd"]},{name:"VW T-Roc",extraInfo:"Blandit facilisis viverra etiam ut ultrices feugiat commodo amet ullamcorper. Nulla volutpat at praesent faucibus. Risus pulvinar purus a id urna sed risus.",offerId:"da0d15a5-a42d-49c1-8694-0ce3078462ee",location:{lat:52.520008,lng:13.404954,street:"Harry-S.-Truman-Allee",number:27,city:"Berlin",state:"Berlin",country:"Germany",formatted:"Harry-S.-Truman-Allee 27"},price:{day:34,week:160,month:420},calendar:{startDate:"18.02.2023",endDate:"23.03.2023"},carSpecs:{condition:"Very Good",transmission:"Manual",fuelType:"Diesel",carType:"Hatchback",milage:135e3,color:"White",trunkVolume:4,seats:5,smoking:!0,eating:!1},ownerId:"505616ab-eb1e-45d3-b83f-13bcc11e94c4",ratingId:"",status:"Active",liked:!0,photoUrl:["https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fyee.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-8b6XX81mj9s-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-JcGztSmOrzc-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-OiHz7yru4o0-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-CMj1OjV7-gA-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd"]},{name:"BMW 3-Series",extraInfo:"Blandit facilisis viverra etiam ut ultrices feugiat commodo amet ullamcorper. Nulla volutpat at praesent faucibus. Risus pulvinar purus a id urna sed risus.",offerId:"506a01d3-322b-47f0-9e7e-62250e882776",location:{lat:52.41904,lng:13.29453,street:"Drei-Zinnen-Weg",number:5,city:"Berlin",state:"Berlin",country:"Germany",formatted:"Drei-Zinnen-Weg 5"},price:{day:70,week:200,month:400},calendar:{startDate:"03.03.2023",endDate:"18.03.2023"},carSpecs:{condition:"Very Good",transmission:"Diesel",fuelType:"Gas",carType:"Sport",milage:145200,color:"black",trunkVolume:3,seats:5,smoking:!1,eating:!1},ownerId:"85c48b9a-32f8-4279-9c89-3a459455d994",ratingId:"",status:"Active",liked:!1,photoUrl:["https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fyee.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-8b6XX81mj9s-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-JcGztSmOrzc-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-OiHz7yru4o0-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-CMj1OjV7-gA-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd"]},{name:"VW Polo",extraInfo:"Blandit facilisis viverra etiam ut ultrices feugiat commodo amet ullamcorper. Nulla volutpat at praesent faucibus. Risus pulvinar purus a id urna sed risus.",offerId:"18c430f6-c1ba-466e-8397-53cbd3608293",location:{lat:52.41914,lng:13.29396,street:"Lichterfelder Weg",number:3,city:"Berlin",state:"Berlin",country:"Germany",formatted:"Lichterfelder Weg 3"},price:{day:100,week:300,month:700},calendar:{startDate:"01.06.2023",endDate:"28.06.2023"},carSpecs:{condition:"Fair",transmission:"Automatic",fuelType:"Electro",carType:"Coupe",milage:63e3,color:"white",trunkVolume:4,seats:6,smoking:!0,eating:!1},ownerId:"ae5cdceb-1e5b-4b84-9bab-bab3d55a1abb",ratingId:"",status:"Active",liked:!1,photoUrl:["https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fyee.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-8b6XX81mj9s-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-JcGztSmOrzc-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-OiHz7yru4o0-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-CMj1OjV7-gA-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd"]},{name:"BMW Mini",extraInfo:"Blandit facilisis viverra etiam ut ultrices feugiat commodo amet ullamcorper. Nulla volutpat at praesent faucibus. Risus pulvinar purus a id urna sed risus.",offerId:"154eb406-9729-4435-902e-25df689762f0",location:{lat:52.4157479,lng:13.2866306,street:"Am Stichkanal",number:10,city:"Berlin",state:"Berlin",country:"Germany",formatted:"Am Stichkanal 10"},price:{day:25,week:100,month:300},calendar:{startDate:"04.04.2023",endDate:"04.10.2023"},carSpecs:{condition:"Very Good",transmission:"Automatic",fuelType:"Electro",carType:"Coupe",milage:13e3,color:"black",trunkVolume:3,seats:2,smoking:!0,eating:!0},ownerId:"56891419-1d0c-4244-b793-124af05b6517",ratingId:"",status:"Active",liked:!0,photoUrl:["https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fyee.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-8b6XX81mj9s-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-JcGztSmOrzc-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-OiHz7yru4o0-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-CMj1OjV7-gA-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd"]},{name:"Toyota Yaris",extraInfo:"Blandit facilisis viverra etiam ut ultrices feugiat commodo amet ullamcorper. Nulla volutpat at praesent faucibus. Risus pulvinar purus a id urna sed risus.",offerId:"0c4441e3-e6e1-4010-a319-4946349df0f2",location:{lat:52.4204147,lng:13.2839802,street:"Harry-S.-Truman-Allee",number:3,city:"Berlin",state:"Berlin",country:"Germany",formatted:"Harry-S.-Truman-Allee 3"},price:{day:30,week:140,month:380},calendar:{startDate:"12.03.2023",endDate:"20.03.2023"},carSpecs:{condition:"Fair",transmission:"Manual",fuelType:"Diesel",carType:"Minivan",milage:44e3,color:"white",trunkVolume:3,seats:5,smoking:!0,eating:!0},ownerId:"85c48b9a-32f8-4279-9c89-3a459455d994",ratingId:"",status:"Active",liked:!1,photoUrl:["https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fyee.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-8b6XX81mj9s-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-JcGztSmOrzc-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-OiHz7yru4o0-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-CMj1OjV7-gA-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd"]},{name:"Renault Clio",extraInfo:"Blandit facilisis viverra etiam ut ultrices feugiat commodo amet ullamcorper. Nulla volutpat at praesent faucibus. Risus pulvinar purus a id urna sed risus.",offerId:"58f2899f-85d3-46fa-a0d3-99a0eae2f07d",location:{lat:52.4206,lng:13.29398,street:" Kolonie Parkkol. Elsternweg",number:797,city:"Berlin",state:"Berlin",country:"Germany",formatted:" Kolonie Parkkol. Elsternweg 797"},price:{day:38,week:110,month:200},calendar:{startDate:"24.03.2023",endDate:"24.04.2023"},carSpecs:{condition:"Very Good",transmission:"Manual",fuelType:"Gas",carType:"Sedan",milage:355530,color:"Green",trunkVolume:4,seats:5,smoking:!0,eating:!0},ownerId:"ae5cdceb-1e5b-4b84-9bab-bab3d55a1abb",ratingId:"",status:"Active",liked:!1,photoUrl:["https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fyee.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-8b6XX81mj9s-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-JcGztSmOrzc-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-OiHz7yru4o0-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-CMj1OjV7-gA-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd"]}],GH=["search","startDate","endDate","startPriceDay","endPriceDay","startPriceWeek","endPriceWeek","endPriceMonth","startPriceMonth","color","fuelType","seats","smoking","transmission","trunkVolume"],VH=[{name:"Explore",linkTo:"explore"},{name:"Chat",linkTo:"chat"},{name:"Most Viewed",linkTo:"mostViewed"},{name:"About",linkTo:"about"}],HH={name:"VW Golf",extraInfo:"Blandit facilisis viverra etiam ut ultrices feugiat commodo amet ullamcorper. Nulla volutpat at praesent faucibus. Risus pulvinar purus a id urna sed risus.",offerId:"ec641c7b-5a7e-421d-ac5a-fa915c65cb54",location:{lat:52.4199,lng:13.29384,street:"Goerzallee",houseNumber:156,city:"Berlin",country:"Germany",formatted:"Goerzallee 156"},price:{day:30,week:250,month:400},calendar:{startDate:"13.03.2023",endDate:"23.03.2023"},carSpecs:{condition:{name:"Condition",value:"Very Good"},transmission:{name:"Transmission",value:"Manual"},fuelType:{name:"Fuel Type",value:"Gas"},carType:{name:"Car Type",value:"Sedan"},milage:{name:"Milage",value:3e4},color:{name:"Color",value:"Blue"},trunkVolume:{name:"Trunk Volume",value:4},seats:{name:"Seats",value:5},smoking:{name:"Smoking",value:"No"},eating:{name:"Eating",value:"No"}},ownerId:"85c48b9a-32f8-4279-9c89-3a459455d994",ratingId:"9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d",status:"Active",photoUrl:["https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fyee.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-8b6XX81mj9s-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-JcGztSmOrzc-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-OiHz7yru4o0-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd","https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/offers%2Fec641c7b-5a7e-421d-ac5a-fa915c65cb54%2Fmartin-katler-CMj1OjV7-gA-unsplash.webp?alt=media&token=587f6df7-dce3-46fb-9273-baa9196ee1dd"]},WH=()=>({carSpecData:SH,previewSpecs:_H,filterSelects:OH,filterTypes:GH,userProfileBig:RH,reviews:LH,reviewRating:IH,carTypeSelect:EH,transmissionSelect:CH,colorSelect:DH,fuelSelect:MH,trunkSelect:PH,seatSelect:TH,reviewId:NH,offerCard:jH,genderSelect:BH,eatingSelect:AH,smokingSelect:kH,signUpRounds:xH,forgotPasswordRounds:bH,citiesAutocomplete:wH,messages:FH,chatPreviews:zH,exampleOffers:UH,navbarLinks:VH,firestoreFormattedOffer:HH}),qH={tag10:"text-[10px] text-lightTextCol font-semibold font-sourceSans",lightModeBorder:"border border-solid border-lmGrey100",darkModeBorder:"dark:border dark:border-solid dark:border-dmGrey800/50 dark:shadow-md",LmDmHoverBorder:"border border-solid border-lmGrey100 dark:border dark:border-solid dark:border-dmGrey900 hover:border-lmGrey300 dark:hover:border-dmGrey700"},YH=e=>{let{type:t,title:n,icon:r,onClick:i,onSubmit:o,uiType:a}=e;return(0,jU.jsxs)("button",{onClick:()=>void 0!==i&&i(),onSubmit:()=>void 0!==o&&o(),type:void 0===t?"button":t,className:"\n      ".concat("primary"===a?"bg-lmPrimary text-white ".concat(!n&&r?"":"shadow-lg"," dark:bg-dmPrimary dark:hover:bg-lmPrimary hover:shadow-lg active:shadow-sm"):"secondary"===a?"".concat(qH.darkModeBorder," bg-primary100 text-lmPrimary dark:bg-transparent dark:text-lmGrey100 dark:hover:border-dmGrey600"):""," flex w-full ").concat(n?"w-full py-3 px-4":"h-10 min-h-[40px] w-10 min-w-[40px]"," items-center justify-center gap-x-2 rounded-lg text-sm font-semibold duration-300 hover:scale-101 active:scale-99"),children:[n,r&&(0,jU.jsx)("i",{className:"".concat(r)})]})},XH=(e,t)=>(e/t*100).toFixed(),QH=e=>{let{value:t,color:n}=e;return(0,jU.jsx)("div",{className:"flex w-full max-w-[360px] items-start overflow-hidden rounded-full p-[1px]",children:(0,jU.jsx)("div",{className:"h-[5px] \n                ".concat(t<=5?"w-[5px]":t<=10?"w-[10%]":t<=15?"w-[15%]":t<=20?"w-[20%]":t<=25?"w-[25%]":t<=30?"w-[30%]":t<=35?"w-[35%]":t<=40?"w-[40%]":t<=45?"w-[45%]":t<=50?"w-[50%]":t<=55?"w-[55%]":t<=60?"w-[60%]":t<=65?"w-[65%]":t<=70?"w-[70%]":t<=75?"w-[75%]":t<=80?"w-[80%]":t<=85?"w-[85%]":t<=90?"w-[90%]":t<=95?"w-[95%]":"w-[100%]","\n              rounded-full ").concat(n)})})},KH=t=>{let{totalAmount:n,ratingDetailed:r}=t;const{ratingFive:i,ratingFour:o,ratingThree:a,ratingTwo:s,ratingOne:l}=r,[c]=(0,e.useState)(((5*i+4*o+3*a+2*s+l)/n).toFixed(1)),[u]=(0,e.useState)({fiveStars:{color:"bg-lime-400",value:XH(i,n)},fourStars:{color:"bg-lime-500",value:XH(o,n)},threeStars:{color:"bg-yellow-300",value:XH(a,n)},twoStars:{color:"bg-orange-400",value:XH(s,n)},oneStar:{color:"bg-red-500",value:XH(l,n)}});return(0,jU.jsxs)("div",{className:"flex w-full flex-col 600:flex-row",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col items-center justify-center 600:h-[92px] 600:w-fit 600:min-w-fit 600:px-6",children:[(0,jU.jsx)("span",{className:"text-2xl text-lmGrey600 dark:text-dmGrey100",children:c}),(0,jU.jsxs)("span",{className:"text-xs text-lmGrey300 dark:text-dmGrey300",children:[n," Reviews"]})]}),(0,jU.jsxs)("div",{className:"flex w-full flex-col justify-center gap-y-2 py-3 px-[2px]",children:[(0,jU.jsx)(QH,{value:u.fiveStars.value,color:u.fiveStars.color}),(0,jU.jsx)(QH,{value:u.fourStars.value,color:u.fourStars.color}),(0,jU.jsx)(QH,{value:u.threeStars.value,color:u.threeStars.color}),(0,jU.jsx)(QH,{value:u.twoStars.value,color:u.twoStars.color}),(0,jU.jsx)(QH,{value:u.oneStar.value,color:u.oneStar.color})]})]})},ZH=e=>{let{reviews:t}=e;return(0,jU.jsx)(jU.Fragment,{children:t.map((e=>(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-2 rounded-xl bg-white p-6 shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:[(0,jU.jsx)(yW,{review:!0,rating:e.rating,text:e.timestamp,displayName:e.displayName,profilePic:e.userProfilePicture}),(0,jU.jsx)("span",{className:"text-xs text-lmGrey600 dark:text-dmGrey100",children:e.reviewContent})]},e.userId)))})},JH=()=>{const{reviewId:e}=WH();return(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-2 rounded-lg",children:[(0,jU.jsx)(KH,{totalAmount:e.totalAmount,ratingDetailed:e.ratingDetailed}),(0,jU.jsx)(ZH,{reviews:e.reviews}),(0,jU.jsx)(YH,{type:"button",uiType:"secondary",title:"Load More"})]})},$H=(e,t)=>{const{type:n,payload:r}=t;switch(n){case"FLY":return{...e,flyTo:r};case"SET_MAP_LOAD":return{...e,mapLoaded:r};case"UPDATE_HOVER_MARKER":return{...e,hoverMarker:r};case"UPDATE_ACTIVE_MARKER":return{...e,activeMarker:r}}},eW=(0,e.createContext)();function tW(){return(0,e.useContext)(eW)}eW.displayName="MapSubContext";const nW=t=>{let{children:n}=t;const[r,i]=(0,e.useReducer)($H,{mapLoaded:!1,flyTo:!1,activeMarker:!1,hoverMarker:!1});return(0,jU.jsx)(eW.Provider,{value:{...r,dispatchMapSub:i},children:n})},rW=(e,t)=>{const{type:n,payload:r}=t;switch(n){case"SET_BOUNDS":return{...e,bounds:r};case"SET_BOUNDS_AND_POSITION":return{...e,bounds:r.bounds,position:r.position};case"SET_POSITION":return{...e,position:r};case"FLY":return{...e,flyTo:r};case"SET_ENLARGED_BOUNDS":return{...e,enlargedBounds:r};case"SET_STORED_ZOOM":return{...e,storedZoom:r};case"SET_MAP_LOAD":return{...e,mapLoaded:r};case"SET_EXTERNAL_POSITION_CHANGES":return{...e,externalPositionChange:r}}},iW=(0,e.createContext)();function oW(){return(0,e.useContext)(iW)}iW.displayName="MapCoordContext";const aW=t=>{let{children:n}=t;const[r,i]=(0,e.useReducer)(rW,{bounds:{},storedZoom:null,position:{},externalPositionChange:null});return(0,jU.jsx)(iW.Provider,{value:{...r,dispatchMapCoord:i},children:n})},sW=()=>{const e=Ge(),{dispatchMapCoord:t}=oW(),{dispatchMapSub:n}=tW();return{handleLocationNavigation:(r,i)=>{const o={lat:i.lat,lng:i.lng,z:14},a=new URLSearchParams(o);t({type:"SET_EXTERNAL_POSITION_CHANGES",payload:{...o}}),n({type:"UPDATE_ACTIVE_MARKER",payload:r}),e("/explore/map?".concat(a))}}},lW=()=>{const{dispatchMapSub:t}=tW(),n=(0,e.useCallback)(((e,n,r)=>{console.log("fly to: ",{lng:e,lat:n,z:r}),t({type:"FLY",payload:{lng:e,lat:n,z:null!==r&&void 0!==r?r:12}})}),[t]);return{handleFly:n}},cW=e=>{let{liked:t,onLikeCallback:n,onLocationCallback:r}=e;return(0,jU.jsxs)(jU.Fragment,{children:[(0,jU.jsx)("i",{onClick:r,className:"fa-solid fa-location-dot absolute right-[10px] top-10 z-10 text-2xl text-lmGrey200 drop-shadow duration-300 hover:scale-102 hover:text-lmPrimary/60 active:scale-99 active:text-lmPrimary dark:text-dmGrey300"}),(0,jU.jsx)("i",{onClick:n,className:"fa-solid fa-heart ".concat(t?"text-red-500":"text-lmGrey200 dark:text-dmGrey300"," absolute right-2 top-2 z-10 text-2xl drop-shadow duration-300 hover:text-red-400")})]})},uW=e=>{let{onNavigationCallback:t,photoUrl:n}=e;return(0,jU.jsxs)("div",{onClick:t,className:"min-h-[118px] w-[110px] min-w-[110px] rounded-lg bg-cover bg-center",style:{backgroundImage:"url(".concat(n,")")},children:[(0,jU.jsx)("i",{className:"fa-solid fa-location-dot absolute left-3 top-3 hidden text-2xl text-white/40 drop-shadow"}),(0,jU.jsx)("i",{className:"fa-solid fa-heart absolute right-3 top-3 hidden text-2xl text-white/40 drop-shadow"})]})},dW=e=>{let{onNavigationCallback:t,offerInformation:n}=e;const{location:r,name:i,price:o,carSpecs:a}=n;return(0,jU.jsxs)("div",{onClick:t,className:"flex w-full flex-col gap-y-1 overflow-hidden rounded-xl py-3 dark:bg-dmGrey900",children:[(0,jU.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,jU.jsxs)("div",{className:"flex w-9/12 items-center gap-x-1 text-sm text-lmGrey600 dark:text-dmGrey100",children:[(0,jU.jsx)("i",{className:"fa-solid fa-location-dot"}),(0,jU.jsx)("span",{className:"w-full truncate",children:r.formatted})]}),(0,jU.jsx)("span",{className:"truncate text-base w-9/12 font-semibold text-lmGrey700 dark:text-dmGrey25",children:i})]}),(0,jU.jsxs)("div",{className:"flex w-full items-center gap-x-[2px] truncate",children:[(0,jU.jsxs)("span",{className:"text-base text-lmPrimary dark:text-dmPrimary",children:[o.day,"\u20ac"," ",(0,jU.jsx)("span",{className:"text-xs text-lmGrey400 dark:text-dmGrey300",children:"/day"})]}),(0,jU.jsx)("div",{className:"flex items-center justify-center px-1",children:(0,jU.jsx)("div",{className:"min-h-1 min-w-1 rounded-full bg-lmGrey400"})}),(0,jU.jsxs)("span",{className:"flex items-center truncate text-base text-lmPrimary dark:text-dmPrimary",children:[o.week,"\u20ac"," ",(0,jU.jsx)("span",{className:"truncate text-xs text-lmGrey400 dark:text-dmGrey300",children:"/week"})]})]}),(0,jU.jsxs)("div",{className:"flex w-5/6 gap-x-4 500:w-fit",children:[(0,jU.jsxs)("div",{className:"flex items-center gap-x-1 text-sm text-lmGrey300 dark:text-dmGrey100",children:[(0,jU.jsx)("i",{className:"fa-solid fa-gears"}),(0,jU.jsx)("span",{children:a.transmission})]}),(0,jU.jsxs)("div",{className:"flex items-center gap-x-1 text-sm text-lmGrey300 dark:text-dmGrey100",children:[(0,jU.jsx)("i",{className:"fa-solid fa-chair"}),(0,jU.jsxs)("span",{children:[a.seats," Seats"]})]})]})]})},hW=e=>{let{offerInformation:t,index:n,closeModal:r}=e;const{offerId:i,photoUrl:o,liked:a,location:s}=t,{dispatchMapSub:l}=tW(),c=Ge(),u=()=>{r&&r(),c("/offer-details/".concat(i))},{handleFly:d}=lW(),h=Ue(),{handleLocationNavigation:f}=sW(),p=e=>l({type:"UPDATE_HOVER_MARKER",payload:e});return(0,jU.jsxs)("div",{onMouseEnter:()=>p(i),onMouseLeave:()=>p(!1),className:"relative flex w-full min-w-[300px] cursor-pointer gap-x-3 rounded-lg bg-white shadow duration-300 hover:scale-102 hover:shadow-md active:scale-99 active:shadow-sm dark:bg-dmGrey900 dark:shadow-dmShadow",children:[(0,jU.jsx)(uW,{onNavigationCallback:u,photoUrl:o}),(0,jU.jsx)(cW,{liked:a,onLikeCallback:()=>{},onLocationCallback:()=>{r&&r(),"/explore/map"===h.pathname?(d(s.lng,s.lat,14),l({type:"UPDATE_ACTIVE_MARKER",payload:i})):f(i,s)}}),(0,jU.jsx)(dW,{onNavigationCallback:u,offerInformation:t})]})},fW=t=>{let{closeModal:n}=t;const[r,i]=(0,e.useState)([1,2,3]),{exampleOffers:o}=WH();return(0,jU.jsxs)("div",{className:"flex flex-col gap-y-2",children:[r.map(((e,t)=>(0,jU.jsx)(hW,{closeModal:n,index:t,offerInformation:o[t]},t))),(0,jU.jsx)(YH,{type:"button",uiType:"secondary",title:"Load More",onClick:()=>{let e=r;for(let t=0;t<3;t++)e.push(2);i([...e])}})]})},pW=e=>{let t=new Date(e),n=new Date-t;return Math.floor(n/31536e6)},mW=t=>{let{userProfileData:n={}}=t;const{firstName:r,lastName:i,birthday:o,email:a,photoUrl:s}=n;let[l,c]=(0,e.useState)(!1);return(0,jU.jsxs)("div",{onClick:()=>c(!0),className:"flex w-full cursor-pointer flex-col items-center gap-y-2",children:[(0,jU.jsx)("div",{className:"h-[84px] w-[84px] rounded-full bg-cover bg-center shadow",style:{backgroundImage:"url(".concat(s,")")}}),(0,jU.jsxs)("div",{className:"flex w-full flex-col items-center gap-y-[2px] text-sm text-lmGrey600 dark:text-dmGrey100",children:[(0,jU.jsxs)("div",{className:"flex w-full items-center justify-center gap-x-[2px]",children:[(0,jU.jsxs)("span",{className:"w-full truncate text-right text-lg text-lmGrey800 dark:text-dmGrey25",children:[r," ",i]}),(0,jU.jsx)("div",{className:"text-lg",children:"\u2022"}),(0,jU.jsxs)("span",{className:"w-full truncate text-left text-sm",children:[pW(o)," years old"]})]}),(0,jU.jsx)("span",{children:a})]}),(0,jU.jsx)(vW,{isOpen:l,closeModal:()=>c(!1)})]})},gW=t=>{let{isOpen:n,closeModal:r,children:i}=t;return(0,jU.jsx)(SV,{appear:!0,show:n,as:e.Fragment,children:(0,jU.jsxs)(mH,{as:"div",className:"relative z-50 flex items-start justify-center",onClose:r,children:[(0,jU.jsx)(SV.Child,{as:e.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,jU.jsx)(mH.Backdrop,{className:"fixed z-40 inset-0 bg-black bg-opacity-25"})}),(0,jU.jsx)(SV.Child,{as:e.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,jU.jsx)(mH.Panel,{className:"fixed top-20 bottom-0 w-full overflow-scroll hideScrollbar rounded-t-2xl 820:w-[820px] z-50",children:(0,jU.jsxs)("div",{className:"relative flex h-fit min-h-full w-full max-w-[820px] flex-col items-center rounded-t-2xl bg-white p-6 shadow dark:bg-dmGrey900 600:pt-12",children:[(0,jU.jsx)("button",{autoFocus:!0,className:"pointer-events-none absolute opacity-0"}),(0,jU.jsx)("button",{onClick:r,className:"fa-solid fa-times absolute top-6 right-6 cursor-pointer text-[24px] text-lmGrey700 dark:text-dmGrey25 600:top-10 600:right-12"}),i]})})})]})})},vW=e=>{let{isOpen:t,closeModal:n}=e;const{userProfileBig:r}=WH(),{firstName:i,lastName:o,birthday:a,email:s}=r;return(0,jU.jsx)(gW,{isOpen:t,closeModal:n,children:(0,jU.jsxs)("div",{className:"flex w-full max-w-[472px] flex-col items-center justify-center gap-y-6",children:[(0,jU.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,jU.jsx)(mW,{firstName:i,lastName:o,birthday:a,email:s}),(0,jU.jsx)(mH.Description,{className:"text-sm text-lmGrey600 dark:text-dmGrey100",children:"I rather take my bike or the OVP to the Uni so I don\u2019t really have a need for my cars. If you like any of my offer(s), don\u2019t be scared to send me a Message \ud83d\ude0a."})]}),(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,jU.jsx)("span",{className:"text-base font-semibold text-lmGrey700 dark:text-dmGrey25",children:"Offers"}),(0,jU.jsx)(fW,{closeModal:n})]}),(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,jU.jsx)("span",{className:"text-base font-semibold text-lmGrey700 dark:text-dmGrey25",children:"Ratings"}),(0,jU.jsx)(JH,{})]})]})})},yW=t=>{let{review:n,displayName:r,text:i,rating:o,profilePic:a}=t,[s,l]=(0,e.useState)(!1);return(0,jU.jsxs)("div",{onClick:()=>l(!0),className:"flex h-11 w-full items-center gap-x-2 cursor-pointer",children:[(0,jU.jsx)("div",{className:"h-11 min-h-[44px] w-11 min-w-[44px] rounded-full bg-black bg-cover bg-center shadow",style:{backgroundImage:"url(".concat(a,")")}}),(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-[2px]",children:[(0,jU.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,jU.jsx)("span",{className:"text-sm text-lmGrey500 dark:text-dmGrey100",children:r}),n&&(0,jU.jsxs)("span",{className:"flex items-center gap-x-[2px] text-xs text-lmGrey400 dark:text-dmGrey300",children:[o,"/5 ","",(0,jU.jsx)("div",{className:"fa-solid fa-star text-[12px] text-yellow-400"})]})]}),(0,jU.jsx)("span",{className:"text-xs text-lmGrey300 dark:text-dmGrey300",children:i})]}),(0,jU.jsx)(vW,{isOpen:s,closeModal:()=>l(!1)})]})},xW=e=>{let{handleClickNavigation:t}=e;return(0,jU.jsx)("div",{className:"flex w-[360px] items-center px-8 py-2",children:(0,jU.jsx)("div",{onClick:()=>t("/profile"),className:"w-full cursor-pointer rounded-lg px-4 py-3 duration-300 hover:bg-white dark:hover:bg-dmGrey800",children:(0,jU.jsx)(yW,{text:"Click to view the owners account",displayName:"Meggle Bande",profilePic:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2264&q=80"})})})},bW=t=>{let{isOpen:n,closeModal:r,children:i}=t;return(0,jU.jsx)(SV,{appear:!0,show:n,as:e.Fragment,children:(0,jU.jsxs)(mH,{as:"div",className:"z-50",onClose:r,children:[(0,jU.jsx)(SV.Child,{as:e.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,jU.jsx)("div",{onClick:r,className:"fixed inset-0 z-40 bg-black bg-opacity-25"})}),(0,jU.jsx)(SV.Child,{as:e.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,jU.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i})})]})})},wW=()=>{const[t]=(0,e.useState)(!0),n=Ge(),r=e=>{a(),n(e)},{isOpen:i,dispatchNavigation:o}=FU(),a=()=>{o({type:"CLOSE_NAVIGATION"})};return(0,jU.jsx)(bW,{isOpen:i,closeModal:a,children:(0,jU.jsxs)(mH.Panel,{className:"hideScrollbar absolute top-20 left-0 bottom-0 w-full overflow-scroll 600:top-7 600:left-7 600:w-fit 600:pb-7",children:[(0,jU.jsx)("button",{className:"absolute opacity-0","aria-hidden":"true"}),(0,jU.jsx)("i",{onClick:a,className:"fa-solid fa-times absolute top-8 right-4 z-[60] flex h-11 w-11 items-center justify-center text-[24px] text-lmGrey600 dark:text-dmGrey100 600:hidden"}),(0,jU.jsxs)("div",{className:"flex h-fit w-full flex-col items-center gap-y-2 rounded-t-2xl bg-white/80 py-8 shadow-dmShadow backdrop-blur-lg dark:bg-dmGrey900 600:w-[360px] 600:rounded-2xl",children:[(0,jU.jsx)("div",{className:"flex w-[360px] cursor-pointer items-center gap-x-2 rounded-lg px-8 text-base duration-300",children:(0,jU.jsx)("div",{className:"w-[84%] 400:w-[296px]",children:(0,jU.jsx)(MV,{})})}),(0,jU.jsx)(vH,{signedIn:t,handleClickNavigation:r}),(0,jU.jsx)(gH,{}),(0,jU.jsx)(yH,{handleClickNavigation:r}),(0,jU.jsx)(gH,{}),(0,jU.jsx)(xW,{handleClickNavigation:r})]})]})})},SW=t=>{let{amount:n,finished:r}=t;const[i,o]=(0,e.useState)([]);return(0,e.useEffect)((()=>{const e=[];for(let t=0;t<n;t++)e.push(t);o(e)}),[n]),(0,jU.jsx)("div",{className:"flex w-full items-center justify-center gap-x-2",children:i.map((e=>(0,jU.jsx)("div",{className:"h-2 w-8 rounded-full ".concat(e>r?"bg-lmGrey200 dark:bg-dmGrey600":"bg-lmGrey400 dark:bg-dmGrey300")},e)))})},_W=e=>{let{children:t,pic:n,puffer:r}=e;const i=Ge();return(0,jU.jsxs)("div",{className:"relative flex w-full justify-center bg-white dark:bg-dmGrey900",children:[(0,jU.jsxs)("div",{className:"flex h-screen w-full max-w-[560px] flex-col items-center gap-y-2 overflow-scroll px-6 py-[28px]",children:[(void 0===r||r)&&(0,jU.jsx)("div",{className:"h-[40px] min-h-[40px] w-full 600:h-[100px] 600:min-h-[100px]"}),t]}),(0,jU.jsxs)("div",{className:"relative hidden h-screen w-full p-3 1000:flex",children:[(0,jU.jsx)("div",{className:"h-full w-full overflow-hidden rounded-[30px] bg-lmGrey100 bg-cover bg-center dark:bg-dmGrey800",style:{backgroundImage:"url(".concat(n,")")},children:(0,jU.jsx)("div",{className:"hidden h-full w-full dark:flex dark:bg-black/20"})}),(0,jU.jsx)("button",{onClick:()=>{i("/homepage")},className:"absolute top-[56px] right-[76px] flex h-[64px] w-[64px] items-center justify-center rounded-full bg-white duration-300 hover:scale-102 active:scale-98 dark:border dark:border-solid dark:border-transparent dark:bg-dmGrey900 dark:hover:border-dmGrey800",children:(0,jU.jsx)("i",{className:"fa-solid fa-house text-[28px] text-lmGrey800 dark:text-dmGrey100"})})]})]})},AW=()=>{let[t,n]=at();const r=(0,e.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;t.set(e,r),n(t)}),[t,n]),i=(0,e.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=s();for(const[n,r]of Object.entries(e))t[n]=r;n(t)}),[n]),o=(0,e.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.get(e)}),[t]),a=(0,e.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.map((e=>{t[e]=o(e)})),t}),[o]),s=(0,e.useCallback)((()=>{let e={};for(const[n,r]of t.entries())e[n]=r;return e}),[t]),l=(0,e.useCallback)((e=>{t.delete(e),n(t)}),[t,n]),c=(0,e.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log("annoyed"),e.map((e=>t.delete(e))),n(t)}),[t,n]),u=(0,e.useCallback)((()=>{t.forEach(((e,n)=>t.delete(n))),n(t)}),[t,n]);return{searchParams:t,setSingleParam:r,setArrayOfParams:i,getSingleParam:o,getArrayOfParams:a,getAllParams:s,deleteSingleParam:l,deleteArrayOfParams:c,deleteAllParams:u}},EW=()=>{const{searchParams:t,setSingleParam:n,setArrayOfParams:r,getSingleParam:i}=AW(),o=i("round")?+i("round"):1;(0,e.useEffect)((()=>{!i("round")&&n("round",1)}),[t]);const a=(e,t)=>{const n=JSON.parse(localStorage.getItem(t));let r=null!==n&&void 0!==n?n:{};Object.entries(e).map((e=>{r[e[0]]=e[1]})),localStorage.setItem(t,JSON.stringify(r))},s=()=>n("round",o+1);return{currentRound:o,handleStorage:a,handleContinue:s,handleGoBack:()=>1!==o&&n("round",o-1),handleGoogle:()=>{n("round",o+2)},handleEmailContinue:e=>{a(e,"signUpData"),r({email:e.email,round:o+1})},handleConfirmationContinue:e=>{e.email=i("email"),a(e,"signUpData"),s()}}};var CW=e=>"checkbox"===e.type,MW=e=>e instanceof Date,TW=e=>null==e;const PW=e=>"object"===typeof e;var DW=e=>!TW(e)&&!Array.isArray(e)&&PW(e)&&!MW(e),kW=e=>DW(e)&&e.target?CW(e.target)?e.target.checked:e.target.value:e,OW=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),RW=e=>Array.isArray(e)?e.filter(Boolean):[],IW=e=>void 0===e,LW=(e,t,n)=>{if(!t||!DW(e))return n;const r=RW(t.split(/[,[\].]+?/)).reduce(((e,t)=>TW(e)?e:e[t]),e);return IW(r)||r===e?IW(e[t])?n:e[t]:r};const NW="blur",jW="focusout",BW="change",FW="onBlur",zW="onChange",UW="onSubmit",GW="onTouched",VW="all",HW="max",WW="min",qW="maxLength",YW="minLength",XW="pattern",QW="required",KW="validate",ZW=e.createContext(null),JW=()=>e.useContext(ZW);var $W=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(i,o,{get:()=>{const i=o;return t._proxyFormState[i]!==VW&&(t._proxyFormState[i]=!r||VW),n&&(n[i]=!0),e[i]}});return i},eq=e=>DW(e)&&!Object.keys(e).length,tq=(e,t,n)=>{const{name:r,...i}=e;return eq(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find((e=>t[e]===(!n||VW)))},nq=e=>Array.isArray(e)?e:[e],rq=(e,t,n)=>n&&t?e===t:!e||!t||e===t||nq(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function iq(t){const n=e.useRef(t);n.current=t,e.useEffect((()=>{const e=!t.disabled&&n.current.subject.subscribe({next:n.current.callback});return()=>{e&&e.unsubscribe()}}),[t.disabled])}var oq=e=>"string"===typeof e,aq=(e,t,n,r)=>{const i=Array.isArray(e);return oq(e)?(r&&t.watch.add(e),LW(n,e)):i?e.map((e=>(r&&t.watch.add(e),LW(n,e)))):(r&&(t.watchAll=!0),n)},sq=e=>"function"===typeof e,lq=e=>{for(const t in e)if(sq(e[t]))return!0;return!1};function cq(t){const n=JW(),{name:r,control:i=n.control,shouldUnregister:o}=t,a=OW(i._names.array,r),s=function(t){const n=JW(),{control:r=n.control,name:i,defaultValue:o,disabled:a,exact:s}=t||{},l=e.useRef(i);l.current=i,iq({disabled:a,subject:r._subjects.watch,callback:e.useCallback((e=>{if(rq(l.current,e.name,s)){const t=aq(l.current,r._names,e.values||r._formValues);u(IW(l.current)||DW(t)&&!lq(t)?{...t}:Array.isArray(t)?[...t]:IW(t)?o:t)}}),[r,s,o])});const[c,u]=e.useState(IW(o)?r._getWatch(i):o);return e.useEffect((()=>r._removeUnmounted())),c}({control:i,name:r,defaultValue:LW(i._formValues,r,LW(i._defaultValues,r,t.defaultValue)),exact:!0}),l=function(t){const n=JW(),{control:r=n.control,disabled:i,name:o,exact:a}=t||{},[s,l]=e.useState(r._formState),c=e.useRef(!0),u=e.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=e.useRef(o);return d.current=o,iq({disabled:i,callback:e.useCallback((e=>c.current&&rq(d.current,e.name,a)&&tq(e,u.current)&&l({...r._formState,...e})),[r,a]),subject:r._subjects.state}),e.useEffect((()=>(c.current=!0,()=>{c.current=!1})),[]),$W(s,r,u.current,!1)}({control:i,name:r}),c=e.useRef(i.register(r,{...t.rules,value:s}));return e.useEffect((()=>{const e=(e,t)=>{const n=LW(i._fields,e);n&&(n._f.mount=t)};return e(r,!0),()=>{const t=i._options.shouldUnregister||o;(a?t&&!i._stateFlags.action:t)?i.unregister(r):e(r,!1)}}),[r,i,a,o]),{field:{name:r,value:s,onChange:e.useCallback((e=>c.current.onChange({target:{value:kW(e),name:r},type:BW})),[r]),onBlur:e.useCallback((()=>c.current.onBlur({target:{value:LW(i._formValues,r),name:r},type:NW})),[r,i]),ref:e=>{const t=LW(i._fields,r);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!LW(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!LW(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!LW(l.touchedFields,r)},error:{enumerable:!0,get:()=>LW(l.errors,r)}})}}const uq=e=>e.render(cq(e));var dq=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},hq=e=>/^\w*$/.test(e),fq=e=>RW(e.replace(/["|']|\]/g,"").split(/\.|\[/));function pq(e,t,n){let r=-1;const i=hq(t)?[t]:fq(t),o=i.length,a=o-1;for(;++r<o;){const t=i[r];let o=n;if(r!==a){const n=e[t];o=DW(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}e[t]=o,e=e[t]}return e}const mq=(e,t,n)=>{for(const r of n||Object.keys(e)){const n=LW(e,r);if(n){const{_f:e,...r}=n;if(e&&t(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else DW(r)&&mq(r,t)}}};var gq=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),vq=(e,t,n)=>{const r=RW(LW(e,n));return pq(r,"root",t[n]),pq(e,n,r),e},yq=e=>"boolean"===typeof e,xq=e=>"file"===e.type,bq=t=>oq(t)||e.isValidElement(t),wq=e=>"radio"===e.type,Sq=e=>e instanceof RegExp;const _q={value:!1,isValid:!1},Aq={value:!0,isValid:!0};var Eq=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!IW(e[0].attributes.value)?IW(e[0].value)||""===e[0].value?Aq:{value:e[0].value,isValid:!0}:Aq:_q}return _q};const Cq={isValid:!1,value:null};var Mq=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),Cq):Cq;function Tq(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(bq(e)||Array.isArray(e)&&e.every(bq)||yq(e)&&!e)return{type:n,message:bq(e)?e:"",ref:t}}var Pq=e=>DW(e)&&!Sq(e)?e:{value:e,message:""},Dq=async(e,t,n,r,i)=>{const{ref:o,refs:a,required:s,maxLength:l,minLength:c,min:u,max:d,pattern:h,validate:f,name:p,valueAsNumber:m,mount:g,disabled:v}=e._f;if(!g||v)return{};const y=a?a[0]:o,x=e=>{r&&y.reportValidity&&(y.setCustomValidity(yq(e)?"":e||" "),y.reportValidity())},b={},w=wq(o),S=CW(o),_=w||S,A=(m||xq(o))&&!o.value||""===t||Array.isArray(t)&&!t.length,E=dq.bind(null,p,n,b),C=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:qW,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:YW;const a=e?t:n;b[p]={type:e?r:i,message:a,ref:o,...E(e?r:i,a)}};if(i?!Array.isArray(t)||!t.length:s&&(!_&&(A||TW(t))||yq(t)&&!t||S&&!Eq(a).isValid||w&&!Mq(a).isValid)){const{value:e,message:t}=bq(s)?{value:!!s,message:s}:Pq(s);if(e&&(b[p]={type:QW,message:t,ref:y,...E(QW,t)},!n))return x(t),b}if(!A&&(!TW(u)||!TW(d))){let e,r;const i=Pq(d),a=Pq(u);if(TW(t)||isNaN(t)){const n=o.valueAsDate||new Date(t),s=e=>new Date((new Date).toDateString()+" "+e),l="time"==o.type,c="week"==o.type;oq(i.value)&&t&&(e=l?s(t)>s(i.value):c?t>i.value:n>new Date(i.value)),oq(a.value)&&t&&(r=l?s(t)<s(a.value):c?t<a.value:n<new Date(a.value))}else{const n=o.valueAsNumber||(t?+t:t);TW(i.value)||(e=n>i.value),TW(a.value)||(r=n<a.value)}if((e||r)&&(C(!!e,i.message,a.message,HW,WW),!n))return x(b[p].message),b}if((l||c)&&!A&&(oq(t)||i&&Array.isArray(t))){const e=Pq(l),r=Pq(c),i=!TW(e.value)&&t.length>e.value,o=!TW(r.value)&&t.length<r.value;if((i||o)&&(C(i,e.message,r.message),!n))return x(b[p].message),b}if(h&&!A&&oq(t)){const{value:e,message:r}=Pq(h);if(Sq(e)&&!t.match(e)&&(b[p]={type:XW,message:r,ref:o,...E(XW,r)},!n))return x(r),b}if(f)if(sq(f)){const e=Tq(await f(t),y);if(e&&(b[p]={...e,...E(KW,e.message)},!n))return x(e.message),b}else if(DW(f)){let e={};for(const r in f){if(!eq(e)&&!n)break;const i=Tq(await f[r](t),y,r);i&&(e={...i,...E(r,i.message)},x(i.message),n&&(b[p]=e))}if(!eq(e)&&(b[p]={ref:y,...e},!n))return b}return x(!0),b};var kq="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function Oq(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(kq&&(e instanceof Blob||e instanceof FileList)||!n&&!DW(e))return e;if(t=n?[]:{},Array.isArray(e)||(e=>{const t=e.constructor&&e.constructor.prototype;return DW(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)t[n]=Oq(e[n]);else t=e}return t}var Rq=e=>({isOnSubmit:!e||e===UW,isOnBlur:e===FW,isOnChange:e===zW,isOnAll:e===VW,isOnTouch:e===GW});function Iq(e){for(const t in e)if(!IW(e[t]))return!1;return!0}function Lq(e,t){const n=hq(t)?[t]:fq(t),r=1==n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=IW(e)?r++:e[t[r++]];return e}(e,n),i=n[n.length-1];let o;r&&delete r[i];for(let a=0;a<n.slice(0,-1).length;a++){let t,r=-1;const i=n.slice(0,-(a+1)),s=i.length-1;for(a>0&&(o=e);++r<i.length;){const n=i[r];t=t?t[n]:e[n],s===r&&(DW(t)&&eq(t)||Array.isArray(t)&&Iq(t))&&(o?delete o[n]:delete e[n]),o=t}}return e}function Nq(){let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var jq=e=>TW(e)||!PW(e);function Bq(e,t){if(jq(e)||jq(t))return e===t;if(MW(e)&&MW(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const n=e[i];if(!r.includes(i))return!1;if("ref"!==i){const e=t[i];if(MW(n)&&MW(e)||DW(n)&&DW(e)||Array.isArray(n)&&Array.isArray(e)?!Bq(n,e):n!==e)return!1}}return!0}var Fq=e=>{const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},zq=e=>"select-multiple"===e.type,Uq=e=>wq(e)||CW(e),Gq=e=>Fq(e)&&e.isConnected;function Vq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(e);if(DW(e)||n)for(const r in e)Array.isArray(e[r])||DW(e[r])&&!lq(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Vq(e[r],t[r])):TW(e[r])||(t[r]=!0);return t}function Hq(e,t,n){const r=Array.isArray(e);if(DW(e)||r)for(const i in e)Array.isArray(e[i])||DW(e[i])&&!lq(e[i])?IW(t)||jq(n[i])?n[i]=Array.isArray(e[i])?Vq(e[i],[]):{...Vq(e[i])}:Hq(e[i],TW(t)?{}:t[i],n[i]):n[i]=!Bq(e[i],t[i]);return n}var Wq=(e,t)=>Hq(e,t,Vq(t)),qq=(e,t)=>{let{valueAsNumber:n,valueAsDate:r,setValueAs:i}=t;return IW(e)?e:n?""===e?NaN:e?+e:e:r&&oq(e)?new Date(e):i?i(e):e};function Yq(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return xq(t)?t.files:wq(t)?Mq(e.refs).value:zq(t)?[...t.selectedOptions].map((e=>{let{value:t}=e;return t})):CW(t)?Eq(e.refs).value:qq(IW(t.value)?e.ref.value:t.value,e)}var Xq=(e,t,n,r)=>{const i={};for(const o of e){const e=LW(t,o);e&&pq(i,o,e._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},Qq=e=>IW(e)?void 0:Sq(e)?e.source:DW(e)?Sq(e.value)?e.value.source:e.value:e,Kq=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Zq(e,t,n){const r=LW(e,n);if(r||hq(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),o=LW(t,r),a=LW(e,r);if(o&&!Array.isArray(o)&&n!==r)return{name:n};if(a&&a.type)return{name:r,error:a};i.pop()}return{name:n}}var Jq=(e,t,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e),$q=(e,t)=>!RW(LW(e,t)).length&&Lq(e,t);const eY={mode:UW,reValidateMode:zW,shouldFocusError:!0};function tY(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={...eY,...t},r={submitCount:0,isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},i={},o=Oq(n.defaultValues)||{},a=n.shouldUnregister?{}:Oq(o),s={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c=0,u={};const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={watch:Nq(),array:Nq(),state:Nq()},f=Rq(n.mode),p=Rq(n.reValidateMode),m=n.criteriaMode===VW,g=e=>t=>{clearTimeout(c),c=window.setTimeout(e,t)},v=async e=>{let t=!1;return d.isValid&&(t=n.resolver?eq((await _()).errors):await E(i,!0),e||t===r.isValid||(r.isValid=t,h.state.next({isValid:t}))),t},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(l&&n){if(s.action=!0,u&&Array.isArray(LW(i,e))){const t=n(LW(i,e),l.argA,l.argB);c&&pq(i,e,t)}if(d.errors&&u&&Array.isArray(LW(r.errors,e))){const t=n(LW(r.errors,e),l.argA,l.argB);c&&pq(r.errors,e,t),$q(r.errors,e)}if(d.touchedFields&&u&&Array.isArray(LW(r.touchedFields,e))){const t=n(LW(r.touchedFields,e),l.argA,l.argB);c&&pq(r.touchedFields,e,t)}d.dirtyFields&&(r.dirtyFields=Wq(o,a)),h.state.next({isDirty:M(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else pq(a,e,t)},x=(e,t)=>{pq(r.errors,e,t),h.state.next({errors:r.errors})},b=(e,t,n,r)=>{const l=LW(i,e);if(l){const i=LW(a,e,IW(n)?LW(o,e):n);IW(i)||r&&r.defaultChecked||t?pq(a,e,t?i:Yq(l._f)):D(e,i),s.mount&&v()}},w=(e,t,n,i,a)=>{let s=!1;const l={name:e},c=LW(r.touchedFields,e);if(d.isDirty){const e=r.isDirty;r.isDirty=l.isDirty=M(),s=e!==l.isDirty}if(d.dirtyFields&&(!n||i)){const n=LW(r.dirtyFields,e);Bq(LW(o,e),t)?Lq(r.dirtyFields,e):pq(r.dirtyFields,e,!0),l.dirtyFields=r.dirtyFields,s=s||n!==LW(r.dirtyFields,e)}return n&&!c&&(pq(r.touchedFields,e,n),l.touchedFields=r.touchedFields,s=s||d.touchedFields&&c!==n),s&&a&&h.state.next(l),s?l:{}},S=async(n,i,o,a)=>{const s=LW(r.errors,n),l=d.isValid&&r.isValid!==i;if(t.delayError&&o?(e=g((()=>x(n,o))),e(t.delayError)):(clearTimeout(c),e=null,o?pq(r.errors,n,o):Lq(r.errors,n)),(o?!Bq(s,o):s)||!eq(a)||l){const e={...a,...l?{isValid:i}:{},errors:r.errors,name:n};r={...r,...e},h.state.next(e)}u[n]--,d.isValidating&&!Object.values(u).some((e=>e))&&(h.state.next({isValidating:!1}),u={})},_=async e=>n.resolver?await n.resolver({...a},n.context,Xq(e||l.mount,i,n.criteriaMode,n.shouldUseNativeValidation)):{},A=async e=>{const{errors:t}=await _();if(e)for(const n of e){const e=LW(t,n);e?pq(r.errors,n,e):Lq(r.errors,n)}else r.errors=t;return t},E=async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const o in e){const s=e[o];if(s){const{_f:e,...o}=s;if(e){const o=l.array.has(e.name),c=await Dq(s,LW(a,e.name),m,n.shouldUseNativeValidation,o);if(c[e.name]&&(i.valid=!1,t))break;!t&&(LW(c,e.name)?o?vq(r.errors,c,e.name):pq(r.errors,e.name,c[e.name]):Lq(r.errors,e.name))}o&&await E(o,t,i)}}return i.valid},C=()=>{for(const e of l.unMount){const t=LW(i,e);t&&(t._f.refs?t._f.refs.every((e=>!Gq(e))):!Gq(t._f.ref))&&z(e)}l.unMount=new Set},M=(e,t)=>(e&&t&&pq(a,e,t),!Bq(L(),o)),T=(e,t,n)=>{const r={...s.mount?a:IW(t)?o:oq(e)?{[e]:t}:t};return aq(e,l,r,n)},P=e=>RW(LW(s.mount?a:o,e,t.shouldUnregister?LW(o,e,[]):[])),D=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=LW(i,e);let o=t;if(r){const n=r._f;n&&(!n.disabled&&pq(a,e,qq(t,n)),o=kq&&Fq(n.ref)&&TW(t)?"":t,zq(n.ref)?[...n.ref.options].forEach((e=>e.selected=o.includes(e.value))):n.refs?CW(n.ref)?n.refs.length>1?n.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(o)?!!o.find((t=>t===e.value)):o===e.value))):n.refs[0]&&(n.refs[0].checked=!!o):n.refs.forEach((e=>e.checked=e.value===o)):xq(n.ref)?n.ref.value="":(n.ref.value=o,n.ref.type||h.watch.next({name:e})))}(n.shouldDirty||n.shouldTouch)&&w(e,o,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&I(e)},k=(e,t,n)=>{for(const r in t){const o=t[r],a="".concat(e,".").concat(r),s=LW(i,a);!l.array.has(e)&&jq(o)&&(!s||s._f)||MW(o)?D(a,o,n):k(a,o,n)}},O=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=LW(i,e),c=l.array.has(e),u=Oq(t);pq(a,e,u),c?(h.array.next({name:e,values:a}),(d.isDirty||d.dirtyFields)&&n.shouldDirty&&(r.dirtyFields=Wq(o,a),h.state.next({name:e,dirtyFields:r.dirtyFields,isDirty:M(e,u)}))):!s||s._f||TW(u)?D(e,u,n):k(e,u,n),gq(e,l)&&h.state.next({}),h.watch.next({name:e})},R=async t=>{const o=t.target;let s=o.name;const c=LW(i,s);if(c){let d,g;const y=o.type?Yq(c._f):kW(t),x=t.type===NW||t.type===jW,b=!Kq(c._f)&&!n.resolver&&!LW(r.errors,s)&&!c._f.deps||Jq(x,LW(r.touchedFields,s),r.isSubmitted,p,f),A=gq(s,l,x);pq(a,s,y),x?(c._f.onBlur&&c._f.onBlur(t),e&&e(0)):c._f.onChange&&c._f.onChange(t);const E=w(s,y,x,!1),C=!eq(E)||A;if(!x&&h.watch.next({name:s,type:t.type}),b)return C&&h.state.next({name:s,...A?{}:E});if(!x&&A&&h.state.next({}),u[s]=(u[s],1),h.state.next({isValidating:!0}),n.resolver){const{errors:e}=await _([s]),t=Zq(r.errors,i,s),n=Zq(e,i,t.name||s);d=n.error,s=n.name,g=eq(e)}else d=(await Dq(c,LW(a,s),m,n.shouldUseNativeValidation))[s],g=await v(!0);c._f.deps&&I(c._f.deps),S(s,g,d,E)}},I=async function(e){let t,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=nq(e);if(h.state.next({isValidating:!0}),n.resolver){const n=await A(IW(e)?e:s);t=eq(n),o=e?!s.some((e=>LW(n,e))):t}else e?(o=(await Promise.all(s.map((async e=>{const t=LW(i,e);return await E(t&&t._f?{[e]:t}:t)})))).every(Boolean),(o||r.isValid)&&v()):o=t=await E(i);return h.state.next({...!oq(e)||d.isValid&&t!==r.isValid?{}:{name:e},...n.resolver||!e?{isValid:t}:{},errors:r.errors,isValidating:!1}),a.shouldFocus&&!o&&mq(i,(e=>e&&LW(r.errors,e)),e?s:l.mount),o},L=e=>{const t={...o,...s.mount?a:{}};return IW(e)?t:oq(e)?LW(t,e):e.map((e=>LW(t,e)))},N=(e,t)=>({invalid:!!LW((t||r).errors,e),isDirty:!!LW((t||r).dirtyFields,e),isTouched:!!LW((t||r).touchedFields,e),error:LW((t||r).errors,e)}),j=e=>{e?nq(e).forEach((e=>Lq(r.errors,e))):r.errors={},h.state.next({errors:r.errors})},B=(e,t,n)=>{const o=(LW(i,e,{_f:{}})._f||{}).ref;pq(r.errors,e,{...t,ref:o}),h.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&o&&o.focus&&o.focus()},F=(e,t)=>sq(e)?h.watch.subscribe({next:n=>e(T(void 0,t),n)}):T(e,t,!0),z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const s of e?nq(e):l.mount)l.mount.delete(s),l.array.delete(s),LW(i,s)&&(t.keepValue||(Lq(i,s),Lq(a,s)),!t.keepError&&Lq(r.errors,s),!t.keepDirty&&Lq(r.dirtyFields,s),!t.keepTouched&&Lq(r.touchedFields,s),!n.shouldUnregister&&!t.keepDefaultValue&&Lq(o,s));h.watch.next({}),h.state.next({...r,...t.keepDirty?{isDirty:M()}:{}}),!t.keepIsValid&&v()},U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=LW(i,e);const c=yq(t.disabled);return pq(i,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),r?c&&pq(a,e,t.disabled?void 0:LW(a,e,Yq(r._f))):b(e,!0,t.value),{...c?{disabled:t.disabled}:{},...n.shouldUseNativeValidation?{required:!!t.required,min:Qq(t.min),max:Qq(t.max),minLength:Qq(t.minLength),maxLength:Qq(t.maxLength),pattern:Qq(t.pattern)}:{},name:e,onChange:R,onBlur:R,ref:a=>{if(a){U(e,t),r=LW(i,e);const n=IW(a.value)&&a.querySelectorAll&&a.querySelectorAll("input,select,textarea")[0]||a,s=Uq(n),l=r._f.refs||[];if(s?l.find((e=>e===n)):n===r._f.ref)return;pq(i,e,{_f:{...r._f,...s?{refs:[...l.filter(Gq),n,...Array.isArray(LW(o,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),b(e,!1,void 0,n)}else r=LW(i,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!OW(l.array,e)||!s.action)&&l.unMount.add(e)}}},G=()=>n.shouldFocusError&&mq(i,(e=>e&&LW(r.errors,e)),l.mount),V=(e,t)=>async o=>{o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let s=!0,l=Oq(a);h.state.next({isSubmitting:!0});try{if(n.resolver){const{errors:e,values:t}=await _();r.errors=e,l=t}else await E(i);eq(r.errors)?(h.state.next({errors:{},isSubmitting:!0}),await e(l,o)):(t&&await t({...r.errors},o),G())}catch(c){throw s=!1,c}finally{r.isSubmitted=!0,h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:eq(r.errors)&&s,submitCount:r.submitCount+1,errors:r.errors})}},H=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};LW(i,e)&&(IW(t.defaultValue)?O(e,LW(o,e)):(O(e,t.defaultValue),pq(o,e,t.defaultValue)),t.keepTouched||Lq(r.touchedFields,e),t.keepDirty||(Lq(r.dirtyFields,e),r.isDirty=t.defaultValue?M(e,LW(o,e)):M()),t.keepError||(Lq(r.errors,e),d.isValid&&v()),h.state.next({...r}))},W=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=e||o,u=Oq(c),f=e&&!eq(e)?u:o;if(n.keepDefaultValues||(o=c),!n.keepValues){if(n.keepDirtyValues)for(const e of l.mount)LW(r.dirtyFields,e)?pq(f,e,LW(a,e)):O(e,LW(f,e));else{if(kq&&IW(e))for(const e of l.mount){const t=LW(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;try{if(Fq(e)){e.closest("form").reset();break}}catch(hR){}}}i={}}a=t.shouldUnregister?n.keepDefaultValues?Oq(o):{}:u,h.array.next({values:f}),h.watch.next({values:f})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!d.isValid||!!n.keepIsValid,s.watch=!!t.shouldUnregister,h.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:n.keepDirty||n.keepDirtyValues?r.isDirty:!(!n.keepDefaultValues||Bq(e,o)),isSubmitted:!!n.keepIsSubmitted&&r.isSubmitted,dirtyFields:n.keepDirty||n.keepDirtyValues?r.dirtyFields:n.keepDefaultValues&&e?Wq(o,e):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},q=(e,t)=>W(sq(e)?e(a):e,t),Y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=LW(i,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}};return{control:{register:U,unregister:z,getFieldState:N,_executeSchema:_,_focusError:G,_getWatch:T,_getDirty:M,_updateValid:v,_removeUnmounted:C,_updateFieldArray:y,_getFieldArray:P,_subjects:h,_proxyFormState:d,get _fields(){return i},get _formValues(){return a},get _stateFlags(){return s},set _stateFlags(e){s=e},get _defaultValues(){return o},get _names(){return l},set _names(e){l=e},get _formState(){return r},set _formState(e){r=e},get _options(){return n},set _options(e){n={...n,...e}}},trigger:I,register:U,handleSubmit:V,watch:F,setValue:O,getValues:L,reset:q,resetField:H,clearErrors:j,unregister:z,setError:B,setFocus:Y,getFieldState:N}}function nY(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=e.useRef(),[r,i]=e.useState({isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:t.defaultValues});n.current||(n.current={...tY(t),formState:r});const o=n.current.control;return o._options=t,iq({subject:o._subjects.state,callback:e.useCallback((e=>{tq(e,o._proxyFormState,!0)&&(o._formState={...o._formState,...e},i({...o._formState}))}),[o])}),e.useEffect((()=>{o._stateFlags.mount||(o._proxyFormState.isValid&&o._updateValid(),o._stateFlags.mount=!0),o._stateFlags.watch&&(o._stateFlags.watch=!1,o._subjects.state.next({})),o._removeUnmounted()})),e.useEffect((()=>{r.submitCount&&o._focusError()}),[o,r.submitCount]),n.current.formState=$W(r,o),n.current}const rY=e=>{let{firstBtn:t,firstBtnTitle:n,firstBtnType:r,firstBtnOnClick:i,secondBtn:o,secondBtnTitle:a,secondBtnType:s,secondBtnOnClick:l,underBtnFirstText:c,underBtnFirstLinkText:u,underBtnFirstOnClick:d,underBtnSecondText:h,underBtnSecondLinkText:f,underBtnSecondOnClick:p}=e;return(0,jU.jsxs)("div",{className:"flex flex-col gap-y-2 text-sm",children:[t&&(0,jU.jsx)(YH,{uiType:t,type:r,title:n,onClick:i}),o&&(0,jU.jsx)(YH,{uiType:o,type:s,title:a,onClick:l}),c&&(0,jU.jsxs)("span",{className:"text-lmGrey500 dark:text-dmGrey300",children:[c," ",(0,jU.jsx)("span",{onClick:d,className:"cursor-pointer underline underline-offset-2 duration-300 dark:hover:text-dmGrey100",children:u})]}),h&&(0,jU.jsxs)("span",{className:"text-lmGrey500 dark:text-dmGrey300",children:[h," ",(0,jU.jsx)("span",{onClick:p,className:"cursor-pointer underline underline-offset-2 duration-300 dark:hover:text-dmGrey100",children:f})]})]})};var iY=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(iY||{}),oY=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(oY||{});let aY={0:e=>({...e,popoverState:GU(e.popoverState,{0:1,1:0})}),1:e=>1===e.popoverState?e:{...e,popoverState:1},2:(e,t)=>e.button===t.button?e:{...e,button:t.button},3:(e,t)=>e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId},4:(e,t)=>e.panel===t.panel?e:{...e,panel:t.panel},5:(e,t)=>e.panelId===t.panelId?e:{...e,panelId:t.panelId}},sY=(0,e.createContext)(null);function lY(t){let n=(0,e.useContext)(sY);if(null===n){let e=new Error("<".concat(t," /> is missing a parent <Popover /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(e,lY),e}return n}sY.displayName="PopoverContext";let cY=(0,e.createContext)(null);function uY(t){let n=(0,e.useContext)(cY);if(null===n){let e=new Error("<".concat(t," /> is missing a parent <Popover /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(e,uY),e}return n}cY.displayName="PopoverAPIContext";let dY=(0,e.createContext)(null);function hY(){return(0,e.useContext)(dY)}dY.displayName="PopoverGroupContext";let fY=(0,e.createContext)(null);function pY(e,t){return GU(t.type,aY,e,t)}fY.displayName="PopoverPanelContext";let mY=QU((function(t,n){var r;let i="headlessui-popover-button-".concat(fG()),o="headlessui-popover-panel-".concat(fG()),a=(0,e.useRef)(null),s=sG(n,aG((e=>{a.current=e}))),l=(0,e.useReducer)(pY,{popoverState:1,button:null,buttonId:i,panel:null,panelId:o,beforePanelSentinel:(0,e.createRef)(),afterPanelSentinel:(0,e.createRef)()}),[{popoverState:c,button:u,panel:d,beforePanelSentinel:h,afterPanelSentinel:f},p]=l,m=UG(null!=(r=a.current)?r:u);(0,e.useEffect)((()=>p({type:3,buttonId:i})),[i,p]),(0,e.useEffect)((()=>p({type:5,panelId:o})),[o,p]);let g=(0,e.useMemo)((()=>{if(!u||!d)return!1;for(let a of document.querySelectorAll("body > *"))if(Number(null==a?void 0:a.contains(u))^Number(null==a?void 0:a.contains(d)))return!0;let e=_G(),t=e.indexOf(u),n=(t+e.length-1)%e.length,r=(t+1)%e.length,i=e[n],o=e[r];return!d.contains(i)&&!d.contains(o)}),[u,d]),v=(0,e.useMemo)((()=>({buttonId:i,panelId:o,close:()=>p({type:1})})),[i,o,p]),y=hY(),x=null==y?void 0:y.registerPopover,b=iG((()=>{var e;return null!=(e=null==y?void 0:y.isFocusWithinPopoverGroup())?e:(null==m?void 0:m.activeElement)&&((null==u?void 0:u.contains(m.activeElement))||(null==d?void 0:d.contains(m.activeElement)))}));(0,e.useEffect)((()=>null==x?void 0:x(v)),[x,v]),OV(null==m?void 0:m.defaultView,"focus",(e=>{var t,n,r,i;0===c&&(b()||!u||!d||null!=(n=null==(t=h.current)?void 0:t.contains)&&n.call(t,e.target)||null!=(i=null==(r=f.current)?void 0:r.contains)&&i.call(r,e.target)||p({type:1}))}),!0),RG([u,d],((e,t)=>{p({type:1}),EG(t,AG.Loose)||(e.preventDefault(),null==u||u.focus())}),0===c);let w=iG((e=>{p({type:1});let t=e?e instanceof HTMLElement?e:"current"in e&&e.current instanceof HTMLElement?e.current:u:u;null==t||t.focus()})),S=(0,e.useMemo)((()=>({close:w,isPortalled:g})),[w,g]),_=(0,e.useMemo)((()=>({open:0===c,close:w})),[c,w]),A=t,E={ref:s};return e.createElement(sY.Provider,{value:l},e.createElement(cY.Provider,{value:S},e.createElement(BG,{value:GU(c,{0:NG.Open,1:NG.Closed})},WU({ourProps:E,theirProps:A,slot:_,defaultTag:"div",name:"Popover"}))))})),gY=QU((function(t,n){let[r,i]=lY("Popover.Button"),{isPortalled:o}=uY("Popover.Button"),a=(0,e.useRef)(null),s="headlessui-focus-sentinel-".concat(fG()),l=hY(),c=null==l?void 0:l.closeOthers,u=(0,e.useContext)(fY),d=null!==u&&u===r.panelId,h=sG(a,n,d?null:e=>i({type:2,button:e})),f=sG(a,n),p=UG(a),m=iG((e=>{var t,n,o;if(d){if(1===r.popoverState)return;switch(e.key){case pG.Space:case pG.Enter:e.preventDefault(),null==(n=(t=e.target).click)||n.call(t),i({type:1}),null==(o=r.button)||o.focus()}}else switch(e.key){case pG.Space:case pG.Enter:e.preventDefault(),e.stopPropagation(),1===r.popoverState&&(null==c||c(r.buttonId)),i({type:0});break;case pG.Escape:if(0!==r.popoverState)return null==c?void 0:c(r.buttonId);if(!a.current||(null==p?void 0:p.activeElement)&&!a.current.contains(p.activeElement))return;e.preventDefault(),e.stopPropagation(),i({type:1})}})),g=iG((e=>{d||e.key===pG.Space&&e.preventDefault()})),v=iG((e=>{var n,o;vG(e.currentTarget)||t.disabled||(d?(i({type:1}),null==(n=r.button)||n.focus()):(e.preventDefault(),e.stopPropagation(),1===r.popoverState&&(null==c||c(r.buttonId)),i({type:0}),null==(o=r.button)||o.focus()))})),y=iG((e=>{e.preventDefault(),e.stopPropagation()})),x=0===r.popoverState,b=(0,e.useMemo)((()=>({open:x})),[x]),w=zG(t,a),S=t,_=d?{ref:f,type:w,onKeyDown:m,onClick:v}:{ref:h,id:r.buttonId,type:w,"aria-expanded":t.disabled?void 0:0===r.popoverState,"aria-controls":r.panel?r.panelId:void 0,onKeyDown:m,onKeyUp:g,onClick:v,onMouseDown:y},A=kV(),E=iG((()=>{let e=r.panel;e&&GU(A.current,{[DV.Forwards]:()=>kG(e,bG.First),[DV.Backwards]:()=>kG(e,bG.Last)})}));return e.createElement(e.Fragment,null,WU({ourProps:_,theirProps:S,slot:b,defaultTag:"button",name:"Popover.Button"}),x&&!d&&o&&e.createElement(PV,{id:s,features:TV.Focusable,as:"button",type:"button",onFocus:E}))})),vY=VU.RenderStrategy|VU.Static,yY=QU((function(t,n){let[{popoverState:r},i]=lY("Popover.Overlay"),o=sG(n),a="headlessui-popover-overlay-".concat(fG()),s=jG(),l=null!==s?s===NG.Open:0===r,c=iG((e=>{if(vG(e.currentTarget))return e.preventDefault();i({type:1})}));return WU({ourProps:{ref:o,id:a,"aria-hidden":!0,onClick:c},theirProps:t,slot:(0,e.useMemo)((()=>({open:0===r})),[r]),defaultTag:"div",features:vY,visible:l,name:"Popover.Overlay"})})),xY=VU.RenderStrategy|VU.Static,bY=QU((function(t,n){let{focus:r=!1,...i}=t,[o,a]=lY("Popover.Panel"),{close:s,isPortalled:l}=uY("Popover.Panel"),c="headlessui-focus-sentinel-before-".concat(fG()),u="headlessui-focus-sentinel-after-".concat(fG()),d=(0,e.useRef)(null),h=sG(d,n,(e=>{a({type:4,panel:e})})),f=UG(d),p=jG(),m=null!==p?p===NG.Open:0===o.popoverState,g=iG((e=>{var t;if(e.key===pG.Escape){if(0!==o.popoverState||!d.current||(null==f?void 0:f.activeElement)&&!d.current.contains(f.activeElement))return;e.preventDefault(),e.stopPropagation(),a({type:1}),null==(t=o.button)||t.focus()}}));(0,e.useEffect)((()=>{var e;t.static||1===o.popoverState&&(null==(e=t.unmount)||e)&&a({type:4,panel:null})}),[o.popoverState,t.unmount,t.static,a]),(0,e.useEffect)((()=>{if(!r||0!==o.popoverState||!d.current)return;let e=null==f?void 0:f.activeElement;d.current.contains(e)||kG(d.current,bG.First)}),[r,d,o.popoverState]);let v=(0,e.useMemo)((()=>({open:0===o.popoverState,close:s})),[o,s]),y={ref:h,id:o.panelId,onKeyDown:g,onBlur:r&&0===o.popoverState?e=>{var t,n,r,i,s;let l=e.relatedTarget;!l||!d.current||null!=(t=d.current)&&t.contains(l)||(a({type:1}),((null==(r=null==(n=o.beforePanelSentinel.current)?void 0:n.contains)?void 0:r.call(n,l))||(null==(s=null==(i=o.afterPanelSentinel.current)?void 0:i.contains)?void 0:s.call(i,l)))&&l.focus({preventScroll:!0}))}:void 0,tabIndex:-1},x=kV(),b=iG((()=>{let e=d.current;e&&GU(x.current,{[DV.Forwards]:()=>{kG(e,bG.First)},[DV.Backwards]:()=>{var e;null==(e=o.button)||e.focus({preventScroll:!0})}})})),w=iG((()=>{let e=d.current;e&&GU(x.current,{[DV.Forwards]:()=>{var e,t,n;if(!o.button)return;let r=_G(),i=r.indexOf(o.button),a=r.slice(0,i+1),s=[...r.slice(i+1),...a];for(let l of s.slice())if((null==(t=null==(e=null==l?void 0:l.id)?void 0:e.startsWith)?void 0:t.call(e,"headlessui-focus-sentinel-"))||(null==(n=o.panel)?void 0:n.contains(l))){let e=s.indexOf(l);-1!==e&&s.splice(e,1)}kG(s,bG.First,!1)},[DV.Backwards]:()=>kG(e,bG.Last)})}));return e.createElement(fY.Provider,{value:o.panelId},m&&l&&e.createElement(PV,{id:c,ref:o.beforePanelSentinel,features:TV.Focusable,as:"button",type:"button",onFocus:b}),WU({ourProps:y,theirProps:i,slot:v,defaultTag:"div",features:xY,visible:m,name:"Popover.Panel"}),m&&l&&e.createElement(PV,{id:u,ref:o.afterPanelSentinel,features:TV.Focusable,as:"button",type:"button",onFocus:w}))})),wY=QU((function(t,n){let r=(0,e.useRef)(null),i=sG(r,n),[o,a]=(0,e.useState)([]),s=iG((e=>{a((t=>{let n=t.indexOf(e);if(-1!==n){let e=t.slice();return e.splice(n,1),e}return t}))})),l=iG((e=>(a((t=>[...t,e])),()=>s(e)))),c=iG((()=>{var e;let t=yG(r);if(!t)return!1;let n=t.activeElement;return!(null==(e=r.current)||!e.contains(n))||o.some((e=>{var r,i;return(null==(r=t.getElementById(e.buttonId))?void 0:r.contains(n))||(null==(i=t.getElementById(e.panelId))?void 0:i.contains(n))}))})),u=iG((e=>{for(let t of o)t.buttonId!==e&&t.close()})),d=(0,e.useMemo)((()=>({registerPopover:l,unregisterPopover:s,isFocusWithinPopoverGroup:c,closeOthers:u})),[l,s,c,u]),h=(0,e.useMemo)((()=>({})),[]),f=t,p={ref:i};return e.createElement(dY.Provider,{value:d},WU({ourProps:p,theirProps:f,slot:h,defaultTag:"div",name:"Popover.Group"}))})),SY=Object.assign(mY,{Button:gY,Overlay:yY,Panel:bY,Group:wY});const _Y=e=>{let{firstIcon:t,secondIcon:n,onChange:r,onBlur:i,onDelete:o,name:a,placeholder:s,value:l,label:c,error:u,type:d,filter:h}=e;return(0,jU.jsxs)("div",{className:"flex w-full max-w-[340px] flex-col gap-y-2","aria-invalid":u?"true":"false",children:[(0,jU.jsx)("label",{htmlFor:a,className:"text-sm text-lmGrey500 dark:text-dmGrey100",children:c}),(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-1",children:[(0,jU.jsxs)("div",{className:"flex w-full gap-x-2",children:[(0,jU.jsxs)("div",{className:"flex w-full items-center gap-x-2 rounded-lg ".concat(u?"bg-red-100 dark:bg-red-900":"bg-lmGrey50 dark:bg-dmGrey800","  py-[10px] px-3 shadow-sm"),children:[t&&(0,jU.jsx)("div",{className:"flex h-full w-[14px] items-center justify-center",children:(0,jU.jsx)("i",{className:"".concat(t," flex h-[14px] w-[14px] items-center justify-center text-[14px] ").concat(u?"text-red-300 dark:text-red-100":void 0===l||""===l||null===l?"text-lmGrey300 dark:text-dmGrey300":"text-lmGrey600 dark:text-dmGrey25","  ")})}),(0,jU.jsx)("input",{type:null!==d&&void 0!==d?d:"text",name:a,value:l||"",onChange:r,onBlur:i,placeholder:s,className:"w-full bg-transparent text-sm ".concat(u?"text-red-500 placeholder:text-red-300 dark:text-red-100":"text-lmGrey600 placeholder:text-dmGrey300 dark:text-dmGrey25 placeholder:dark:text-dmGrey300"," focus:outline-none")}),(n||u)&&("fa-solid fa-times"!==n?(0,jU.jsx)("div",{className:"flex h-full w-[14px] items-center justify-center",children:(0,jU.jsx)("i",{className:"".concat(u?"fa-solid fa-triangle-exclamation":n," flex h-[14px] w-[14px] items-center justify-center text-[14px] ").concat(u?"text-red-300 dark:text-red-100":void 0===l||""===l||null===l?"text-lmGrey300 dark:text-dmGrey300":"text-lmGrey600 dark:text-dmGrey25","  ")})}):u||""!==l&&l?(0,jU.jsx)("i",{onClick:o,className:"".concat(u?"fa-solid fa-triangle-exclamation":n," min-w[14px] h-min-[14px] flex h-[14px] w-[14px] items-center justify-center text-[14px] ").concat(u?"text-red-300 dark:text-red-100":void 0===l||""===l||null===l?"text-lmGrey300 dark:text-dmGrey300":"text-lmGrey600 dark:text-dmGrey25","  ")}):void 0)]}),void 0!==h&&(0,jU.jsx)(SY.Button,{className:"fa-solid fa-filter flex min-h-[40px] min-w-[40px] items-center justify-center rounded-lg bg-lmGrey50 text-base text-lmGrey200 dark:bg-lmGrey800 dark:text-dmGrey300"})]}),u&&(0,jU.jsxs)("div",{className:"flex items-center gap-x-2 px-3 ",children:[(0,jU.jsx)("i",{className:"fa-solid fa-triangle-exclamation flex h-[12px] w-[12px] items-center justify-center text-xs text-red-300 dark:text-red-100"}),(0,jU.jsx)("span",{className:"text-xs text-red-500 dark:text-red-100",children:u.message})]})]})]})},AY=e=>{let{handleCallback:t}=e;const{control:n,handleSubmit:r}=nY(),i=Ge();return(0,jU.jsxs)("form",{onSubmit:r((e=>{console.log("sending email");t({data:e,nextStep:"email"})})),className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsx)(uq,{name:"email",control:n,rules:{required:"Email is required",pattern:{value:/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/,message:"Invalid email address"}},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-at",onChange:t.onChange,label:"Email",placeholder:"maxMustermann@web.de",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Send Email",firstBtnType:"submit",firstBtnOnClick:r,secondBtn:"secondary",secondBtnTitle:"Sign Up with Google",secondBtnType:"button",secondBtnOnClick:()=>{console.log("making google stuff");t({nextStep:"google"})},underBtnFirstText:"Already have an Account?",underBtnFirstLinkText:"Sign In instead",underBtnFirstOnClick:()=>i("/sign-in")})]})},EY=e=>{let{handleCallback:t}=e;const{control:n,handleSubmit:r}=nY();return(0,jU.jsxs)("form",{onSubmit:r((e=>{console.log("setting password");t({data:e,nextStep:"finished"})})),className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsx)(uq,{name:"password",control:n,rules:{required:"Password is required",pattern:{value:/^\S*(?=\S{6,})(?=\S*\d)(?=\S*[A-Z])(?=\S*[a-z])(?=\S*[!@#$%^&*?+-=\u20ac/ ])\S*$/,message:"Minimum 6 Characters - 1 upper and 1 lower case - 1 letter and 1 special character"}},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-lock",onChange:t.onChange,label:"Password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",type:"password",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Set as new Password",firstBtnType:"submit",firstBtnOnClick:r})]})},CY=()=>{const{forgotPasswordRounds:e}=WH(),{currentRound:t}=EW(),{handleCallback:n}=(()=>{const{handleStorage:e,handleEmailContinue:t}=EW(),n=Ge();return{handleCallback:r=>{let{data:i,nextStep:o}=r;switch(o){case"google":case"finished":n("/homepage");break;case"email":t(i),e(i,"forgotPasswordData")}}}})(),r={1:(0,jU.jsx)(AY,{handleCallback:n}),2:(0,jU.jsx)(EY,{handleCallback:n})};return(0,jU.jsx)(_W,{pic:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FitalienStreet.webp?alt=media&token=299dade6-a4d2-40cc-a099-cfb97431bec1",children:(0,jU.jsxs)("div",{className:"flex w-full max-w-[348px] flex-col gap-y-[48px]",children:[(0,jU.jsxs)("div",{className:"flex flex-col items-center justify-center gap-y-1 p-2",children:[(0,jU.jsx)("span",{className:"text-2xl text-lmGrey800 dark:text-dmGrey25",children:e[t-1].title}),(0,jU.jsx)(SW,{amount:e.length,finished:t-1})]}),r[t]]})})},MY=()=>{const{handleStorage:e,handleContinue:t,handleGoBack:n,handleGoogle:r,handleEmailContinue:i,handleConfirmationContinue:o}=EW(),a=Ge();return{handleCallback:s=>{let{data:l,nextStep:c}=s;switch(c){case"google":r();break;case"email":i(l),e(l,"signUpData");break;case"confirmation":o(l),e(l,"signUpData");break;case"finish":localStorage.removeItem("signUpData"),a("/homepage");break;case!0:t(),e(l,"signUpData");break;case!1:n()}}}},TY=e=>{let{handleCallback:t}=e;const{control:n,handleSubmit:r}=nY(),i=Ge();return(0,jU.jsxs)("form",{onSubmit:r((e=>{console.log("signing in");t({data:e,nextStep:"finished"})})),className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-2",children:[(0,jU.jsx)(uq,{name:"email",control:n,rules:{required:"Email is required",pattern:{value:/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/,message:"Invalid email address"}},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-at",onChange:t.onChange,label:"Email",placeholder:"maxMustermann@web.de",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"password",control:n,rules:{required:"Password is required",pattern:{value:/^\S*(?=\S{6,})(?=\S*\d)(?=\S*[A-Z])(?=\S*[a-z])(?=\S*[!@#$%^&*?+-=\u20ac/ ])\S*$/,message:"Minimum 6 Characters - 1 upper and 1 lower case - 1 letter and 1 special character"}},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-lock",onChange:t.onChange,label:"Password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",type:"password",value:t.value,onBlur:t.onBlur,error:n.error})}})]}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Sign In",firstBtnType:"submit",firstBtnOnClick:r,secondBtn:"secondary",secondBtnTitle:"Sign Up with Google",secondBtnType:"button",secondBtnOnClick:()=>{console.log("making google stuff");t({nextStep:"google"})},underBtnFirstText:"Forgot your password?",underBtnFirstLinkText:"Let's fix that",underBtnFirstOnClick:()=>i("/forgot-password"),underBtnSecondText:"Don't have a account?",underBtnSecondLinkText:"Sign Up here",underBtnSecondOnClick:()=>i("/sign-up")})]})},PY=()=>{const{handleCallback:e}=MY();return(0,jU.jsx)(_W,{pic:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FnewCar.webp?alt=media&token=299dade6-a4d2-40cc-a099-cfb97431bec1",children:(0,jU.jsxs)("div",{className:"flex w-full max-w-[348px] flex-col gap-y-[48px]",children:[(0,jU.jsxs)("div",{className:"flex flex-col items-center justify-center gap-y-1 p-2",children:[(0,jU.jsx)("span",{className:"text-2xl text-lmGrey800 dark:text-dmGrey25",children:"Welcome Back"}),(0,jU.jsx)("span",{className:"text-base text-lmGrey600 dark:text-dmGrey300",children:"Suspendisse et nunc fringilla in tempus."})]}),(0,jU.jsx)(TY,{handleCallback:e})]})})};function DY(t,n){let[r,i]=(0,e.useState)(t),o=rG(t);return nG((()=>i(o.current)),[o,i,...n]),r}function kY(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let[r,i]of Object.entries(e))RY(n,OY(t,r),i);return n}function OY(e,t){return e?e+"["+t+"]":t}function RY(e,t,n){if(Array.isArray(n))for(let[r,i]of n.entries())RY(e,OY(t,r.toString()),i);else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,"".concat(n)]):null==n?e.push([t,""]):kY(n,t,e)}function IY(t,n,r){let[i,o]=(0,e.useState)(r),a=void 0!==t;return[a?t:i,iG((e=>(a||o(e),null==n?void 0:n(e))))]}var LY=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(LY||{}),NY=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(NY||{}),jY=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(jY||{}),BY=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.RegisterOption=3]="RegisterOption",e[e.UnregisterOption=4]="UnregisterOption",e[e.RegisterLabel=5]="RegisterLabel",e))(BY||{});function FY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,n=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,r=DG(t(e.options.slice()),(e=>e.dataRef.current.domRef.current)),i=n?r.indexOf(n):null;return-1===i&&(i=null),{options:r,activeOptionIndex:i}}let zY={1:e=>e.dataRef.current.disabled||1===e.comboboxState?e:{...e,activeOptionIndex:null,comboboxState:1},0(e){if(e.dataRef.current.disabled||0===e.comboboxState)return e;let t=e.activeOptionIndex,{isSelected:n}=e.dataRef.current,r=e.options.findIndex((e=>n(e.dataRef.current.value)));return-1!==r&&(t=r),{...e,comboboxState:0,activeOptionIndex:t}},2(e,t){var n;if(e.dataRef.current.disabled||e.dataRef.current.optionsRef.current&&!e.dataRef.current.optionsPropsRef.current.static&&1===e.comboboxState)return e;let r=FY(e);if(null===r.activeOptionIndex){let e=r.options.findIndex((e=>!e.dataRef.current.disabled));-1!==e&&(r.activeOptionIndex=e)}let i=gG(t,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...r,activeOptionIndex:i,activationTrigger:null!=(n=t.trigger)?n:1}},3:(e,t)=>{let n={id:t.id,dataRef:t.dataRef},r=FY(e,(e=>[...e,n]));null===e.activeOptionIndex&&e.dataRef.current.isSelected(t.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(n));let i={...e,...r,activationTrigger:1};return e.dataRef.current.__demoMode&&void 0===e.dataRef.current.value&&(i.activeOptionIndex=0),i},4:(e,t)=>{let n=FY(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}},5:(e,t)=>({...e,labelId:t.id})},UY=(0,e.createContext)(null);function GY(t){let n=(0,e.useContext)(UY);if(null===n){let e=new Error("<".concat(t," /> is missing a parent <Combobox /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(e,GY),e}return n}UY.displayName="ComboboxActionsContext";let VY=(0,e.createContext)(null);function HY(t){let n=(0,e.useContext)(VY);if(null===n){let e=new Error("<".concat(t," /> is missing a parent <Combobox /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(e,HY),e}return n}function WY(e,t){return GU(t.type,zY,e,t)}VY.displayName="ComboboxDataContext";let qY=e.Fragment;let YY=QU((function(t,n){let{value:r,defaultValue:i,onChange:o,name:a,by:s=((e,t)=>e===t),disabled:l=!1,__demoMode:c=!1,nullable:u=!1,multiple:d=!1,...h}=t,[f,p]=IY(r,o,i),[m,g]=(0,e.useReducer)(WY,{dataRef:(0,e.createRef)(),comboboxState:c?0:1,options:[],activeOptionIndex:null,activationTrigger:1,labelId:null}),v=(0,e.useRef)(!1),y=(0,e.useRef)({static:!1,hold:!1}),x=(0,e.useRef)(null),b=(0,e.useRef)(null),w=(0,e.useRef)(null),S=(0,e.useRef)(null),_=iG("string"==typeof s?(e,t)=>{let n=s;return(null==e?void 0:e[n])===(null==t?void 0:t[n])}:s),A=(0,e.useCallback)((e=>GU(E.mode,{1:()=>f.some((t=>_(t,e))),0:()=>_(f,e)})),[f]),E=(0,e.useMemo)((()=>({...m,optionsPropsRef:y,labelRef:x,inputRef:b,buttonRef:w,optionsRef:S,value:f,disabled:l,mode:d?1:0,get activeOptionIndex(){if(v.current&&null===m.activeOptionIndex&&m.options.length>0){let e=m.options.findIndex((e=>!e.dataRef.current.disabled));if(-1!==e)return e}return m.activeOptionIndex},compare:_,isSelected:A,nullable:u,__demoMode:c})),[f,l,d,u,c,m]);nG((()=>{m.dataRef.current=E}),[E]),RG([E.buttonRef,E.inputRef,E.optionsRef],(()=>g({type:1})),0===E.comboboxState);let C=(0,e.useMemo)((()=>({open:0===E.comboboxState,disabled:l,activeIndex:E.activeOptionIndex,activeOption:null===E.activeOptionIndex?null:E.options[E.activeOptionIndex].dataRef.current.value,value:f})),[E,l,f]),M=iG((e=>{let t=E.options.find((t=>t.id===e));!t||I(t.dataRef.current.value)})),T=iG((()=>{if(null!==E.activeOptionIndex){let{dataRef:e,id:t}=E.options[E.activeOptionIndex];I(e.current.value),g({type:2,focus:mG.Specific,id:t})}})),P=iG((()=>{g({type:0}),v.current=!0})),D=iG((()=>{g({type:1}),v.current=!1})),k=iG(((e,t,n)=>(v.current=!1,e===mG.Specific?g({type:2,focus:mG.Specific,id:t,trigger:n}):g({type:2,focus:e,trigger:n})))),O=iG(((e,t)=>(g({type:3,id:e,dataRef:t}),()=>g({type:4,id:e})))),R=iG((e=>(g({type:5,id:e}),()=>g({type:5,id:null})))),I=iG((e=>GU(E.mode,{0:()=>null==p?void 0:p(e),1(){let t=E.value.slice(),n=t.findIndex((t=>_(t,e)));return-1===n?t.push(e):t.splice(n,1),null==p?void 0:p(t)}}))),L=(0,e.useMemo)((()=>({onChange:I,registerOption:O,registerLabel:R,goToOption:k,closeCombobox:D,openCombobox:P,selectActiveOption:T,selectOption:M})),[]),N=null===n?{}:{ref:n};return e.createElement(UY.Provider,{value:L},e.createElement(VY.Provider,{value:E},e.createElement(BG,{value:GU(E.comboboxState,{0:NG.Open,1:NG.Closed})},null!=a&&null!=f&&kY({[a]:f}).map((t=>{let[n,r]=t;return e.createElement(PV,{features:TV.Hidden,...KU({key:n,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:n,value:r})})})),WU({ourProps:N,theirProps:h,slot:C,defaultTag:qY,name:"Combobox"}))))})),XY=QU((function(t,n){var r,i;let{value:o,onChange:a,displayValue:s,type:l="text",...c}=t,u=HY("Combobox.Input"),d=GY("Combobox.Input"),h=sG(u.inputRef,n),f="headlessui-combobox-input-".concat(fG()),p=eG(),m=(0,e.useMemo)((()=>{var e;return"function"==typeof s?null!=(e=s(u.value))?e:"":"string"==typeof u.value?u.value:""}),[u.value]);RV(((e,t)=>{let[n,r]=e,[i,o]=t;!u.inputRef.current||(0===o&&1===r||n!==i)&&(u.inputRef.current.value=n)}),[m,u.comboboxState]);let g=iG((e=>{switch(e.key){case pG.Backspace:case pG.Delete:if(0!==u.mode||!u.nullable)return;let t=e.currentTarget;p.requestAnimationFrame((()=>{""===t.value&&(d.onChange(null),u.optionsRef.current&&(u.optionsRef.current.scrollTop=0),d.goToOption(mG.Nothing))}));break;case pG.Enter:if(0!==u.comboboxState||e.nativeEvent.isComposing)return;if(e.preventDefault(),e.stopPropagation(),null===u.activeOptionIndex)return void d.closeCombobox();d.selectActiveOption(),0===u.mode&&d.closeCombobox();break;case pG.ArrowDown:return e.preventDefault(),e.stopPropagation(),GU(u.comboboxState,{0:()=>{d.goToOption(mG.Next)},1:()=>{d.openCombobox()}});case pG.ArrowUp:return e.preventDefault(),e.stopPropagation(),GU(u.comboboxState,{0:()=>{d.goToOption(mG.Previous)},1:()=>{d.openCombobox(),p.nextFrame((()=>{u.value||d.goToOption(mG.Last)}))}});case pG.Home:case pG.PageUp:return e.preventDefault(),e.stopPropagation(),d.goToOption(mG.First);case pG.End:case pG.PageDown:return e.preventDefault(),e.stopPropagation(),d.goToOption(mG.Last);case pG.Escape:return 0!==u.comboboxState?void 0:(e.preventDefault(),u.optionsRef.current&&!u.optionsPropsRef.current.static&&e.stopPropagation(),d.closeCombobox());case pG.Tab:if(0!==u.comboboxState)return;0===u.mode&&d.selectActiveOption(),d.closeCombobox()}})),v=iG((e=>{d.openCombobox(),null==a||a(e)})),y=DY((()=>{if(u.labelId)return[u.labelId].join(" ")}),[u.labelId]),x=(0,e.useMemo)((()=>({open:0===u.comboboxState,disabled:u.disabled})),[u]);return WU({ourProps:{ref:h,id:f,role:"combobox",type:l,"aria-controls":null==(r=u.optionsRef.current)?void 0:r.id,"aria-expanded":u.disabled?void 0:0===u.comboboxState,"aria-activedescendant":null===u.activeOptionIndex||null==(i=u.options[u.activeOptionIndex])?void 0:i.id,"aria-multiselectable":1===u.mode||void 0,"aria-labelledby":y,disabled:u.disabled,onKeyDown:g,onChange:v},theirProps:c,slot:x,defaultTag:"input",name:"Combobox.Input"})})),QY=QU((function(t,n){var r;let i=HY("Combobox.Button"),o=GY("Combobox.Button"),a=sG(i.buttonRef,n),s="headlessui-combobox-button-".concat(fG()),l=eG(),c=iG((e=>{switch(e.key){case pG.ArrowDown:return e.preventDefault(),e.stopPropagation(),1===i.comboboxState&&o.openCombobox(),l.nextFrame((()=>{var e;return null==(e=i.inputRef.current)?void 0:e.focus({preventScroll:!0})}));case pG.ArrowUp:return e.preventDefault(),e.stopPropagation(),1===i.comboboxState&&(o.openCombobox(),l.nextFrame((()=>{i.value||o.goToOption(mG.Last)}))),l.nextFrame((()=>{var e;return null==(e=i.inputRef.current)?void 0:e.focus({preventScroll:!0})}));case pG.Escape:return 0!==i.comboboxState?void 0:(e.preventDefault(),i.optionsRef.current&&!i.optionsPropsRef.current.static&&e.stopPropagation(),o.closeCombobox(),l.nextFrame((()=>{var e;return null==(e=i.inputRef.current)?void 0:e.focus({preventScroll:!0})})));default:return}})),u=iG((e=>{if(vG(e.currentTarget))return e.preventDefault();0===i.comboboxState?o.closeCombobox():(e.preventDefault(),o.openCombobox()),l.nextFrame((()=>{var e;return null==(e=i.inputRef.current)?void 0:e.focus({preventScroll:!0})}))})),d=DY((()=>{if(i.labelId)return[i.labelId,s].join(" ")}),[i.labelId,s]),h=(0,e.useMemo)((()=>({open:0===i.comboboxState,disabled:i.disabled,value:i.value})),[i]),f=t;return WU({ourProps:{ref:a,id:s,type:zG(t,i.buttonRef),tabIndex:-1,"aria-haspopup":!0,"aria-controls":null==(r=i.optionsRef.current)?void 0:r.id,"aria-expanded":i.disabled?void 0:0===i.comboboxState,"aria-labelledby":d,disabled:i.disabled,onClick:u,onKeyDown:c},theirProps:f,slot:h,defaultTag:"button",name:"Combobox.Button"})})),KY=QU((function(t,n){let r=HY("Combobox.Label"),i="headlessui-combobox-label-".concat(fG()),o=GY("Combobox.Label"),a=sG(r.labelRef,n);nG((()=>o.registerLabel(i)),[i]);let s=iG((()=>{var e;return null==(e=r.inputRef.current)?void 0:e.focus({preventScroll:!0})})),l=(0,e.useMemo)((()=>({open:0===r.comboboxState,disabled:r.disabled})),[r]);return WU({ourProps:{ref:a,id:i,onClick:s},theirProps:t,slot:l,defaultTag:"label",name:"Combobox.Label"})})),ZY=VU.RenderStrategy|VU.Static,JY=QU((function(t,n){var r;let{hold:i=!1,...o}=t,a=HY("Combobox.Options"),s=sG(a.optionsRef,n),l="headlessui-combobox-options-".concat(fG()),c=jG(),u=null!==c?c===NG.Open:0===a.comboboxState;nG((()=>{var e;a.optionsPropsRef.current.static=null!=(e=t.static)&&e}),[a.optionsPropsRef,t.static]),nG((()=>{a.optionsPropsRef.current.hold=i}),[a.optionsPropsRef,i]),IG({container:a.optionsRef.current,enabled:0===a.comboboxState,accept:e=>"option"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let d=DY((()=>{var e,t;return null!=(t=a.labelId)?t:null==(e=a.buttonRef.current)?void 0:e.id}),[a.labelId,a.buttonRef.current]),h=(0,e.useMemo)((()=>({open:0===a.comboboxState})),[a]);return WU({ourProps:{"aria-activedescendant":null===a.activeOptionIndex||null==(r=a.options[a.activeOptionIndex])?void 0:r.id,"aria-labelledby":d,role:"listbox",id:l,ref:s},theirProps:o,slot:h,defaultTag:"ul",features:ZY,visible:u,name:"Combobox.Options"})})),$Y=QU((function(t,n){var r,i;let{disabled:o=!1,value:a,...s}=t,l=HY("Combobox.Option"),c=GY("Combobox.Option"),u="headlessui-combobox-option-".concat(fG()),d=null!==l.activeOptionIndex&&l.options[l.activeOptionIndex].id===u,h=l.isSelected(a),f=(0,e.useRef)(null),p=rG({disabled:o,value:a,domRef:f,textValue:null==(i=null==(r=f.current)?void 0:r.textContent)?void 0:i.toLowerCase()}),m=sG(n,f),g=iG((()=>c.selectOption(u)));nG((()=>c.registerOption(u,p)),[p,u]);let v=(0,e.useRef)(!l.__demoMode);nG((()=>{if(!l.__demoMode)return;let e=$U();return e.requestAnimationFrame((()=>{v.current=!0})),e.dispose}),[]),nG((()=>{if(0!==l.comboboxState||!d||!v.current||0===l.activationTrigger)return;let e=$U();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=f.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[f,d,l.comboboxState,l.activationTrigger,l.activeOptionIndex]);let y=iG((e=>{if(o)return e.preventDefault();g(),0===l.mode&&c.closeCombobox()})),x=iG((()=>{if(o)return c.goToOption(mG.Nothing);c.goToOption(mG.Specific,u)})),b=iG((()=>{o||d||c.goToOption(mG.Specific,u,0)})),w=iG((()=>{o||!d||l.optionsPropsRef.current.hold||c.goToOption(mG.Nothing)})),S=(0,e.useMemo)((()=>({active:d,selected:h,disabled:o})),[d,h,o]);return WU({ourProps:{id:u,ref:m,role:"option",tabIndex:!0===o?void 0:-1,"aria-disabled":!0===o||void 0,"aria-selected":h,disabled:void 0,onClick:y,onFocus:x,onPointerMove:b,onMouseMove:b,onPointerLeave:w,onMouseLeave:w},theirProps:s,slot:S,defaultTag:"li",name:"Combobox.Option"})})),eX=Object.assign(YY,{Input:XY,Button:QY,Label:KY,Options:JY,Option:$Y});var tX={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},nX=e.createContext&&e.createContext(tX),rX=function(){return rX=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},rX.apply(this,arguments)},iX=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function oX(t){return t&&t.map((function(t,n){return e.createElement(t.tag,rX({key:n},t.attr),oX(t.child))}))}function aX(t){return function(n){return e.createElement(sX,rX({attr:rX({},t.attr)},n),oX(t.child))}}function sX(t){var n=function(n){var r,i=t.attr,o=t.size,a=t.title,s=iX(t,["attr","size","title"]),l=o||n.size||"1em";return n.className&&(r=n.className),t.className&&(r=(r?r+" ":"")+t.className),e.createElement("svg",rX({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,s,{className:r,style:rX(rX({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&e.createElement("title",null,a),t.children)};return void 0!==nX?e.createElement(nX.Consumer,null,(function(e){return n(e)})):n(tX)}function lX(e){return aX({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor",ariaHidden:"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.47 4.72a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06L12 6.31 8.78 9.53a.75.75 0 01-1.06-1.06l3.75-3.75zm-3.75 9.75a.75.75 0 011.06 0L12 17.69l3.22-3.22a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-1.06 0l-3.75-3.75a.75.75 0 010-1.06z",clipRule:"evenodd"}}]})(e)}const cX=()=>{const[t,n]=(0,e.useState)({width:void 0,height:void 0});return(0,e.useEffect)((()=>{function e(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]),t},uX=t=>{let{label:n,onChange:r,onInputChange:i,error:o,placeholder:a,itemList:s,isLoading:l,onDelete:c,value:u}=t;const[d,h]=(0,e.useState)(u||null),[f,p]=(0,e.useState)(""),m=""===f?s:s.filter((e=>e.name.toLowerCase().replace(/\s+/g,"").includes(f.toLowerCase().replace(/\s+/g,""))));(0,e.useEffect)((()=>{const e=s.filter((e=>e.name===d));e&&e.length>0&&r(e[0])}),[d]);const g=e=>{p(e.target.value),i(e.target.value)},v=()=>{p(""),h(null),c()},y=Ue(),x=cX(),b="/explore/map"===y.pathname&&x.width<1100;return(0,jU.jsx)(eX,{nullable:!0,value:d,onChange:h,as:"div",className:"relative flex w-full max-w-[340px] flex-col",children:t=>{let{open:r}=t;return(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-2",children:[(0,jU.jsx)(eX.Label,{className:"w-fit text-sm text-lmGrey500 dark:text-dmGrey25",children:n}),(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-1",children:[(0,jU.jsxs)("div",{className:"flex w-full items-center gap-2 rounded-lg ".concat(o?"bg-red-100 dark:bg-red-900":b?"bg-white dark:bg-dmGrey900":"bg-lmGrey50 dark:bg-dmGrey800"," px-3 py-[10px] shadow-sm"),children:[(0,jU.jsx)(eX.Input,{autoComplete:"off",className:"w-full bg-transparent text-sm ".concat(o?"text-red-500 placeholder:text-red-300 dark:text-red-100":d===a?"text-lmGrey300 dark:text-lmGrey300":"text-lmGrey600 placeholder:text-dmGrey300 dark:text-dmGrey25 placeholder:dark:text-dmGrey300","  focus:outline-none"),placeholder:a,displayValue:d,onChange:g}),(0,jU.jsx)("i",{onClick:v,className:"".concat(o?"fa-solid fa-triangle-exclamation":"fa-solid fa-times","\n                  ").concat((null===d||void 0===d?void 0:d.length)>0||f.length>0?"flex":"hidden","\n                  min-w[14px] h-min-[14px] h-[14px] w-[14px] items-center justify-center text-[14px] duration-300 ").concat(o?"text-red-300 dark:text-red-100":"text-lmGrey600 dark:text-dmGrey25")}),(0,jU.jsx)(eX.Button,{children:(0,jU.jsx)("i",{className:"".concat(r?"translate-y-1":"translate-y-0"," flex items-center justify-center text-xl duration-500 ease-in-out"),children:(0,jU.jsx)(LU.div,{animate:r?{y:[0,4,0]}:{y:[0,-4,0]},initial:!1,transition:{ease:"easeOut",duration:.5},children:!o&&(0,jU.jsx)(lX,{"aria-hidden":"true",className:"text-xl ".concat(o?"text-red-300 dark:text-red-100":d===a||""===f?"text-lmGrey300 dark:text-lmGrey300":"text-lmGrey600 dark:text-lmGrey100")})})})})]}),o&&!r&&(0,jU.jsxs)("div",{className:"flex items-center gap-x-2 px-3 ",children:[(0,jU.jsx)("i",{className:"fa-solid fa-triangle-exclamation flex h-[12px] w-[12px] items-center justify-center text-xs text-red-300 dark:text-red-100"}),(0,jU.jsx)("span",{className:"text-xs text-red-500 dark:text-red-100",children:o.message})]})]}),(0,jU.jsx)(SV,{as:e.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",afterLeave:()=>p(""),children:(0,jU.jsx)(eX.Options,{className:"".concat(l&&"animate-pulse"," ").concat(b?"bg-white dark:bg-dmGrey900":"bg-lmGrey50 dark:bg-dmGrey800"," absolute left-0 z-30 mt-14 flex min-h-[40px] w-full flex-col gap-y-1 rounded-lg py-2 px-2 shadow-sm"),children:l?(0,jU.jsx)("div",{className:"relative block cursor-default select-none truncate px-3 py-2 text-sm text-lmGrey600 dark:text-lmGrey100"}):0===m.length&&""!==f?(0,jU.jsx)("div",{className:"relative block cursor-default select-none truncate px-3 py-2 text-sm text-lmGrey600 dark:text-lmGrey100",children:"Nothing found."}):m.map((e=>(0,jU.jsx)(eX.Option,{className:e=>{let{active:t}=e;return"flex w-full cursor-default select-none items-center gap-2 rounded-lg px-3 py-2 ".concat(t?"bg-lmGrey100 dark:bg-dmGrey700":b?"bg-white dark:bg-dmGrey900":"bg-lmGrey50 dark:bg-dmGrey800"," duration-300")},value:e.name,children:t=>{let{selected:n}=t;return(0,jU.jsxs)(jU.Fragment,{children:[(0,jU.jsx)("i",{className:"".concat(n&&"fa-solid fa-check"," flex h-5 w-5 items-center justify-center text-lmGrey600 dark:text-dmGrey100"),"aria-hidden":"true"}),(0,jU.jsx)("span",{className:"block truncate text-sm text-lmGrey600 dark:text-lmGrey100 ".concat(n?"font-semibold":"font-medium"),children:e.name})]})}},e.id)))})})]})}})};var dX=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(dX||{}),hX=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(hX||{}),fX=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(fX||{}),pX=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.SetDisabled=2]="SetDisabled",e[e.SetOrientation=3]="SetOrientation",e[e.GoToOption=4]="GoToOption",e[e.Search=5]="Search",e[e.ClearSearch=6]="ClearSearch",e[e.RegisterOption=7]="RegisterOption",e[e.UnregisterOption=8]="UnregisterOption",e))(pX||{});function mX(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,n=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,r=DG(t(e.options.slice()),(e=>e.dataRef.current.domRef.current)),i=n?r.indexOf(n):null;return-1===i&&(i=null),{options:r,activeOptionIndex:i}}let gX={1:e=>e.disabled||1===e.listboxState?e:{...e,activeOptionIndex:null,listboxState:1},0(e){if(e.disabled||0===e.listboxState)return e;let t=e.activeOptionIndex,{value:n,mode:r,compare:i}=e.propsRef.current,o=e.options.findIndex((e=>{let t=e.dataRef.current.value;return GU(r,{1:()=>n.some((e=>i(e,t))),0:()=>i(n,t)})}));return-1!==o&&(t=o),{...e,listboxState:0,activeOptionIndex:t}},2:(e,t)=>e.disabled===t.disabled?e:{...e,disabled:t.disabled},3:(e,t)=>e.orientation===t.orientation?e:{...e,orientation:t.orientation},4(e,t){var n;if(e.disabled||1===e.listboxState)return e;let r=mX(e),i=gG(t,{resolveItems:()=>r.options,resolveActiveIndex:()=>r.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeOptionIndex:i,activationTrigger:null!=(n=t.trigger)?n:1}},5:(e,t)=>{if(e.disabled||1===e.listboxState)return e;let n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(null!==e.activeOptionIndex?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find((e=>{var t;return!e.dataRef.current.disabled&&(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))})),o=i?e.options.indexOf(i):-1;return-1===o||o===e.activeOptionIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeOptionIndex:o,activationTrigger:1}},6:e=>e.disabled||1===e.listboxState||""===e.searchQuery?e:{...e,searchQuery:""},7:(e,t)=>{let n={id:t.id,dataRef:t.dataRef},r=mX(e,(e=>[...e,n]));if(null===e.activeOptionIndex){let{value:i,mode:o,compare:a}=e.propsRef.current,s=t.dataRef.current.value;GU(o,{1:()=>i.some((e=>a(e,s))),0:()=>a(i,s)})&&(r.activeOptionIndex=r.options.indexOf(n))}return{...e,...r}},8:(e,t)=>{let n=mX(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}}},vX=(0,e.createContext)(null);function yX(t){let n=(0,e.useContext)(vX);if(null===n){let e=new Error("<".concat(t," /> is missing a parent <Listbox /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(e,yX),e}return n}function xX(e,t){return GU(t.type,gX,e,t)}vX.displayName="ListboxContext";let bX=e.Fragment,wX=QU((function(t,n){let{value:r,defaultValue:i,name:o,onChange:a,by:s=((e,t)=>e===t),disabled:l=!1,horizontal:c=!1,multiple:u=!1,...d}=t;const h=c?"horizontal":"vertical";let f=sG(n),[p,m]=IY(r,a,i),g=(0,e.useReducer)(xX,{listboxState:1,propsRef:{current:{value:p,onChange:m,mode:u?1:0,compare:iG("string"==typeof s?(e,t)=>{let n=s;return(null==e?void 0:e[n])===(null==t?void 0:t[n])}:s)}},labelRef:(0,e.createRef)(),buttonRef:(0,e.createRef)(),optionsRef:(0,e.createRef)(),disabled:l,orientation:h,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1}),[{listboxState:v,propsRef:y,optionsRef:x,buttonRef:b},w]=g;y.current.value=p,y.current.mode=u?1:0,nG((()=>{y.current.onChange=e=>GU(y.current.mode,{0:()=>m(e),1(){let t=y.current.value.slice(),{compare:n}=y.current,r=t.findIndex((t=>n(t,e)));return-1===r?t.push(e):t.splice(r,1),m(t)}})}),[m,y]),nG((()=>w({type:2,disabled:l})),[l]),nG((()=>w({type:3,orientation:h})),[h]),RG([b,x],((e,t)=>{var n;w({type:1}),EG(t,AG.Loose)||(e.preventDefault(),null==(n=b.current)||n.focus())}),0===v);let S=(0,e.useMemo)((()=>({open:0===v,disabled:l,value:p})),[v,l,p]),_={ref:f};return e.createElement(vX.Provider,{value:g},e.createElement(BG,{value:GU(v,{0:NG.Open,1:NG.Closed})},null!=o&&null!=p&&kY({[o]:p}).map((t=>{let[n,r]=t;return e.createElement(PV,{features:TV.Hidden,...KU({key:n,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:n,value:r})})})),WU({ourProps:_,theirProps:d,slot:S,defaultTag:bX,name:"Listbox"})))})),SX=QU((function(t,n){var r;let[i,o]=yX("Listbox.Button"),a=sG(i.buttonRef,n),s="headlessui-listbox-button-".concat(fG()),l=eG(),c=iG((e=>{switch(e.key){case pG.Space:case pG.Enter:case pG.ArrowDown:e.preventDefault(),o({type:0}),l.nextFrame((()=>{i.propsRef.current.value||o({type:4,focus:mG.First})}));break;case pG.ArrowUp:e.preventDefault(),o({type:0}),l.nextFrame((()=>{i.propsRef.current.value||o({type:4,focus:mG.Last})}))}})),u=iG((e=>{if(e.key===pG.Space)e.preventDefault()})),d=iG((e=>{if(vG(e.currentTarget))return e.preventDefault();0===i.listboxState?(o({type:1}),l.nextFrame((()=>{var e;return null==(e=i.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),o({type:0}))})),h=DY((()=>{if(i.labelRef.current)return[i.labelRef.current.id,s].join(" ")}),[i.labelRef.current,s]),f=(0,e.useMemo)((()=>({open:0===i.listboxState,disabled:i.disabled,value:i.propsRef.current.value})),[i]),p=t;return WU({ourProps:{ref:a,id:s,type:zG(t,i.buttonRef),"aria-haspopup":!0,"aria-controls":null==(r=i.optionsRef.current)?void 0:r.id,"aria-expanded":i.disabled?void 0:0===i.listboxState,"aria-labelledby":h,disabled:i.disabled,onKeyDown:c,onKeyUp:u,onClick:d},theirProps:p,slot:f,defaultTag:"button",name:"Listbox.Button"})})),_X=QU((function(t,n){let[r]=yX("Listbox.Label"),i="headlessui-listbox-label-".concat(fG()),o=sG(r.labelRef,n),a=iG((()=>{var e;return null==(e=r.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));return WU({ourProps:{ref:o,id:i,onClick:a},theirProps:t,slot:(0,e.useMemo)((()=>({open:0===r.listboxState,disabled:r.disabled})),[r]),defaultTag:"label",name:"Listbox.Label"})})),AX=VU.RenderStrategy|VU.Static,EX=QU((function(t,n){var r;let[i,o]=yX("Listbox.Options"),a=sG(i.optionsRef,n),s="headlessui-listbox-options-".concat(fG()),l=eG(),c=eG(),u=jG(),d=null!==u?u===NG.Open:0===i.listboxState;(0,e.useEffect)((()=>{var e;let t=i.optionsRef.current;!t||0===i.listboxState&&t!==(null==(e=yG(t))?void 0:e.activeElement)&&t.focus({preventScroll:!0})}),[i.listboxState,i.optionsRef]);let h=iG((e=>{switch(c.dispose(),e.key){case pG.Space:if(""!==i.searchQuery)return e.preventDefault(),e.stopPropagation(),o({type:5,value:e.key});case pG.Enter:if(e.preventDefault(),e.stopPropagation(),null!==i.activeOptionIndex){let{dataRef:e}=i.options[i.activeOptionIndex];i.propsRef.current.onChange(e.current.value)}0===i.propsRef.current.mode&&(o({type:1}),$U().nextFrame((()=>{var e;return null==(e=i.buttonRef.current)?void 0:e.focus({preventScroll:!0})})));break;case GU(i.orientation,{vertical:pG.ArrowDown,horizontal:pG.ArrowRight}):return e.preventDefault(),e.stopPropagation(),o({type:4,focus:mG.Next});case GU(i.orientation,{vertical:pG.ArrowUp,horizontal:pG.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),o({type:4,focus:mG.Previous});case pG.Home:case pG.PageUp:return e.preventDefault(),e.stopPropagation(),o({type:4,focus:mG.First});case pG.End:case pG.PageDown:return e.preventDefault(),e.stopPropagation(),o({type:4,focus:mG.Last});case pG.Escape:return e.preventDefault(),e.stopPropagation(),o({type:1}),l.nextFrame((()=>{var e;return null==(e=i.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));case pG.Tab:e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(o({type:5,value:e.key}),c.setTimeout((()=>o({type:6})),350))}})),f=DY((()=>{var e,t,n;return null!=(n=null==(e=i.labelRef.current)?void 0:e.id)?n:null==(t=i.buttonRef.current)?void 0:t.id}),[i.labelRef.current,i.buttonRef.current]),p=(0,e.useMemo)((()=>({open:0===i.listboxState})),[i]),m=t;return WU({ourProps:{"aria-activedescendant":null===i.activeOptionIndex||null==(r=i.options[i.activeOptionIndex])?void 0:r.id,"aria-multiselectable":1===i.propsRef.current.mode||void 0,"aria-labelledby":f,"aria-orientation":i.orientation,id:s,onKeyDown:h,role:"listbox",tabIndex:0,ref:a},theirProps:m,slot:p,defaultTag:"ul",features:AX,visible:d,name:"Listbox.Options"})})),CX=QU((function(t,n){let{disabled:r=!1,value:i,...o}=t,[a,s]=yX("Listbox.Option"),l="headlessui-listbox-option-".concat(fG()),c=null!==a.activeOptionIndex&&a.options[a.activeOptionIndex].id===l,{value:u,compare:d}=a.propsRef.current,h=GU(a.propsRef.current.mode,{1:()=>u.some((e=>d(e,i))),0:()=>d(u,i)}),f=(0,e.useRef)(null),p=sG(n,f);nG((()=>{if(0!==a.listboxState||!c||0===a.activationTrigger)return;let e=$U();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=f.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[f,c,a.listboxState,a.activationTrigger,a.activeOptionIndex]);let m=(0,e.useRef)({disabled:r,value:i,domRef:f});nG((()=>{m.current.disabled=r}),[m,r]),nG((()=>{m.current.value=i}),[m,i]),nG((()=>{var e,t;m.current.textValue=null==(t=null==(e=f.current)?void 0:e.textContent)?void 0:t.toLowerCase()}),[m,f]);let g=iG((()=>a.propsRef.current.onChange(i)));nG((()=>(s({type:7,id:l,dataRef:m}),()=>s({type:8,id:l}))),[m,l]);let v=iG((e=>{if(r)return e.preventDefault();g(),0===a.propsRef.current.mode&&(s({type:1}),$U().nextFrame((()=>{var e;return null==(e=a.buttonRef.current)?void 0:e.focus({preventScroll:!0})})))})),y=iG((()=>{if(r)return s({type:4,focus:mG.Nothing});s({type:4,focus:mG.Specific,id:l})})),x=iG((()=>{r||c||s({type:4,focus:mG.Specific,id:l,trigger:0})})),b=iG((()=>{r||!c||s({type:4,focus:mG.Nothing})})),w=(0,e.useMemo)((()=>({active:c,selected:h,disabled:r})),[c,h,r]);return WU({ourProps:{id:l,ref:p,role:"option",tabIndex:!0===r?void 0:-1,"aria-disabled":!0===r||void 0,"aria-selected":h,disabled:void 0,onClick:v,onFocus:y,onPointerMove:x,onMouseMove:x,onPointerLeave:b,onMouseLeave:b},theirProps:o,slot:w,defaultTag:"li",name:"Listbox.Option"})})),MX=Object.assign(wX,{Button:SX,Label:_X,Options:EX,Option:CX});const TX=t=>{let{icon:n,placeholder:r,itemList:i,onChange:o,label:a,error:s,value:l,reset:c}=t;const[u,d]=(0,e.useState)(l||r);return(0,e.useEffect)((()=>{i.includes(u)&&o(u)}),[u,o,i]),(0,e.useEffect)((()=>{c>0&&d(r)}),[c,d,r]),(0,jU.jsx)(MX,{value:u,onChange:d,as:"div",className:"relative flex w-full max-w-[340px] flex-col",children:t=>{let{open:o}=t;return(0,jU.jsxs)("div",{className:"flex flex-col gap-y-2",children:[a&&(0,jU.jsx)(MX.Label,{className:"text-sm text-lmGrey500 dark:text-dmGrey25",children:a}),(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-1",children:[(0,jU.jsxs)(MX.Button,{className:"flex w-full items-center gap-2 rounded-lg ".concat(s?"bg-red-100 dark:bg-red-900":"bg-lmGrey50 dark:bg-dmGrey800"," px-3 py-[10px] shadow-sm"),children:[(0,jU.jsx)("i",{className:"".concat(n," flex h-[14px] w-[14px] items-center justify-center text-[14px] ").concat(s?"text-red-300 dark:text-red-100":u===r?"text-lmGrey300 dark:text-lmGrey300":"text-lmGrey600 dark:text-lmGrey100")}),(0,jU.jsx)("span",{className:"flex w-full items-start text-sm font-medium ".concat(s?"text-red-300 dark:text-red-100":u===r?"text-lmGrey300 dark:text-lmGrey300":"text-lmGrey600 dark:text-lmGrey100"," "),children:u}),(0,jU.jsx)("i",{className:" ".concat(o?"translate-y-1":"translate-y-0"," flex items-center justify-center text-xl duration-500 ease-in-out ").concat(s?"fa-solid fa-triangle-exclamation h-[14px] w-fit text-[14px] text-red-300 dark:text-red-100":u===r?"text-lmGrey300 dark:text-lmGrey300":"text-lmGrey600 dark:text-lmGrey100"),children:(0,jU.jsx)(LU.div,{animate:o?{y:[0,4,0]}:{y:[0,-4,0]},initial:!1,transition:{ease:"easeOut",duration:.5},children:!s&&(0,jU.jsx)(lX,{"aria-hidden":"true",className:"text-xl"})})})]}),s&&!o&&(0,jU.jsxs)("div",{className:"flex items-center gap-x-2 px-3 ",children:[(0,jU.jsx)("i",{className:"fa-solid fa-triangle-exclamation flex h-[12px] w-[12px] items-center justify-center text-xs text-red-300 dark:text-red-100"}),(0,jU.jsx)("span",{className:"text-xs text-red-500 dark:text-red-100",children:s.message})]})]}),(0,jU.jsx)(SV,{as:e.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,jU.jsx)(MX.Options,{className:"absolute left-0 z-30 ".concat(a?"mt-20":"mt-11"," flex w-full flex-col gap-y-1 rounded-lg bg-lmGrey50 py-2 px-2 shadow-sm dark:bg-dmGrey800"),children:i.map(((e,t)=>(0,jU.jsx)(MX.Option,{className:e=>{let{active:t}=e;return"flex w-full cursor-default select-none items-center gap-2 rounded-lg px-3 py-2 ".concat(t?"bg-lmGrey100 dark:bg-dmGrey700":"bg-lmGrey50 dark:bg-dmGrey800"," duration-300")},value:e,children:t=>{let{selected:n}=t;return(0,jU.jsxs)(jU.Fragment,{children:[(0,jU.jsx)("i",{className:"".concat(n&&"fa-solid fa-check"," flex h-5 w-5 items-center justify-center text-lmGrey600 dark:text-dmGrey100"),"aria-hidden":"true"}),(0,jU.jsx)("span",{className:"block truncate text-sm text-lmGrey600 dark:text-lmGrey100 ".concat(n?"font-semibold":"font-medium"),children:e})]})}},t)))})})]})}})},{genderSelect:PX,citiesAutocomplete:DX}=WH(),kX=e=>{var t;let{handleCallback:n}=e;const{birthday:r,gender:i,city:o}=null!==(t=JSON.parse(localStorage.getItem("signUpData")))&&void 0!==t&&t,{control:a,handleSubmit:s}=nY();return(0,jU.jsxs)("form",{onSubmit:s((e=>{console.log("birthday, gender and city");n({data:e,nextStep:"finish"})})),className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-3",children:[(0,jU.jsx)(uq,{name:"birthday",control:a,rules:{required:"Birthday is required"},defaultValue:r||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-calendar-days",onChange:t.onChange,label:"Birthday",placeholder:"25.10.1999",type:"date",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"gender",control:a,rules:{required:"Select an option"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:i||void 0,icon:PX.icon,placeholder:PX.placeholder,itemList:PX.list,onChange:t.onChange,label:"What is your gender?",error:n.error})}}),(0,jU.jsx)(uq,{name:"city",control:a,rules:{required:"City is required"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(uX,{value:o||void 0,itemList:DX.list,onChange:t.onChange,label:"What city you live in?",error:n.error})}})]}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Finish",firstBtnType:"submit",firstBtnOnClick:s,secondBtn:"secondary",secondBtnTitle:"Go Back",secondBtnType:"button",secondBtnOnClick:()=>{console.log("going back");n({nextStep:!1})}})]})},OX=e=>{var t;let{handleCallback:n}=e;const{confirmation:r}=null!==(t=JSON.parse(localStorage.getItem("signUpData")))&&void 0!==t&&t,{control:i,handleSubmit:o}=nY();return(0,jU.jsxs)("form",{onSubmit:o((e=>{console.log("code confirmed");n({data:e,nextStep:"confirmation"})})),className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsx)(uq,{name:"confirmation",control:i,rules:{required:"Code is required",pattern:{value:/^\d+$/,message:"Invalid code"}},defaultValue:r||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{type:"number",firstIcon:"fa-solid fa-barcode",onChange:t.onChange,label:"Enter the code which we send you to your email",placeholder:"123456",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Confirm Code",firstBtnType:"submit",firstBtnOnClick:o,secondBtn:"secondary",secondBtnTitle:"Go Back",secondBtnType:"button",secondBtnOnClick:()=>{n({nextStep:!1})}})]})},RX=e=>{var t;let{handleCallback:n}=e;const{email:r}=null!==(t=JSON.parse(localStorage.getItem("signUpData")))&&void 0!==t&&t,{control:i,handleSubmit:o}=nY(),a=Ge();return(0,jU.jsxs)("form",{onSubmit:o((e=>{console.log("sending email");n({data:e,nextStep:"email"})})),className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsx)(uq,{name:"email",control:i,rules:{required:"Email is required",pattern:{value:/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/,message:"Invalid email address"}},defaultValue:r||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-at",onChange:t.onChange,label:"Email",placeholder:"maxMustermann@web.de",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Send Email For Confirmation",firstBtnType:"submit",firstBtnOnClick:o,secondBtn:"secondary",secondBtnTitle:"Sign Up with Google",secondBtnType:"button",secondBtnOnClick:()=>{console.log("making google stuff");n({nextStep:"google"})},underBtnFirstText:"Already have an Account?",underBtnFirstLinkText:"Sign In instead",underBtnFirstOnClick:()=>a("/sign-in")})]})},IX=e=>{var t;let{handleCallback:n}=e;const{firstName:r,lastName:i}=null!==(t=JSON.parse(localStorage.getItem("signUpData")))&&void 0!==t&&t,{control:o,handleSubmit:a}=nY();return(0,jU.jsxs)("form",{onSubmit:a((e=>{console.log("first and last name");n({data:e,nextStep:!0})})),className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-3",children:[(0,jU.jsx)(uq,{name:"firstName",control:o,rules:{required:"First name is required",pattern:{value:/^[a-zA-Z]+$/,message:"Only letter are allowed"}},defaultValue:r||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-signature",onChange:t.onChange,label:"First Name",placeholder:"Max",type:"text",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"lastName",control:o,rules:{required:"Last name is required",pattern:{value:/^[a-zA-Z]+$/,message:"Only letter are allowed"}},defaultValue:i||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-signature",onChange:t.onChange,label:"Last Name",placeholder:"Musterman",type:"text",value:t.value,onBlur:t.onBlur,error:n.error})}})]}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Continue",firstBtnType:"submit",firstBtnOnClick:a,secondBtn:"secondary",secondBtnTitle:"Go Back",secondBtnType:"button",secondBtnOnClick:()=>{console.log("going back");n({nextStep:!1})}})]})},LX=e=>{var t;let{handleCallback:n}=e;const{password:r}=null!==(t=JSON.parse(localStorage.getItem("signUpData")))&&void 0!==t&&t,{control:i,handleSubmit:o}=nY();return(0,jU.jsxs)("form",{onSubmit:o((e=>{console.log("setting password");n({data:e,nextStep:!0})})),className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsx)(uq,{name:"password",control:i,rules:{required:"Password is required",pattern:{value:/^\S*(?=\S{6,})(?=\S*\d)(?=\S*[A-Z])(?=\S*[a-z])(?=\S*[!@#$%^&*?+-=\u20ac/ ])\S*$/,message:"Minimum 6 Characters - 1 upper and 1 lower case - 1 letter and 1 special character"}},defaultValue:r||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-lock",onChange:t.onChange,label:"Password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",type:"password",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Continue",firstBtnType:"submit",firstBtnOnClick:o})]})},{signUpRounds:NX}=WH(),jX=()=>{var e;const{currentRound:t}=EW(),{handleCallback:n}=MY(),r={1:(0,jU.jsx)(RX,{handleCallback:n}),2:(0,jU.jsx)(OX,{handleCallback:n}),3:(0,jU.jsx)(LX,{handleCallback:n}),4:(0,jU.jsx)(IX,{handleCallback:n}),5:(0,jU.jsx)(kX,{handleCallback:n})};return(0,jU.jsx)(_W,{pic:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FstreetBlueSky.webp?alt=media&token=299dade6-a4d2-40cc-a099-cfb97431bec1",children:(0,jU.jsxs)("div",{className:"flex w-full max-w-[348px] flex-col gap-y-[48px]",children:[(0,jU.jsxs)("div",{className:"flex flex-col items-center justify-center gap-y-2 p-2",children:[(0,jU.jsx)("span",{className:"text-2xl text-lmGrey800 dark:text-dmGrey25",children:null===(e=NX[t-1])||void 0===e?void 0:e.title}),(0,jU.jsx)(SW,{amount:NX.length,finished:t-1})]}),r[t]]})})},BX=e=>{let{owner:t,text:n}=e;return(0,jU.jsx)("div",{className:"".concat(t?"justify-end":"justify-start"," flex h-fit w-full"),children:(0,jU.jsx)("div",{className:"".concat(t?"bg-lmPrimary text-white dark:bg-dmPrimary":"".concat(qH.darkModeBorder," bg-lmGrey25 text-lmGrey600 dark:bg-dmGrey900 dark: dark:text-dmGrey100")," w-fit max-w-[90%] rounded-lg p-4 text-sm 600:max-w-[640px]"),children:n})})},FX=()=>{const{messages:e}=WH();return(0,jU.jsx)("div",{className:"flex w-full flex-grow flex-col-reverse gap-y-2 p-6 overflow-scroll",children:e.map((e=>(0,jU.jsx)(BX,{owner:e.owner,text:e.text},e.id)))})},zX=e.createContext(null);function UX(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function GX(e,t){const n=t.viewState||t;let r=!1;if("longitude"in n&&"latitude"in n){const t=e.center;e.center=new t.constructor(n.longitude,n.latitude),r=r||t!==e.center}if("zoom"in n){const t=e.zoom;e.zoom=n.zoom,r=r||t!==e.zoom}if("bearing"in n){const t=e.bearing;e.bearing=n.bearing,r=r||t!==e.bearing}if("pitch"in n){const t=e.pitch;e.pitch=n.pitch,r=r||t!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(r=!0,e.padding=n.padding),r}const VX=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function HX(e){if(!e)return null;if("string"===typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;const t={};for(const r of e.layers)t[r.id]=r;const n=e.layers.map((e=>{const n=t[e.ref];let r=null;if("interactive"in e&&(r={...e},delete r.interactive),n){r=r||{...e},delete r.ref;for(const e of VX)e in n&&(r[e]=n[e])}return r||e}));return{...e,layers:n}}function WX(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!WX(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){if(!t.hasOwnProperty(i))return!1;if(!WX(e[i],t[i]))return!1}return!0}return!1}const qX={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},YX={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},XX={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},QX=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],KX=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class ZX{constructor(e,t,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=e=>{const t=this.props[XX[e.type]];t&&t(e)},this._onPointerEvent=e=>{"mousemove"!==e.type&&"mouseout"!==e.type||this._updateHover(e);const t=this.props[qX[e.type]];if(t){if(this.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type){const t=this._hoveredFeatures||this._map.queryRenderedFeatures(e.point,{layers:this.props.interactiveLayerIds});e.features=t}t(e),delete e.features}},this._onCameraEvent=e=>{if(!this._internalUpdate){const t=this.props[YX[e.type]];t&&t(e)}e.type in this._deferredEvents&&(this._deferredEvents[e.type]=!1)},this._MapClass=e,this.props=t,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const t=this.props;this.props=e;const n=this._updateSettings(e,t);n&&this._createShadowTransform(this._map);const r=this._updateSize(e),i=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(n||r||i&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){const n=ZX.savedMaps.pop();if(!n)return null;const r=n.map,i=r.getContainer();for(t.className=i.className;i.childNodes.length>0;)t.appendChild(i.childNodes[0]);r._container=t,n.setProps({...e,styleDiffing:!1}),r.resize();const{initialViewState:o}=e;return o&&(o.bounds?r.fitBounds(o.bounds,{...o.fitBoundsOptions,duration:0}):n._updateViewState(o,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",(()=>r.fire("load"))),n}_initialize(e){const{props:t}=this,n={...t,...t.initialViewState,accessToken:t.mapboxAccessToken||JX()||null,container:e,style:HX(t.mapStyle)},r=n.initialViewState||n.viewState||n;if(Object.assign(n,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),t.gl){const e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,t.gl)}const i=new this._MapClass(n);r.padding&&i.setPadding(r.padding),t.cursor&&(i.getCanvas().style.cursor=t.cursor),this._createShadowTransform(i);const o=i._render;i._render=e=>{this._inRender=!0,o.call(i,e),this._inRender=!1};const a=i._renderTaskQueue.run;i._renderTaskQueue.run=e=>{a.call(i._renderTaskQueue,e),this._onBeforeRepaint()},i.on("render",(()=>this._onAfterRepaint()));const s=i.fire;i.fire=this._fireEvent.bind(this,s),i.on("resize",(()=>{this._renderTransform.resize(i.transform.width,i.transform.height)})),i.on("styledata",(()=>this._updateStyleComponents(this.props,{}))),i.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const l in qX)i.on(l,this._onPointerEvent);for(const l in YX)i.on(l,this._onCameraEvent);for(const l in XX)i.on(l,this._onEvent);this._map=i}recycle(){ZX.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const t=function(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}_updateSize(e){const{viewState:t}=e;if(t){const e=this._map;if(t.width!==e.transform.width||t.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e,t){if(this._internalUpdate)return!1;const n=this._map,r=this._renderTransform,{zoom:i,pitch:o,bearing:a}=r,s=n.isMoving();s&&(r.cameraElevationReference="sea");const l=GX(r,{...UX(n.transform),...e});if(s&&(r.cameraElevationReference="ground"),l&&t){const e=this._deferredEvents;e.move=!0,e.zoom||(e.zoom=i!==r.zoom),e.rotate||(e.rotate=a!==r.bearing),e.pitch||(e.pitch=o!==r.pitch)}return s||GX(n.transform,e),l}_updateSettings(e,t){const n=this._map;let r=!1;for(const i of QX)i in e&&!WX(e[i],t[i])&&(r=!0,n["set".concat(i[0].toUpperCase()).concat(i.slice(1))](e[i]));return r}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==t.mapStyle){const t={diff:e.styleDiffing};return"localIdeographFontFamily"in e&&(t.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(HX(e.mapStyle),t),!0}return!1}_updateStyleComponents(e,t){const n=this._map;let r=!1;return n.style.loaded()&&("light"in e&&!WX(e.light,t.light)&&(r=!0,n.setLight(e.light)),"fog"in e&&!WX(e.fog,t.fog)&&(r=!0,n.setFog(e.fog)),"terrain"in e&&!WX(e.terrain,t.terrain)&&(e.terrain&&!n.getSource(e.terrain.source)||(r=!0,n.setTerrain(e.terrain)))),r}_updateHandlers(e,t){const n=this._map;let r=!1;for(const i of KX){const o=e[i];WX(o,t[i])||(r=!0,o?n[i].enable(o):n[i].disable())}return r}_updateHover(e){var t;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const r=e.type,i=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0;let o;if("mousemove"===r)try{o=this._map.queryRenderedFeatures(e.point,{layers:n.interactiveLayerIds})}catch(hr){o=[]}else o=[];const a=o.length>0;!a&&i&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=o,a&&!i&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=r}else this._hoveredFeatures=null}_fireEvent(e,t,n){const r=this._map,i=r.transform,o="string"===typeof t?t:t.type;return"move"===o&&this._updateViewState(this.props,!1),o in YX&&("object"===typeof t&&(t.viewState=UX(i)),this._map.isMoving())?(r.transform=this._renderTransform,e.call(r,t,n),r.transform=i,r):(e.call(r,t,n),r)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&e.fire(n);this._internalUpdate=!1;const t=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=t}}}function JX(){let e=null;if("undefined"!==typeof location){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibTFnZ2xlIiwiYSI6ImNsYXVtaHM0ejA1eTgzdm1wMmRkaDBnNDAifQ.ayNDhREPUzI4mBOyVjor6A"}.MapboxAccessToken}catch(hR){}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibTFnZ2xlIiwiYSI6ImNsYXVtaHM0ejA1eTgzdm1wMmRkaDBnNDAifQ.ayNDhREPUzI4mBOyVjor6A"}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(hr){}return e}ZX.savedMaps=[];const $X=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function eQ(e,t){if(!e)return null;const n=e.map,r={getMap:()=>n,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>e.transform.locationPoint(t.LngLat.convert(n)),unproject:n=>e.transform.pointLocation(t.Point.convert(n)),queryTerrainElevation:(t,r)=>{const i=n.transform;n.transform=e.transform;const o=n.queryTerrainElevation(t,r);return n.transform=i,o}};for(const i of function(e){const t=new Set;let n=e;for(;n;){for(const r of Object.getOwnPropertyNames(n))"_"!==r[0]&&"function"===typeof e[r]&&"fire"!==r&&"setEventedParent"!==r&&t.add(r);n=Object.getPrototypeOf(n)}return Array.from(t)}(n))i in r||$X.includes(i)||(r[i]=n[i].bind(n));return r}const tQ="undefined"!==typeof document?e.useLayoutEffect:e.useEffect,nQ=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const rQ=e.createContext(null),iQ={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},oQ=(0,e.forwardRef)(((t,r)=>{const i=(0,e.useContext)(zX),[o,a]=(0,e.useState)(null),s=(0,e.useRef)(),{current:l}=(0,e.useRef)({mapLib:null,map:null});(0,e.useEffect)((()=>{const e=t.mapLib;let r,o=!0;return Promise.resolve(e||n.e(483).then(n.t.bind(n,483,23))).then((e=>{if(o){if(e.Map||(e=e.default),!e||!e.Map)throw new Error("Invalid mapLib");if(!e.supported(t))throw new Error("Map is not supported by this browser");!function(e,t){for(const n of nQ)n in t&&(e[n]=t[n]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(t.RTLTextPlugin,(e=>{e&&console.error(e)}),!1)}(e,t),t.reuseMaps&&(r=ZX.reuse(t,s.current)),r||(r=new ZX(e.Map,t,s.current)),l.map=eQ(r,e),l.mapLib=e,a(r),null===i||void 0===i||i.onMapMount(l.map,t.id)}})).catch((e=>{t.onError({type:"error",target:null,originalEvent:null,error:e})})),()=>{o=!1,r&&(null===i||void 0===i||i.onMapUnmount(t.id),t.reuseMaps?r.recycle():r.destroy())}}),[]),tQ((()=>{o&&o.setProps(t)})),(0,e.useImperativeHandle)(r,(()=>l.map),[o]);const c=(0,e.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...t.style})),[t.style]);return e.createElement("div",{id:t.id,ref:s,style:c},o&&e.createElement(rQ.Provider,{value:l},t.children))}));oQ.displayName="Map",oQ.defaultProps=iQ;const aQ=oQ,sQ=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function lQ(e,t){if(!e||!t)return;const n=e.style;for(const r in t){const e=t[r];Number.isFinite(e)&&!sQ.test(r)?n[r]="".concat(e,"px"):n[r]=e}}function cQ(t){const{map:n,mapLib:r}=(0,e.useContext)(rQ),i=(0,e.useRef)({props:t});i.current.props=t;const o=(0,e.useMemo)((()=>{let n=!1;e.Children.forEach(t.children,(e=>{e&&(n=!0)}));const a={...t,element:n?document.createElement("div"):null},s=new r.Marker(a).setLngLat([t.longitude,t.latitude]);return s.getElement().addEventListener("click",(e=>{var t,n;null===(n=(t=i.current.props).onClick)||void 0===n||n.call(t,{type:"click",target:s,originalEvent:e})})),s.on("dragstart",(e=>{var t,n;const r=e;r.lngLat=o.getLngLat(),null===(n=(t=i.current.props).onDragStart)||void 0===n||n.call(t,r)})),s.on("drag",(e=>{var t,n;const r=e;r.lngLat=o.getLngLat(),null===(n=(t=i.current.props).onDrag)||void 0===n||n.call(t,r)})),s.on("dragend",(e=>{var t,n;const r=e;r.lngLat=o.getLngLat(),null===(n=(t=i.current.props).onDragEnd)||void 0===n||n.call(t,r)})),s}),[]);return(0,e.useEffect)((()=>(o.addTo(n.getMap()),()=>{o.remove()})),[]),(0,e.useEffect)((()=>{lQ(o.getElement(),t.style)}),[t.style]),o.getLngLat().lng===t.longitude&&o.getLngLat().lat===t.latitude||o.setLngLat([t.longitude,t.latitude]),t.offset&&!function(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,i=Array.isArray(t)?t[0]:t?t.x:0,o=Array.isArray(t)?t[1]:t?t.y:0;return n===i&&r===o}(o.getOffset(),t.offset)&&o.setOffset(t.offset),o.isDraggable()!==t.draggable&&o.setDraggable(t.draggable),o.getRotation()!==t.rotation&&o.setRotation(t.rotation),o.getRotationAlignment()!==t.rotationAlignment&&o.setRotationAlignment(t.rotationAlignment),o.getPitchAlignment()!==t.pitchAlignment&&o.setPitchAlignment(t.pitchAlignment),o.getPopup()!==t.popup&&o.setPopup(t.popup),(0,zV.createPortal)(t.children,o.getElement())}cQ.defaultProps={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};const uQ=e.memo(cQ);function dQ(e){return new Set(e?e.trim().split(/\s+/):[])}const hQ=e.memo((function(t){const{map:n,mapLib:r}=(0,e.useContext)(rQ),i=(0,e.useMemo)((()=>document.createElement("div")),[]),o=(0,e.useRef)({props:t});o.current.props=t;const a=(0,e.useMemo)((()=>{const e={...t},n=new r.Popup(e).setLngLat([t.longitude,t.latitude]);return n.once("open",(e=>{var t,n;null===(n=(t=o.current.props).onOpen)||void 0===n||n.call(t,e)})),n}),[]);if((0,e.useEffect)((()=>{const e=e=>{var t,n;null===(n=(t=o.current.props).onClose)||void 0===n||n.call(t,e)};return a.on("close",e),a.setDOMContent(i).addTo(n.getMap()),()=>{a.off("close",e),a.isOpen()&&a.remove()}}),[]),(0,e.useEffect)((()=>{lQ(a.getElement(),t.style)}),[t.style]),a.isOpen()&&(a.getLngLat().lng===t.longitude&&a.getLngLat().lat===t.latitude||a.setLngLat([t.longitude,t.latitude]),t.offset&&!WX(a.options.offset,t.offset)&&a.setOffset(t.offset),a.options.anchor===t.anchor&&a.options.maxWidth===t.maxWidth||(a.options.anchor=t.anchor,a.setMaxWidth(t.maxWidth)),a.options.className!==t.className)){const e=dQ(a.options.className),n=dQ(t.className);for(const t of e)n.has(t)||a.removeClassName(t);for(const t of n)e.has(t)||a.addClassName(t);a.options.className=t.className}return(0,zV.createPortal)(t.children,i)}));const fQ=function(t,n,r,i){const o=(0,e.useContext)(rQ),a=(0,e.useMemo)((()=>t(o)),[]);return(0,e.useEffect)((()=>{const e=i||r||n,t="function"===typeof n&&"function"===typeof r?n:null,s="function"===typeof r?r:"function"===typeof n?n:null,{map:l}=o;return l.hasControl(a)||(l.addControl(a,null===e||void 0===e?void 0:e.position),t&&t(o)),()=>{s&&s(o),l.hasControl(a)&&l.removeControl(a)}}),[]),a};e.memo((function(t){const n=fQ((e=>{let{mapLib:n}=e;return new n.AttributionControl(t)}),{position:t.position});return(0,e.useEffect)((()=>{lQ(n._container,t.style)}),[t.style]),null}));e.memo((function(t){const n=fQ((e=>{let{mapLib:n}=e;return new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)})}),{position:t.position});return(0,e.useEffect)((()=>{lQ(n._controlContainer,t.style)}),[t.style]),null}));const pQ=(0,e.forwardRef)(((t,n)=>{const r=(0,e.useRef)({props:t}),i=fQ((e=>{let{mapLib:n}=e;const i=new n.GeolocateControl(t),o=i._setupUI;return i._setupUI=e=>{i._container.hasChildNodes()||o(e)},i.on("geolocate",(e=>{var t,n;null===(n=(t=r.current.props).onGeolocate)||void 0===n||n.call(t,e)})),i.on("error",(e=>{var t,n;null===(n=(t=r.current.props).onError)||void 0===n||n.call(t,e)})),i.on("outofmaxbounds",(e=>{var t,n;null===(n=(t=r.current.props).onOutOfMaxBounds)||void 0===n||n.call(t,e)})),i.on("trackuserlocationstart",(e=>{var t,n;null===(n=(t=r.current.props).onTrackUserLocationStart)||void 0===n||n.call(t,e)})),i.on("trackuserlocationend",(e=>{var t,n;null===(n=(t=r.current.props).onTrackUserLocationEnd)||void 0===n||n.call(t,e)})),i}),{position:t.position});return r.current.props=t,(0,e.useImperativeHandle)(n,(()=>({trigger:()=>i.trigger()})),[]),(0,e.useEffect)((()=>{lQ(i._container,t.style)}),[t.style]),null}));pQ.displayName="GeolocateControl";e.memo(pQ);e.memo((function(t){const n=fQ((e=>{let{mapLib:n}=e;return new n.NavigationControl(t)}),{position:t.position});return(0,e.useEffect)((()=>{lQ(n._container,t.style)}),[t.style]),null}));function mQ(t){const n=fQ((e=>{let{mapLib:n}=e;return new n.ScaleControl(t)}),{position:t.position});return n.options.unit===t.unit&&n.options.maxWidth===t.maxWidth||(n.options.maxWidth=t.maxWidth,n.setUnit(t.unit)),(0,e.useEffect)((()=>{lQ(n._container,t.style)}),[t.style]),null}mQ.defaultProps={unit:"metric",maxWidth:100};e.memo(mQ);function gQ(e,t){if(!e)throw new Error(t)}let vQ=0;const yQ=function(t){const n=(0,e.useContext)(rQ).map.getMap(),r=(0,e.useRef)(t),[,i]=(0,e.useState)(0),o=(0,e.useMemo)((()=>t.id||"jsx-layer-".concat(vQ++)),[]);if((0,e.useEffect)((()=>{if(n){const e=()=>i((e=>e+1));return n.on("styledata",e),e(),()=>{n.off("styledata",e),n.style&&n.style._loaded&&n.getLayer(o)&&n.removeLayer(o)}}}),[n]),n&&n.style&&n.getLayer(o))try{!function(e,t,n,r){if(gQ(n.id===r.id,"layer id changed"),gQ(n.type===r.type,"layer type changed"),"custom"===n.type||"custom"===r.type)return;const{layout:i={},paint:o={},filter:a,minzoom:s,maxzoom:l,beforeId:c}=n;if(c!==r.beforeId&&e.moveLayer(t,c),i!==r.layout){const n=r.layout||{};for(const r in i)WX(i[r],n[r])||e.setLayoutProperty(t,r,i[r]);for(const r in n)i.hasOwnProperty(r)||e.setLayoutProperty(t,r,void 0)}if(o!==r.paint){const n=r.paint||{};for(const r in o)WX(o[r],n[r])||e.setPaintProperty(t,r,o[r]);for(const r in n)o.hasOwnProperty(r)||e.setPaintProperty(t,r,void 0)}WX(a,r.filter)||e.setFilter(t,a),s===r.minzoom&&l===r.maxzoom||e.setLayerZoomRange(t,s,l)}(n,o,t,r.current)}catch(a){console.warn(a)}else!function(e,t,n){if(e.style&&e.style._loaded&&(!("source"in n)||e.getSource(n.source))){const r={...n,id:t};delete r.beforeId,e.addLayer(r,n.beforeId)}}(n,o,t);return r.current=t,null},xQ=t=>{let{lng:n,lat:r}=t;const i=(0,e.useRef)(),[o,a]=(0,e.useState)({longitude:n,latitude:r,zoom:14}),[s]=(0,e.useState)({style:{width:"100%",height:"100%"},mapStyle:"mapbox://styles/m1ggle/clavbv34v006214nkabl8az22",mapboxAccessToken:"pk.eyJ1IjoibTFnZ2xlIiwiYSI6ImNsYXVtaHM0ejA1eTgzdm1wMmRkaDBnNDAifQ.ayNDhREPUzI4mBOyVjor6A",maxZoom:18});return(0,jU.jsx)(aQ,{...o,...s,ref:i,onZoom:e=>a({...o,zoom:e.viewState.zoom}),children:(0,jU.jsx)(uQ,{latitude:o.latitude,longitude:o.longitude,anchor:"bottom",children:(0,jU.jsx)("div",{className:"fa-solid fa-location-dot text-[44px] text-lmPrimary drop-shadow-lg duration-300"})})})};function bQ(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function wQ(e){return wQ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wQ(e)}function SQ(e){bQ(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===wQ(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function _Q(e){bQ(1,arguments);var t=SQ(e);return t.setHours(0,0,0,0),t}function AQ(e){return AQ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AQ(e)}function EQ(e){return bQ(1,arguments),e instanceof Date||"object"===AQ(e)&&"[object Date]"===Object.prototype.toString.call(e)}function CQ(e){if(bQ(1,arguments),!EQ(e)&&"number"!==typeof e)return!1;var t=SQ(e);return!isNaN(Number(t))}function MQ(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function TQ(e,t){bQ(2,arguments);var n=SQ(e).getTime(),r=MQ(t);return new Date(n+r)}function PQ(e,t){bQ(2,arguments);var n=MQ(t);return TQ(e,-n)}var DQ=864e5;function kQ(e){bQ(1,arguments);var t=1,n=SQ(e),r=n.getUTCDay(),i=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function OQ(e){bQ(1,arguments);var t=SQ(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=kQ(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=kQ(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function RQ(e){bQ(1,arguments);var t=OQ(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=kQ(n);return r}var IQ=6048e5;function LQ(e){bQ(1,arguments);var t=SQ(e),n=kQ(t).getTime()-RQ(t).getTime();return Math.round(n/IQ)+1}var NQ={};function jQ(){return NQ}function BQ(e,t){var n,r,i,o,a,s,l,c;bQ(1,arguments);var u=jQ(),d=MQ(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=SQ(e),f=h.getUTCDay(),p=(f<d?7:0)+f-d;return h.setUTCDate(h.getUTCDate()-p),h.setUTCHours(0,0,0,0),h}function FQ(e,t){var n,r,i,o,a,s,l,c;bQ(1,arguments);var u=SQ(e),d=u.getUTCFullYear(),h=jQ(),f=MQ(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(l=h.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(d+1,0,f),p.setUTCHours(0,0,0,0);var m=BQ(p,t),g=new Date(0);g.setUTCFullYear(d,0,f),g.setUTCHours(0,0,0,0);var v=BQ(g,t);return u.getTime()>=m.getTime()?d+1:u.getTime()>=v.getTime()?d:d-1}function zQ(e,t){var n,r,i,o,a,s,l,c;bQ(1,arguments);var u=jQ(),d=MQ(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:u.firstWeekContainsDate)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=FQ(e,t),f=new Date(0);f.setUTCFullYear(h,0,d),f.setUTCHours(0,0,0,0);var p=BQ(f,t);return p}var UQ=6048e5;function GQ(e,t){bQ(1,arguments);var n=SQ(e),r=BQ(n,t).getTime()-zQ(n,t).getTime();return Math.round(r/UQ)+1}function VQ(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}const HQ={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return VQ("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):VQ(n+1,2)},d:function(e,t){return VQ(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return VQ(e.getUTCHours()%12||12,t.length)},H:function(e,t){return VQ(e.getUTCHours(),t.length)},m:function(e,t){return VQ(e.getUTCMinutes(),t.length)},s:function(e,t){return VQ(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return VQ(Math.floor(r*Math.pow(10,n-3)),t.length)}};var WQ="midnight",qQ="noon",YQ="morning",XQ="afternoon",QQ="evening",KQ="night",ZQ={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return HQ.y(e,t)},Y:function(e,t,n,r){var i=FQ(e,r),o=i>0?i:1-i;return"YY"===t?VQ(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):VQ(o,t.length)},R:function(e,t){return VQ(OQ(e),t.length)},u:function(e,t){return VQ(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return VQ(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return VQ(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return HQ.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return VQ(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=GQ(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):VQ(i,t.length)},I:function(e,t,n){var r=LQ(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):VQ(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):HQ.d(e,t)},D:function(e,t,n){var r=function(e){bQ(1,arguments);var t=SQ(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),i=n-r;return Math.floor(i/DQ)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):VQ(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return VQ(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return VQ(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return VQ(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?qQ:0===i?WQ:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?QQ:i>=12?XQ:i>=4?YQ:KQ,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return HQ.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):HQ.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):VQ(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):VQ(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):HQ.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):HQ.s(e,t)},S:function(e,t){return HQ.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return $Q(i);case"XXXX":case"XX":return eK(i);default:return eK(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return $Q(i);case"xxxx":case"xx":return eK(i);default:return eK(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+JQ(i,":");default:return"GMT"+eK(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+JQ(i,":");default:return"GMT"+eK(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return VQ(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return VQ((r._originalDate||e).getTime(),t.length)}};function JQ(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t||"";return n+String(i)+a+VQ(o,2)}function $Q(e,t){return e%60===0?(e>0?"-":"+")+VQ(Math.abs(e)/60,2):eK(e,t)}function eK(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+VQ(Math.floor(i/60),2)+n+VQ(i%60,2)}const tK=ZQ;var nK=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},rK=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},iK={p:rK,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return nK(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",nK(i,t)).replace("{{time}}",rK(o,t))}};const oK=iK;function aK(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var sK=["D","DD"],lK=["YY","YYYY"];function cK(e){return-1!==sK.indexOf(e)}function uK(e){return-1!==lK.indexOf(e)}function dK(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var hK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const fK=function(e,t,n){var r,i=hK[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function pK(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}const mK={date:pK({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:pK({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:pK({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var gK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const vK=function(e,t,n,r){return gK[e]};function yK(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var a=e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[a]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var xK={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:yK({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:yK({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:yK({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:yK({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:yK({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function bK(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var a,s=o[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?SK(l,(function(e){return e.test(s)})):wK(l,(function(e){return e.test(s)}));a=e.valueCallback?e.valueCallback(c):c,a=n.valueCallback?n.valueCallback(a):a;var u=t.slice(s.length);return{value:a,rest:u}}}function wK(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function SK(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}var _K;const AK={code:"en-US",formatDistance:fK,formatLong:mK,formatRelative:vK,localize:xK,match:{ordinalNumber:(_K={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(_K.matchPattern);if(!n)return null;var r=n[0],i=e.match(_K.parsePattern);if(!i)return null;var o=_K.valueCallback?_K.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;var a=e.slice(r.length);return{value:o,rest:a}}),era:bK({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:bK({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:bK({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:bK({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:bK({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var EK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,CK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MK=/^'([^]*?)'?$/,TK=/''/g,PK=/[a-zA-Z]/;function DK(e,t,n){var r,i,o,a,s,l,c,u,d,h,f,p,m,g,v,y,x,b;bQ(2,arguments);var w=String(t),S=jQ(),_=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:S.locale)&&void 0!==r?r:AK,A=MQ(null!==(o=null!==(a=null!==(s=null!==(l=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==l?l:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==s?s:S.firstWeekContainsDate)&&void 0!==a?a:null===(d=S.locale)||void 0===d||null===(h=d.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==o?o:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var E=MQ(null!==(f=null!==(p=null!==(m=null!==(g=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==g?g:null===n||void 0===n||null===(v=n.locale)||void 0===v||null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==m?m:S.weekStartsOn)&&void 0!==p?p:null===(x=S.locale)||void 0===x||null===(b=x.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==f?f:0);if(!(E>=0&&E<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!_.localize)throw new RangeError("locale must contain localize property");if(!_.formatLong)throw new RangeError("locale must contain formatLong property");var C=SQ(e);if(!CQ(C))throw new RangeError("Invalid time value");var M=aK(C),T=PQ(C,M),P={firstWeekContainsDate:A,weekStartsOn:E,locale:_,_originalDate:C},D=w.match(CK).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,oK[t])(e,_.formatLong):e})).join("").match(EK).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return kK(r);var o=tK[i];if(o)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!uK(r)||dK(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!cK(r)||dK(r,t,String(e)),o(T,r,_.localize,P);if(i.match(PK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("");return D}function kK(e){var t=e.match(MK);return t?t[1].replace(TK,"'"):e}function OK(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function RK(e){return RK="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RK(e)}function IK(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LK(e,t)}function LK(e,t){return LK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},LK(e,t)}function NK(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=FK(e);if(t){var i=FK(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return jK(this,n)}}function jK(e,t){return!t||"object"!==RK(t)&&"function"!==typeof t?BK(e):t}function BK(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FK(e){return FK=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},FK(e)}function zK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GK(e,t,n){return t&&UK(e.prototype,t),n&&UK(e,n),e}function VK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HK=function(){function e(){zK(this,e),VK(this,"subPriority",0)}return GK(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),WK=function(e){IK(n,e);var t=NK(n);function n(e,r,i,o,a){var s;return zK(this,n),(s=t.call(this)).value=e,s.validateValue=r,s.setValue=i,s.priority=o,a&&(s.subPriority=a),s}return GK(n,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,n){return this.setValue(e,t,this.value,n)}}]),n}(HK),qK=function(e){IK(n,e);var t=NK(n);function n(){var e;zK(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return VK(BK(e=t.call.apply(t,[this].concat(i))),"priority",10),VK(BK(e),"subPriority",-1),e}return GK(n,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}]),n}(HK);function YK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var XK=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"run",value:function(e,t,n,r){var i=this.parse(e,t,n,r);return i?{setter:new WK(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}},{key:"validate",value:function(e,t,n){return!0}}],n&&YK(t.prototype,n),r&&YK(t,r),e}();function QK(e){return QK="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QK(e)}function KK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JK(e,t){return JK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},JK(e,t)}function $K(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=nZ(e);if(t){var i=nZ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return eZ(this,n)}}function eZ(e,t){return!t||"object"!==QK(t)&&"function"!==typeof t?tZ(e):t}function tZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nZ(e){return nZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},nZ(e)}function rZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iZ=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&JK(e,t)}(o,e);var t,n,r,i=$K(o);function o(){var e;KK(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return rZ(tZ(e=i.call.apply(i,[this].concat(n))),"priority",140),rZ(tZ(e),"incompatibleTokens",["R","u","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,n){return t.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}],n&&ZK(t.prototype,n),r&&ZK(t,r),o}(XK),oZ=(Math.pow(10,8),/^(1[0-2]|0?\d)/),aZ=/^(3[0-1]|[0-2]?\d)/,sZ=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,lZ=/^(5[0-3]|[0-4]?\d)/,cZ=/^(2[0-3]|[0-1]?\d)/,uZ=/^(2[0-4]|[0-1]?\d)/,dZ=/^(1[0-1]|0?\d)/,hZ=/^(1[0-2]|0?\d)/,fZ=/^[0-5]?\d/,pZ=/^[0-5]?\d/,mZ=/^\d/,gZ=/^\d{1,2}/,vZ=/^\d{1,3}/,yZ=/^\d{1,4}/,xZ=/^-?\d+/,bZ=/^-?\d/,wZ=/^-?\d{1,2}/,SZ=/^-?\d{1,3}/,_Z=/^-?\d{1,4}/,AZ=/^([+-])(\d{2})(\d{2})?|Z/,EZ=/^([+-])(\d{2})(\d{2})|Z/,CZ=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,MZ=/^([+-])(\d{2}):(\d{2})|Z/,TZ=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function PZ(e,t){return e?{value:t(e.value),rest:e.rest}:e}function DZ(e,t){var n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function kZ(e,t){var n=t.match(e);return n?"Z"===n[0]?{value:0,rest:t.slice(1)}:{value:("+"===n[1]?1:-1)*(36e5*(n[2]?parseInt(n[2],10):0)+6e4*(n[3]?parseInt(n[3],10):0)+1e3*(n[5]?parseInt(n[5],10):0)),rest:t.slice(n[0].length)}:null}function OZ(e){return DZ(xZ,e)}function RZ(e,t){switch(e){case 1:return DZ(mZ,t);case 2:return DZ(gZ,t);case 3:return DZ(vZ,t);case 4:return DZ(yZ,t);default:return DZ(new RegExp("^\\d{1,"+e+"}"),t)}}function IZ(e,t){switch(e){case 1:return DZ(bZ,t);case 2:return DZ(wZ,t);case 3:return DZ(SZ,t);case 4:return DZ(_Z,t);default:return DZ(new RegExp("^-?\\d{1,"+e+"}"),t)}}function LZ(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function NZ(e,t){var n,r=t>0,i=r?t:1-t;if(i<=50)n=e||100;else{var o=i+50;n=e+100*Math.floor(o/100)-(e>=o%100?100:0)}return r?n:1-n}function jZ(e){return e%400===0||e%4===0&&e%100!==0}function BZ(e){return BZ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BZ(e)}function FZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function UZ(e,t){return UZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},UZ(e,t)}function GZ(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=WZ(e);if(t){var i=WZ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return VZ(this,n)}}function VZ(e,t){return!t||"object"!==BZ(t)&&"function"!==typeof t?HZ(e):t}function HZ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WZ(e){return WZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},WZ(e)}function qZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var YZ=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UZ(e,t)}(o,e);var t,n,r,i=GZ(o);function o(){var e;FZ(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return qZ(HZ(e=i.call.apply(i,[this].concat(n))),"priority",130),qZ(HZ(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return PZ(RZ(4,e),r);case"yo":return PZ(n.ordinalNumber(e,{unit:"year"}),r);default:return PZ(RZ(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n){var r=e.getUTCFullYear();if(n.isTwoDigitYear){var i=NZ(n.year,r);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}}],n&&zZ(t.prototype,n),r&&zZ(t,r),o}(XK);function XZ(e){return XZ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XZ(e)}function QZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZZ(e,t){return ZZ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ZZ(e,t)}function JZ(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=tJ(e);if(t){var i=tJ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $Z(this,n)}}function $Z(e,t){return!t||"object"!==XZ(t)&&"function"!==typeof t?eJ(e):t}function eJ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tJ(e){return tJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tJ(e)}function nJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rJ=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZZ(e,t)}(o,e);var t,n,r,i=JZ(o);function o(){var e;QZ(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return nJ(eJ(e=i.call.apply(i,[this].concat(n))),"priority",130),nJ(eJ(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){var r=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return PZ(RZ(4,e),r);case"Yo":return PZ(n.ordinalNumber(e,{unit:"year"}),r);default:return PZ(RZ(t.length,e),r)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,n,r){var i=FQ(e,r);if(n.isTwoDigitYear){var o=NZ(n.year,i);return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),BQ(e,r)}var a="era"in t&&1!==t.era?1-n.year:n.year;return e.setUTCFullYear(a,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),BQ(e,r)}}],n&&KZ(t.prototype,n),r&&KZ(t,r),o}(XK);function iJ(e){return iJ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iJ(e)}function oJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sJ(e,t){return sJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sJ(e,t)}function lJ(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=dJ(e);if(t){var i=dJ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cJ(this,n)}}function cJ(e,t){return!t||"object"!==iJ(t)&&"function"!==typeof t?uJ(e):t}function uJ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dJ(e){return dJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dJ(e)}function hJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fJ=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sJ(e,t)}(o,e);var t,n,r,i=lJ(o);function o(){var e;oJ(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return hJ(uJ(e=i.call.apply(i,[this].concat(n))),"priority",130),hJ(uJ(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t){return IZ("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){var r=new Date(0);return r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0),kQ(r)}}])&&aJ(t.prototype,n),r&&aJ(t,r),o}(XK);function pJ(e){return pJ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pJ(e)}function mJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vJ(e,t){return vJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vJ(e,t)}function yJ(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=wJ(e);if(t){var i=wJ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xJ(this,n)}}function xJ(e,t){return!t||"object"!==pJ(t)&&"function"!==typeof t?bJ(e):t}function bJ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wJ(e){return wJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wJ(e)}function SJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _J=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vJ(e,t)}(o,e);var t,n,r,i=yJ(o);function o(){var e;mJ(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return SJ(bJ(e=i.call.apply(i,[this].concat(n))),"priority",130),SJ(bJ(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t){return IZ("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}])&&gJ(t.prototype,n),r&&gJ(t,r),o}(XK);function AJ(e){return AJ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AJ(e)}function EJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MJ(e,t){return MJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},MJ(e,t)}function TJ(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=kJ(e);if(t){var i=kJ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return PJ(this,n)}}function PJ(e,t){return!t||"object"!==AJ(t)&&"function"!==typeof t?DJ(e):t}function DJ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kJ(e){return kJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},kJ(e)}function OJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var RJ=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MJ(e,t)}(o,e);var t,n,r,i=TJ(o);function o(){var e;EJ(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return OJ(DJ(e=i.call.apply(i,[this].concat(n))),"priority",120),OJ(DJ(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"Q":case"QQ":return RZ(t.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}],n&&CJ(t.prototype,n),r&&CJ(t,r),o}(XK);function IJ(e){return IJ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IJ(e)}function LJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jJ(e,t){return jJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jJ(e,t)}function BJ(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=UJ(e);if(t){var i=UJ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return FJ(this,n)}}function FJ(e,t){return!t||"object"!==IJ(t)&&"function"!==typeof t?zJ(e):t}function zJ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UJ(e){return UJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},UJ(e)}function GJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var VJ=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jJ(e,t)}(o,e);var t,n,r,i=BJ(o);function o(){var e;LJ(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return GJ(zJ(e=i.call.apply(i,[this].concat(n))),"priority",120),GJ(zJ(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"q":case"qq":return RZ(t.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,n){return e.setUTCMonth(3*(n-1),1),e.setUTCHours(0,0,0,0),e}}],n&&NJ(t.prototype,n),r&&NJ(t,r),o}(XK);function HJ(e){return HJ="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HJ(e)}function WJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qJ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YJ(e,t){return YJ=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},YJ(e,t)}function XJ(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=ZJ(e);if(t){var i=ZJ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return QJ(this,n)}}function QJ(e,t){return!t||"object"!==HJ(t)&&"function"!==typeof t?KJ(e):t}function KJ(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZJ(e){return ZJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ZJ(e)}function JJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $J=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&YJ(e,t)}(o,e);var t,n,r,i=XJ(o);function o(){var e;WJ(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return JJ(KJ(e=i.call.apply(i,[this].concat(n))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),JJ(KJ(e),"priority",110),e}return t=o,n=[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"M":return PZ(DZ(oZ,e),r);case"MM":return PZ(RZ(2,e),r);case"Mo":return PZ(n.ordinalNumber(e,{unit:"month"}),r);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}],n&&qJ(t.prototype,n),r&&qJ(t,r),o}(XK);function e$(e){return e$="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e$(e)}function t$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r$(e,t){return r$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r$(e,t)}function i$(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=s$(e);if(t){var i=s$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o$(this,n)}}function o$(e,t){return!t||"object"!==e$(t)&&"function"!==typeof t?a$(e):t}function a$(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s$(e){return s$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s$(e)}function l$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c$=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r$(e,t)}(o,e);var t,n,r,i=i$(o);function o(){var e;t$(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return l$(a$(e=i.call.apply(i,[this].concat(n))),"priority",110),l$(a$(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){var r=function(e){return e-1};switch(t){case"L":return PZ(DZ(oZ,e),r);case"LL":return PZ(RZ(2,e),r);case"Lo":return PZ(n.ordinalNumber(e,{unit:"month"}),r);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}],n&&n$(t.prototype,n),r&&n$(t,r),o}(XK);function u$(e){return u$="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u$(e)}function d$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f$(e,t){return f$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f$(e,t)}function p$(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=v$(e);if(t){var i=v$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m$(this,n)}}function m$(e,t){return!t||"object"!==u$(t)&&"function"!==typeof t?g$(e):t}function g$(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v$(e){return v$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v$(e)}function y$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x$=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f$(e,t)}(o,e);var t,n,r,i=p$(o);function o(){var e;d$(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y$(g$(e=i.call.apply(i,[this].concat(n))),"priority",100),y$(g$(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"w":return DZ(lZ,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return RZ(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n,r){return BQ(function(e,t,n){bQ(2,arguments);var r=SQ(e),i=MQ(t),o=GQ(r,n)-i;return r.setUTCDate(r.getUTCDate()-7*o),r}(e,n,r),r)}}],n&&h$(t.prototype,n),r&&h$(t,r),o}(XK);function b$(e){return b$="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b$(e)}function w$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _$(e,t){return _$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_$(e,t)}function A$(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=M$(e);if(t){var i=M$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E$(this,n)}}function E$(e,t){return!t||"object"!==b$(t)&&"function"!==typeof t?C$(e):t}function C$(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M$(e){return M$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M$(e)}function T$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P$=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_$(e,t)}(o,e);var t,n,r,i=A$(o);function o(){var e;w$(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return T$(C$(e=i.call.apply(i,[this].concat(n))),"priority",100),T$(C$(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"I":return DZ(lZ,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return RZ(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,n){return kQ(function(e,t){bQ(2,arguments);var n=SQ(e),r=MQ(t),i=LQ(n)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,n))}}],n&&S$(t.prototype,n),r&&S$(t,r),o}(XK);function D$(e){return D$="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D$(e)}function k$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R$(e,t){return R$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},R$(e,t)}function I$(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=j$(e);if(t){var i=j$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return L$(this,n)}}function L$(e,t){return!t||"object"!==D$(t)&&"function"!==typeof t?N$(e):t}function N$(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j$(e){return j$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j$(e)}function B$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F$=[31,28,31,30,31,30,31,31,30,31,30,31],z$=[31,29,31,30,31,30,31,31,30,31,30,31],U$=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R$(e,t)}(o,e);var t,n,r,i=I$(o);function o(){var e;k$(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return B$(N$(e=i.call.apply(i,[this].concat(n))),"priority",90),B$(N$(e),"subPriority",1),B$(N$(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"d":return DZ(aZ,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return RZ(t.length,e)}}},{key:"validate",value:function(e,t){var n=jZ(e.getUTCFullYear()),r=e.getUTCMonth();return n?t>=1&&t<=z$[r]:t>=1&&t<=F$[r]}},{key:"set",value:function(e,t,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}],n&&O$(t.prototype,n),r&&O$(t,r),o}(XK);function G$(e){return G$="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G$(e)}function V$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W$(e,t){return W$=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},W$(e,t)}function q$(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=Q$(e);if(t){var i=Q$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Y$(this,n)}}function Y$(e,t){return!t||"object"!==G$(t)&&"function"!==typeof t?X$(e):t}function X$(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q$(e){return Q$=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Q$(e)}function K$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z$=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W$(e,t)}(o,e);var t,n,r,i=q$(o);function o(){var e;V$(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return K$(X$(e=i.call.apply(i,[this].concat(n))),"priority",90),K$(X$(e),"subpriority",1),K$(X$(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"D":case"DD":return DZ(sZ,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return RZ(t.length,e)}}},{key:"validate",value:function(e,t){return jZ(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}],n&&H$(t.prototype,n),r&&H$(t,r),o}(XK);function J$(e,t,n){var r,i,o,a,s,l,c,u;bQ(2,arguments);var d=jQ(),h=MQ(null!==(r=null!==(i=null!==(o=null!==(a=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==a?a:null===n||void 0===n||null===(s=n.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==o?o:d.weekStartsOn)&&void 0!==i?i:null===(c=d.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=SQ(e),p=MQ(t),m=f.getUTCDay(),g=p%7,v=(g+7)%7,y=(v<h?7:0)+p-m;return f.setUTCDate(f.getUTCDate()+y),f}function $$(e){return $$="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$$(e)}function e0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n0(e,t){return n0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n0(e,t)}function r0(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=a0(e);if(t){var i=a0(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return i0(this,n)}}function i0(e,t){return!t||"object"!==$$(t)&&"function"!==typeof t?o0(e):t}function o0(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a0(e){return a0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a0(e)}function s0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l0=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n0(e,t)}(o,e);var t,n,r,i=r0(o);function o(){var e;e0(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return s0(o0(e=i.call.apply(i,[this].concat(n))),"priority",90),s0(o0(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=J$(e,n,r)).setUTCHours(0,0,0,0),e}}],n&&t0(t.prototype,n),r&&t0(t,r),o}(XK);function c0(e){return c0="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c0(e)}function u0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h0(e,t){return h0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h0(e,t)}function f0(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=g0(e);if(t){var i=g0(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p0(this,n)}}function p0(e,t){return!t||"object"!==c0(t)&&"function"!==typeof t?m0(e):t}function m0(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g0(e){return g0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g0(e)}function v0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y0=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h0(e,t)}(o,e);var t,n,r,i=f0(o);function o(){var e;u0(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v0(m0(e=i.call.apply(i,[this].concat(n))),"priority",90),v0(m0(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return PZ(RZ(t.length,e),i);case"eo":return PZ(n.ordinalNumber(e,{unit:"day"}),i);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=J$(e,n,r)).setUTCHours(0,0,0,0),e}}],n&&d0(t.prototype,n),r&&d0(t,r),o}(XK);function x0(e){return x0="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x0(e)}function b0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S0(e,t){return S0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S0(e,t)}function _0(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=C0(e);if(t){var i=C0(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A0(this,n)}}function A0(e,t){return!t||"object"!==x0(t)&&"function"!==typeof t?E0(e):t}function E0(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C0(e){return C0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C0(e)}function M0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T0=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S0(e,t)}(o,e);var t,n,r,i=_0(o);function o(){var e;b0(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return M0(E0(e=i.call.apply(i,[this].concat(n))),"priority",90),M0(E0(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n,r){var i=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return PZ(RZ(t.length,e),i);case"co":return PZ(n.ordinalNumber(e,{unit:"day"}),i);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,n,r){return(e=J$(e,n,r)).setUTCHours(0,0,0,0),e}}],n&&w0(t.prototype,n),r&&w0(t,r),o}(XK);function P0(e){return P0="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P0(e)}function D0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O0(e,t){return O0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O0(e,t)}function R0(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=N0(e);if(t){var i=N0(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I0(this,n)}}function I0(e,t){return!t||"object"!==P0(t)&&"function"!==typeof t?L0(e):t}function L0(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N0(e){return N0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},N0(e)}function j0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B0=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O0(e,t)}(o,e);var t,n,r,i=R0(o);function o(){var e;D0(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return j0(L0(e=i.call.apply(i,[this].concat(n))),"priority",90),j0(L0(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){var r=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return RZ(t.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return PZ(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return PZ(n.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return PZ(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r);default:return PZ(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),r)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,n){return e=function(e,t){bQ(2,arguments);var n=MQ(t);n%7===0&&(n-=7);var r=1,i=SQ(e),o=i.getUTCDay(),a=((n%7+7)%7<r?7:0)+n-o;return i.setUTCDate(i.getUTCDate()+a),i}(e,n),e.setUTCHours(0,0,0,0),e}}],n&&k0(t.prototype,n),r&&k0(t,r),o}(XK);function F0(e){return F0="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F0(e)}function z0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G0(e,t){return G0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},G0(e,t)}function V0(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=q0(e);if(t){var i=q0(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return H0(this,n)}}function H0(e,t){return!t||"object"!==F0(t)&&"function"!==typeof t?W0(e):t}function W0(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q0(e){return q0=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q0(e)}function Y0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X0=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G0(e,t)}(o,e);var t,n,r,i=V0(o);function o(){var e;z0(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Y0(W0(e=i.call.apply(i,[this].concat(n))),"priority",80),Y0(W0(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(LZ(n),0,0,0),e}}],n&&U0(t.prototype,n),r&&U0(t,r),o}(XK);function Q0(e){return Q0="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q0(e)}function K0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J0(e,t){return J0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},J0(e,t)}function $0(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=n1(e);if(t){var i=n1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return e1(this,n)}}function e1(e,t){return!t||"object"!==Q0(t)&&"function"!==typeof t?t1(e):t}function t1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n1(e){return n1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n1(e)}function r1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i1=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J0(e,t)}(o,e);var t,n,r,i=$0(o);function o(){var e;K0(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return r1(t1(e=i.call.apply(i,[this].concat(n))),"priority",80),r1(t1(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(LZ(n),0,0,0),e}}],n&&Z0(t.prototype,n),r&&Z0(t,r),o}(XK);function o1(e){return o1="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o1(e)}function a1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l1(e,t){return l1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l1(e,t)}function c1(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=h1(e);if(t){var i=h1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u1(this,n)}}function u1(e,t){return!t||"object"!==o1(t)&&"function"!==typeof t?d1(e):t}function d1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h1(e){return h1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h1(e)}function f1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p1=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l1(e,t)}(o,e);var t,n,r,i=c1(o);function o(){var e;a1(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return f1(d1(e=i.call.apply(i,[this].concat(n))),"priority",80),f1(d1(e),"incompatibleTokens",["a","b","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,n){return e.setUTCHours(LZ(n),0,0,0),e}}],n&&s1(t.prototype,n),r&&s1(t,r),o}(XK);function m1(e){return m1="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m1(e)}function g1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y1(e,t){return y1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y1(e,t)}function x1(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=S1(e);if(t){var i=S1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b1(this,n)}}function b1(e,t){return!t||"object"!==m1(t)&&"function"!==typeof t?w1(e):t}function w1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S1(e){return S1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S1(e)}function _1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A1=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y1(e,t)}(o,e);var t,n,r,i=x1(o);function o(){var e;g1(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _1(w1(e=i.call.apply(i,[this].concat(n))),"priority",70),_1(w1(e),"incompatibleTokens",["H","K","k","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"h":return DZ(hZ,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return RZ(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,n){var r=e.getUTCHours()>=12;return r&&n<12?e.setUTCHours(n+12,0,0,0):r||12!==n?e.setUTCHours(n,0,0,0):e.setUTCHours(0,0,0,0),e}}],n&&v1(t.prototype,n),r&&v1(t,r),o}(XK);function E1(e){return E1="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E1(e)}function C1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T1(e,t){return T1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T1(e,t)}function P1(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=O1(e);if(t){var i=O1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return D1(this,n)}}function D1(e,t){return!t||"object"!==E1(t)&&"function"!==typeof t?k1(e):t}function k1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O1(e){return O1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O1(e)}function R1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I1=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T1(e,t)}(o,e);var t,n,r,i=P1(o);function o(){var e;C1(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return R1(k1(e=i.call.apply(i,[this].concat(n))),"priority",70),R1(k1(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"H":return DZ(cZ,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return RZ(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,n){return e.setUTCHours(n,0,0,0),e}}],n&&M1(t.prototype,n),r&&M1(t,r),o}(XK);function L1(e){return L1="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L1(e)}function N1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B1(e,t){return B1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},B1(e,t)}function F1(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=G1(e);if(t){var i=G1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return z1(this,n)}}function z1(e,t){return!t||"object"!==L1(t)&&"function"!==typeof t?U1(e):t}function U1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G1(e){return G1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},G1(e)}function V1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H1=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B1(e,t)}(o,e);var t,n,r,i=F1(o);function o(){var e;N1(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return V1(U1(e=i.call.apply(i,[this].concat(n))),"priority",70),V1(U1(e),"incompatibleTokens",["h","H","k","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"K":return DZ(dZ,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return RZ(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,n){return e.getUTCHours()>=12&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}],n&&j1(t.prototype,n),r&&j1(t,r),o}(XK);function W1(e){return W1="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W1(e)}function q1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X1(e,t){return X1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},X1(e,t)}function Q1(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=J1(e);if(t){var i=J1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return K1(this,n)}}function K1(e,t){return!t||"object"!==W1(t)&&"function"!==typeof t?Z1(e):t}function Z1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J1(e){return J1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},J1(e)}function $1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var e2=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X1(e,t)}(o,e);var t,n,r,i=Q1(o);function o(){var e;q1(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $1(Z1(e=i.call.apply(i,[this].concat(n))),"priority",70),$1(Z1(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"k":return DZ(uZ,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return RZ(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,n){var r=n<=24?n%24:n;return e.setUTCHours(r,0,0,0),e}}],n&&Y1(t.prototype,n),r&&Y1(t,r),o}(XK);function t2(e){return t2="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t2(e)}function n2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i2(e,t){return i2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i2(e,t)}function o2(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=l2(e);if(t){var i=l2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a2(this,n)}}function a2(e,t){return!t||"object"!==t2(t)&&"function"!==typeof t?s2(e):t}function s2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l2(e){return l2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l2(e)}function c2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u2=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i2(e,t)}(o,e);var t,n,r,i=o2(o);function o(){var e;n2(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return c2(s2(e=i.call.apply(i,[this].concat(n))),"priority",60),c2(s2(e),"incompatibleTokens",["t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"m":return DZ(fZ,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return RZ(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCMinutes(n,0,0),e}}],n&&r2(t.prototype,n),r&&r2(t,r),o}(XK);function d2(e){return d2="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d2(e)}function h2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p2(e,t){return p2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p2(e,t)}function m2(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=y2(e);if(t){var i=y2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g2(this,n)}}function g2(e,t){return!t||"object"!==d2(t)&&"function"!==typeof t?v2(e):t}function v2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y2(e){return y2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y2(e)}function x2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b2=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p2(e,t)}(o,e);var t,n,r,i=m2(o);function o(){var e;h2(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return x2(v2(e=i.call.apply(i,[this].concat(n))),"priority",50),x2(v2(e),"incompatibleTokens",["t","T"]),e}return t=o,n=[{key:"parse",value:function(e,t,n){switch(t){case"s":return DZ(pZ,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return RZ(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,n){return e.setUTCSeconds(n,0),e}}],n&&f2(t.prototype,n),r&&f2(t,r),o}(XK);function w2(e){return w2="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w2(e)}function S2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A2(e,t){return A2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A2(e,t)}function E2(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=T2(e);if(t){var i=T2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C2(this,n)}}function C2(e,t){return!t||"object"!==w2(t)&&"function"!==typeof t?M2(e):t}function M2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T2(e){return T2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T2(e)}function P2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D2=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A2(e,t)}(o,e);var t,n,r,i=E2(o);function o(){var e;S2(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return P2(M2(e=i.call.apply(i,[this].concat(n))),"priority",30),P2(M2(e),"incompatibleTokens",["t","T"]),e}return t=o,(n=[{key:"parse",value:function(e,t){return PZ(RZ(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,n){return e.setUTCMilliseconds(n),e}}])&&_2(t.prototype,n),r&&_2(t,r),o}(XK);function k2(e){return k2="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k2(e)}function O2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I2(e,t){return I2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},I2(e,t)}function L2(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=B2(e);if(t){var i=B2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return N2(this,n)}}function N2(e,t){return!t||"object"!==k2(t)&&"function"!==typeof t?j2(e):t}function j2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B2(e){return B2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},B2(e)}function F2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z2=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I2(e,t)}(o,e);var t,n,r,i=L2(o);function o(){var e;O2(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return F2(j2(e=i.call.apply(i,[this].concat(n))),"priority",10),F2(j2(e),"incompatibleTokens",["t","T","x"]),e}return t=o,(n=[{key:"parse",value:function(e,t){switch(t){case"X":return kZ(AZ,e);case"XX":return kZ(EZ,e);case"XXXX":return kZ(CZ,e);case"XXXXX":return kZ(TZ,e);default:return kZ(MZ,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}])&&R2(t.prototype,n),r&&R2(t,r),o}(XK);function U2(e){return U2="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U2(e)}function G2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H2(e,t){return H2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},H2(e,t)}function W2(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=X2(e);if(t){var i=X2(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return q2(this,n)}}function q2(e,t){return!t||"object"!==U2(t)&&"function"!==typeof t?Y2(e):t}function Y2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X2(e){return X2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},X2(e)}function Q2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K2=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H2(e,t)}(o,e);var t,n,r,i=W2(o);function o(){var e;G2(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Q2(Y2(e=i.call.apply(i,[this].concat(n))),"priority",10),Q2(Y2(e),"incompatibleTokens",["t","T","X"]),e}return t=o,(n=[{key:"parse",value:function(e,t){switch(t){case"x":return kZ(AZ,e);case"xx":return kZ(EZ,e);case"xxxx":return kZ(CZ,e);case"xxxxx":return kZ(TZ,e);default:return kZ(MZ,e)}}},{key:"set",value:function(e,t,n){return t.timestampIsSet?e:new Date(e.getTime()-n)}}])&&V2(t.prototype,n),r&&V2(t,r),o}(XK);function Z2(e){return Z2="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z2(e)}function J2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function e3(e,t){return e3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e3(e,t)}function t3(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=i3(e);if(t){var i=i3(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return n3(this,n)}}function n3(e,t){return!t||"object"!==Z2(t)&&"function"!==typeof t?r3(e):t}function r3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i3(e){return i3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i3(e)}function o3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a3=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&e3(e,t)}(o,e);var t,n,r,i=t3(o);function o(){var e;J2(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o3(r3(e=i.call.apply(i,[this].concat(n))),"priority",40),o3(r3(e),"incompatibleTokens","*"),e}return t=o,(n=[{key:"parse",value:function(e){return OZ(e)}},{key:"set",value:function(e,t,n){return[new Date(1e3*n),{timestampIsSet:!0}]}}])&&$2(t.prototype,n),r&&$2(t,r),o}(XK);function s3(e){return s3="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s3(e)}function l3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u3(e,t){return u3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u3(e,t)}function d3(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(UV){return!1}}();return function(){var n,r=p3(e);if(t){var i=p3(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h3(this,n)}}function h3(e,t){return!t||"object"!==s3(t)&&"function"!==typeof t?f3(e):t}function f3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p3(e){return p3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p3(e)}function m3(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g3=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u3(e,t)}(o,e);var t,n,r,i=d3(o);function o(){var e;l3(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m3(f3(e=i.call.apply(i,[this].concat(n))),"priority",20),m3(f3(e),"incompatibleTokens","*"),e}return t=o,(n=[{key:"parse",value:function(e){return OZ(e)}},{key:"set",value:function(e,t,n){return[new Date(n),{timestampIsSet:!0}]}}])&&c3(t.prototype,n),r&&c3(t,r),o}(XK),v3={G:new iZ,y:new YZ,Y:new rJ,R:new fJ,u:new _J,Q:new RJ,q:new VJ,M:new $J,L:new c$,w:new x$,I:new P$,d:new U$,D:new Z$,E:new l0,e:new y0,c:new T0,i:new B0,a:new X0,b:new i1,B:new p1,h:new A1,H:new I1,K:new H1,k:new e2,m:new u2,s:new b2,S:new D2,X:new z2,x:new K2,t:new a3,T:new g3};function y3(e){return y3="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y3(e)}function x3(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return b3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b3(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function b3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,S3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_3=/^'([^]*?)'?$/,A3=/''/g,E3=/\S/,C3=/[a-zA-Z]/;function M3(e){return e.match(_3)[1].replace(A3,"'")}function T3(e,t){var n,r,i,o,a,s,l,c;bQ(1,arguments);var u=jQ(),d=MQ(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=SQ(e),f=h.getDay(),p=(f<d?7:0)+f-d;return h.setDate(h.getDate()-p),h.setHours(0,0,0,0),h}function P3(e,t){var n,r,i,o,a,s,l,c;bQ(1,arguments);var u=jQ(),d=MQ(null!==(n=null!==(r=null!==(i=null!==(o=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==o?o:null===t||void 0===t||null===(a=t.locale)||void 0===a||null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(l=u.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=SQ(e),f=h.getDay(),p=6+(f<d?-7:0)-(f-d);return h.setDate(h.getDate()+p),h.setHours(23,59,59,999),h}function D3(e){bQ(1,arguments);var t=SQ(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function k3(e,t){bQ(2,arguments);var n=SQ(e),r=MQ(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function O3(e,t){bQ(2,arguments);var n=SQ(e),r=MQ(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+r+1,0);var a=o.getDate();return i>=a?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}function R3(e){return R3="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R3(e)}function I3(e,t){if(bQ(2,arguments),!t||"object"!==R3(t))return new Date(NaN);var n=t.years?MQ(t.years):0,r=t.months?MQ(t.months):0,i=t.weeks?MQ(t.weeks):0,o=t.days?MQ(t.days):0,a=t.hours?MQ(t.hours):0,s=t.minutes?MQ(t.minutes):0,l=t.seconds?MQ(t.seconds):0,c=SQ(e),u=r||n?O3(c,r+12*n):c,d=o||i?k3(u,o+7*i):u,h=s+60*a,f=l+60*h,p=1e3*f,m=new Date(d.getTime()+p);return m}function L3(e,t){bQ(2,arguments);var n=SQ(e),r=SQ(t);return n.getTime()===r.getTime()}function N3(e,t){bQ(2,arguments);var n=_Q(e),r=_Q(t);return n.getTime()===r.getTime()}function j3(e){return bQ(1,arguments),N3(e,Date.now())}function B3(e,t){bQ(2,arguments);var n=SQ(e),r=SQ(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function F3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}const z3=t=>{let{dates:n,shadowUI:r,header:i}=t,o=_Q(Date.now()),[a,s]=(0,e.useState)(o),[l,c]=(0,e.useState)(DK(o,"MMM-yyyy")),u=function(e,t,n,r){var i,o,a,s,l,c,u,d,h,f,p,m,g,v,y,x,b,w;bQ(3,arguments);var S=String(e),_=String(t),A=jQ(),E=null!==(i=null!==(o=null===r||void 0===r?void 0:r.locale)&&void 0!==o?o:A.locale)&&void 0!==i?i:AK;if(!E.match)throw new RangeError("locale must contain match property");var C=MQ(null!==(a=null!==(s=null!==(l=null!==(c=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==c?c:null===r||void 0===r||null===(u=r.locale)||void 0===u||null===(d=u.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:A.firstWeekContainsDate)&&void 0!==s?s:null===(h=A.locale)||void 0===h||null===(f=h.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==a?a:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=MQ(null!==(p=null!==(m=null!==(g=null!==(v=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==v?v:null===r||void 0===r||null===(y=r.locale)||void 0===y||null===(x=y.options)||void 0===x?void 0:x.weekStartsOn)&&void 0!==g?g:A.weekStartsOn)&&void 0!==m?m:null===(b=A.locale)||void 0===b||null===(w=b.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==p?p:0);if(!(M>=0&&M<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===_)return""===S?SQ(n):new Date(NaN);var T,P={firstWeekContainsDate:C,weekStartsOn:M,locale:E},D=[new qK],k=_.match(S3).map((function(e){var t=e[0];return t in oK?(0,oK[t])(e,E.formatLong):e})).join("").match(w3),O=[],R=x3(k);try{var I=function(){var t=T.value;null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!uK(t)||dK(t,_,e),null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!cK(t)||dK(t,_,e);var n=t[0],i=v3[n];if(i){var o=i.incompatibleTokens;if(Array.isArray(o)){var a=O.find((function(e){return o.includes(e.token)||e.token===n}));if(a)throw new RangeError("The format string mustn't contain `".concat(a.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===i.incompatibleTokens&&O.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));O.push({token:n,fullToken:t});var s=i.run(S,t,E.match,P);if(!s)return{v:new Date(NaN)};D.push(s.setter),S=s.rest}else{if(n.match(C3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=M3(t)),0!==S.indexOf(t))return{v:new Date(NaN)};S=S.slice(t.length)}};for(R.s();!(T=R.n()).done;){var L=I();if("object"===y3(L))return L.v}}catch(H){R.e(H)}finally{R.f()}if(S.length>0&&E3.test(S))return new Date(NaN);var N=D.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return D.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),j=SQ(n);if(isNaN(j.getTime()))return new Date(NaN);var B,F=PQ(j,aK(j)),z={},U=x3(N);try{for(U.s();!(B=U.n()).done;){var G=B.value;if(!G.validate(F,P))return new Date(NaN);var V=G.set(F,z,P);Array.isArray(V)?(F=V[0],OK(z,V[1])):F=V}}catch(H){U.e(H)}finally{U.f()}return F}(l,"MMM-yyyy",new Date),d=function(e,t){var n;bQ(1,arguments);var r=e||{},i=SQ(r.start),o=SQ(r.end).getTime();if(!(i.getTime()<=o))throw new RangeError("Invalid interval");var a=[],s=i;s.setHours(0,0,0,0);var l=Number(null!==(n=null===t||void 0===t?void 0:t.step)&&void 0!==n?n:1);if(l<1||isNaN(l))throw new RangeError("`options.step` must be a number greater than 1");for(;s.getTime()<=o;)a.push(SQ(s)),s.setDate(s.getDate()+l),s.setHours(0,0,0,0);return a}({start:T3(u),end:P3(D3(u))});return(0,jU.jsx)("div",{className:"h-fit w-full overflow-hidden rounded-2xl bg-white p-6 ".concat(r&&"shadow"," dark:bg-dmGrey900 dark:shadow-dmShadow "),children:(0,jU.jsxs)("div",{className:"flex flex-col gap-y-4",children:[i&&(0,jU.jsxs)("div",{className:"flex items-center",children:[(0,jU.jsx)("h2",{className:"flex-auto font-semibold dark:text-dmGrey100",children:DK(u,"MMMM yyyy")}),(0,jU.jsxs)("button",{type:"button",onClick:function(){let e=I3(u,{months:-1});c(DK(e,"MMM-yyyy"))},className:"flex h-10 w-10 items-center justify-center text-lmGrey300 duration-300 hover:text-lmGrey600 dark:text-dmGrey300 dark:hover:text-dmGrey100",children:[(0,jU.jsx)("span",{className:"sr-only",children:"Previous month"}),(0,jU.jsx)("div",{className:"fa-solid fa-chevron-left text-[16px]","aria-hidden":"true"})]}),(0,jU.jsxs)("button",{onClick:function(){let e=I3(u,{months:1});c(DK(e,"MMM-yyyy"))},type:"button",className:"-mr-1.6 flex h-10 w-10 items-center justify-center text-lmGrey300 duration-300 hover:text-lmGrey600 dark:text-dmGrey300 dark:hover:text-dmGrey100",children:[(0,jU.jsx)("span",{className:"sr-only",children:"Next month"}),(0,jU.jsx)("div",{className:"fa-solid fa-chevron-right text-[16px]","aria-hidden":"true"})]})]}),(0,jU.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,jU.jsxs)("div",{className:"grid grid-cols-7 text-center text-xs leading-6 text-lmGrey400 dark:text-dmGrey300",children:[(0,jU.jsx)("div",{children:"S"}),(0,jU.jsx)("div",{children:"M"}),(0,jU.jsx)("div",{children:"T"}),(0,jU.jsx)("div",{children:"W"}),(0,jU.jsx)("div",{children:"T"}),(0,jU.jsx)("div",{children:"F"}),(0,jU.jsx)("div",{children:"S"})]}),(0,jU.jsx)("div",{className:"grid grid-cols-7 gap-y-1 text-sm",children:d.map((e=>(0,jU.jsx)("div",{children:(0,jU.jsx)("button",{type:"button",onClick:()=>s(e),className:F3(L3(e,a)&&"text-white",!L3(e,a)&&j3(e)&&"text-lmPrimary dark:text-dmPrimary",!L3(e,a)&&!j3(e)&&B3(e,u)&&"text-lmGrey600 dark:text-dmGrey100",!L3(e,a)&&!j3(e)&&!B3(e,u)&&"text-lmGrey300 dark:text-dmGrey600",L3(e,a)&&j3(e)&&"bg-lmPrimary dark:bg-dmPrimary",L3(e,a)&&!j3(e)&&"bg-lmGrey600 dark:bg-dmGrey600",!L3(e,a)&&"hover:bg-lmGrey100 dark:hover:bg-dmGrey800",(L3(e,a)||j3(e))&&"font-semibold","mx-auto flex h-8 w-8 items-center justify-center rounded-full duration-300"),children:(0,jU.jsx)("time",{dateTime:DK(e,"yyyy-MM-dd"),children:DK(e,"d")})})},e.toString())))})]})]})})},U3=e=>{let{offerInformation:t}=e;const{location:n,name:r,price:i}=t,{handleFly:o}=lW();return(0,jU.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,jU.jsxs)("div",{className:"flex items-center text-lmGrey600 dark:text-dmGrey100",children:[(0,jU.jsx)("div",{className:"fa-solid fa-location-dot mb-[3px] h-[14px] w-[14px] text-[14px]","aria-hidden":"true"}),(0,jU.jsx)("span",{onClick:()=>o(n.lng,n.lat),className:"w-10/12 cursor-pointer truncate text-sm",children:n.formatted})]}),(0,jU.jsx)("span",{className:"w-10/12 truncate text-xl text-lmGrey800 dark:text-dmGrey25",children:r}),(0,jU.jsxs)("div",{className:"flex w-full items-center gap-x-[2px] overflow-hidden truncate",children:[(0,jU.jsxs)("span",{className:"truncate text-lg text-lmPrimary dark:text-dmPrimary",children:[i.day," ",(0,jU.jsx)("span",{className:"truncate text-sm text-lmGrey400 dark:text-dmGrey300",children:"/day"})]}),(0,jU.jsx)("div",{className:"flex items-center justify-center px-1",children:(0,jU.jsx)("div",{className:"h-1 w-1 rounded-full bg-lmGrey400"})}),(0,jU.jsxs)("span",{className:"truncate text-lg text-lmPrimary dark:text-dmPrimary",children:[i.week," ",(0,jU.jsx)("span",{className:"truncate text-sm text-lmGrey400 dark:text-dmGrey300",children:"/week"})]}),(0,jU.jsx)("div",{className:"flex items-center justify-center px-1",children:(0,jU.jsx)("div",{className:"h-1 w-1 rounded-full bg-lmGrey400"})}),(0,jU.jsxs)("span",{className:"truncate text-lg text-lmPrimary dark:text-dmPrimary",children:[i.month," ",(0,jU.jsx)("span",{className:"truncate text-sm text-lmGrey400 dark:text-dmGrey300",children:"/month"})]})]})]})},G3=e=>{let{offerImages:t}=e;return(0,jU.jsx)("div",{className:"flex min-h-[220px] w-full gap-x-2 overflow-y-hidden overflow-x-scroll rounded-lg",children:t.map(((e,t)=>(0,jU.jsx)("div",{className:"h-[220px] w-40 min-w-[160px] rounded-lg bg-slate-100 bg-cover bg-center shadow",style:{backgroundImage:"url(".concat(e,")")}},t)))})},V3=t=>{let{isOpen:n,closeModal:r,children:i}=t;return(0,jU.jsx)(SV,{appear:!0,show:n,as:e.Fragment,children:(0,jU.jsxs)(mH,{as:"div",className:"z-50",onClose:r,children:[(0,jU.jsx)(SV.Child,{as:e.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,jU.jsx)("div",{onClick:r,className:"fixed inset-0 z-40 bg-black bg-opacity-25"})}),(0,jU.jsx)(SV.Child,{as:e.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,jU.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,jU.jsx)("div",{className:"relative h-full w-full"}),i]})})]})})},{exampleOffers:H3}=WH(),W3=e=>{let{isOpen:t,closeModal:n}=e;const r=Ge(),i=H3[0];return(0,jU.jsx)(V3,{isOpen:t,closeModal:n,children:(0,jU.jsxs)(mH.Panel,{className:"hideScrollbar absolute top-20 right-0 h-fit w-full overflow-scroll 600:top-7 600:right-6 600:w-fit 600:pb-7",children:[(0,jU.jsx)("button",{className:"absolute opacity-0","aria-hidden":"true"}),(0,jU.jsxs)("div",{className:"flex h-fit w-full flex-col gap-y-6 rounded-2xl bg-white p-6 shadow-lg dark:bg-dmGrey900 600:w-[360px]",children:[(0,jU.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jU.jsx)("span",{className:"text-2xl text-lmGrey700 dark:text-dmGrey25",children:"Details"}),(0,jU.jsx)("i",{onClick:n,className:"fa-solid fa-times cursor-pointer text-[24px] text-lmGrey700 dark:text-dmGrey25"})]}),(0,jU.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,jU.jsx)("span",{className:"text-lg text-lmGrey600 dark:text-dmGrey100",children:"Participants"}),(0,jU.jsx)(yW,{text:"Online \u2022 Burrower",displayName:"Nele Langrock",profilePic:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2264&q=80"}),(0,jU.jsx)(yW,{text:"Online \u2022 Owner",displayName:"Meggle Bande",profilePic:"https://images.unsplash.com/photo-1635107510862-53886e926b74?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2535&q=80"})]}),(0,jU.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,jU.jsx)("span",{className:"text-lg text-lmGrey600 dark:text-dmGrey100",children:"Original Offer - Snippet"}),(0,jU.jsx)(G3,{offerImages:i.photoUrl}),(0,jU.jsx)("div",{className:"dark:mt-1 flex h-full w-full flex-col gap-y-1 rounded-xl bg-white p-6 shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:(0,jU.jsx)(U3,{offerInformation:i})}),(0,jU.jsx)(z3,{dates:i.calendar,shadowUI:!0,header:!0}),(0,jU.jsx)("div",{className:"flex h-[256px] w-full flex-col gap-y-1 overflow-hidden rounded-xl bg-cover bg-center shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:(0,jU.jsx)(xQ,{lng:i.location.lng,lat:i.location.lat})}),(0,jU.jsx)(YH,{type:"button",uiType:"primary",title:"View full Offer",onClick:()=>{r("/offer-details/4469d428-3ee6-42a3-ad96-a5e42b481379")}})]})]})]})})},q3=()=>{let[t,n]=(0,e.useState)(!1);const r=Ge(),i=cX();return(0,jU.jsxs)("div",{className:"flex min-h-[106px] w-full items-center justify-between gap-y-2 px-6 pb-6 pt-9",children:[(0,jU.jsxs)("div",{className:"flex w-[240px] items-center gap-x-4 600:w-[320px]",children:[i.width<1e3&&(0,jU.jsx)("i",{onClick:()=>r("/chat/sidebar"),className:"fa-solid fa-chevron-left h-fit w-7 text-[24px] text-lmGrey300 hover:text-lmGrey600"}),(0,jU.jsx)(yW,{text:"Online",displayName:"Meggle Bande",profilePic:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2264&q=80"})]}),(0,jU.jsx)("div",{onClick:()=>n(!0),className:"fa-solid fa-bars-staggered flex h-12 w-12 rotate-180 cursor-pointer items-center justify-center rounded-full text-[24px] text-lmGrey300 duration-300 hover:bg-lmGrey50 hover:text-lmGrey600"}),(0,jU.jsx)(W3,{isOpen:t,closeModal:()=>n(!1)})]})},Y3=e=>{let{firstIcon:t,secondIcon:n,onChange:r,onFocus:i,onBlur:o,onDelete:a,name:s,placeholder:l,value:c,label:u,error:d,type:h,filter:f}=e;return(0,jU.jsx)("div",{className:"flex w-full flex-col gap-y-2","aria-invalid":d?"true":"false",children:(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-1",children:[(0,jU.jsxs)("div",{className:"flex w-full gap-x-2",children:[(0,jU.jsxs)("div",{className:"flex w-full gap-x-2 rounded-lg ".concat(d?"bg-red-100 dark:bg-red-900":"bg-lmGrey50 dark:bg-dmGrey800","  py-[10px] px-3 shadow-sm"),children:[t&&(0,jU.jsx)("div",{className:"flex h-full w-[14px] items-center justify-center",children:(0,jU.jsx)("i",{className:"".concat(t," flex h-[14px] w-[14px] items-center justify-center text-[14px] ").concat(d?"text-red-300 dark:text-red-100":void 0===c||""===c?"text-lmGrey300 dark:text-dmGrey300":"text-lmGrey600 dark:text-dmGrey25","  ")})}),(0,jU.jsx)("textarea",{rows:"10",type:null!==h&&void 0!==h?h:"text",name:s,value:c||"",onChange:r,onBlur:o,onFocus:i,placeholder:l,className:"w-full bg-transparent text-sm ".concat(d?"text-red-500 placeholder:text-red-300 dark:text-red-100":"text-lmGrey600 placeholder:text-dmGrey300 dark:text-dmGrey25 placeholder:dark:text-dmGrey300","  h-[20px] break-words outline-none duration-300 focus:h-[60px] focus:outline-none")}),(n||d)&&(()=>{switch(n){case"fa-solid fa-times":if(d||""!==c&&c)return(0,jU.jsx)("i",{onClick:a,className:"".concat(d?"fa-solid fa-triangle-exclamation":n," min-w[14px] h-min-[14px] flex h-[14px] w-[14px] items-center justify-center text-[14px] ").concat(d?"text-red-300 dark:text-red-100":void 0===c||""===c?"text-lmGrey300 dark:text-dmGrey300":"text-lmGrey600 dark:text-dmGrey25","  ")});break;case"fa-solid fa-paperclip":return(0,jU.jsx)("div",{className:"flex h-[20px] w-[14px] items-center justify-center",children:(0,jU.jsx)("input",{type:"file",name:"fileUpload",multiple:!0,className:"".concat(d?"fa-solid fa-triangle-exclamation":n," cursor-pointer flex h-[14px] w-[14px] items-center justify-center text-[14px] ").concat(d?"text-red-300 dark:text-red-100":void 0===c||""===c?"text-lmGrey300 dark:text-dmGrey300":"text-lmGrey600 dark:text-dmGrey25","  ")})});default:return(0,jU.jsx)("div",{className:"flex h-[20px] w-[14px] items-center justify-center",children:(0,jU.jsx)("i",{className:"".concat(d?"fa-solid fa-triangle-exclamation":n," flex h-[14px] w-[14px] items-center justify-center text-[14px] ").concat(d?"text-red-300 dark:text-red-100":void 0===c||""===c?"text-lmGrey300 dark:text-dmGrey300":"text-lmGrey600 dark:text-dmGrey25","  ")})})}})()]}),void 0!==f&&(0,jU.jsx)(SY.Button,{className:"fa-solid fa-filter flex min-h-[40px] min-w-[40px] items-center justify-center rounded-lg bg-lmGrey50 text-base text-lmGrey200 dark:bg-lmGrey800 dark:text-dmGrey300"})]}),d&&(0,jU.jsxs)("div",{className:"flex items-center gap-x-2 px-3 ",children:[(0,jU.jsx)("i",{className:"fa-solid fa-triangle-exclamation flex h-[12px] w-[12px] items-center justify-center text-xs text-red-300 dark:text-red-100"}),(0,jU.jsx)("span",{className:"text-xs text-red-500 dark:text-red-100",children:d.message})]})]})})},X3=()=>{const[t,n]=(0,e.useState)(!1),{control:r,handleSubmit:i}=nY(),o=()=>n(!1),a=()=>n(!0);return(0,jU.jsxs)("form",{onSubmit:i((e=>e)),className:"flex min-h-[100px] w-full items-center gap-x-2 py-3 px-6",children:[(0,jU.jsx)(uq,{name:"message",control:r,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(Y3,{secondIcon:"fa-solid fa-paperclip",onChange:t.onChange,placeholder:"Write your next message...",value:t.value,onBlur:o,onFocus:a,error:n.error})}}),(0,jU.jsx)("div",{className:"flex h-full items-center duration-300",children:(0,jU.jsx)("div",{className:"".concat(t&&"-translate-y-5"," h-fit w-fit duration-300"),children:(0,jU.jsx)(YH,{type:"submit",uiType:"primary",icon:"fa-solid fa-chevron-right",onClick:i})})})]})},Q3=()=>{const e=cX();return(0,jU.jsxs)("div",{style:{height:"".concat(e.height,"px")},className:"flex min-w-[360px] max-w-[720px] flex-col gap-y-2 1000:w-full 1000:min-w-0 1000:max-w-none",children:[(0,jU.jsx)(q3,{}),(0,jU.jsx)(FX,{}),(0,jU.jsx)(X3,{})]})},K3=e=>{let{chatId:t,newMsg:n,lastMsg:r,displayName:i,shadow:o,photoUrl:a,onClick:s}=e;return(0,jU.jsx)("div",{onClick:()=>s(t),className:"flex w-full items-center justify-center rounded-lg px-2 py-4 ".concat(o&&"shadow"," cursor-pointer duration-300 hover:bg-lmGrey50 dark:hover:bg-dmGrey800"),children:(0,jU.jsxs)("div",{className:"flex h-11 w-full gap-x-2",children:[(0,jU.jsx)("div",{className:"h-[46px] min-h-[46px] w-[46px] min-w-[46px] rounded-full bg-lmGrey100 bg-cover bg-center shadow",style:{backgroundImage:"url(".concat(a,")")}}),(0,jU.jsxs)("div",{className:"flex w-full flex-col justify-center gap-y-[2px] overflow-hidden",children:[(0,jU.jsx)("span",{className:"text-base text-lmGrey500 dark:text-dmGrey100",children:i}),r&&(0,jU.jsx)("span",{className:"w-full truncate text-sm text-lmGrey300 dark:text-dmGrey300",children:r})]}),(0,jU.jsx)("div",{className:"flex h-full w-6 min-w-fit items-center",children:n&&(0,jU.jsx)("div",{className:"h-2 w-2 rounded-full bg-lmPrimary dark:bg-dmPrimary"})})]})})},Z3=()=>{const{setSingleParam:e}=AW(),{chatPreviews:t}=WH(),n=Ge(),r=cX(),i=t=>{r.width>1e3?e("chatId",t):n("/chat/chat-main/".concat(t))};return(0,jU.jsx)("div",{className:"flex w-full flex-col gap-y-2",children:t.map((e=>(0,jU.jsx)(K3,{onClick:i,chatId:e.chatId,newMsg:e.newMsg,lastMsg:e.lastMsg,displayName:e.displayName,photoUrl:e.photoUrl},e.chatId)))})},J3=e=>{let t={};for(const[n,r]of Object.entries(e))$3(r)&&(t[n]=r.replace(/\s+/g," ").trim());return console.log(t),t},$3=e=>void 0!==e&&""!==e&&(null===e||void 0===e?void 0:e.trim(" ").length)>0&&"undefined"!==e,e4=()=>{let[e]=at();const{setSingleParam:t,deleteSingleParam:n}=AW(),{control:r,handleSubmit:i,setValue:o}=nY(),a=()=>{n("search"),o("search","")};return(0,jU.jsxs)("form",{onSubmit:i((e=>{const n=J3(e).search;n&&t("search",n)})),className:"flex w-full items-end gap-x-2",children:[(0,jU.jsx)(uq,{name:"search",control:r,defaultValue:e.get("search")?e.get("search"):void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-magnifying-glass",secondIcon:"fa-solid fa-times",onChange:t.onChange,placeholder:"Audi A8",value:t.value,onBlur:t.onBlur,onDelete:a,error:n.error})}}),(0,jU.jsx)(YH,{type:"submit",uiType:"primary",icon:"fa-solid fa-chevron-right",onClick:i})]})},t4=()=>{const t=cX(),n=Ge();return(0,e.useEffect)((()=>{t.width>1e3&&n("/chat")}),[n,t]),(0,jU.jsxs)("div",{className:"flex w-[412px] min-w-[360px] h-screen flex-col items-center gap-y-6 px-7 pb-7 pt-9",children:[(0,jU.jsx)(e4,{}),(0,jU.jsx)(Z3,{})]})},n4=()=>{const t=cX(),n=Ge();return(0,e.useEffect)((()=>{t.width<1e3&&n("/chat/sidebar")}),[n,t]),(0,jU.jsxs)("div",{className:"relative flex h-full w-full",children:[(0,jU.jsx)(t4,{}),(0,jU.jsx)(Q3,{})]})},r4=(e,t,n)=>{if("seats"===n||"trunkVolume"===n){const r=parseInt(t.split(" ")[0]);return e.filter((e=>r<=e.carSpecs[n]))}return"smoking"===n||"eating"===n?e.filter((e=>t===(e.carSpecs[n]?"Yes":"No"))):e.filter((e=>t===e.carSpecs[n]))};const i4=e=>new Date((e=>{const t=e.split(".");return"".concat(t[1],"/").concat(t[0],"/").concat(t[2])})(e)),o4=(e,t)=>e.filter((e=>function(e,t){bQ(2,arguments);var n=SQ(e).getTime(),r=SQ(t.start).getTime(),i=SQ(t.end).getTime();if(!(r<=i))throw new RangeError("Invalid interval");return n>=r&&n<=i}(i4(t),{start:i4(e.calendar.startDate),end:i4(e.calendar.endDate)}))),a4=(e,t,n)=>e.filter((e=>t>=e.price[n])),s4=(e,t)=>e.filter((e=>e.name.includes(t))),l4=(e,t,n)=>e.filter((e=>t<=e.price[n])),c4=e=>{let{liked:t,onLikeCallback:n,onLocationCallback:r}=e;return(0,jU.jsxs)(jU.Fragment,{children:[(0,jU.jsx)("i",{onClick:r,className:"fa-solid fa-location-dot absolute right-[10px] top-10 text-2xl text-lmGrey200 drop-shadow duration-300 hover:text-lmPrimary/60 focus:text-lmPrimary dark:text-dmGrey300 500:left-3 500:top-3 500:right-auto 500:flex 500:text-white/40 dark:500:text-white/40 1400:left-6 1400:top-6 1400:text-[36px]"}),(0,jU.jsx)("i",{onClick:n,className:"fa-solid fa-heart ".concat(t?"text-red-500":"text-lmGrey200 dark:text-dmGrey300 500:text-white/40 dark:500:text-white/40"," absolute right-2 top-2 text-2xl drop-shadow-sm duration-300 hover:text-red-400 500:right-3 500:top-3 500:flex 1400:right-6 1400:top-6 1400:text-[36px]")})]})},u4=e=>{let{onNavigationCallback:t,photoUrl:n}=e;return(0,jU.jsx)("div",{onClick:t,className:"h-full min-w-[110px] rounded-lg bg-cover bg-center 500:absolute 500:top-0 500:left-0 500:h-[200px] 500:w-full 500:rounded-xl 1400:h-80",style:{backgroundImage:"url(".concat(n[0],")")}})},d4=e=>{let{onNavigationCallback:t,offerInformation:n}=e;const{location:r,price:i,carSpecs:o,name:a}=n;return(0,jU.jsxs)("div",{onClick:t,className:"flex w-full  flex-col gap-y-1 rounded-xl py-3 dark:bg-dmGrey900 dark:shadow-sm dark:shadow-dmShadow 500:absolute 500:bottom-[2%] 500:z-10 500:w-11/12 500:gap-y-0 500:bg-white 500:p-3 500:shadow 1400:bottom-[6%] 1400:gap-y-1",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col overflow-hidden",children:[(0,jU.jsxs)("div",{className:"flex w-10/12 items-center gap-x-1 text-sm text-lmGrey600 dark:text-dmGrey100 400:w-10/12 500:w-full 1400:text-base",children:[(0,jU.jsx)("i",{className:"fa-solid fa-location-dot"}),(0,jU.jsx)("span",{className:"w-full truncate",children:r.formatted})]}),(0,jU.jsx)("span",{className:"w-8/12 truncate text-lg font-semibold text-lmGrey700 dark:text-dmGrey25 400:w-9/12 500:w-full 1400:text-xl",children:a})]}),(0,jU.jsxs)("div",{className:"flex w-full items-center gap-x-[2px] truncate",children:[(0,jU.jsxs)("span",{className:"text-base text-lmPrimary dark:text-dmPrimary 1400:text-lg",children:[i.day,"\u20ac"," ",(0,jU.jsx)("span",{className:"text-xs 1400:text-sm text-lmGrey400 dark:text-dmGrey300",children:"/day"})]}),(0,jU.jsx)("div",{className:"flex items-center justify-center px-1 500:hidden 1400:flex",children:(0,jU.jsx)("div",{className:"h-1 w-1 rounded-full bg-lmGrey400"})}),(0,jU.jsxs)("span",{className:"flex items-center truncate text-base text-lmPrimary dark:text-dmPrimary 1400:text-lg",children:[i.week,"\u20ac"," ",(0,jU.jsx)("span",{className:"truncate text-xs 1400:text-sm text-lmGrey400 dark:text-dmGrey300",children:"/week"})]}),(0,jU.jsx)("div",{className:"hidden items-center justify-center px-1",children:(0,jU.jsx)("div",{className:"h-1 w-1 rounded-full bg-lmGrey400"})}),(0,jU.jsxs)("span",{className:"hidden items-center text-lg text-lmPrimary dark:text-dmPrimary 1400:flex",children:[i.month,"\u20ac"," ",(0,jU.jsx)("span",{className:"truncate text-xs 1400:text-sm text-lmGrey400 dark:text-dmGrey300",children:"/month"})]})]}),(0,jU.jsxs)("div",{className:"flex w-5/6 gap-x-4 500:hidden 500:w-fit 1400:flex",children:[(0,jU.jsxs)("div",{className:"flex items-center gap-x-1 text-sm text-lmGrey300 dark:text-dmGrey100",children:[(0,jU.jsx)("i",{className:"fa-solid fa-gears"}),(0,jU.jsx)("span",{children:o.transmission})]}),(0,jU.jsxs)("div",{className:"flex items-center gap-x-1 text-sm text-lmGrey300 dark:text-dmGrey100",children:[(0,jU.jsx)("i",{className:"fa-solid fa-chair"}),(0,jU.jsxs)("span",{children:[o.seats," Seats"]})]})]})]})},h4=e=>{let{offerInformation:t,index:n}=e;const{offerId:r,liked:i,photoUrl:o,location:a}=t,s=Ge(),l=()=>s("/offer-details/".concat(r)),{handleLocationNavigation:c}=sW(),u=()=>c(r,a);return(0,jU.jsxs)(LU.div,{initial:{opacity:0,translateY:-24},animate:{opacity:1,translateY:0},transition:{duration:.3,opacity:{delay:.2*n},translateY:{delay:.2*n},scale:{ease:"easeInOut"}},whileHover:{scale:1.01},whileTap:{scale:.99},className:"relative flex w-full min-w-[312px] cursor-pointer gap-x-3 rounded-lg bg-white shadow dark:border dark:border-solid dark:border-dmGrey800/50 dark:bg-dmGrey900 dark:shadow-sm 500:h-[252px] 500:w-[180px] 500:min-w-0 500:justify-center 500:gap-x-0 500:rounded-xl 500:shadow-none dark:500:border-none 1400:h-[406px] 1400:w-[292px]",children:[(0,jU.jsx)(u4,{photoUrl:o,onNavigationCallback:l}),(0,jU.jsx)(c4,{liked:i,onLikeCallback:()=>{},onLocationCallback:u}),(0,jU.jsx)(d4,{offerInformation:t,onNavigationCallback:l,onLocationCallback:u})]})},f4=e=>{let{offerList:t}=e;return(0,jU.jsx)(jU.Fragment,{children:t.map(((e,t)=>(0,jU.jsx)(h4,{offerInformation:e,index:t},e.offerId)))})},p4=()=>({debounce:function(e,t){var n=this;let r;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];clearTimeout(r),r=setTimeout((()=>{e.apply(n,o)}),t)}}});class m4 extends M{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.length&&(this.currentQuery.addObserver(this),g4(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return v4(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return v4(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){const n=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),v(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const i=this.hasListeners();i&&y4(this.currentQuery,r,this.options,n)&&this.executeFetch(),this.updateResult(t),!i||this.currentQuery===r&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();const o=this.computeRefetchInterval();!i||this.currentQuery===r&&this.options.enabled===n.enabled&&o===this.currentRefetchInterval||this.updateRefetchInterval(o)}getOptimisticResult(e){const t=this.client.getQueryCache().build(this.client,e);return this.createResult(t,e)}getCurrentResult(){return this.currentResult}trackResult(e){const t={};return Object.keys(e).forEach((n=>{Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})})),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch(){let{refetchPage:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){const t=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,t);return n.isFetchingOptimistic=!0,n.fetch().then((()=>this.createResult(n,t)))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:null==(t=e.cancelRefetch)||t}).then((()=>(this.updateResult(),this.currentResult)))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return null!=e&&e.throwOnError||(t=t.catch(o)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),i||this.currentResult.isStale||!a(this.options.staleTime))return;const e=s(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout((()=>{this.currentResult.isStale||this.updateResult()}),e)}computeRefetchInterval(){var e;return"function"===typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!i&&!1!==this.options.enabled&&a(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((()=>{(this.options.refetchIntervalInBackground||T.isFocused())&&this.executeFetch()}),this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){const n=this.currentQuery,r=this.options,i=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,s=e!==n,l=s?e.state:this.currentQueryInitialState,c=s?this.currentResult:this.previousQueryResult,{state:u}=e;let d,{dataUpdatedAt:h,error:f,errorUpdatedAt:p,fetchStatus:m,status:g}=u,v=!1,y=!1;if(t._optimisticResults){const i=this.hasListeners(),o=!i&&g4(e,t),a=i&&y4(e,n,t,r);(o||a)&&(m=k(e.options.networkMode)?"fetching":"paused",h||(g="loading")),"isRestoring"===t._optimisticResults&&(m="idle")}if(t.keepPreviousData&&!u.dataUpdateCount&&null!=c&&c.isSuccess&&"error"!==g)d=c.data,h=c.dataUpdatedAt,g=c.status,v=!0;else if(t.select&&"undefined"!==typeof u.data)if(i&&u.data===(null==o?void 0:o.data)&&t.select===this.selectFn)d=this.selectResult;else try{this.selectFn=t.select,d=t.select(u.data),d=A(null==i?void 0:i.data,d,t),this.selectResult=d,this.selectError=null}catch(S){0,this.selectError=S}else d=u.data;if("undefined"!==typeof t.placeholderData&&"undefined"===typeof d&&"loading"===g){let e;if(null!=i&&i.isPlaceholderData&&t.placeholderData===(null==a?void 0:a.placeholderData))e=i.data;else if(e="function"===typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&"undefined"!==typeof e)try{e=t.select(e),e=A(null==i?void 0:i.data,e,t),this.selectError=null}catch(S){0,this.selectError=S}"undefined"!==typeof e&&(g="success",d=e,y=!0)}this.selectError&&(f=this.selectError,d=this.selectResult,p=Date.now(),g="error");const x="fetching"===m,b="loading"===g,w="error"===g;return{status:g,fetchStatus:m,isLoading:b,isSuccess:"success"===g,isError:w,isInitialLoading:b&&x,data:d,dataUpdatedAt:h,error:f,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:x,isRefetching:x&&!b,isLoadingError:w&&0===u.dataUpdatedAt,isPaused:"paused"===m,isPlaceholderData:y,isPreviousData:v,isRefetchError:w&&0!==u.dataUpdatedAt,isStale:x4(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){const t=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,v(n,t))return;this.currentResult=n;const r={cache:!0};!1!==(null==e?void 0:e.listeners)&&(()=>{if(!t)return!0;const{notifyOnChangeProps:e}=this.options;if("all"===e||!e&&!this.trackedProps.size)return!0;const n=new Set(null!=e?e:this.trackedProps);return this.options.useErrorBoundary&&n.add("error"),Object.keys(this.currentResult).some((e=>{const r=e;return this.currentResult[r]!==t[r]&&n.has(r)}))})()&&(r.listeners=!0),this.notify({...r,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const t={};"success"===e.type?t.onSuccess=!e.manual:"error"!==e.type||R(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){C.batch((()=>{var t,n,r,i;if(e.onSuccess)null==(t=(n=this.options).onSuccess)||t.call(n,this.currentResult.data),null==(r=(i=this.options).onSettled)||r.call(i,this.currentResult.data,null);else if(e.onError){var o,a,s,l;null==(o=(a=this.options).onError)||o.call(a,this.currentResult.error),null==(s=(l=this.options).onSettled)||s.call(l,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach((e=>{e(this.currentResult)})),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})}))}}function g4(e,t){return function(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||e.state.dataUpdatedAt>0&&v4(e,t,t.refetchOnMount)}function v4(e,t,n){if(!1!==t.enabled){const r="function"===typeof n?n(e):n;return"always"===r||!1!==r&&x4(e,t)}return!1}function y4(e,t,n,r){return!1!==n.enabled&&(e!==t||!1===r.enabled)&&(!n.suspense||"error"!==e.state.status)&&x4(e,n)}function x4(e,t){return e.isStaleByTime(t.staleTime)}const b4=n(248).useSyncExternalStore;function w4(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}const S4=e.createContext(w4()),_4=e.createContext(!1);_4.Provider;function A4(t,n){const r=function(){let{context:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=e.useContext(q(t,e.useContext(W)));if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n}({context:t.context}),i=e.useContext(_4),o=e.useContext(S4),a=r.defaultQueryOptions(t);a._optimisticResults=i?"isRestoring":"optimistic",a.onError&&(a.onError=C.batchCalls(a.onError)),a.onSuccess&&(a.onSuccess=C.batchCalls(a.onSuccess)),a.onSettled&&(a.onSettled=C.batchCalls(a.onSettled)),a.suspense&&"number"!==typeof a.staleTime&&(a.staleTime=1e3),((e,t)=>{(e.suspense||e.useErrorBoundary)&&(t.isReset()||(e.retryOnMount=!1))})(a,o),(t=>{e.useEffect((()=>{t.clearReset()}),[t])})(o);const[s]=e.useState((()=>new n(r,a))),l=s.getOptimisticResult(a);if(b4(e.useCallback((e=>i?()=>{}:s.subscribe(C.batchCalls(e))),[s,i]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),e.useEffect((()=>{s.setOptions(a,{listeners:!1})}),[a,s]),a.suspense&&l.isLoading&&l.isFetching&&!i)throw s.fetchOptimistic(a).then((e=>{let{data:t}=e;null==a.onSuccess||a.onSuccess(t),null==a.onSettled||a.onSettled(t,null)})).catch((e=>{o.clearReset(),null==a.onError||a.onError(e),null==a.onSettled||a.onSettled(void 0,e)}));if((e=>{let{result:t,errorResetBoundary:n,useErrorBoundary:r,query:i}=e;return t.isError&&!n.isReset()&&!t.isFetching&&(o=r,a=[t.error,i],"function"===typeof o?o(...a):!!o);var o,a})({result:l,errorResetBoundary:o,useErrorBoundary:a.useErrorBoundary,query:s.getCurrentQuery()}))throw l.error;return a.notifyOnChangeProps?l:s.trackResult(l)}function E4(e,t,n){return A4(l(e,t,n),m4)}function C4(e,t){return function(){return e.apply(t,arguments)}}const{toString:M4}=Object.prototype,{getPrototypeOf:T4}=Object,P4=(D4=Object.create(null),e=>{const t=M4.call(e);return D4[t]||(D4[t]=t.slice(8,-1).toLowerCase())});var D4;const k4=e=>(e=e.toLowerCase(),t=>P4(t)===e),O4=e=>t=>typeof t===e,{isArray:R4}=Array,I4=O4("undefined");const L4=k4("ArrayBuffer");const N4=O4("string"),j4=O4("function"),B4=O4("number"),F4=e=>null!==e&&"object"===typeof e,z4=e=>{if("object"!==P4(e))return!1;const t=T4(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},U4=k4("Date"),G4=k4("File"),V4=k4("Blob"),H4=k4("FileList"),W4=k4("URLSearchParams");function q4(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),R4(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(n=0;n<o;n++)a=r[n],t.call(null,e[a],a,e)}}function Y4(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const X4="undefined"===typeof self?"undefined"===typeof global?void 0:global:self,Q4=e=>!I4(e)&&e!==X4;const K4=(Z4="undefined"!==typeof Uint8Array&&T4(Uint8Array),e=>Z4&&e instanceof Z4);var Z4;const J4=k4("HTMLFormElement"),$4=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),e5=k4("RegExp"),t5=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};q4(n,((n,i)=>{!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},n5={isArray:R4,isArrayBuffer:L4,isBuffer:function(e){return null!==e&&!I4(e)&&null!==e.constructor&&!I4(e.constructor)&&j4(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{const t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||M4.call(e)===t||j4(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&L4(e.buffer),t},isString:N4,isNumber:B4,isBoolean:e=>!0===e||!1===e,isObject:F4,isPlainObject:z4,isUndefined:I4,isDate:U4,isFile:G4,isBlob:V4,isRegExp:e5,isFunction:j4,isStream:e=>F4(e)&&j4(e.pipe),isURLSearchParams:W4,isTypedArray:K4,isFileList:H4,forEach:q4,merge:function e(){const{caseless:t}=Q4(this)&&this||{},n={},r=(r,i)=>{const o=t&&Y4(n,i)||i;z4(n[o])&&z4(r)?n[o]=e(n[o],r):z4(r)?n[o]=e({},r):R4(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&q4(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return q4(t,((t,r)=>{n&&j4(t)?e[r]=C4(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,a;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&T4(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:P4,kindOfTest:k4,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(R4(e))return e;let t=e.length;if(!B4(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:J4,hasOwnProperty:$4,hasOwnProp:$4,reduceDescriptors:t5,freezeMethods:e=>{t5(e,((t,n)=>{if(j4(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];j4(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return R4(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:Y4,global:X4,isContextDefined:Q4,toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(F4(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=R4(e)?[]:{};return q4(e,((e,t)=>{const o=n(e,r+1);!I4(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)}};function r5(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}n5.inherits(r5,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:n5.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const i5=r5.prototype,o5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{o5[e]={value:e}})),Object.defineProperties(r5,o5),Object.defineProperty(i5,"isAxiosError",{value:!0}),r5.from=(e,t,n,r,i,o)=>{const a=Object.create(i5);return n5.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),r5.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const a5=r5;const s5=n(472);function l5(e){return n5.isPlainObject(e)||n5.isArray(e)}function c5(e){return n5.endsWith(e,"[]")?e.slice(0,-2):e}function u5(e,t,n){return e?e.concat(t).map((function(e,t){return e=c5(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const d5=n5.toFlatObject(n5,{},null,(function(e){return/^is[A-Z]/.test(e)}));const h5=function(e,t,n){if(!n5.isObject(e))throw new TypeError("target must be an object");t=t||new(s5||FormData),n=n5.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!n5.isUndefined(t[e])}));const r=n.metaTokens,i=n.visitor||u,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&((l=t)&&n5.isFunction(l.append)&&"FormData"===l[Symbol.toStringTag]&&l[Symbol.iterator]);var l;if(!n5.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(n5.isDate(e))return e.toISOString();if(!s&&n5.isBlob(e))throw new a5("Blob is not supported. Use a Buffer instead.");return n5.isArrayBuffer(e)||n5.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){let s=e;if(e&&!i&&"object"===typeof e)if(n5.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(n5.isArray(e)&&function(e){return n5.isArray(e)&&!e.some(l5)}(e)||n5.isFileList(e)||n5.endsWith(n,"[]")&&(s=n5.toArray(e)))return n=c5(n),s.forEach((function(e,r){!n5.isUndefined(e)&&null!==e&&t.append(!0===a?u5([n],r,o):null===a?n:n+"[]",c(e))})),!1;return!!l5(e)||(t.append(u5(i,n,o),c(e)),!1)}const d=[],h=Object.assign(d5,{defaultVisitor:u,convertValue:c,isVisitable:l5});if(!n5.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!n5.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),n5.forEach(n,(function(n,o){!0===(!(n5.isUndefined(n)||null===n)&&i.call(t,n,n5.isString(o)?o.trim():o,r,h))&&e(n,r?r.concat(o):[o])})),d.pop()}}(e),t};function f5(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function p5(e,t){this._pairs=[],e&&h5(e,this,t)}const m5=p5.prototype;m5.append=function(e,t){this._pairs.push([e,t])},m5.toString=function(e){const t=e?function(t){return e.call(this,t,f5)}:f5;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const g5=p5;function v5(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function y5(e,t,n){if(!t)return e;const r=n&&n.encode||v5,i=n&&n.serialize;let o;if(o=i?i(t,n):n5.isURLSearchParams(t)?t.toString():new g5(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const x5=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){n5.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},b5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},w5="undefined"!==typeof URLSearchParams?URLSearchParams:g5,S5=FormData,_5=(()=>{let e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)})(),A5={isBrowser:!0,classes:{URLSearchParams:w5,FormData:S5,Blob:Blob},isStandardBrowserEnv:_5,protocols:["http","https","file","blob","url","data"]};const E5=function(e){function t(e,n,r,i){let o=e[i++];const a=Number.isFinite(+o),s=i>=e.length;if(o=!o&&n5.isArray(r)?r.length:o,s)return n5.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a;r[o]&&n5.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&n5.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!a}if(n5.isFormData(e)&&n5.isFunction(e.entries)){const n={};return n5.forEachEntry(e,((e,r)=>{t(function(e){return n5.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null},C5={"Content-Type":void 0};const M5={transitional:b5,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=n5.isObject(e);i&&n5.isHTMLForm(e)&&(e=new FormData(e));if(n5.isFormData(e))return r&&r?JSON.stringify(E5(e)):e;if(n5.isArrayBuffer(e)||n5.isBuffer(e)||n5.isStream(e)||n5.isFile(e)||n5.isBlob(e))return e;if(n5.isArrayBufferView(e))return e.buffer;if(n5.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return h5(e,new A5.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return A5.isNode&&n5.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=n5.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return h5(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(n5.isString(e))try{return(t||JSON.parse)(e),n5.trim(e)}catch(UV){if("SyntaxError"!==UV.name)throw UV}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||M5.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&n5.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(UV){if(n){if("SyntaxError"===UV.name)throw a5.from(UV,a5.ERR_BAD_RESPONSE,this,null,this.response);throw UV}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:A5.classes.FormData,Blob:A5.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n5.forEach(["delete","get","head"],(function(e){M5.headers[e]={}})),n5.forEach(["post","put","patch"],(function(e){M5.headers[e]=n5.merge(C5)}));const T5=M5,P5=n5.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),D5=Symbol("internals");function k5(e){return e&&String(e).trim().toLowerCase()}function O5(e){return!1===e||null==e?e:n5.isArray(e)?e.map(O5):String(e)}function R5(e,t,n,r){return n5.isFunction(r)?r.call(this,t,n):n5.isString(t)?n5.isString(r)?-1!==t.indexOf(r):n5.isRegExp(r)?r.test(t):void 0:void 0}class I5{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=k5(t);if(!i)throw new Error("header name must be a non-empty string");const o=n5.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=O5(e))}const o=(e,t)=>n5.forEach(e,((e,n)=>i(e,n,t)));return n5.isPlainObject(e)||e instanceof this.constructor?o(e,t):n5.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z]+$/.test(e.trim())?o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&P5[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=k5(e)){const n=n5.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(n5.isFunction(t))return t.call(this,e,n);if(n5.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=k5(e)){const n=n5.findKey(this,e);return!(!n||t&&!R5(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=k5(e)){const i=n5.findKey(n,e);!i||t&&!R5(0,n[i],i,t)||(delete n[i],r=!0)}}return n5.isArray(e)?e.forEach(i):i(e),r}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(e){const t=this,n={};return n5.forEach(this,((r,i)=>{const o=n5.findKey(n,i);if(o)return t[o]=O5(r),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete t[i],t[a]=O5(r),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return n5.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&n5.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[D5]=this[D5]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=k5(e);t[r]||(!function(e,t){const n=n5.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return n5.isArray(e)?e.forEach(r):r(e),this}}I5.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),n5.freezeMethods(I5.prototype),n5.freezeMethods(I5);const L5=I5;function N5(e,t){const n=this||T5,r=t||n,i=L5.from(r.headers);let o=r.data;return n5.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function j5(e){return!(!e||!e.__CANCEL__)}function B5(e,t,n){a5.call(this,null==e?"canceled":e,a5.ERR_CANCELED,t,n),this.name="CanceledError"}n5.inherits(B5,a5,{__CANCEL__:!0});const F5=B5;const z5=A5.isStandardBrowserEnv?{write:function(e,t,n,r,i,o){const a=[];a.push(e+"="+encodeURIComponent(t)),n5.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),n5.isString(r)&&a.push("path="+r),n5.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function U5(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const G5=A5.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=n5.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const V5=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=r[a];i||(i=l),n[o]=s,r[o]=l;let u=a,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};function H5(e,t){let n=0;const r=V5(50,250);return i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-n,l=r(s);n=o;const c={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}const W5="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=L5.from(e.headers).normalize(),o=e.responseType;let a;function s(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}n5.isFormData(r)&&A5.isStandardBrowserEnv&&i.setContentType(!1);let l=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const c=U5(e.baseURL,e.url);function u(){if(!l)return;const r=L5.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new a5("Request failed with status code "+n.status,[a5.ERR_BAD_REQUEST,a5.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:o&&"text"!==o&&"json"!==o?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:e,request:l}),l=null}if(l.open(e.method.toUpperCase(),y5(c,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=u:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(u)},l.onabort=function(){l&&(n(new a5("Request aborted",a5.ECONNABORTED,e,l)),l=null)},l.onerror=function(){n(new a5("Network Error",a5.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||b5;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new a5(t,r.clarifyTimeoutError?a5.ETIMEDOUT:a5.ECONNABORTED,e,l)),l=null},A5.isStandardBrowserEnv){const t=(e.withCredentials||G5(c))&&e.xsrfCookieName&&z5.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in l&&n5.forEach(i.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),n5.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),o&&"json"!==o&&(l.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&l.addEventListener("progress",H5(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",H5(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=t=>{l&&(n(!t||t.type?new F5(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const d=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(c);d&&-1===A5.protocols.indexOf(d)?n(new a5("Unsupported protocol "+d+":",a5.ERR_BAD_REQUEST,e)):l.send(r||null)}))},q5={http:null,xhr:W5};n5.forEach(q5,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(UV){}Object.defineProperty(e,"adapterName",{value:t})}}));const Y5=e=>{e=n5.isArray(e)?e:[e];const{length:t}=e;let n,r;for(let i=0;i<t&&(n=e[i],!(r=n5.isString(n)?q5[n.toLowerCase()]:n));i++);if(!r){if(!1===r)throw new a5("Adapter ".concat(n," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(n5.hasOwnProp(q5,n)?"Adapter '".concat(n,"' is not available in the build"):"Unknown adapter '".concat(n,"'"))}if(!n5.isFunction(r))throw new TypeError("adapter is not a function");return r};function X5(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new F5}function Q5(e){X5(e),e.headers=L5.from(e.headers),e.data=N5.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Y5(e.adapter||T5.adapter)(e).then((function(t){return X5(e),t.data=N5.call(e,e.transformResponse,t),t.headers=L5.from(t.headers),t}),(function(t){return j5(t)||(X5(e),t&&t.response&&(t.response.data=N5.call(e,e.transformResponse,t.response),t.response.headers=L5.from(t.response.headers))),Promise.reject(t)}))}const K5=e=>e instanceof L5?e.toJSON():e;function Z5(e,t){t=t||{};const n={};function r(e,t,n){return n5.isPlainObject(e)&&n5.isPlainObject(t)?n5.merge.call({caseless:n},e,t):n5.isPlainObject(t)?n5.merge({},t):n5.isArray(t)?t.slice():t}function i(e,t,n){return n5.isUndefined(t)?n5.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!n5.isUndefined(t))return r(void 0,t)}function a(e,t){return n5.isUndefined(t)?n5.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>i(K5(e),K5(t),!0)};return n5.forEach(Object.keys(e).concat(Object.keys(t)),(function(r){const o=l[r]||i,a=o(e[r],t[r],r);n5.isUndefined(a)&&o!==s||(n[r]=a)})),n}const J5="1.2.0",$5={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{$5[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const e6={};$5.transitional=function(e,t,n){function r(e,t){return"[Axios v1.2.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new a5(r(i," has been removed"+(t?" in "+t:"")),a5.ERR_DEPRECATED);return t&&!e6[i]&&(e6[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};const t6={assertOptions:function(e,t,n){if("object"!==typeof e)throw new a5("options must be an object",a5.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],a=t[o];if(a){const t=e[o],n=void 0===t||a(t,o,e);if(!0!==n)throw new a5("option "+o+" must be "+n,a5.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new a5("Unknown option "+o,a5.ERR_BAD_OPTION)}},validators:$5},n6=t6.validators;class r6{constructor(e){this.defaults=e,this.interceptors={request:new x5,response:new x5}}request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Z5(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;let o;void 0!==n&&t6.assertOptions(n,{silentJSONParsing:n6.transitional(n6.boolean),forcedJSONParsing:n6.transitional(n6.boolean),clarifyTimeoutError:n6.transitional(n6.boolean)},!1),void 0!==r&&t6.assertOptions(r,{encode:n6.function,serialize:n6.function},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase(),o=i&&n5.merge(i.common,i[t.method]),o&&n5.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=L5.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[Q5.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=a.length;let h=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=Q5.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return y5(U5((e=Z5(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}n5.forEach(["delete","get","head","options"],(function(e){r6.prototype[e]=function(t,n){return this.request(Z5(n||{},{method:e,url:t,data:(n||{}).data}))}})),n5.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Z5(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}r6.prototype[e]=t(),r6.prototype[e+"Form"]=t(!0)}));const i6=r6;class o6{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new F5(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;const t=new o6((function(t){e=t}));return{token:t,cancel:e}}}const a6=o6;const s6=function e(t){const n=new i6(t),r=C4(i6.prototype.request,n);return n5.extend(r,i6.prototype,n,{allOwnKeys:!0}),n5.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Z5(t,n))},r}(T5);s6.Axios=i6,s6.CanceledError=F5,s6.CancelToken=a6,s6.isCancel=j5,s6.VERSION=J5,s6.toFormData=h5,s6.AxiosError=a5,s6.Cancel=s6.CanceledError,s6.all=function(e){return Promise.all(e)},s6.spread=function(e){return function(t){return e.apply(null,t)}},s6.isAxiosError=function(e){return n5.isObject(e)&&!0===e.isAxiosError},s6.AxiosHeaders=L5,s6.formToJSON=e=>E5(n5.isHTMLForm(e)?new FormData(e):e),s6.default=s6;const l6=s6,c6=(e,t)=>{if("mapCatalog"===e)return(e=>l6.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e,".json?limit=5&types=place&autocomplete=true&access_token=").concat("pk.eyJ1IjoibTFnZ2xlIiwiYSI6ImNsYXVtaHM0ejA1eTgzdm1wMmRkaDBnNDAifQ.ayNDhREPUzI4mBOyVjor6A")))(t)},u6=t=>{var n;let{control:r,definedActions:i}=t;i=null!==(n=i)&&void 0!==n?n:"mapCatalog";let o=Ue().pathname;const{getSingleParam:a,deleteSingleParam:s}=AW(),{handleFly:l}=lW(),[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)([]),f=e=>{if("mapCatalog"===i)return p(e)},p=e=>e.data.features.filter((e=>e.id&&e.place_name&&e.center&&e.bbox)).map((e=>({id:e.id,name:e.place_name,extraInfo:{bounds:[[e.bbox[1],e.bbox[0]],[e.bbox[3],e.bbox[2]]],center:e.center}}))),{data:m,isLoading:g,error:v,isError:y,refetch:x,isFetching:b}=(e=>{let{definedActions:t,value:n,onSuccessCallback:r,onErrorCallback:i}=e;return E4(["fetch-autocomplete-options",n],(()=>c6(t,n)),{enabled:!1,refetchOnMount:!1,refetchOnWindowFocus:!1,onSuccess:r,onError:i})})({definedActions:i,value:c,onSuccessCallback:e=>{h(f(e))},onErrorCallback:e=>console.log("error",e.data)});(0,e.useEffect)((()=>{c.length>=3&&x()}),[c,x]);const{debounce:w}=p4(),S=w((e=>u(e)),800),_=e=>{console.log(e),"mapCatalog"!==i||"/explore/map"!==o||l(e.extraInfo.center[0],e.extraInfo.center[1])},A=()=>{u(""),h([]),s("city")};return(0,jU.jsx)(jU.Fragment,{children:(0,jU.jsx)(uq,{name:"city",control:r,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(uX,{placeholder:"Dresden...",value:a("city")?a("city"):null,itemList:d,onChange:e=>{t.onChange(e.name),S(e.name),(e=>{u(e.name),_(e)})(e)},isLoading:g,onBlur:t.onBlur,onDelete:A,onInputChange:S,error:n.error})}})})},{filterSelects:d6}=WH(),{transmissionSelect:h6,fuelSelect:f6,seatSelect:p6,trunkSelect:m6,colorSelect:g6,smokingSelect:v6}=d6,y6=t=>{let{isOpen:n,closeModal:r,filterModal:i,definedActions:o}=t,[a]=at();const{setArrayOfParams:s,deleteSingleParam:l}=AW(),{control:c,handleSubmit:u,setValue:d,watch:h}=nY(),[f,p]=(0,e.useState)(0);(0,e.useEffect)((()=>d("search",a.get("search"))),[d,a]),(0,e.useEffect)((()=>p(0)),[n]);const m=(e,t)=>{d(e,t),l(e)};return(0,jU.jsxs)("form",{onSubmit:u((e=>{s(J3(e)),i&&r()})),className:"".concat(!i&&"pb-[90px]"," relative flex h-fit w-[340px] max-w-[340px] flex-col gap-y-3 rounded-lg"),children:[(0,jU.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,jU.jsx)("span",{className:"text-2xl text-lmGrey700 dark:text-dmGrey25",children:"Filter"}),(0,jU.jsx)(uq,{name:"search",control:c,defaultValue:a.get("search")?a.get("search"):void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-magnifying-glass",secondIcon:"fa-solid fa-times",onChange:t.onChange,placeholder:"Audi A8",value:t.value,onBlur:t.onBlur,onDelete:()=>m("search",""),error:n.error})}}),(0,jU.jsx)(u6,{definedActions:o,control:c}),(0,jU.jsx)("div",{className:"gap-y-1",children:(0,jU.jsxs)("div",{className:"flex gap-x-2",children:[(0,jU.jsx)(uq,{name:"startDate",control:c,defaultValue:a.get("startDate")?a.get("startDate"):void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-calendar-days",secondIcon:"fa-solid fa-times",onChange:t.onChange,onDelete:()=>m("startDate",""),label:"Start date",placeholder:"02.06.2023",type:"text",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"endDate",control:c,defaultValue:a.get("endDate")?a.get("endDate"):void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-calendar-days",secondIcon:"fa-solid fa-times",onChange:t.onChange,onDelete:()=>m("endDate",""),label:"End date",placeholder:"21.06.2023",type:"text",value:t.value,onBlur:t.onBlur,error:n.error})}})]})}),(0,jU.jsx)("div",{className:"gap-y-1",children:(0,jU.jsxs)("div",{className:"flex gap-x-2",children:[(0,jU.jsx)(uq,{name:"startPriceDay",control:c,defaultValue:a.get("startPriceDay")?a.get("startPriceDay"):void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-coins",secondIcon:"fa-solid fa-times",onChange:t.onChange,onDelete:()=>m("startPriceDay",""),label:"Daily start price",placeholder:"30...",value:t.value,onBlur:t.onBlur,error:n.error})},rules:{pattern:{value:/^[0-9]+$/,message:"Only numbers are allowed"}}}),(0,jU.jsx)(uq,{name:"endPriceDay",control:c,defaultValue:a.get("endPriceDay")?a.get("endPriceDay"):void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-coins",secondIcon:"fa-solid fa-times",onDelete:()=>m("endPriceDay",""),onChange:t.onChange,label:"Daily end price",placeholder:"300...",value:t.value,onBlur:t.onBlur,error:n.error})},rules:{pattern:{value:/^[0-9]+$/,message:"Only numbers are allowed"}}})]})}),(0,jU.jsx)("div",{className:"gap-y-1",children:(0,jU.jsxs)("div",{className:"flex gap-x-2",children:[(0,jU.jsx)(uq,{name:"startPriceWeek",control:c,defaultValue:a.get("startPriceWeek")?a.get("startPriceWeek"):void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-coins",secondIcon:"fa-solid fa-times",onChange:t.onChange,onDelete:()=>m("startPriceWeek",""),label:"Weekly start price",placeholder:"30...",value:t.value,onBlur:t.onBlur,error:n.error})},rules:{pattern:{value:/^[0-9]+$/,message:"Only numbers are allowed"}}}),(0,jU.jsx)(uq,{name:"endPriceWeek",control:c,defaultValue:a.get("endPriceWeek")?a.get("endPriceWeek"):void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-coins",secondIcon:"fa-solid fa-times",onDelete:()=>m("endPriceWeek",""),onChange:t.onChange,label:"Weekly end price",placeholder:"300...",value:t.value,onBlur:t.onBlur,error:n.error})},rules:{pattern:{value:/^[0-9]+$/,message:"Only numbers are allowed"}}})]})}),(0,jU.jsx)("div",{className:"gap-y-1",children:(0,jU.jsxs)("div",{className:"flex gap-x-2",children:[(0,jU.jsx)(uq,{name:"startPriceMonth",control:c,defaultValue:a.get("startPriceMonth")?a.get("startPriceMonth"):void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-coins",secondIcon:"fa-solid fa-times",onChange:t.onChange,onDelete:()=>m("startPriceMonth",""),label:"Monthly start price",placeholder:"30...",value:t.value,onBlur:t.onBlur,error:n.error})},rules:{pattern:{value:/^[0-9]+$/,message:"Only numbers are allowed"}}}),(0,jU.jsx)(uq,{name:"endPriceMonth",control:c,defaultValue:a.get("endPriceMonth")?a.get("endPriceMonth"):void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-coins",secondIcon:"fa-solid fa-times",onDelete:()=>m("endPriceMonth",""),onChange:t.onChange,label:"Monthly end price",placeholder:"300...",value:t.value,onBlur:t.onBlur,error:n.error})},rules:{pattern:{value:/^[0-9]+$/,message:"Only numbers are allowed"}}})]})}),(0,jU.jsxs)("div",{className:" flex flex-col gap-y-1",children:[(0,jU.jsx)("span",{className:"text-sm text-lmGrey500 dark:text-dmGrey100",children:"Car Specifics"}),(0,jU.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,jU.jsx)(uq,{name:"transmission",control:c,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:a.get("transmission")?a.get("transmission"):void 0,icon:h6.icon,placeholder:h6.placeholder,itemList:h6.list,onChange:t.onChange,label:h6.label,error:n.error,reset:f})}}),(0,jU.jsx)(uq,{name:"fuelType",control:c,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:a.get("fuelType")?a.get("fuelType"):void 0,icon:f6.icon,placeholder:f6.placeholder,itemList:f6.list,onChange:t.onChange,label:f6.label,error:n.error,reset:f})}}),(0,jU.jsx)(uq,{name:"seats",control:c,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:a.get("seats")?a.get("seats"):void 0,icon:p6.icon,placeholder:p6.placeholder,itemList:p6.list,onChange:t.onChange,label:p6.label,error:n.error,reset:f})}}),(0,jU.jsx)(uq,{name:"trunkVolume",control:c,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:a.get("trunkVolume")?a.get("trunkVolume"):void 0,icon:m6.icon,placeholder:m6.placeholder,itemList:m6.list,onChange:t.onChange,label:m6.label,error:n.error,reset:f})}}),(0,jU.jsx)(uq,{name:"color",control:c,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:a.get("color")?a.get("color"):void 0,icon:g6.icon,placeholder:g6.placeholder,itemList:g6.list,onChange:t.onChange,label:g6.label,error:n.error,reset:f})}}),(0,jU.jsx)(uq,{name:"smoking",control:c,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:a.get("smoking")?a.get("smoking"):void 0,icon:v6.icon,placeholder:v6.placeholder,itemList:v6.list,onChange:t.onChange,label:v6.label,error:n.error,reset:f})}})]})]})]}),(0,jU.jsxs)("div",{className:"flex w-full gap-x-2",children:[(0,jU.jsx)(YH,{type:"button",uiType:"secondary",onClick:()=>{Object.keys(h()).map((e=>{m(e,"")})),p((e=>e+1))},title:"Clear Filter"}),(0,jU.jsx)(YH,{type:"submit",icon:"fa solid fa-chevron-right",uiType:"primary",onClick:u,title:"Update Filter"})]})]})},x6=e=>{let{isOpen:t,closeModal:n,definedActions:r}=e;return(0,jU.jsx)(gW,{isOpen:t,closeModal:n,children:(0,jU.jsx)(y6,{definedActions:r,filterModal:!0,isOpen:t,closeModal:n})})},b6=e=>{let{control:t,handleDelete:n}=e;const{getSingleParam:r}=AW();return(0,jU.jsx)(uq,{name:"search",control:t,defaultValue:r("search")?r("search"):void 0,render:e=>{let{field:t,fieldState:r}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-magnifying-glass",secondIcon:"fa-solid fa-times",onChange:t.onChange,placeholder:"Audi A8",value:t.value,onBlur:t.onBlur,onDelete:()=>n("search",""),error:r.error})}})},w6=e=>{let{choice:t,control:n,handleDelete:r,definedActions:i}=e;return"autocomplete"===t?(0,jU.jsx)(u6,{control:n,definedActions:i}):"search"===t?(0,jU.jsx)(b6,{control:n,handleDelete:r}):(0,jU.jsx)(jU.Fragment,{})},S6=t=>{let{name:n,label:r,showSubmitButton:i,choice:o,definedActions:a}=t;const{isOpen:s,control:l,closeModal:c,openModal:u,handleSubmit:d,handleDelete:h}=(()=>{const{control:t,setValue:n,watch:r}=nY(),{searchParams:i,setArrayOfParams:o,deleteSingleParam:a}=AW();let[s,l]=(0,e.useState)(!1);const c=r(),u=e=>{const t=J3(e);t&&o(t)};return(0,e.useEffect)((()=>{n("search",i.get("search"))}),[n,i]),{handleDelete:(e,t)=>{n(e,t),a(e)},isOpen:s,onSubmit:u,closeModal:()=>l(!1),openModal:()=>l(!0),control:t,handleSubmit:()=>{u(c)},watchAllFields:c}})(),f=Ue(),p=cX(),m="/explore/map"===f.pathname&&p.width<1100;return(0,jU.jsxs)("div",{children:[(0,jU.jsxs)("form",{className:"flex w-full max-w-[340px] flex-col gap-y-2",children:[(0,jU.jsx)("label",{htmlFor:n,className:"text-sm text-lmGrey500 dark:text-dmGrey100",children:r}),(0,jU.jsxs)("div",{className:"flex w-full items-end gap-x-2",children:[(0,jU.jsx)(w6,{definedActions:a,choice:o,control:l,handleDelete:h}),(0,jU.jsx)("button",{type:"button",onClick:u,className:"fa-solid fa-filter flex h-10 min-h-[40px] min-w-[40px] items-center justify-center rounded-lg ".concat(m?"bg-white dark:bg-dmGrey900":"bg-lmGrey50 dark:bg-dmGrey800"," text-base text-lmGrey200  dark:text-dmGrey300")}),(void 0===i||!0===i)&&(0,jU.jsx)(YH,{type:"button",uiType:"primary",icon:"fa-solid fa-chevron-right",onClick:d})]})]}),(0,jU.jsx)(x6,{isOpen:s,closeModal:c,definedActions:a})]})},_6=e=>{let{children:t}=e;const{renderFilter:n}=(()=>{const e=cX();return{renderFilter:()=>e.width>=1e3?(0,jU.jsx)(y6,{isOpen:!0,filterModal:!1}):(0,jU.jsx)("div",{className:"w-[312px]",children:(0,jU.jsx)(S6,{choice:"search"})})}})();return(0,jU.jsxs)("div",{className:"flex w-full max-w-[1440px] flex-col gap-6 p-6 600:p-12 1000:flex-row 1000:p-14",children:[(0,jU.jsx)("div",{className:"relative w-full 1000:flex 1000:h-full 1000:w-[340px] 1000:min-w-[340px] 1000:justify-center",children:(0,jU.jsx)("div",{className:"hideScrollbar flex w-full justify-center overflow-scroll 1000:fixed 1000:left-14 1000:top-14 1000:h-full 1000:w-[340px] 1000:max-w-[340px] 1000:pb-12 1400:left-auto",children:n()})}),(0,jU.jsx)("div",{className:"flex h-fit w-full flex-wrap justify-center gap-2 600:gap-4",children:t})]})},A6=t=>{let{offerList:n}=t;const[r,i]=(0,e.useState)(n);let[o]=at();const{filterBySearchParams:a}=(()=>{const{getAllParams:e}=AW();return{filterBySearchParams:t=>{let n=t;for(const[r,i]of Object.entries(e()))switch(r){case"search":n=s4(n,i);break;case"startDate":case"endDate":n=o4(n,i);break;case"startPriceDay":n=l4(n,i,"day");break;case"endPriceDay":n=a4(n,i,"day");break;case"startPriceWeek":n=l4(n,i,"week");break;case"endPriceWeek":n=a4(n,i,"week");break;case"startPriceMonth":n=l4(n,i,"month");break;case"endPriceMonth":n=a4(n,i,"month");break;case"transmission":case"fuelType":case"seats":case"trunkVolume":case"color":case"smoking":case"eating":n=r4(n,i,r)}return n}}})();return(0,e.useEffect)((()=>{n&&i(a(n))}),[o,n,i]),(0,jU.jsx)(_6,{children:(0,jU.jsx)(f4,{offerList:r})})},E6=()=>{const{exampleOffers:e}=WH();return(0,jU.jsx)(A6,{offerList:e})};function C6(){const t=(0,e.useRef)(!1);return sI((()=>(t.current=!0,()=>{t.current=!1})),[]),t}class M6 extends e.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function T6(t){let{children:n,isPresent:r}=t;const i=(0,e.useId)(),o=(0,e.useRef)(null),a=(0,e.useRef)({width:0,height:0,top:0,left:0});return(0,e.useInsertionEffect)((()=>{const{width:e,height:t,top:n,left:s}=a.current;if(r||!o.current||!e||!t)return;o.current.dataset.motionPopId=i;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(n,"px !important;\n            left: ").concat(s,"px !important;\n          }\n        ")),()=>{document.head.removeChild(l)}}),[r]),e.createElement(M6,{isPresent:r,childRef:o,sizeRef:a},e.cloneElement(n,{ref:o}))}const P6=t=>{let{children:n,initial:r,isPresent:i,onExitComplete:o,custom:a,presenceAffectsLayout:s,mode:l}=t;const c=bI(D6),u=(0,e.useId)(),d=(0,e.useMemo)((()=>({id:u,initial:r,isPresent:i,custom:a,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;o&&o()},register:e=>(c.set(e,!1),()=>c.delete(e))})),s?void 0:[i]);return(0,e.useMemo)((()=>{c.forEach(((e,t)=>c.set(t,!1)))}),[i]),e.useEffect((()=>{!i&&!c.size&&o&&o()}),[i]),"popLayout"===l&&(n=e.createElement(T6,{isPresent:i},n)),e.createElement(oI.Provider,{value:d},n)};function D6(){return new Map}const k6=e=>e.key||"";const O6=t=>{let{children:n,custom:r,initial:i=!0,onExitComplete:o,exitBeforeEnter:a,presenceAffectsLayout:s=!0,mode:l="sync"}=t;a&&(l="wait",cN(!1,"Replace exitBeforeEnter with mode='wait'"));let[c]=function(){const t=C6(),[n,r]=(0,e.useState)(0),i=(0,e.useCallback)((()=>{t.current&&r(n+1)}),[n]);return[(0,e.useCallback)((()=>Qj.postRender(i)),[i]),n]}();const u=(0,e.useContext)(_I).forceRender;u&&(c=u);const d=C6(),h=function(t){const n=[];return e.Children.forEach(t,(t=>{(0,e.isValidElement)(t)&&n.push(t)})),n}(n);let f=h;const p=new Set,m=(0,e.useRef)(f),g=(0,e.useRef)(new Map).current,v=(0,e.useRef)(!0);if(sI((()=>{v.current=!1,function(e,t){e.forEach((e=>{const n=k6(e);t.set(n,e)}))}(h,g),m.current=f})),oN((()=>{v.current=!0,g.clear(),p.clear()})),v.current)return e.createElement(e.Fragment,null,f.map((t=>e.createElement(P6,{key:k6(t),isPresent:!0,initial:!!i&&void 0,presenceAffectsLayout:s,mode:l},t))));f=[...f];const y=m.current.map(k6),x=h.map(k6),b=y.length;for(let e=0;e<b;e++){const t=y[e];-1===x.indexOf(t)&&p.add(t)}return"wait"===l&&p.size&&(f=[]),p.forEach((t=>{if(-1!==x.indexOf(t))return;const n=g.get(t);if(!n)return;const i=y.indexOf(t);f.splice(i,0,e.createElement(P6,{key:k6(n),isPresent:!1,onExitComplete:()=>{g.delete(t),p.delete(t);const e=m.current.findIndex((e=>e.key===t));if(m.current.splice(e,1),!p.size){if(m.current=h,!1===d.current)return;c(),o&&o()}},custom:r,presenceAffectsLayout:s,mode:l},n))})),f=f.map((t=>{const n=t.key;return p.has(n)?t:e.createElement(P6,{key:k6(t),isPresent:!0,presenceAffectsLayout:s,mode:l},t)})),e.createElement(e.Fragment,null,p.size?f:f.map((t=>(0,e.cloneElement)(t))))},R6=t=>{let{mapRef:n,setPosition:r}=t;const{dispatchMapCoord:i}=oW(),{setArrayOfParams:o}=AW(),a=e=>({north:e._ne.lat,east:e._ne.lng,south:e._sw.lat,west:e._sw.lng}),s=(0,e.useCallback)((e=>{const t=e.current.getCenter(),n=e.current.getZoom(),r=e.current.getBounds();return{positionPrep:{lat:t.lat,lng:t.lng,z:n},bounds:r}}),[]),l=(0,e.useCallback)(((e,t)=>{i({type:"SET_BOUNDS_AND_POSITION",payload:{bounds:a(e),position:{...t}}})}),[i]);return{handleMoveEnd:(0,e.useCallback)((()=>{console.log("done flying, preparing");const{positionPrep:e,bounds:t}=s(n);console.log("setting position to: ",e),r({...e}),console.log("setting param to: ",e),o(e),console.log("setting context to: ",t),l(t,e)}),[n,s,r,o,l]),handlePreparation:s,setContext:l}},I6={id:"darkModeLayer",type:"background",paint:{"background-color":"rgba(22, 26, 29, 0.2)"}},L6=t=>{let{offers:n}=t;const{activeMarker:r,hoverMarker:i,dispatchMapSub:o}=tW(),a=(0,e.useRef)(),{staticState:s}=(()=>{const[t]=(0,e.useState)({style:{width:"100%",height:"100%"},mapStyle:"mapbox://styles/m1ggle/clavbv34v006214nkabl8az22",mapboxAccessToken:"pk.eyJ1IjoibTFnZ2xlIiwiYSI6ImNsYXVtaHM0ejA1eTgzdm1wMmRkaDBnNDAifQ.ayNDhREPUzI4mBOyVjor6A",willReadFrequently:!0});return{staticState:t}})(),[l,c]=(0,e.useState)(null);(t=>{let{setPosition:n}=t;const{externalPositionChange:r,dispatchMapCoord:i}=oW();(0,e.useEffect)((()=>{o()?s():null===localStorage.getItem("exploreMapLastPosition")?c():l()}),[]);const o=(0,e.useCallback)((()=>!!(null!==r&&void 0!==r&&r.lng&&null!==r&&void 0!==r&&r.lat&&null!==r&&void 0!==r&&r.z)),[r]),a=(0,e.useCallback)((e=>{n({latitude:e.lat,longitude:e.lng,zoom:e.z})}),[n]),s=(0,e.useCallback)((()=>{a(r),i({type:"SET_EXTERNAL_POSITION_CHANGES",payload:null})}),[a,i,r]),l=(0,e.useCallback)((()=>{let e=localStorage.getItem("exploreMapLastPosition");e=JSON.parse(e),a(e)}),[a]),c=(0,e.useCallback)((()=>{a({lat:52.4199,lng:13.29384,z:14})}),[a])})({setPosition:c});const{handleInit:u}=(t=>{const{setArrayOfParams:n,getArrayOfParams:r}=AW(),{handlePreparation:i,setContext:o}=R6({mapRef:t}),{dispatchMapSub:a}=tW();return{handleInit:(0,e.useCallback)((()=>{a({type:"SET_MAP_LOAD",payload:!0});const{positionPrep:e,bounds:r}=i(t);n(e),o(r,e)}),[n,r,i,t])}})(a),{handleMoveEnd:d}=R6({mapRef:a,setPosition:c});(t=>{let{setPosition:n}=t;const{mapLoaded:r}=tW(),{externalPositionChange:i}=oW();(0,e.useEffect)((()=>{null!==i&&r&&(console.log("my time to shine"),n({...i}))}),[i,n,r])})({setPosition:c}),(t=>{let{mapRef:n}=t;const{flyTo:r,dispatchMapSub:i}=tW();(0,e.useEffect)((()=>{var e;r&&(console.log("i'm flying: ",r),n.current.flyTo({center:[r.lng,r.lat],essential:!0,zoom:null!==(e=r.z)&&void 0!==e?e:12}),i({type:"FLY",payload:!1}))}),[n,r,i])})({mapRef:a}),(()=>{const{dispatchMapSub:t}=tW(),{dispatchMapCoord:n}=oW(),{getArrayOfParams:r}=AW();(0,e.useEffect)((()=>()=>{i(),n({type:"SET_POSITION",payload:{lat:null,lng:null,z:null}}),t({type:"SET_MAP_LOAD",payload:!1})}),[n,t]);const i=()=>{const e=r(["lng","lat","z"]);e.lng&&e.lat&&e.z&&localStorage.setItem("exploreMapLastPosition",JSON.stringify(e))}})();const h=document.documentElement.classList.contains("dark"),f={hover:e=>{let{offer:t}=e;return{scale:r===t.offerId?1.25:1.1,transition:{duration:.1}}},tap:{scale:.99,transition:{duration:.1}},initial:{opacity:0,translateY:-24,scale:.5},animation:e=>{let{offer:t}=e;return{opacity:1,translateY:0,scale:r===t.offerId?1.25:i===t.offerId?1.1:1}},transition:{duration:.3}};return(0,jU.jsx)(jU.Fragment,{children:null!==l&&(0,jU.jsxs)(aQ,{...l,...s,ref:a,onMoveEnd:d,onLoad:u,children:[n.map(((e,t)=>(0,jU.jsx)(uQ,{longitude:e.location.lng,latitude:e.location.lat,style:{width:"44px",height:"44px",zIndex:r===e.offerId?"15":i===e.offerId?"10":"5"},anchor:"bottom",onClick:()=>(e=>o({type:"UPDATE_ACTIVE_MARKER",payload:e}))(e.offerId),children:(0,jU.jsx)(LU.div,{initial:"initial",animate:"animation",transition:"transition",whileHover:"hover",whileTap:"tap",variants:f,custom:{offer:e,index:t},className:"fa-solid fa-location-dot ".concat(r===e.offerId?"text-lmPrimary dark:text-lmPrimary":i===e.offerId?"text-lmGrey400 dark:text-dmGrey400":"text-lmGrey800 dark:text-dmGrey900"," text-[44px] drop-shadow-lg duration-300")})},e.offerId))),h&&(0,jU.jsx)(yQ,{...I6})]})})},N6=e=>{let{offerList:t}=e;return(0,jU.jsx)(jU.Fragment,{children:t.map(((e,t)=>(0,jU.jsx)(hW,{offerInformation:e,index:t},e.offerId)))})},j6=t=>{let{offerList:n,definedActions:r}=t;const[i,o]=(0,e.useState)(!1),a=()=>{o((e=>!e))};return(0,jU.jsxs)("div",{onClick:()=>{!i&&a()},className:"relative flex ".concat(i?"h-[640px] py-6":"h-[88px] cursor-pointer pb-6 pt-2"," w-[360px] max-w-[360px] flex-col items-center gap-y-3 overflow-hidden rounded-2xl bg-white shadow-xl duration-300 dark:bg-dmGrey900"),children:[(0,jU.jsx)("div",{className:"w-[312px]",children:(0,jU.jsx)(S6,{definedActions:r,choice:"autocomplete",showSubmitButton:!1})}),i&&(0,jU.jsx)("div",{className:"hideScrollbar flex w-full flex-grow flex-col items-center overflow-scroll rounded-lg pb-4",children:(0,jU.jsx)("div",{className:"flex w-[312px] flex-col gap-y-3 rounded-lg",children:(0,jU.jsx)(N6,{offerList:n})})}),(0,jU.jsx)("div",{onClick:a,className:"".concat(i?"flex h-12 min-h-[48px] hover:h-[56px]":"hidden"," group absolute bottom-0 z-[15] w-full cursor-pointer items-center justify-center bg-gradient-to-b from-white backdrop-blur-md duration-300 dark:from-dmGrey900"),children:(0,jU.jsx)("i",{className:"".concat(i?"fa-solid fa-chevron-up mt-1":"fa-solid fa-chevron-down"," text-[20px] text-lmGrey600 duration-300 group-hover:text-lmGrey800 dark:text-dmGrey100 dark:group-hover:text-lmGrey25")})})]})};function B6(){let e=!1;const t=[],n=new Set,r={subscribe:e=>(n.add(e),()=>{n.delete(e)}),start(r,i){if(e){const e=[];return n.forEach((t=>{e.push($B(t,r,{transitionOverride:i}))})),Promise.all(e)}return new Promise((e=>{t.push({animation:[r,i],resolve:e})}))},set:e=>n.forEach((t=>{!function(e,t){Array.isArray(t)?KB(e,t):"string"===typeof t?KB(e,[t]):QB(e,t)}(t,e)})),stop(){n.forEach((e=>{!function(e){e.forEachValue((e=>e.stop()))}(e)}))},mount:()=>(e=!0,t.forEach((e=>{let{animation:t,resolve:n}=e;r.start(...t).then(n)})),()=>{e=!1,r.stop()})};return r}const F6=function(){const t=bI(B6);return(0,e.useEffect)(t.mount,[]),t},z6=e=>{let{offerInformation:t,onDelete:n}=e;const r=F6(),{handleDragEnd:i}=(e=>{let{controls:t,onDelete:n}=e;return{handleDragEnd:async(e,r)=>{const i=r.offset.x,o=r.velocity.x;i<-100||o<-500?(await t.start({x:"-100%",transition:{duration:.2}}),n()):t.start({x:0,opacity:1,transition:{duration:.5}})}}})({controls:r,onDelete:n});return(0,jU.jsxs)("div",{className:"absolute top-4 z-50 flex h-12 w-full flex-col items-center gap-y-2",children:[(0,jU.jsx)("div",{className:"w-[340px] max-w-[340px]",children:(0,jU.jsx)(S6,{definedActions:"mapCatalog",choice:"autocomplete",showSubmitButton:!1})}),t&&(0,jU.jsx)(LU.div,{whileTap:{cursor:"grabbing"},layout:!0,transition:{type:"spring",stiffness:600,damping:30},className:"h-[120px] min-h-[120px] w-[340px] max-w-[340px] overflow-hidden rounded-lg",children:(0,jU.jsx)(LU.div,{drag:"x",dragDirectionLock:!0,onDragEnd:i,animate:r,className:"h-fit w-[340px] max-w-[340px]",children:(0,jU.jsx)(hW,{offerInformation:t,index:0})})})]})},U6=()=>{const{getOffer:t}=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{exampleOffers:n}=WH(),r=(0,e.useCallback)((()=>localStorage.getItem(t)),[t]),i=(0,e.useCallback)((e=>n.filter((t=>t.offerId===e))[0]),[]),o=()=>{};return{getOffer:(0,e.useCallback)((e=>{let t=r();return t||(t=i(e),t||(t=o(),t||void 0))}),[r,i])}}("map"),n=Ge(),{mapLoaded:r,activeMarker:i}=tW(),[o,a]=(0,e.useState)(!(!i||!r)),[s,l]=(0,e.useState)();return(0,e.useEffect)((()=>{if(!(!i||!r)){a(!0);const e=t(i);e?l(e):n("not-found")}else o&&a(!1)}),[n,t,o,i]),{show:o,offerInformation:s,setOfferInformation:l}},G6=e=>{let{title:t,value:n,icon:r}=e;return(0,jU.jsxs)("div",{className:"flex h-[100px] w-[96px] flex-col items-center justify-center gap-y-2 rounded-lg py-3 shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:[(0,jU.jsx)("div",{className:"".concat(r," flex h-6 w-6 items-center justify-center text-[24px] text-lmGrey300 dark:text-dmGrey300")}),(0,jU.jsxs)("div",{className:"flex flex-col items-center justify-center gap-y-1 text-xs",children:[(0,jU.jsx)("span",{className:"text-lmGrey300 dark:text-dmGrey300",children:t}),(0,jU.jsx)("span",{className:"text-lmGrey600 dark:text-dmGrey100",children:"Smoking"===t||"Eating"===t?n?"Yes":"No":n})]})]})},{carSpecData:V6,previewSpecs:H6}=WH(),W6=t=>{let{amount:n,specs:r}=t;const{filteredSpecs:i}=(t=>{let{specs:n,amount:r}=t;const[i,o]=(0,e.useState)([]),a=(0,e.useCallback)((()=>{Object.keys(V6).map((e=>{V6[e].value=n[e]})),o(V6)}),[n]),s=(0,e.useCallback)((()=>{let e={};Object.keys(V6).map((t=>{H6.includes(t)&&(e[t]=V6[t],e[t].value=n[t])})),o(e)}),[n]);return(0,e.useEffect)((()=>{"preview"===r?s():a()}),[r,a,s]),{filteredSpecs:i}})({specs:r,amount:n});return(0,jU.jsx)("div",{className:"flex w-full justify-center flex-wrap gap-2",children:Object.keys(i).map(((e,t)=>(0,jU.jsx)(G6,{title:i[e].title,value:i[e].value,icon:i[e].icon},t)))})},q6=e=>{let{offerId:t}=e;const n=Ge();return(0,jU.jsxs)("div",{className:"flex w-full gap-x-2",children:[(0,jU.jsx)(YH,{onClick:()=>n("/offer-details/".concat(t)),uiType:"secondary",type:"button",title:"View full Offer"}),(0,jU.jsx)(YH,{onClick:()=>{n("/chat")},uiType:"primary",type:"button",title:"Contact Owner"})]})},Y6=e=>{let{liked:t}=e;const{dispatchMapSub:n}=tW();return(0,jU.jsxs)("div",{className:"absolute -top-[2px] right-0 flex h-fit w-fit cursor-pointer flex-col items-center justify-center text-[24px]",children:[(0,jU.jsx)("i",{onClick:()=>{n({type:"UPDATE_ACTIVE_MARKER",payload:!1})},className:"fa-solid fa-times flex h-8 w-8 items-center justify-center text-[28px] text-lmGrey600 drop-shadow duration-300 hover:scale-102 hover:text-lmGrey800 active:scale-99 dark:text-dmGrey100 dark:hover:text-dmGrey25"}),(0,jU.jsx)("i",{className:"fa-solid fa-heart flex h-8 w-8 items-center justify-center drop-shadow duration-300 hover:scale-102 hover:text-red-400 active:scale-99 ".concat(t?"text-red-500":"text-lmGrey200 dark:text-dmGrey300 dark:hover:text-red-400")})]})},X6=()=>(0,jU.jsx)("div",{className:"flex items-center py-2 px-1",children:(0,jU.jsx)(yW,{review:!0,rating:"4",text:"Click to view the owners account",displayName:"Meggle Bande",profilePic:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2264&q=80"})}),Q6=()=>{const{show:e,offerInformation:t}=U6();return(0,jU.jsx)(LU.div,{animate:e?"visible":"hidden",initial:"hidden",transition:{duration:.3},variants:{visible:{opacity:1,scale:1},hidden:{opacity:0,scale:1}},className:"flex h-[640px] w-[360px] max-w-[360px] flex-col gap-y-2 overflow-scroll rounded-2xl bg-white p-6 pt-10 shadow-xl duration-300 dark:bg-dmGrey900",children:(0,jU.jsx)("div",{className:"hideScrollbar relative flex h-fit w-full flex-col gap-y-4 overflow-scroll",children:t&&(0,jU.jsxs)(jU.Fragment,{children:[(0,jU.jsx)(Y6,{}),(0,jU.jsx)(U3,{offerInformation:t}),(0,jU.jsx)(G3,{offerImages:t.photoUrl}),(0,jU.jsx)("div",{className:"min-h-fit w-full rounded-2xl px-1",children:(0,jU.jsx)(z3,{dates:t.calendar,shadowUI:!0,header:!0})}),(0,jU.jsx)(W6,{specs:t.carSpecs,amount:"preview"}),(0,jU.jsx)(X6,{ownerId:t.ownerId}),(0,jU.jsx)(q6,{offerId:t.offerId})]})})})},K6=(0,e.memo)(Q6),{exampleOffers:Z6,filterTypes:J6}=WH(),$6=()=>{var t;const[n]=(0,e.useState)(Z6),[r,i]=(0,e.useState)(),[o,a]=(0,e.useState)([]),[s,l]=(0,e.useState)({}),[c,u]=(0,e.useState)(!1),{offerInformation:d,setOfferInformation:h}=U6(),f=cX(),{bounds:p}=oW(),{mapLoaded:m}=tW(),{searchParams:g,deleteArrayOfParams:v}=AW(),{filterByCustomObject:y}={filterByCustomObject:e=>{let{offerList:t,object:n}=e,r=t;for(const[i,o]of Object.entries(n))switch(i){case"search":r=s4(r,o);break;case"startDate":case"endDate":r=o4(r,o);break;case"startPriceDay":r=l4(r,o,"day");break;case"endPriceDay":r=a4(r,o,"day");break;case"startPriceWeek":r=l4(r,o,"week");break;case"endPriceWeek":r=a4(r,o,"week");break;case"startPriceMonth":r=l4(r,o,"month");break;case"endPriceMonth":r=a4(r,o,"month");break;case"transmission":case"fuelType":case"seats":case"trunkVolume":case"color":case"smoking":case"eating":r=r4(r,o,i)}return r}};(0,e.useEffect)((()=>{let e={};for(const[t,n]of g.entries())J6.includes(t)&&(e[t]=n);if(JSON.stringify(e)!==JSON.stringify(s)){let t=y({offerList:Z6,object:e});return i(t),void l(e)}}),[g]);const x=(0,e.useCallback)((e=>{let t=[];return Object.keys(p).length>0?(t=e.filter((e=>e.location.lat>p.south&&e.location.lat<p.north&&e.location.lng>p.west&&e.location.lng<p.east)),t):e}),[p]);(0,e.useEffect)((()=>{const e=setTimeout((()=>{Object.keys(p).length>0&&(u(!0),(async()=>{await new Promise((()=>{setTimeout((()=>{console.log("bounds changed, fetching"),a(x(null!==r&&void 0!==r?r:n)),u(!1)}),1e3)}))})())}),1e3);return()=>{clearTimeout(e)}}),[p]);return(0,jU.jsxs)("div",{style:{height:"".concat(f.height,"px")},className:"flex w-full justify-center",children:[(0,jU.jsx)(O6,{children:c&&(0,jU.jsx)(LU.div,{initial:"initial",animate:"animate",exit:"exit",transition:"transition",variants:{initial:{opacity:0,translateY:-24},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:16},transition:{duration:.3,scale:{ease:"easeInOut"}}},className:"absolute ".concat(d?"top-52":"top-20"," z-20 flex h-11 animate-pulse items-center justify-center rounded-full bg-white px-6 text-sm font-semibold text-lmGrey600 shadow-md dark:bg-dmGrey900 dark:text-white 1100:top-7"),children:"Loading..."})}),(0,jU.jsx)(L6,{offers:o}),f.width>=1100?(0,jU.jsxs)(jU.Fragment,{children:[(0,jU.jsx)(LU.div,{animate:m&&"visible",initial:"hidden",transition:{duration:.3},variants:{visible:{opacity:1,scale:1},hidden:{opacity:0,scale:1}},className:"absolute right-7 top-7 z-20 flex h-fit w-fit",children:(0,jU.jsx)(j6,{definedActions:"mapCatalog",offerList:null!==(t=null!==o&&void 0!==o?o:r)&&void 0!==t?t:n})}),(0,jU.jsx)("div",{className:"absolute left-7 top-7 z-20 flex h-fit w-fit",children:(0,jU.jsx)(K6,{})})]}):(0,jU.jsx)(z6,{offerInformation:d,onDelete:()=>{v(["offerId","hoverId"]),h(null)}})]})},e8=()=>{const{exampleOffers:e}=WH(),t=e.filter((e=>e.liked));return(0,jU.jsx)(A6,{offerList:t})};const t8=[0,1,2,3,4],n8=150;function r8(e){let{total:t,index:n,onDelete:r}=e;const i=F6();return(0,jU.jsx)(LU.div,{style:{width:150,height:70,borderRadius:20,overflow:"hidden",marginBottom:t-1===n?0:10,willChange:"transform",cursor:"grab"},whileTap:{cursor:"grabbing"},layout:!0,transition:{type:"spring",stiffness:600,damping:30},children:(0,jU.jsx)(LU.div,{style:{width:n8,height:70,borderRadius:20,backgroundColor:"#fff"},drag:"x",dragDirectionLock:!0,onDragEnd:async function(e,t){const o=t.offset.x,a=t.velocity.x;o<-100||a<-500?(await i.start({x:"-100%",transition:{duration:.2}}),r(n)):i.start({x:0,opacity:1,transition:{duration:.5}})},animate:i})})}const i8=()=>{const t=function(t){const n=bI((()=>UB(t))),{isStatic:r}=(0,e.useContext)(rI);if(r){const[,r]=(0,e.useState)(t);(0,e.useEffect)((()=>n.onChange(r)),[])}return n}(0),[n,r]=(0,e.useState)(t8),{top:i,bottom:o}=function(t){const[n,r]=(0,e.useState)({top:0,bottom:0});return(0,e.useEffect)((()=>{r({top:n8-o8(t),bottom:0})}),[t]),n}(n),a=F6(),s=o8(n);function l(e){const i=[...n];i.splice(e,1);const o=o8(i);o<150-t.get()&&o>=150&&a.start({y:150-o}),r(i)}return(0,jU.jsx)("div",{style:{width:n8,height:n8,borderRadius:30,backgroundColor:"transparent",overflow:"hidden",position:"relative",transform:"translateZ(0)"},children:(0,jU.jsx)(LU.div,{style:{y:t,height:s},drag:"y",dragDirectionLock:!0,dragConstraints:{top:i,bottom:o},animate:a,children:n.map(((e,t)=>(0,jU.jsx)(r8,{total:n.length,index:t,onDelete:l},e)))})})};function o8(e){return 70*e.length+10*(e.length-1)}const a8=()=>{let{darkMode:e}=EV();const t=Ge(),{tabletExploreCatalog:n,tabletExploreCatalogDM:r,desktopExploreMap:i,desktopExploreMapDM:o}={mobileChatSidebar:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FmobileChatSidebar.webp?alt=media&token=9fdf9554-7c37-4ace-8c91-57a64e86f528",mobileChatSidebarDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FmobileChatSidebarDM.webp?alt=media&token=9fdf9554-7c37-4ace-8c91-57a64e86f528",tabletExploreCatalog:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletExploreCatalog.webp?alt=media&token=525dd884-5c87-4c64-8ffc-41b088d56ca9",tabletExploreCatalogDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletExploreCatalogDM.webp?alt=media&token=fb1f99b9-88fe-4923-8e27-12f36dcfd32f",tabletChat:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletChat.webp?alt=media&token=525dd884-5c87-4c64-8ffc-41b088d56ca9",tabletChatDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletExploreCatalogDM.webp?alt=media&token=fb1f99b9-88fe-4923-8e27-12f36dcfd32f",desktopExploreMap:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopExploreMap.webp?alt=media&token=73e14a8b-c171-4c6d-bb76-9ea261bcf5f2",desktopExploreMapDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopExploreMapDM.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",desktopChat:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopChat.webp?alt=media&token=73e14a8b-c171-4c6d-bb76-9ea261bcf5f2",desktopChatDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopChatDM.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",croppedBMW:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FcroppedPic.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",chameleon:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2Fchameleon.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileNeleLangrock:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileNeleLangrock.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileGustavoBravo:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileGustavoBravo.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileAlinaMertens:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileAlinaMertens.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileMariaBierhoff:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileMariaBierhoff.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66"};return(0,jU.jsxs)(jU.Fragment,{children:[(0,jU.jsx)("img",{"aria-hidden":!0,className:"h-fit w-[55%] cursor-pointer opacity-0 drop-shadow-lg duration-300 hover:scale-101 active:scale-99 900:-left-[8%]",src:n,alt:"tablet"}),(0,jU.jsx)("img",{onClick:()=>t("/explore/catalog"),className:"absolute -left-[6%] bottom-8 h-fit w-[50%] cursor-pointer drop-shadow-lg duration-300 hover:scale-101 active:scale-99 900:-left-[8%] 1200:bottom-[100px]",src:e?r:n,alt:"tablet"}),(0,jU.jsx)("img",{onClick:()=>t("/explore/map"),className:"absolute bottom-8 left-[45%] z-10 h-fit w-[84%] cursor-pointer drop-shadow-lg duration-300 hover:scale-101 active:scale-99 1200:bottom-[100px]",src:e?o:i,alt:"desktop"})]})},s8=()=>{const e=Ge();return(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-3 700:w-[615px] 1200:gap-y-6",children:[(0,jU.jsx)("span",{className:"text-4xl font-semibold -tracking-[1.2%] text-lmGrey800 drop-shadow dark:text-dmGrey25 700:text-[40px] 700:leading-[40px] 1200:text-5xl",children:"Explore"}),(0,jU.jsx)("span",{className:"w-full text-lg text-lmGrey800 drop-shadow-sm dark:text-dmGrey25 700:text-xl 1200:text-2xl",children:"Explore low-cost rental cars in a catalog or on an interactive map. Find the best deal for you anywhere in the world."}),(0,jU.jsxs)("div",{className:"flex w-full gap-x-3",children:[(0,jU.jsx)("div",{className:"h-fit",children:(0,jU.jsx)(YH,{title:"Open the Catalog",uiType:"secondary",type:"button",onClick:()=>e("/explore/catalog")})}),(0,jU.jsx)("div",{className:"h-fit",children:(0,jU.jsx)(YH,{title:"Open the Map",uiType:"primary",type:"button",icon:"fa-solid fa-chevron-right",onClick:()=>e("/explore/map")})})]})]})},l8=()=>(0,jU.jsxs)("div",{id:"explore",className:"relative flex w-full flex-col gap-y-[64px] bg-white px-6 py-10 dark:bg-dmGrey900 700:gap-y-14 700:px-11 1200:gap-y-[80px] 1200:py-14 1200:px-14",children:[(0,jU.jsx)(s8,{}),(0,jU.jsx)(a8,{})]}),c8=()=>{let{darkMode:e}=EV();return(0,jU.jsx)("div",{className:"absolute -top-1 left-0 z-10 min-h-[488px] min-w-full rounded-lg ".concat(e?"bg-gradient-to-b from-dmGrey900  via-dmGrey900/80":"bg-gradient-to-b from-white")})},u8=()=>{const t=(0,e.useRef)();let{darkMode:n}=EV();const r=cX(),[i,o]=(0,e.useState)({longitude:13.391487,latitude:52.522124,zoom:14});(0,e.useEffect)((()=>{r.width<700?o({longitude:13.396487,latitude:52.540124,zoom:13}):o({longitude:13.391487,latitude:52.522124,zoom:14})}),[r.width]);const[a]=(0,e.useState)({style:{width:"100%",height:"100%"},mapStyle:"mapbox://styles/m1ggle/clavbv34v006214nkabl8az22",mapboxAccessToken:"pk.eyJ1IjoibTFnZ2xlIiwiYSI6ImNsYXVtaHM0ejA1eTgzdm1wMmRkaDBnNDAifQ.ayNDhREPUzI4mBOyVjor6A",maxZoom:18});return(0,jU.jsx)("div",{className:"absolute top-0 left-0 z-0 h-full w-full",children:(0,jU.jsxs)(aQ,{...i,...a,ref:t,onMove:e=>o(e.position),children:[(0,jU.jsx)(uQ,{onClick:()=>{t.current.flyTo({center:[13.391487,52.522124],essential:!0,zoom:14})},latitude:52.514124,longitude:13.401487,anchor:"bottom",children:(0,jU.jsx)("div",{className:"fa-solid fa-location-dot text-[44px] text-lmPrimary drop-shadow-lg duration-300"})}),(0,jU.jsxs)(hQ,{longitude:13.401487,latitude:52.514124,anchor:"bottom",offset:48,closeButton:!1,style:{width:"312px",backgroundColor:"white",boxShadow:"0px 1px 2px rgba(0, 0, 0, 0.1), 0px 1px 1px rgba(0, 0, 0, 0.06)",borderRadius:"12px",padding:"24px",gap:"4px",display:"flex",flexDirection:"column"},children:[(0,jU.jsx)("span",{children:"Friedrichsgracht 58-110"}),(0,jU.jsx)("br",{}),(0,jU.jsx)("span",{children:"10178 Berlin, Germany"})]}),n&&(0,jU.jsx)(yQ,{...I6})]})})},d8=e=>{let{onChange:t,onBlur:n,name:r,value:i,placeholder:o,label:a,error:s}=e;return(0,jU.jsxs)("div",{className:"flex w-full max-w-[340px] flex-col gap-y-2","aria-invalid":s?"true":"false",children:[(0,jU.jsx)("label",{htmlFor:r,className:"text-sm text-lmGrey500 dark:text-dmGrey25",children:a}),(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-1",children:[(0,jU.jsx)("div",{className:"flex gap-x-2 rounded-lg ".concat(s?"bg-red-100 dark:bg-red-900":"bg-lmGrey50 dark:bg-dmGrey800","  py-[10px] px-3 shadow-sm"),children:(0,jU.jsx)("textarea",{rows:"4",name:r,value:i||"",onChange:t,onBlur:n,placeholder:o,className:"w-full overflow-auto bg-transparent text-sm ".concat(s?"text-red-500 placeholder:text-red-300 dark:text-red-100":"text-lmGrey600 placeholder:text-dmGrey300 dark:text-dmGrey25 placeholder:dark:text-dmGrey300","  focus:outline-none")})}),s&&(0,jU.jsxs)("div",{className:"flex items-center gap-x-2 px-3 ",children:[(0,jU.jsx)("i",{className:"fa-solid fa-triangle-exclamation flex h-[12px] w-[12px] items-center justify-center text-xs text-red-300 dark:text-red-100"}),(0,jU.jsx)("span",{className:"text-xs text-red-500 dark:text-red-100",children:s.message})]})]})]})},h8=t=>{let{isOpen:n,closeModal:r,email:i}=t;const{control:o,setValue:a,watch:s}=nY(),[l,c]=(0,e.useState)(!1),u=s();(0,e.useEffect)((()=>{(()=>{if(Object.keys(u).length<2)return!1;let e=!1;return Object.values(u).map((t=>{void 0===t&&(e=!0)})),!e&&(u.firstName.length<3?(console.log("firstName -_-"),!1):u.lastName.length<3?(console.log("lastName -_-"),!1):!(u.content.length<10)||(console.log("content -_-"),!1))})()?l||c(!0):l&&c(!1)}),[u]);const d=(e,t)=>{a(e,t)},h=e=>{r()};return(0,jU.jsx)(gW,{isOpen:n,closeModal:r,children:(0,jU.jsx)("form",{className:"relative flex h-fit w-[340px] max-w-[340px] flex-col gap-y-3 rounded-lg pb-[90px]",children:(0,jU.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,jU.jsx)("span",{className:"text-2xl text-lmGrey700 dark:text-dmGrey25",children:"Contact Me :'D"}),(0,jU.jsx)(uq,{name:"firstName",control:o,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-signature",secondIcon:"fa-solid fa-times",onChange:t.onChange,placeholder:"your first name",value:t.value,onBlur:t.onBlur,onDelete:()=>d("firstName",""),error:n.error})}}),(0,jU.jsx)(uq,{name:"lastName",control:o,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-signature",secondIcon:"fa-solid fa-times",onChange:t.onChange,placeholder:"your last name",value:t.value,onBlur:t.onBlur,onDelete:()=>d("lastName",""),error:n.error})}}),(0,jU.jsx)(uq,{name:"content",control:o,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(d8,{onChange:t.onChange,placeholder:"What do you wanna say?",value:t.value,name:t.name,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)("div",{className:"w-fit",children:(0,jU.jsx)(YH,{onClick:e=>{l&&h(e)},type:"button",uiType:l?"primary":"secondary",title:"Send",icon:"fa-solid fa-chevron-right"})})]})})})},f8=/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/,p8=()=>{const{email:t,handleChange:n,showButton:r,isOpen:i,openModal:o,closeModal:a}=(()=>{const[t,n]=(0,e.useState)(!1),[r,i]=(0,e.useState)("");let[o,a]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{!r.match(f8)||t?n(!1):n(!0)}),[r]),{email:r,handleChange:e=>i(e.target.value),showButton:t,isOpen:o,openModal:()=>a(!0),closeModal:()=>a(!1)}})();return(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-6 1200:p-6",children:[(0,jU.jsxs)("h2",{className:"text-4xl font-semibold -tracking-[1.2%] text-lmGrey800 drop-shadow dark:text-dmGrey25 700:text-[40px] 700:leading-[40px] 1200:text-5xl",children:["Contact the ",(0,jU.jsx)("br",{})," Developer directly"]}),(0,jU.jsxs)("div",{className:"flex w-full items-center gap-x-3 border-b-2  ".concat(t.length>0?"border-lmGrey800 dark:border-dmGrey25":"border-lmGrey300 dark:border-dmGrey300"," 1200:px-3 700:pt-3 1200:pt-6 pb-2 1200:pb-3 duration-300"),children:[(0,jU.jsx)("i",{className:"fa-solid fa-at text-[24px] 1200:text-[36px] ".concat(t.length>0?"text-lmGrey800 dark:text-dmGrey25":"text-lmGrey300 dark:text-dmGrey300"," duration-300")}),(0,jU.jsx)("input",{autoCorrect:"off",className:"w-full bg-transparent text-lmGrey800 placeholder:text-dmGrey300 focus:outline-none dark:text-dmGrey25 text-2xl 1200:text-4xl",placeholder:"Your Email",onChange:n,autoComplete:"off"})]}),(0,jU.jsx)(O6,{children:r&&(0,jU.jsx)(LU.button,{initial:"initial",animate:"animate",exit:{opacity:0},transition:"transition",variants:{initial:{opacity:0,width:0,height:0},animate:{opacity:1,width:"140px",height:"52px"},transition:{duration:.3}},onClick:o,className:"w-fit rounded-lg bg-lmPrimary py-3 px-4 shadow duration-300 hover:scale-101 hover:shadow-lg active:scale-99 active:shadow-sm dark:bg-dmPrimary dark:hover:bg-lmPrimary",children:(0,jU.jsxs)(LU.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"flex items-center justify-center gap-x-2 text-lg font-semibold text-white",children:["Next Step",(0,jU.jsx)("i",{className:"fa-solid fa-chevron-right text-[16px]"})]})})}),(0,jU.jsx)(h8,{isOpen:i,closeModal:a,email:t})]})},m8=e=>{let{content:t}=e;const n=Ge();return(0,jU.jsx)(jU.Fragment,{children:t.map(((e,t)=>(0,jU.jsx)("div",{className:"flex w-full flex-col gap-y-2",children:e.map(((e,t)=>(0,jU.jsx)("p",{onClick:()=>(e=>{e.linkTo&&n(e.linkTo)})(e),className:"title"===e.type?"font-bold text-lmGrey800 dark:text-dmGrey25":"text-lmGrey600 ".concat(e.linkTo?"cursor-pointer hover:text-lmGrey800 active:text-lmPrimary dark:hover:text-dmGrey25 dark:active:text-dmPrimary":"cursor-text","  w-fit duration-300 dark:text-dmGrey100"),children:e.content},t)))},t)))})},g8=()=>{const{contentFooterMainSecond:e}={contentFooterMainSecond:[[{content:"Contact",type:"title",linkTo:!1},{content:"E-Mail: megglebande@web.de",type:"text",linkTo:!1},{content:"Address: Berlin, Germany",type:"text",linkTo:!1}],[{content:"Authentication",type:"title",linkTo:!1},{content:"Sign In",type:"text",linkTo:"/sign-in"},{content:"Sign Up",type:"text",linkTo:"/sign-up"},{content:"Forgot Password",type:"text",linkTo:"/forgot-password"}]],contentFooterMainThird:[[{content:"Support/Legal",type:"title",linkTo:!1},{content:"Help",type:"text",linkTo:"/help"},{content:"Terms",type:"text",linkTo:"/terms-of-service"},{content:"Privacy",type:"text",linkTo:"/privacy-policy"},{content:"Career",type:"text",linkTo:!1},{content:"Security",type:"text",linkTo:!1}]]};return(0,jU.jsx)("div",{className:"flex min-w-[320px] flex-col gap-y-8 p-2 text-lg text-lmGrey800 dark:text-dmGrey25 700:flex-row 1200:flex-col",children:(0,jU.jsx)(m8,{content:e})})},v8=()=>{const{contentFooterMainThird:e}={contentFooterMainSecond:[[{content:"Contact",type:"title",linkTo:!1},{content:"E-Mail: megglebande@web.de",type:"text",linkTo:!1},{content:"Address: Berlin, Germany",type:"text",linkTo:!1}],[{content:"Authentication",type:"title",linkTo:!1},{content:"Sign In",type:"text",linkTo:"/sign-in"},{content:"Sign Up",type:"text",linkTo:"/sign-up"},{content:"Forgot Password",type:"text",linkTo:"/forgot-password"}]],contentFooterMainThird:[[{content:"Support/Legal",type:"title",linkTo:!1},{content:"Help",type:"text",linkTo:"/help"},{content:"Terms",type:"text",linkTo:"/terms-of-service"},{content:"Privacy",type:"text",linkTo:"/privacy-policy"},{content:"Career",type:"text",linkTo:!1},{content:"Security",type:"text",linkTo:!1}]]},{dispatchNavigation:t}=FU();return(0,jU.jsxs)("div",{className:"flex min-w-[320px] flex-col gap-y-8 p-2 text-lg text-lmGrey800 dark:text-dmGrey25 700:flex-row 1200:flex-col",children:[(0,jU.jsx)(m8,{content:e}),(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-8 ",children:[(0,jU.jsx)("span",{onClick:()=>{t({type:"OPEN_NAVIGATION"})},className:()=>{return"title"===(e={type:"text",linkTo:"own"}).type?"font-bold text-lmGrey800":"text-lmGrey600 ".concat(e.linkTo?"cursor-pointer hover:text-lmGrey800 active:text-lmPrimary dark:hover:text-dmGrey25 dark:active:text-dmPrimary":"cursor-text","  w-fit duration-300 dark:text-dmGrey100");var e},children:"Open the Navigation"}),(0,jU.jsxs)("div",{className:"flex gap-11 text-[24px] text-lmGrey600",children:[(0,jU.jsx)("a",{href:"https://github.com/Huhu436",target:"_blank",rel:"noopener noreferrer",children:(0,jU.jsx)("i",{className:"fa-brands fa-github cursor-pointer duration-300 hover:text-lmGrey800 active:text-lmPrimary dark:text-dmGrey25"})}),(0,jU.jsx)("a",{href:"https://www.instagram.com/m1ggle/?hl=de",target:"_blank",rel:"noopener noreferrer",children:(0,jU.jsx)("i",{className:"fa-brands fa-instagram cursor-pointer duration-300 hover:text-lmGrey800 active:text-lmPrimary dark:text-dmGrey25"})}),(0,jU.jsx)("a",{href:"https://www.linkedin.com/in/meggle-bande-a71600248/",target:"_blank",rel:"noopener noreferrer",children:(0,jU.jsx)("i",{className:"fa-brands fa-linkedin cursor-pointer duration-300 hover:text-lmGrey800 active:text-lmPrimary dark:text-dmGrey25"})})]})]})]})},y8=()=>(0,jU.jsx)("div",{className:"z-20 h-fit w-full px-0 1200:px-14",children:(0,jU.jsxs)("div",{className:"flex h-fit w-full flex-col gap-6 rounded-[30px] bg-white p-6 shadow-lg dark:bg-dmGrey900 700:p-10 1200:flex-row 1200:p-6",children:[(0,jU.jsx)(p8,{}),(0,jU.jsx)(g8,{}),(0,jU.jsx)(v8,{})]})}),x8=()=>(0,jU.jsxs)("div",{className:"relative flex h-[1400px] w-full gap-x-3 bg-white px-6 py-16 dark:bg-dmGrey900 700:px-11 700:py-[100px] 1200:h-[1000px] 1200:px-14",children:[(0,jU.jsx)(y8,{}),(0,jU.jsx)(c8,{}),(0,jU.jsx)(u8,{})]}),b8=e=>{var t;let{photoUrl:n,comment:r,association:i,commentWidth:o}=e;return o=null!==(t=o)&&void 0!==t?t:"fit-content",(0,jU.jsxs)("div",{className:"flex min-w-fit gap-3",children:[(0,jU.jsx)("div",{className:"h-[60px] w-[60px] rounded-full bg-lmGrey200 bg-cover bg-center shadow 700:h-[88px] 700:w-[88px]",style:{backgroundImage:"url(".concat(n,")")}}),(0,jU.jsx)("div",{style:{width:o},className:"flex items-center rounded-2xl bg-white p-4 shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:(0,jU.jsxs)("span",{className:"text-base text-lmGrey600 dark:text-dmGrey100",children:[r," ",(0,jU.jsxs)("span",{className:"text-lmGrey400 dark:text-dmGrey300",children:["~ ",i]})]})})]})},w8=e=>{var t;let{icon:n,linkTo:r}=e;return n=null!==(t=n)&&void 0!==t?t:"fa-brands fa-instagram",(0,jU.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:(0,jU.jsx)("div",{className:"flex w-14 h-14 700:h-[88px] 700:w-[88px] items-center justify-center rounded-full bg-lmGrey800 shadow dark:bg-dmGrey800 dark:shadow-dmShadow",children:(0,jU.jsx)("i",{className:"".concat(n," text-[20px] 700:text-[36px] text-lmGrey25")})})})},S8=()=>{const e=cX(),{croppedBMW:t,profileNeleLangrock:n,profileGustavoBravo:r,profileAlinaMertens:i,profileMariaBierhoff:o}={mobileChatSidebar:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FmobileChatSidebar.webp?alt=media&token=9fdf9554-7c37-4ace-8c91-57a64e86f528",mobileChatSidebarDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FmobileChatSidebarDM.webp?alt=media&token=9fdf9554-7c37-4ace-8c91-57a64e86f528",tabletExploreCatalog:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletExploreCatalog.webp?alt=media&token=525dd884-5c87-4c64-8ffc-41b088d56ca9",tabletExploreCatalogDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletExploreCatalogDM.webp?alt=media&token=fb1f99b9-88fe-4923-8e27-12f36dcfd32f",tabletChat:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletChat.webp?alt=media&token=525dd884-5c87-4c64-8ffc-41b088d56ca9",tabletChatDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletExploreCatalogDM.webp?alt=media&token=fb1f99b9-88fe-4923-8e27-12f36dcfd32f",desktopExploreMap:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopExploreMap.webp?alt=media&token=73e14a8b-c171-4c6d-bb76-9ea261bcf5f2",desktopExploreMapDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopExploreMapDM.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",desktopChat:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopChat.webp?alt=media&token=73e14a8b-c171-4c6d-bb76-9ea261bcf5f2",desktopChatDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopChatDM.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",croppedBMW:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FcroppedPic.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",chameleon:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2Fchameleon.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileNeleLangrock:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileNeleLangrock.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileGustavoBravo:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileGustavoBravo.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileAlinaMertens:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileAlinaMertens.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileMariaBierhoff:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileMariaBierhoff.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66"};return(0,jU.jsxs)("div",{id:"about",className:"relative flex h-[1000px] w-full gap-x-6 bg-white px-6 py-10 dark:bg-dmGrey900 700:px-11 1000:h-fit 1200:py-14 1200:px-14",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col items-start gap-y-6 1000:items-center",children:[(0,jU.jsx)("h2",{className:"text-4xl font-semibold -tracking-[1.2%] text-lmGrey800 drop-shadow  dark:text-dmGrey25 700:text-[40px] 700:leading-[40px] 1200:text-5xl",children:"Our Vision"}),(0,jU.jsxs)("div",{className:"flex w-full gap-x-3",children:[(0,jU.jsx)("img",{className:"h-[60px] w-[60px] rounded-full bg-blue-200 bg-cover bg-center 700:h-[88px] 700:w-[88px] 700:min-w-[88px]",src:r,alt:"profile"}),(0,jU.jsx)("div",{className:"w-full max-w-[480px] rounded-[24px] bg-white p-6 shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:(0,jU.jsxs)("span",{className:"text-base text-lmGrey600 dark:text-dmGrey100 700:text-xl",children:["Congue egestas tempus id habitasse et quam netus rhoncus. Vitae enim euismod morbi varius consequat interdum sit phasellus in. Ipsum semper tempus arcu odio eu eros nunc. Morbi id id at ullamcorper viverra."," ",(0,jU.jsx)("span",{className:"dark:dmPrimary block text-lmPrimary",children:"~ Gustavo Bravo, CEO"})]})})]})]}),(0,jU.jsx)("div",{className:"hidden w-full items-center justify-center py-6 1000:flex",children:(0,jU.jsx)("img",{src:t,alt:"cropped bmw"})}),(0,jU.jsx)("div",{className:"absolute bottom-[120px] left-8 z-10 w-fit 400:bottom-[140px] 400:left-14 700:bottom-[120px] 700:left-[160px]",children:(0,jU.jsx)(b8,{photoUrl:n,comment:"Augue fringilla viverra id tristique malesuada cras urna.",association:"Nele Langrock, Co-Founder",commentWidth:"360px"})}),(0,jU.jsx)("div",{className:"absolute right-[0%] top-[440px] z-10 w-fit opacity-50 500:top-[360px] 500:right-[24%] 700:top-[420px] 1200:right-[40%] 1200:top-[500px]",children:(0,jU.jsx)(b8,{photoUrl:o,comment:"Sapien ac risus amet lectus. A pulvinar mauris ultricies duis mus in. Nunc mollis praesent et.",association:"Maria Bierhoff",commentWidth:e.width>600?"400px":"320px"})}),(0,jU.jsx)("div",{className:"absolute top-[600px] right-0 z-10 w-fit opacity-90 400:bottom-auto 400:top-[580px] 1000:bottom-auto 1000:top-[280px] 1000:right-auto 1000:left-[640px]",children:(0,jU.jsx)(b8,{photoUrl:i,comment:"Urna, arcu augue placerat facilisis elit enim. ",association:"Alina Mertens",commentWidth:"240px"})}),(0,jU.jsx)("div",{className:"absolute bottom-[200px] right-[132px] z-10 hidden w-fit 1200:flex",children:(0,jU.jsx)(b8,{photoUrl:r,comment:"Pharetra tellus proin aenean diam metus, morbi. Dignissim malesuada blandittincidunt.",association:"Gustavo Bravo, CEO",commentWidth:"360px"})}),(0,jU.jsx)("div",{className:"absolute -top-10 left-[68%] w-fit opacity-70 400:top-[4%]",children:(0,jU.jsx)(w8,{icon:"fa-brands fa-github",linkTo:"https://github.com/Huhu436"})}),(0,jU.jsx)("div",{className:"absolute -bottom-10 right-[60px] z-20 w-fit opacity-40 500:bottom-auto 500:right-auto 500:top-[420px] 500:left-[12px] ",children:(0,jU.jsx)(w8,{icon:"fa-brands fa-instagram",linkTo:"https://www.instagram.com/m1ggle/?hl=de"})}),(0,jU.jsx)("div",{className:"absolute -bottom-10 right-[144px] z-20 hidden w-fit opacity-20 400:bottom-6 500:flex 1000:right-auto 1000:bottom-[52px] 1000:left-[528px]",children:(0,jU.jsx)(w8,{icon:"fa-brands fa-youtube",linkTo:"https://www.youtube.com/channel/UCT7kpZCPvEWuAQSHu4EJDsA"})})]})},_8=()=>{let{darkMode:e}=EV();const t=Ge(),{mobileChatSidebar:n,mobileChatSidebarDM:r,tabletChat:i,tabletChatDM:o,desktopChat:a,desktopChatDM:s}={mobileChatSidebar:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FmobileChatSidebar.webp?alt=media&token=9fdf9554-7c37-4ace-8c91-57a64e86f528",mobileChatSidebarDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FmobileChatSidebarDM.webp?alt=media&token=9fdf9554-7c37-4ace-8c91-57a64e86f528",tabletExploreCatalog:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletExploreCatalog.webp?alt=media&token=525dd884-5c87-4c64-8ffc-41b088d56ca9",tabletExploreCatalogDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletExploreCatalogDM.webp?alt=media&token=fb1f99b9-88fe-4923-8e27-12f36dcfd32f",tabletChat:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletChat.webp?alt=media&token=525dd884-5c87-4c64-8ffc-41b088d56ca9",tabletChatDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletExploreCatalogDM.webp?alt=media&token=fb1f99b9-88fe-4923-8e27-12f36dcfd32f",desktopExploreMap:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopExploreMap.webp?alt=media&token=73e14a8b-c171-4c6d-bb76-9ea261bcf5f2",desktopExploreMapDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopExploreMapDM.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",desktopChat:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopChat.webp?alt=media&token=73e14a8b-c171-4c6d-bb76-9ea261bcf5f2",desktopChatDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopChatDM.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",croppedBMW:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FcroppedPic.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",chameleon:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2Fchameleon.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileNeleLangrock:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileNeleLangrock.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileGustavoBravo:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileGustavoBravo.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileAlinaMertens:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileAlinaMertens.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileMariaBierhoff:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileMariaBierhoff.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66"};return(0,jU.jsxs)("div",{className:"hideScrollbar relative flex h-[280px] items-end gap-x-10 overflow-scroll 600:h-fit 600:overflow-visible",children:[(0,jU.jsx)("img",{"aria-hidden":!0,className:"z-10 -ml-[100px] mt-8 hidden h-fit w-[1000px] opacity-0 600:flex 700:mt-0",src:a,alt:"desktop"}),(0,jU.jsx)("img",{onClick:()=>t("/chat"),className:"left-0 bottom-0 z-20 ml-6 h-full w-[140px] cursor-pointer drop-shadow-lg duration-300 hover:scale-101 active:scale-99 600:absolute 600:ml-0 600:h-fit 600:w-[14%]",src:e?r:n,alt:"mobile"}),(0,jU.jsx)("img",{onClick:()=>t("/chat"),className:"left-[16%] bottom-0 z-10 h-full min-w-fit cursor-pointer drop-shadow-lg duration-300 hover:scale-101 active:scale-99 600:absolute 600:-ml-[100px] 600:h-fit 600:w-[69.44%] 600:min-w-0",src:e?s:a,alt:"desktop"}),(0,jU.jsx)("img",{onClick:()=>t("/chat"),className:"right-0 bottom-0 mr-6 h-full w-fit cursor-pointer drop-shadow-lg duration-300 hover:scale-101 active:scale-99 600:absolute 600:mr-0 600:h-fit 600:w-[41.66%]",src:e?o:i,alt:"tablet"})]})},A8=()=>{const e=Ge();return(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-3 1200:gap-y-6 px-6 700:w-[615px] 700:px-0",children:[(0,jU.jsx)("span",{className:"text-4xl font-semibold -tracking-[1.2%] text-lmGrey800 drop-shadow dark:text-dmGrey25 700:text-[40px] 700:leading-[40px] 1200:text-5xl",children:"Chat"}),(0,jU.jsx)("span",{className:"w-full text-lg text-lmGrey800 drop-shadow-sm dark:text-dmGrey25 700:text-xl 1200:text-2xl",children:"If you've discovered the appropriate Offer for you, don't be timid about contacting the Owner. Seal the deal and drive away after a friendly exchange."}),(0,jU.jsxs)("div",{className:"flex w-full gap-x-3",children:[(0,jU.jsx)("div",{className:"h-fit",children:(0,jU.jsx)(YH,{title:"Find Offer",uiType:"secondary",type:"button",onClick:()=>e("/explore/catalog")})}),(0,jU.jsx)("div",{className:"h-fit",children:(0,jU.jsx)(YH,{title:"View your Chats",uiType:"primary",type:"button",icon:"fa-solid fa-chevron-right",onClick:()=>e("/chat")})})]})]})},E8=e=>{let{darkMode:t}=e;return(0,jU.jsxs)("div",{id:"chat",className:"relative flex w-full flex-col gap-y-6 bg-white py-10 dark:bg-dmGrey900 700:px-11 1200:py-14 1200:px-14",children:[(0,jU.jsx)(A8,{}),(0,jU.jsx)(_8,{darkMode:t})]})},C8=e=>{let{liked:t,onLikeCallback:n,onLocationCallback:r}=e;return(0,jU.jsxs)(jU.Fragment,{children:[(0,jU.jsx)("i",{onClick:r,className:"fa-solid fa-location-dot absolute drop-shadow duration-300 hover:text-lmPrimary/60 focus:text-lmPrimary right-auto flex text-white/40 dark:text-white/40 left-6 top-6 text-[36px]"}),(0,jU.jsx)("i",{onClick:n,className:"fa-solid fa-heart ".concat(t?"text-red-500":"text-white/40 dark:text-white/40"," absolute drop-shadow-sm duration-300 hover:text-red-400 flex right-6 top-6 text-[36px]")})]})},M8=e=>{let{onNavigationCallback:t,photoUrl:n}=e;return(0,jU.jsx)("div",{onClick:t,className:"min-w-[110px] bg-cover bg-center absolute top-0 left-0 w-full rounded-xl h-80",style:{backgroundImage:"url(".concat(n[0],")")}})},T8=e=>{let{onNavigationCallback:t,offerInformation:n}=e;const{location:r,price:i,carSpecs:o,name:a}=n;return(0,jU.jsxs)("div",{onClick:t,className:"flex flex-col rounded-xl py-3 dark:bg-dmGrey900 dark:shadow-sm dark:shadow-dmShadow absolute z-10 w-11/12 bg-white p-3 shadow bottom-[6%] gap-y-1",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-1 overflow-hidden",children:[(0,jU.jsxs)("div",{className:"flex items-center gap-x-1 text-lmGrey600 dark:text-dmGrey100 w-full text-base",children:[(0,jU.jsx)("i",{className:"fa-solid fa-location-dot"}),(0,jU.jsx)("span",{className:"w-full truncate",children:r.formatted})]}),(0,jU.jsx)("span",{className:"truncate font-semibold text-lmGrey700 dark:text-dmGrey25 w-full text-xl",children:a})]}),(0,jU.jsxs)("div",{className:"flex w-full items-center gap-x-[2px] truncate",children:[(0,jU.jsxs)("span",{className:"text-lmPrimary dark:text-dmPrimary text-lg",children:[i.day,"\u20ac"," ",(0,jU.jsx)("span",{className:"text-sm text-lmGrey400 dark:text-dmGrey300",children:"/day"})]}),(0,jU.jsx)("div",{className:"flex items-center justify-center px-1",children:(0,jU.jsx)("div",{className:"h-1 w-1 rounded-full bg-lmGrey400"})}),(0,jU.jsxs)("span",{className:"flex items-center truncate text-lmPrimary dark:text-dmPrimary text-lg",children:[i.week,"\u20ac"," ",(0,jU.jsx)("span",{className:"truncate text-sm text-lmGrey400 dark:text-dmGrey300",children:"/week"})]}),(0,jU.jsx)("div",{className:"hidden items-center justify-center px-1",children:(0,jU.jsx)("div",{className:"h-1 w-1 rounded-full bg-lmGrey400"})}),(0,jU.jsxs)("span",{className:" items-center text-lg text-lmPrimary dark:text-dmPrimary flex",children:[i.month,"\u20ac"," ",(0,jU.jsx)("span",{className:"truncate text-sm text-lmGrey400 dark:text-dmGrey300",children:"/month"})]})]}),(0,jU.jsxs)("div",{className:"flex w-5/6 gap-x-4",children:[(0,jU.jsxs)("div",{className:"flex items-center gap-x-1 text-sm text-lmGrey300 dark:text-dmGrey100",children:[(0,jU.jsx)("i",{className:"fa-solid fa-gears"}),(0,jU.jsx)("span",{children:o.transmission})]}),(0,jU.jsxs)("div",{className:"flex items-center gap-x-1 text-sm text-lmGrey300 dark:text-dmGrey100",children:[(0,jU.jsx)("i",{className:"fa-solid fa-chair"}),(0,jU.jsxs)("span",{children:[o.seats," Seats"]})]})]})]})},P8=e=>{let{offerInformation:t}=e;const{offerId:n,liked:r,photoUrl:i,location:o}=t,a=Ge(),s=()=>a("/offer-details/".concat(n)),{handleLocationNavigation:l}=sW(),c=()=>l(n,o);return(0,jU.jsxs)("div",{className:"relative flex h-[406px] w-[292px] cursor-pointer justify-center gap-x-0 rounded-xl bg-white shadow-none duration-300 hover:scale-101 active:scale-99 dark:border-none dark:bg-dmGrey900 dark:shadow-sm",children:[(0,jU.jsx)(M8,{photoUrl:i,onNavigationCallback:s}),(0,jU.jsx)(C8,{liked:r,onLikeCallback:()=>{},onLocationCallback:c}),(0,jU.jsx)(T8,{offerInformation:t,onNavigationCallback:s,onLocationCallback:c})]})},D8=e=>{let{liked:t,onLikeCallback:n,onLocationCallback:r}=e;return(0,jU.jsxs)(jU.Fragment,{children:[(0,jU.jsx)("i",{onClick:r,className:"fa-solid fa-location-dot absolute right-auto left-6 top-6 flex text-[36px] text-white/40 drop-shadow duration-300 hover:text-lmPrimary/60 focus:text-lmPrimary dark:text-white/40"}),(0,jU.jsx)("i",{onClick:n,className:"fa-solid fa-heart ".concat(t?"text-red-500":"text-white/40 dark:text-white/40"," absolute right-6 top-6 flex text-[36px] drop-shadow-sm duration-300 hover:text-red-400")})]})},k8=e=>{let{onNavigationCallback:t,photoUrl:n}=e;return(0,jU.jsx)("div",{onClick:t,className:"absolute top-0 left-0 h-full w-full min-w-[110px] rounded-xl bg-cover bg-center",style:{backgroundImage:"url(".concat(n[0],")")}})},O8=e=>{let{onNavigationCallback:t,offerInformation:n}=e;const{location:r,price:i,carSpecs:o,name:a}=n;return(0,jU.jsxs)("div",{onClick:t,className:"absolute bottom-[3%] z-10 flex w-11/12 flex-col gap-y-1 rounded-xl bg-white p-3 py-3 shadow dark:bg-dmGrey900 dark:shadow-sm dark:shadow-dmShadow",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-1 overflow-hidden",children:[(0,jU.jsxs)("div",{className:"flex w-full items-center gap-x-1 text-base text-lmGrey600 dark:text-dmGrey100",children:[(0,jU.jsx)("i",{className:"fa-solid fa-location-dot"}),(0,jU.jsx)("span",{className:"w-full truncate",children:r.formatted})]}),(0,jU.jsx)("span",{className:"w-full truncate text-xl font-semibold text-lmGrey700 dark:text-dmGrey25",children:a})]}),(0,jU.jsxs)("div",{className:"flex w-full items-center gap-x-[2px] truncate",children:[(0,jU.jsxs)("span",{className:"text-lg text-lmPrimary dark:text-dmPrimary",children:[i.day,"\u20ac"," ",(0,jU.jsx)("span",{className:"text-sm text-lmGrey400 dark:text-dmGrey300",children:"/day"})]}),(0,jU.jsx)("div",{className:"flex items-center justify-center px-1",children:(0,jU.jsx)("div",{className:"h-1 w-1 rounded-full bg-lmGrey400"})}),(0,jU.jsxs)("span",{className:"flex items-center truncate text-lg text-lmPrimary dark:text-dmPrimary",children:[i.week,"\u20ac"," ",(0,jU.jsx)("span",{className:"truncate text-sm text-lmGrey400 dark:text-dmGrey300",children:"/week"})]}),(0,jU.jsx)("div",{className:"hidden items-center justify-center px-1",children:(0,jU.jsx)("div",{className:"h-1 w-1 rounded-full bg-lmGrey400"})}),(0,jU.jsxs)("span",{className:" flex items-center text-lg text-lmPrimary dark:text-dmPrimary",children:[i.month,"\u20ac"," ",(0,jU.jsx)("span",{className:"truncate text-sm text-lmGrey400 dark:text-dmGrey300",children:"/month"})]})]}),(0,jU.jsxs)("div",{className:"hidden w-5/6 gap-x-4",children:[(0,jU.jsxs)("div",{className:"flex items-center gap-x-1 text-sm text-lmGrey300 dark:text-dmGrey100",children:[(0,jU.jsx)("i",{className:"fa-solid fa-gears"}),(0,jU.jsx)("span",{children:o.transmission})]}),(0,jU.jsxs)("div",{className:"flex items-center gap-x-1 text-sm text-lmGrey300 dark:text-dmGrey100",children:[(0,jU.jsx)("i",{className:"fa-solid fa-chair"}),(0,jU.jsxs)("span",{children:[o.seats," Seats"]})]})]})]})},R8=e=>{let{offerInformation:t}=e;const{offerId:n,liked:r,photoUrl:i,location:o}=t,a=Ge(),s=()=>a("/offer-details/".concat(n)),{handleLocationNavigation:l}=sW(),c=()=>l(n,o);return(0,jU.jsxs)("div",{className:"relative flex h-[406px] w-[292px] cursor-pointer justify-center gap-x-0 rounded-xl bg-white duration-300 hover:scale-101 active:scale-99 shadow-md active:shadow-sm hover:shadow-lg dark:border-none dark:bg-dmGrey900 dark:shadow-sm",children:[(0,jU.jsx)(k8,{photoUrl:i,onNavigationCallback:s}),(0,jU.jsx)(D8,{liked:r,onLikeCallback:()=>{},onLocationCallback:c}),(0,jU.jsx)(O8,{offerInformation:t,onNavigationCallback:s,onLocationCallback:c})]})},I8=e=>{let{liked:t,onLikeCallback:n,onLocationCallback:r}=e;return(0,jU.jsxs)(jU.Fragment,{children:[(0,jU.jsx)("i",{onClick:r,className:"fa-solid fa-location-dot absolute text-2xl drop-shadow duration-300 hover:text-lmPrimary/60 focus:text-lmPrimary left-3 top-3 right-auto flex text-white/40 dark:text-white/40"}),(0,jU.jsx)("i",{onClick:n,className:"fa-solid fa-heart ".concat(t?"text-red-500":"text-white/40 dark:text-white/40"," absolute text-2xl drop-shadow-sm duration-300 hover:text-red-400 right-3 top-3 flex")})]})},L8=e=>{let{onNavigationCallback:t,photoUrl:n}=e;return(0,jU.jsx)("div",{onClick:t,className:"bg-cover bg-center absolute top-0 left-0 h-[200px] w-full rounded-xl",style:{backgroundImage:"url(".concat(n[0],")")}})},N8=e=>{let{onNavigationCallback:t,offerInformation:n}=e;const{location:r,price:i,carSpecs:o,name:a}=n;return(0,jU.jsxs)("div",{onClick:t,className:"flex flex-col rounded-xl py-3 dark:bg-dmGrey900 dark:shadow-sm dark:shadow-dmShadow absolute bottom-[2%] z-10 w-11/12 gap-y-0 bg-white p-3 shadow",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-1 overflow-hidden",children:[(0,jU.jsxs)("div",{className:"flex items-center gap-x-1 text-sm text-lmGrey600 dark:text-dmGrey100 w-full",children:[(0,jU.jsx)("i",{className:"fa-solid fa-location-dot"}),(0,jU.jsx)("span",{className:"w-full truncate",children:r.formatted})]}),(0,jU.jsx)("span",{className:"truncate text-base font-semibold text-lmGrey700 dark:text-dmGrey25 w-full",children:a})]}),(0,jU.jsxs)("div",{className:"flex w-full items-center gap-x-[2px] truncate",children:[(0,jU.jsxs)("span",{className:"text-base text-lmPrimary dark:text-dmPrimary",children:[i.day,"\u20ac"," ",(0,jU.jsx)("span",{className:"text-xs text-lmGrey400 dark:text-dmGrey300",children:"/day"})]}),(0,jU.jsx)("div",{className:"hidden items-center justify-center px-1",children:(0,jU.jsx)("div",{className:"h-1 w-1 rounded-full bg-lmGrey400"})}),(0,jU.jsxs)("span",{className:"flex items-center truncate text-base text-lmPrimary dark:text-dmPrimary",children:[i.week,"\u20ac"," ",(0,jU.jsx)("span",{className:"truncate text-xs text-lmGrey400 dark:text-dmGrey300",children:"/week"})]}),(0,jU.jsx)("div",{className:"hidden items-center justify-center px-1",children:(0,jU.jsx)("div",{className:"h-1 w-1 rounded-full bg-lmGrey400"})}),(0,jU.jsxs)("span",{className:"hidden items-center text-lg text-lmPrimary dark:text-dmPrimary",children:[i.month,"\u20ac"," ",(0,jU.jsx)("span",{className:"truncate text-xs text-lmGrey400 dark:text-dmGrey300",children:"/month"})]})]}),(0,jU.jsxs)("div",{className:"gap-x-4 hidden w-fit",children:[(0,jU.jsxs)("div",{className:"flex items-center gap-x-1 text-sm text-lmGrey300 dark:text-dmGrey100",children:[(0,jU.jsx)("i",{className:"fa-solid fa-gears"}),(0,jU.jsx)("span",{children:o.transmission})]}),(0,jU.jsxs)("div",{className:"flex items-center gap-x-1 text-sm text-lmGrey300 dark:text-dmGrey100",children:[(0,jU.jsx)("i",{className:"fa-solid fa-chair"}),(0,jU.jsxs)("span",{children:[o.seats," Seats"]})]})]})]})},j8=e=>{let{offerInformation:t}=e;const{offerId:n,liked:r,photoUrl:i,location:o}=t,a=Ge(),s=()=>a("/offer-details/".concat(n)),{handleLocationNavigation:l}=sW(),c=()=>l(n,o);return(0,jU.jsxs)("div",{className:"relative flex h-[252px] w-[180px] cursor-pointer justify-center gap-x-0 rounded-xl bg-white shadow-none duration-300 hover:scale-102 active:scale-99 dark:bg-dmGrey900 dark:shadow-sm",children:[(0,jU.jsx)(L8,{photoUrl:i,onNavigationCallback:s}),(0,jU.jsx)(I8,{liked:r,onLikeCallback:()=>{},onLocationCallback:c}),(0,jU.jsx)(N8,{offerInformation:t,onNavigationCallback:s,onLocationCallback:c})]})},{exampleOffers:B8}=WH(),F8=()=>{B8[2],B8[4],B8[3];const e=B8[0],t=cX(),n=Ge(),r=()=>{n("/explore/catalog")};return(0,jU.jsxs)("div",{id:"hero",className:"relative flex h-screen max-h-[740px] 700:max-h-none 700:min-h-[1100px] 1200:min-h-0 w-full flex-col justify-center gap-y-8 700:gap-y-6 bg-white py-16 px-6 dark:bg-dmGrey900 700:py-[100px] 700:px-11 1200:h-screen 1200:flex-row 1200:items-center 1200:justify-start 1200:px-14",children:[(0,jU.jsxs)("div",{className:"z-30 mt-14 flex w-full flex-col gap-y-5 700:mt-10 700:w-[712px] 700:gap-y-6 1200:mt-0 1200:ml-11 1200:gap-y-9",children:[(0,jU.jsx)("h1",{className:"text-[40px] font-bold leading-[48px] -tracking-[1.2%] text-lmGrey900 drop-shadow dark:text-dmGrey25 700:text-[60px] 700:leading-[60px] 700:-tracking-[1.5%] 1200:text-[80px] 1200:leading-[80px] 1200:tracking-[1%]",children:"Drive what you want, where and when you want!"}),(0,jU.jsx)("h3",{className:"text-lg text-lmGrey800 drop-shadow-sm dark:text-dmGrey25 700:text-3xl 1200:text-4xl",children:"Nisi facilisis mauris lacus sit arcu enim. Commodo faucibus tincidunt morbi risus imperdiet tincidunt."}),t.width>700?(0,jU.jsxs)("button",{onClick:r,className:"flex w-fit items-center justify-center gap-x-2 rounded-lg bg-lmPrimary py-3 px-4 text-lg font-semibold text-white shadow duration-300 hover:scale-101 hover:shadow-lg active:scale-99 active:shadow-sm dark:bg-dmPrimary dark:hover:bg-lmPrimary",children:["Get Started",(0,jU.jsx)("i",{className:"fa-solid fa-chevron-right text-[16px]"})]}):(0,jU.jsx)("div",{className:"w-fit",children:(0,jU.jsx)(YH,{type:"button",uiType:"primary",title:"Get Started",onClick:r})})]}),(0,jU.jsxs)("div",{className:"relative flex h-fit w-full flex-grow items-center justify-center 700:justify-start 1200:absolute 1200:right-[56px] 1200:h-[80%] 1200:w-[620px]",children:[(0,jU.jsx)("div",{className:"absolute left-[20px] top-0 hidden opacity-40 1200:flex",children:(0,jU.jsx)(j8,{offerInformation:e,index:0})}),(0,jU.jsx)("div",{className:"absolute left-auto -top-12 z-20 scale-50 700:left-[30%] 700:top-[120px] 700:scale-100 1200:left-[160px] 1200:top-[135px]",children:(0,jU.jsx)(R8,{offerInformation:e,index:0})}),(0,jU.jsx)("div",{className:"absolute -left-[124px] -top-[100px] scale-50 opacity-80 700:-left-[44px] 700:top-0 700:scale-100 1200:left-auto 1200:right-0 1200:top-[60px]",children:(0,jU.jsx)(P8,{offerInformation:e,index:0})}),(0,jU.jsxs)("div",{className:"absolute -top-[180px] -right-24 flex scale-50 flex-col gap-y-2 700:left-[64%] 700:top-[60px] 700:w-[360px] 700:scale-100 1200:top-auto 1200:-left-8 1200:-bottom-20",children:[(0,jU.jsx)("div",{className:"",children:(0,jU.jsx)(hW,{offerInformation:B8[0],index:0})}),(0,jU.jsx)("div",{className:"opacity-60",children:(0,jU.jsx)(hW,{offerInformation:B8[1],index:0})}),(0,jU.jsx)("div",{className:"opacity-30",children:(0,jU.jsx)(hW,{offerInformation:B8[3],index:0})})]})]})]})},{exampleOffers:z8}=WH(),U8=()=>{const e=z8[3],t=z8[0],n=z8[1],r=[z8[4],z8[5],z8[6]],{chameleon:i}={mobileChatSidebar:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FmobileChatSidebar.webp?alt=media&token=9fdf9554-7c37-4ace-8c91-57a64e86f528",mobileChatSidebarDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FmobileChatSidebarDM.webp?alt=media&token=9fdf9554-7c37-4ace-8c91-57a64e86f528",tabletExploreCatalog:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletExploreCatalog.webp?alt=media&token=525dd884-5c87-4c64-8ffc-41b088d56ca9",tabletExploreCatalogDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletExploreCatalogDM.webp?alt=media&token=fb1f99b9-88fe-4923-8e27-12f36dcfd32f",tabletChat:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletChat.webp?alt=media&token=525dd884-5c87-4c64-8ffc-41b088d56ca9",tabletChatDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FtabletExploreCatalogDM.webp?alt=media&token=fb1f99b9-88fe-4923-8e27-12f36dcfd32f",desktopExploreMap:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopExploreMap.webp?alt=media&token=73e14a8b-c171-4c6d-bb76-9ea261bcf5f2",desktopExploreMapDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopExploreMapDM.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",desktopChat:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopChat.webp?alt=media&token=73e14a8b-c171-4c6d-bb76-9ea261bcf5f2",desktopChatDM:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FdesktopChatDM.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",croppedBMW:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FcroppedPic.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",chameleon:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2Fchameleon.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileNeleLangrock:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileNeleLangrock.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileGustavoBravo:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileGustavoBravo.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileAlinaMertens:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileAlinaMertens.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66",profileMariaBierhoff:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FprofileMariaBierhoff.webp?alt=media&token=1f49457e-bc4b-4f14-94f9-4c93a69f5b66"};return(0,jU.jsxs)("div",{id:"mostViewed",className:"hideScrollbar flex w-full flex-col items-center gap-x-6 gap-y-6 overflow-x-scroll bg-white py-10 dark:bg-dmGrey900 1200:py-14",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-6 px-6 700:hidden",children:[(0,jU.jsx)("h2",{className:"text-4xl font-semibold -tracking-[1.2%] text-lmGrey800 drop-shadow dark:text-dmGrey25 700:text-[40px] 700:leading-[40px] 1200:text-5xl",children:"Most Viewed"}),(0,jU.jsx)("span",{className:"w-[297px] text-lg text-lmGrey800 drop-shadow-sm dark:text-dmGrey25 700:text-xl 1200:text-2xl",children:"Here are the best offers for you in different timespans. If you want to see more then open the full page"}),(0,jU.jsx)("div",{className:"w-fit",children:(0,jU.jsx)(YH,{uiType:"primary",type:"button",title:"Open Full Page"})})]}),(0,jU.jsxs)("div",{className:"hideScrollbar flex w-full items-center gap-x-6 overflow-x-scroll py-1 1200:flex-col 1200:gap-y-6 1200:py-0",children:[(0,jU.jsxs)("div",{className:"flex flex-row-reverse gap-x-6 py-1 1200:flex-row 1200:items-end",children:[(0,jU.jsxs)("div",{className:"flex h-fit flex-col  gap-y-3 rounded-[24px] p-9 shadow dark:shadow-dmShadow",children:[(0,jU.jsx)("h3",{className:"text-2xl text-lmGrey800 drop-shadow-sm dark:text-dmGrey25 1200:text-3xl",children:"This Week"}),(0,jU.jsx)(j8,{offerInformation:e,index:0})]}),(0,jU.jsxs)("div",{className:"flex flex-col gap-y-3 rounded-[24px] bg-white p-14 shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:[(0,jU.jsx)("h3",{className:"text-3xl text-lmGrey800 dark:text-dmGrey25 1200:text-4xl",children:"This Month"}),(0,jU.jsx)(R8,{offerInformation:t})]}),(0,jU.jsxs)("div",{className:"hidden w-fit flex-col gap-y-3 p-12 700:flex 1200:justify-center",children:[(0,jU.jsx)("h2",{className:"text-4xl font-semibold -tracking-[1.2%] text-lmGrey800 drop-shadow dark:text-dmGrey25 700:text-[40px] 700:leading-[40px] 1200:text-5xl",children:"Most Viewed"}),(0,jU.jsx)("span",{className:"w-[297px] text-lg text-lmGrey800 drop-shadow-sm dark:text-dmGrey25 700:text-xl 1200:text-2xl",children:"Here are the best offers for you in different timespans. If you want to see more then open the full page"}),(0,jU.jsx)("div",{className:"w-fit",children:(0,jU.jsx)(YH,{uiType:"primary",type:"button",title:"Open Full Page"})})]})]}),(0,jU.jsxs)("div",{className:"flex items-start gap-x-6 py-1",children:[(0,jU.jsx)("div",{className:"relative hidden h-[457px] w-[312px] rounded-[24px] shadow dark:shadow-dmShadow 1200:flex",children:(0,jU.jsx)("img",{className:"absolute bottom-0 right-0 h-[335px] min-w-fit",src:i,alt:"Chameleon"})}),(0,jU.jsxs)("div",{className:"flex flex-col gap-y-3 rounded-[24px] p-9 shadow dark:shadow-dmShadow",children:[(0,jU.jsx)("h3",{className:"text-2xl text-lmGrey800 drop-shadow-sm dark:text-dmGrey25 1200:text-3xl",children:"Today"}),(0,jU.jsx)("div",{className:"flex w-full flex-col gap-y-3",children:r.map((e=>(0,jU.jsx)(hW,{offerInformation:e},e.offerId)))})]}),(0,jU.jsxs)("div",{className:"flex flex-col gap-y-3 rounded-[24px] bg-white p-14 shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:[(0,jU.jsx)("h3",{className:"text-3xl text-lmGrey800 drop-shadow-sm dark:text-dmGrey25 1200:text-4xl",children:"My Favorite"}),(0,jU.jsx)(P8,{offerInformation:n})]})]})]})]})},G8=e=>{document.getElementById(e).scrollIntoView({behavior:"smooth"})},V8=()=>{const[t,n]=(0,e.useState)(!1),{dispatchNavigation:r}=FU();return(0,jU.jsxs)("div",{className:"flex w-fit cursor-pointer items-center gap-x-1 700:w-60",children:[(0,jU.jsx)("div",{onClick:()=>{r({type:"OPEN_NAVIGATION"})},className:"h-14 w-14 rounded-full ".concat(!t&&"bg-lmPrimary dark:bg-dmPrimary"," duration-300 hover:scale-110 active:scale-99 drop-shadow-md"),children:(0,jU.jsx)(nI,{onLoad:()=>n(!0),className:"z-10",scene:"https://prod.spline.design/og6CZMxsQfdlo-uE/scene.splinecode"})}),(0,jU.jsx)("span",{onClick:()=>G8("hero"),className:"text-lg text-lmGrey800 dark:text-dmGrey25",children:"Meggs Rental"})]})},H8=()=>{const{navbarLinks:e}=WH();return(0,jU.jsx)("div",{className:"hidden gap-x-6 text-lg text-lmGrey800 dark:text-dmGrey25 1100:flex",children:e.map(((e,t)=>(0,jU.jsx)("span",{onClick:()=>G8(e.linkTo),className:"w-fit cursor-pointer text-lmGrey600 duration-300 hover:text-lmGrey800 active:text-lmPrimary dark:text-dmGrey100 dark:hover:text-dmGrey25 dark:active:text-dmPrimary",children:e.name},t)))})},W8=()=>{const[t]=(0,e.useState)({status:!1,firstName:"Meggle",lastName:"Bande",photoUrl:"https://images.unsplash.com/photo-1635107510862-53886e926b74?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2535&q=80"}),n=Ge();return(0,jU.jsx)("div",{className:"flex w-fit items-center justify-end gap-x-2 700:w-60",children:t.status?(0,jU.jsxs)(jU.Fragment,{children:[(0,jU.jsxs)("span",{className:"text-lg text-lmGrey800 dark:text-dmGrey25",children:[t.firstName," ",t.lastName]}),(0,jU.jsx)("img",{className:"h-11 w-11 rounded-full bg-blue-200 dark:bg-blue-800",src:t.photoUrl,alt:"user profile"})]}):(0,jU.jsx)("div",{className:"w-fit",children:(0,jU.jsx)(YH,{title:"Sign In",uiType:"primary",type:"button",icon:"fa-solid fa-chevron-right",onClick:()=>n("/sign-in")})})})},q8=()=>(0,jU.jsxs)("div",{className:"fixed -top-1 left-auto z-40 flex h-fit w-full max-w-[1440px] items-center justify-between border-b-2 border-lmGrey100/50 bg-white/80 py-4 px-6 backdrop-blur-lg dark:border-dmGrey800/10 dark:bg-dmGrey900/80 700:px-11 1200:px-14",children:[(0,jU.jsx)(V8,{}),(0,jU.jsx)(H8,{}),(0,jU.jsx)(W8,{})]}),Y8=()=>(0,jU.jsxs)("div",{className:"relative flex w-full max-w-[1440px] flex-col overflow-hidden",children:[(0,jU.jsx)(q8,{}),(0,jU.jsx)(F8,{}),(0,jU.jsx)(l8,{}),(0,jU.jsx)(E8,{}),(0,jU.jsx)(U8,{}),(0,jU.jsx)(S8,{}),(0,jU.jsx)(x8,{})]}),X8=()=>{const e=Ge();return(0,jU.jsx)("div",{className:"relative h-screen w-full bg-white p-3 dark:bg-dmGrey900",children:(0,jU.jsxs)("div",{className:"relative flex h-full w-full flex-col items-center justify-center overflow-hidden rounded-[30px] bg-cover bg-center text-white",style:{backgroundImage:"url(".concat("https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FnotFound.webp?alt=media&token=c72bbd0f-bb0b-4305-8223-2b8d461208ab",")")},children:[(0,jU.jsx)("div",{className:"absolute z-0 flex h-full w-full bg-black/30"}),(0,jU.jsx)("span",{className:"dark:text z-10 text-[120px] font-bold leading-[120px] tracking-tight 600:text-[200px] 600:leading-[200px]",children:"404"}),(0,jU.jsxs)("div",{className:"z-10 flex flex-col items-center justify-center gap-y-2 text-center",children:[(0,jU.jsx)("span",{className:"text-2xl 600:text-4xl",children:"Page was not found"}),(0,jU.jsx)("span",{className:"text-xl 600:text-2xl",children:"Sorry, we couldn\u2019t find the page you\u2019re looking for."}),(0,jU.jsx)("div",{className:"w-[152px]",children:(0,jU.jsx)(YH,{type:"button",uiType:"primary",title:"Come Back Home",onClick:()=>e("/homepage")})})]})]})})},Q8=()=>{let[t,n]=(0,e.useState)(0),r=(t=>{let[n,r]=(0,e.useState)([t,null]);return n[1]!==t&&r([n[1],t]),n[0]})(t);return{count:t,direction:t>r?1:-1,handleContinue:e=>{e.length-1>t?n((e=>e+1)):n(0)},handlePrevious:e=>{n(0<t?e=>e-1:e.length-1)}}},K8=e=>{let{offerImages:t}=e;const{count:n,direction:r,handleContinue:i,handlePrevious:o}=Q8();return(0,jU.jsx)(O6,{children:(0,jU.jsx)(LU.div,{initial:{opacity:[.9,.96,1],scale:r>=0?[1.01,.5,1]:[.99,1.5,1]},animate:{opacity:1,scale:1},transition:{duration:.3,opacity:{delay:.2},scale:{ease:"easeInOut"}},className:"fixed top-0 left-0 bottom-0 hidden h-screen w-6/12 items-center justify-center rounded-r-[60px] bg-black bg-cover bg-center shadow-md 1200:flex",style:{backgroundImage:"url(".concat(t[n],")")},children:(0,jU.jsxs)("div",{className:"flex w-full items-center justify-between px-6 opacity-60",children:[(0,jU.jsx)("button",{onClick:()=>o(t),"aria-hidden":"true",className:"fa-solid fa-chevron-left flex h-[84px] w-[84px] items-center justify-center text-[36px] text-white"}),(0,jU.jsx)("button",{onClick:()=>i(t),"aria-hidden":"true",className:"fa-solid fa-chevron-right flex h-[84px] w-[84px] items-center justify-center text-[36px] text-white"})]})},n)})},Z8=e=>{let{offerImages:t}=e;return(0,jU.jsxs)("div",{className:"flex h-[352px] w-full justify-center 1200:h-full",children:[(0,jU.jsx)("div",{className:"hideScrollbar flex h-fit w-full max-w-[672px] gap-x-2 overflow-x-scroll rounded-lg px-6 700:px-0 1200:hidden",children:t.map(((e,t)=>(0,jU.jsx)("div",{className:"h-[348px] w-60 min-w-[240px] rounded-lg bg-slate-100 bg-cover bg-center shadow dark:dark:bg-dmGrey800",style:{backgroundImage:"url(".concat(e,")")}},t)))}),(0,jU.jsx)(K8,{offerImages:t})]})},J8=e=>{let{offerInformation:t}=e;const{name:n,location:r,price:i,extraInfo:o,offerId:a}=t,{handleLocationNavigation:s}=sW();return(0,jU.jsxs)("div",{className:"flex gap-x-6",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col",children:[(0,jU.jsx)("span",{className:"text-lg text-lmGrey600 dark:text-dmGrey100",children:"Basic Information"}),(0,jU.jsxs)("div",{className:"flex h-full w-full flex-col gap-y-1 rounded-3xl bg-white p-6 shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:[(0,jU.jsxs)("div",{className:"flex items-center text-lmGrey600 dark:text-dmGrey100",children:[(0,jU.jsx)("div",{className:"fa-solid fa-location-dot mb-[3px] h-[16px] w-[16px] text-[16px]","aria-hidden":"true"}),(0,jU.jsx)("span",{onClick:()=>s(a,r),className:"cursor-pointer text-base",children:r.formatted})]}),(0,jU.jsx)("span",{className:"text-2xl font-semibold text-lmGrey800 dark:text-dmGrey25",children:n}),(0,jU.jsxs)("div",{className:"flex w-full flex-wrap items-center gap-x-[2px] 700:hidden 1200:flex 1400:hidden",children:[(0,jU.jsxs)("span",{className:"text-lg text-lmPrimary dark:text-dmPrimary",children:[i.day," ",(0,jU.jsx)("span",{className:"text-sm text-lmGrey400 dark:text-dmGrey300",children:"/day"})]}),(0,jU.jsx)("div",{className:"flex items-center justify-center px-1",children:(0,jU.jsx)("div",{className:"h-1 w-1 rounded-full bg-lmGrey400"})}),(0,jU.jsxs)("span",{className:"text-lg text-lmPrimary dark:text-dmPrimary",children:[i.week," ",(0,jU.jsx)("span",{className:"text-sm text-lmGrey400 dark:text-dmGrey300",children:"/week"})]}),(0,jU.jsx)("div",{className:"flex items-center justify-center px-1",children:(0,jU.jsx)("div",{className:"h-1 w-1 rounded-full bg-lmGrey400"})}),(0,jU.jsxs)("span",{className:"text-lg text-lmPrimary dark:text-dmPrimary",children:[i.month," ",(0,jU.jsx)("span",{className:"text-sm text-lmGrey400 dark:text-dmGrey300",children:"/month"})]})]}),(0,jU.jsx)("div",{className:"hidden h-[60px] w-full 700:flex 1200:hidden 1400:flex",children:(0,jU.jsx)("span",{className:"w-full text-sm text-lmGrey600 line-clamp-3 dark:text-dmGrey300",children:o})})]})]}),(0,jU.jsxs)("div",{className:"hidden h-full w-[176px] min-w-[176px] flex-col 700:flex 1200:hidden 1400:flex",children:[(0,jU.jsx)("span",{className:"text-lg text-lmGrey600 dark:text-dmGrey100",children:"Prices"}),(0,jU.jsxs)("div",{className:"flex h-full w-full flex-col gap-y-1 rounded-3xl bg-white p-6 shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:[(0,jU.jsxs)("span",{className:"text-lg text-lmPrimary dark:text-dmPrimary",children:[i.day," ",(0,jU.jsx)("span",{className:"text-sm text-lmGrey400 dark:text-dmGrey300",children:"/day"})]}),(0,jU.jsxs)("span",{className:"text-lg text-lmPrimary dark:text-dmPrimary",children:[i.week," ",(0,jU.jsx)("span",{className:"text-sm text-lmGrey400 dark:text-dmGrey300",children:"/week"})]}),(0,jU.jsxs)("span",{className:"text-lg text-lmPrimary dark:text-dmPrimary",children:[i.month," ",(0,jU.jsx)("span",{className:"text-sm text-lmGrey400 dark:text-dmGrey300",children:"/month"})]})]})]})]})},$8=e=>{let{offerInformation:t}=e;return(0,jU.jsxs)("div",{className:"flex flex-col gap-6 700:flex-row 1200:flex-col 1400:flex-row",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col",children:[(0,jU.jsx)("span",{className:"text-lg text-lmGrey600 dark:text-dmGrey100",children:"Calendar"}),(0,jU.jsx)("div",{className:"flex w-full flex-col items-center gap-y-1 overflow-hidden rounded-3xl bg-white shadow dark:bg-dmGrey900 dark:shadow-dmShadow 1200:p-6 1400:p-0",children:(0,jU.jsx)("div",{className:"w-full 1200:w-[360px] 1400:w-full",children:(0,jU.jsx)(z3,{offerInformation:t})})})]}),(0,jU.jsxs)("div",{className:"flex w-full flex-col",children:[(0,jU.jsx)("span",{className:"text-lg text-lmGrey600 dark:text-dmGrey100",children:"Location"}),(0,jU.jsx)("div",{className:"flex h-[256px] w-full flex-col gap-y-1 overflow-hidden rounded-3xl bg-cover bg-center shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:(0,jU.jsx)(xQ,{lng:t.location.lng,lat:t.location.lat})})]})]})},e9=e=>{let{offerInformation:t}=e;return(0,jU.jsxs)("div",{className:"flex w-full max-w-[652px] flex-col",children:[(0,jU.jsx)("span",{className:"text-lg text-lmGrey600 dark:text-dmGrey100",children:"Car Specification"}),(0,jU.jsx)(W6,{amount:"all",specs:t.carSpecs})]})},t9=e=>{let{userProfileData:t={}}=e;const n=Ge();return(0,jU.jsxs)("div",{className:"flex h-[242] w-full flex-col items-center gap-y-2",children:[(0,jU.jsx)(mW,{userProfileData:t}),(0,jU.jsx)(YH,{type:"button",uiType:"primary",title:"Contact Owner",onClick:()=>n("/chat")})]})},{userProfileBig:n9}=WH(),r9=()=>{(0,e.useEffect)((()=>{t()}),[]);const t=()=>{};return(0,jU.jsxs)("div",{className:"flex gap-x-6",children:[(0,jU.jsxs)("div",{className:"hidden h-full w-[176px] min-w-[176px] flex-col 700:flex 1200:hidden 1400:flex",children:[(0,jU.jsx)("span",{className:"text-lg text-lmGrey600 dark:text-dmGrey100",children:"Short Bio"}),(0,jU.jsx)("div",{className:"flex h-[242px] w-full flex-col gap-y-1 rounded-3xl bg-white p-6 shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:(0,jU.jsx)("span",{className:"w-full text-sm text-lmGrey600 line-clamp-[9] dark:text-dmGrey300",children:"I rather take my bike or the OVP to the Uni so I don\u2019t really have a need for my cars. If you like any of my offer(s), don\u2019t be scared to send me a Message \ud83d\ude0a."})})]}),(0,jU.jsxs)("div",{className:"flex w-full flex-col",children:[(0,jU.jsx)("span",{className:"text-lg text-lmGrey600 dark:text-dmGrey100",children:"Owner"}),(0,jU.jsx)("div",{className:"rounded-3xl bg-white p-6 shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:(0,jU.jsx)(t9,{userProfileData:n9})})]})]})},i9=()=>(0,jU.jsxs)("div",{className:"flex w-full flex-col",children:[(0,jU.jsx)("span",{className:"text-lg text-lmGrey600 dark:text-dmGrey100",children:"Ratings"}),(0,jU.jsx)("div",{className:"flex w-full flex-col gap-y-1 rounded-3xl bg-white p-6 shadow dark:bg-dmGrey900 dark:shadow-dmShadow",children:(0,jU.jsx)(JH,{})})]}),o9=e=>{let{offerInformation:t}=e;return(0,jU.jsx)("div",{className:"flex w-full justify-center",children:(0,jU.jsxs)("div",{className:"flex w-[440px] flex-col gap-y-6 p-6 700:w-[720px] 1200:w-[480px] 1400:w-full",children:[(0,jU.jsx)(J8,{offerInformation:t}),(0,jU.jsx)($8,{offerInformation:t}),(0,jU.jsx)(e9,{offerInformation:t}),(0,jU.jsx)(r9,{offerInformation:t}),(0,jU.jsx)(i9,{offerInformation:t})]})})},{exampleOffers:a9}=WH(),s9=()=>{const[t,n]=(0,e.useState)(void 0),r=function(){let{matches:t}=e.useContext(Be),n=t[t.length-1];return n?n.params:{}}(),i=Ge(),o=(0,e.useCallback)((()=>a9.filter((e=>e.offerId===r.offerId))[0]),[r.offerId]);(0,e.useEffect)((()=>{let e=o();if(e)n(e);else{a()?n(e):i("/not-found")}}),[i,o]);const a=()=>{};return(0,jU.jsx)(jU.Fragment,{children:t?(0,jU.jsxs)("div",{className:"relative flex w-full max-w-[1440px] flex-col pt-6 1200:flex-row 1200:pt-0",children:[(0,jU.jsx)(Z8,{offerImages:t.photoUrl}),(0,jU.jsx)(o9,{offerInformation:t})]}):(0,jU.jsx)("div",{className:"h-screen w-full bg-white dark:bg-dmGrey900"})})},l9=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},c9={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(l9(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==s)throw Error();const l=t<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},u9=function(e){return function(e){const t=l9(e);return c9.encodeByteArray(t,!0)}(e).replace(/\./g,"")},d9=function(e){try{return c9.decodeString(e,!0)}catch(UV){console.error("base64Decode failed: ",UV)}return null};function h9(){try{return"object"===typeof indexedDB}catch(UV){return!1}}function f9(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}const p9=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,m9=()=>{try{return p9()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibTFnZ2xlIiwiYSI6ImNsYXVtaHM0ejA1eTgzdm1wMmRkaDBnNDAifQ.ayNDhREPUzI4mBOyVjor6A"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(UV){return}const t=e&&d9(e[1]);return t&&JSON.parse(t)})()}catch(UV){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(UV))}},g9=e=>{const t=(e=>{var t,n;return null===(n=null===(t=m9())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},v9=()=>{var e;return null===(e=m9())||void 0===e?void 0:e.config};class y9{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function x9(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u9(JSON.stringify({alg:"none",type:"JWT"})),u9(JSON.stringify(o)),""].join(".")}class b9 extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b9.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w9.prototype.create)}}class w9{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(S9,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new b9(n,o,t)}}const S9=/\{\$([^}]+)}/g;function _9(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(A9(n)&&A9(o)){if(!_9(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function A9(e){return null!==e&&"object"===typeof e}const E9=144e5;function C9(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(E9,r+i)}function M9(e){return e&&e._delegate?e._delegate:e}class T9{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const P9="[DEFAULT]";class D9{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new y9;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(UV){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(UV){if(r)return null;throw UV}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:P9})}catch(UV){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(UV){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P9;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P9;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P9;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(hR){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===P9?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(hR){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P9;return this.component?this.component.multipleInstances?e:P9:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class k9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new D9(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const O9=[];var R9;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(R9||(R9={}));const I9={debug:R9.DEBUG,verbose:R9.VERBOSE,info:R9.INFO,warn:R9.WARN,error:R9.ERROR,silent:R9.SILENT},L9=R9.INFO,N9={[R9.DEBUG]:"log",[R9.VERBOSE]:"log",[R9.INFO]:"info",[R9.WARN]:"warn",[R9.ERROR]:"error"},j9=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=N9[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class B9{constructor(e){this.name=e,this._logLevel=L9,this._logHandler=j9,this._userLogHandler=null,O9.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in R9))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?I9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,R9.DEBUG,...t),this._logHandler(this,R9.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,R9.VERBOSE,...t),this._logHandler(this,R9.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,R9.INFO,...t),this._logHandler(this,R9.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,R9.WARN,...t),this._logHandler(this,R9.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,R9.ERROR,...t),this._logHandler(this,R9.ERROR,...t)}}let F9,z9;const U9=new WeakMap,G9=new WeakMap,V9=new WeakMap,H9=new WeakMap,W9=new WeakMap;let q9={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return G9.get(e);if("objectStoreNames"===t)return e.objectStoreNames||V9.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Q9(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Y9(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(z9||(z9=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(K9(this),n),Q9(U9.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Q9(e.apply(K9(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(K9(this),t,...r);return V9.set(o,t.sort?t.sort():[t]),Q9(o)}}function X9(e){return"function"===typeof e?Y9(e):(e instanceof IDBTransaction&&function(e){if(G9.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));G9.set(e,t)}(e),t=e,(F9||(F9=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,q9):e);var t}function Q9(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Q9(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&U9.set(t,e)})).catch((()=>{})),W9.set(t,e),t}(e);if(H9.has(e))return H9.get(e);const t=X9(e);return t!==e&&(H9.set(e,t),W9.set(t,e)),t}const K9=e=>W9.get(e);const Z9=["get","getKey","getAll","getAllKeys","count"],J9=["put","add","delete","clear"],$9=new Map;function e7(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if($9.get(t))return $9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=J9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Z9.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return $9.set(t,o),o}q9=(e=>({...e,get:(t,n,r)=>e7(t,n)||e.get(t,n,r),has:(t,n)=>!!e7(t,n)||e.has(t,n)}))(q9);class t7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const n7="@firebase/app",r7="0.9.0",i7=new B9("@firebase/app"),o7="[DEFAULT]",a7={[n7]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},s7=new Map,l7=new Map;function c7(e,t){try{e.container.addComponent(t)}catch(UV){i7.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),UV)}}function u7(e){const t=e.name;if(l7.has(t))return i7.debug("There were multiple attempts to register component ".concat(t,".")),!1;l7.set(t,e);for(const n of s7.values())c7(n,e);return!0}function d7(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const h7=new w9("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class f7{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new T9("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw h7.create("app-deleted",{appName:this._name})}}const p7="9.15.0";function m7(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:o7,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw h7.create("bad-app-name",{appName:String(i)});if(n||(n=v9()),!n)throw h7.create("no-options");const o=s7.get(i);if(o){if(_9(n,o.options)&&_9(r,o.config))return o;throw h7.create("duplicate-app",{appName:i})}const a=new k9(i);for(const l of l7.values())a.addComponent(l);const s=new f7(n,r,a);return s7.set(i,s),s}function g7(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o7;const t=s7.get(e);if(!t&&e===o7)return m7();if(!t)throw h7.create("no-app",{appName:e});return t}function v7(e,t,n){var r;let i=null!==(r=a7[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void i7.warn(e.join(" "))}u7(new T9("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const y7="firebase-heartbeat-store";let x7=null;function b7(){return x7||(x7=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=Q9(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(Q9(a.result),e.oldVersion,e.newVersion,Q9(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(y7)}}).catch((e=>{throw h7.create("idb-open",{originalErrorMessage:e.message})}))),x7}async function w7(e,t){try{const n=(await b7()).transaction(y7,"readwrite"),r=n.objectStore(y7);return await r.put(t,S7(e)),n.done}catch(UV){if(UV instanceof b9)i7.warn(UV.message);else{const t=h7.create("idb-set",{originalErrorMessage:null===UV||void 0===UV?void 0:UV.message});i7.warn(t.message)}}}function S7(e){return"".concat(e.name,"!").concat(e.options.appId)}const _7=1024;class A7{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new C7(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=E7();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=E7(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_7;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),M7(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),M7(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=u9(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function E7(){return(new Date).toISOString().substring(0,10)}class C7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!h9()&&f9().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{return(await b7()).transaction(y7).objectStore(y7).get(S7(e))}catch(UV){if(UV instanceof b9)i7.warn(UV.message);else{const t=h7.create("idb-get",{originalErrorMessage:null===UV||void 0===UV?void 0:UV.message});i7.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return w7(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return w7(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function M7(e){return u9(JSON.stringify({version:2,heartbeats:e})).length}var T7;T7="",u7(new T9("platform-logger",(e=>new t7(e)),"PRIVATE")),u7(new T9("heartbeat",(e=>new A7(e)),"PRIVATE")),v7(n7,r7,T7),v7(n7,r7,"esm2017"),v7("fire-js","");var P7,D7="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},k7={},O7=O7||{},R7=D7||self;function I7(){}function L7(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function N7(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var j7="closure_uid_"+(1e9*Math.random()>>>0),B7=0;function F7(e,t,n){return e.call.apply(e.bind,arguments)}function z7(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function U7(e,t,n){return(U7=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?F7:z7).apply(null,arguments)}function G7(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function V7(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function H7(){this.s=this.s,this.o=this.o}H7.prototype.s=!1,H7.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,j7)&&e[j7]||(e[j7]=++B7)}(this)},H7.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const W7=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function q7(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Y7(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(L7(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function X7(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}X7.prototype.h=function(){this.defaultPrevented=!0};var Q7=function(){if(!R7.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{R7.addEventListener("test",I7,t),R7.removeEventListener("test",I7,t)}catch(rB){}return e}();function K7(e){return/^[\s\xa0]*$/.test(e)}var Z7=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function J7(e,t){return e<t?-1:e>t?1:0}function $7(){var e=R7.navigator;return e&&(e=e.userAgent)?e:""}function eee(e){return-1!=$7().indexOf(e)}function tee(e){return tee[" "](e),e}tee[" "]=I7;var nee,ree=eee("Opera"),iee=eee("Trident")||eee("MSIE"),oee=eee("Edge"),aee=oee||iee,see=eee("Gecko")&&!(-1!=$7().toLowerCase().indexOf("webkit")&&!eee("Edge"))&&!(eee("Trident")||eee("MSIE"))&&!eee("Edge"),lee=-1!=$7().toLowerCase().indexOf("webkit")&&!eee("Edge");function cee(){var e=R7.document;return e?e.documentMode:void 0}e:{var uee="",dee=function(){var e=$7();return see?/rv:([^\);]+)(\)|;)/.exec(e):oee?/Edge\/([\d\.]+)/.exec(e):iee?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):lee?/WebKit\/(\S+)/.exec(e):ree?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(dee&&(uee=dee?dee[1]:""),iee){var hee=cee();if(null!=hee&&hee>parseFloat(uee)){nee=String(hee);break e}}nee=uee}var fee,pee={};function mee(){return function(e){var t=pee;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){let e=0;const t=Z7(String(nee)).split("."),n=Z7("9").split("."),r=Math.max(t.length,n.length);for(let a=0;0==e&&a<r;a++){var i=t[a]||"",o=n[a]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;e=J7(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||J7(0==i[2].length,0==o[2].length)||J7(i[2],o[2]),i=i[3],o=o[3]}while(0==e)}return 0<=e}))}if(R7.document&&iee){var gee=cee();fee=gee||(parseInt(nee,10)||void 0)}else fee=void 0;var vee=fee;function yee(e,t){if(X7.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(see){e:{try{tee(t.nodeName);var i=!0;break e}catch(XR){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:xee[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&yee.X.h.call(this)}}V7(yee,X7);var xee={2:"touch",3:"pen",4:"mouse"};yee.prototype.h=function(){yee.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var bee="closure_listenable_"+(1e6*Math.random()|0),wee=0;function See(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++wee,this.ba=this.ea=!1}function _ee(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Aee(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Eee(e){const t={};for(const n in e)t[n]=e[n];return t}const Cee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mee(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Cee.length;t++)n=Cee[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Tee(e){this.src=e,this.g={},this.h=0}function Pee(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=W7(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(_ee(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Dee(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ba&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}Tee.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=Dee(e,t,r,i);return-1<a?(t=e[a],n||(t.ea=!1)):((t=new See(t,this.src,o,!!r,i)).ea=n,e.push(t)),t};var kee="closure_lm_"+(1e6*Math.random()|0),Oee={};function Ree(e,t,n,r,i){if(r&&r.once)return Lee(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Ree(e,t[o],n,r,i);return null}return n=Gee(n),e&&e[bee]?e.N(t,n,N7(r)?!!r.capture:!!r,i):Iee(e,t,n,!1,r,i)}function Iee(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=N7(i)?!!i.capture:!!i,s=zee(e);if(s||(e[kee]=s=new Tee(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Fee;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Q7||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Bee(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Lee(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Lee(e,t[o],n,r,i);return null}return n=Gee(n),e&&e[bee]?e.O(t,n,N7(r)?!!r.capture:!!r,i):Iee(e,t,n,!0,r,i)}function Nee(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Nee(e,t[o],n,r,i);else r=N7(r)?!!r.capture:!!r,n=Gee(n),e&&e[bee]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Dee(o=e.g[t],n,r,i))&&(_ee(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=zee(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Dee(t,n,r,i)),(n=-1<e?t[e]:null)&&jee(n))}function jee(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[bee])Pee(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Bee(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=zee(t))?(Pee(n,e),0==n.h&&(n.src=null,t[kee]=null)):_ee(e)}}}function Bee(e){return e in Oee?Oee[e]:Oee[e]="on"+e}function Fee(e,t){if(e.ba)e=!0;else{t=new yee(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&jee(e),e=n.call(r,t)}return e}function zee(e){return(e=e[kee])instanceof Tee?e:null}var Uee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gee(e){return"function"===typeof e?e:(e[Uee]||(e[Uee]=function(t){return e.handleEvent(t)}),e[Uee])}function Vee(){H7.call(this),this.i=new Tee(this),this.P=this,this.I=null}function Hee(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new X7(t,e);else if(t instanceof X7)t.target=t.target||e;else{var i=t;Mee(t=new X7(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=Wee(a,r,!0,t)&&i}if(i=Wee(a=t.g=e,r,!0,t)&&i,i=Wee(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Wee(a=t.g=n[o],r,!1,t)&&i}function Wee(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ba&&a.capture==n){var s=a.listener,l=a.ha||a.src;a.ea&&Pee(e.i,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}V7(Vee,H7),Vee.prototype[bee]=!0,Vee.prototype.removeEventListener=function(e,t,n,r){Nee(this,e,t,n,r)},Vee.prototype.M=function(){if(Vee.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)_ee(n[r]);delete t.g[e],t.h--}}this.I=null},Vee.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Vee.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var qee=R7.JSON.stringify;function Yee(){var e=ete;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Xee,Qee=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Kee),(e=>e.reset()));class Kee{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Zee(e){R7.setTimeout((()=>{throw e}),0)}function Jee(e,t){Xee||function(){var e=R7.Promise.resolve(void 0);Xee=function(){e.then(tte)}}(),$ee||(Xee(),$ee=!0),ete.add(e,t)}var $ee=!1,ete=new class{constructor(){this.h=this.g=null}add(e,t){const n=Qee.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function tte(){for(var e;e=Yee();){try{e.h.call(e.g)}catch(rB){Zee(rB)}var t=Qee;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}$ee=!1}function nte(e,t){Vee.call(this),this.h=e||1,this.g=t||R7,this.j=U7(this.lb,this),this.l=Date.now()}function rte(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function ite(e,t,n){if("function"===typeof e)n&&(e=U7(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=U7(e.handleEvent,e)}return 2147483647<Number(t)?-1:R7.setTimeout(e,t||0)}function ote(e){e.g=ite((()=>{e.g=null,e.i&&(e.i=!1,ote(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}V7(nte,Vee),(P7=nte.prototype).ca=!1,P7.R=null,P7.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Hee(this,"tick"),this.ca&&(rte(this),this.start()))}},P7.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},P7.M=function(){nte.X.M.call(this),rte(this),delete this.g};class ate extends H7{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ote(this)}M(){super.M(),this.g&&(R7.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ste(e){H7.call(this),this.h=e,this.g={}}V7(ste,H7);var lte=[];function cte(e,t,n,r){Array.isArray(n)||(n&&(lte[0]=n.toString()),n=lte);for(var i=0;i<n.length;i++){var o=Ree(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function ute(e){Aee(e.g,(function(e,t){this.g.hasOwnProperty(t)&&jee(e)}),e),e.g={}}function dte(){this.g=!0}function hte(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return qee(n)}catch(JR){return t}}(e,n)+(r?" "+r:"")}))}ste.prototype.M=function(){ste.X.M.call(this),ute(this)},ste.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dte.prototype.Aa=function(){this.g=!1},dte.prototype.info=function(){};var fte={},pte=null;function mte(){return pte=pte||new Vee}function gte(e){X7.call(this,fte.Pa,e)}function vte(e){const t=mte();Hee(t,new gte(t))}function yte(e,t){X7.call(this,fte.STAT_EVENT,e),this.stat=t}function xte(e){const t=mte();Hee(t,new yte(t,e))}function bte(e,t){X7.call(this,fte.Qa,e),this.size=t}function wte(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return R7.setTimeout((function(){e()}),t)}fte.Pa="serverreachability",V7(gte,X7),fte.STAT_EVENT="statevent",V7(yte,X7),fte.Qa="timingevent",V7(bte,X7);var Ste={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},_te={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ate(){}function Ete(e){return e.h||(e.h=e.i())}function Cte(){}Ate.prototype.h=null;var Mte,Tte={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Pte(){X7.call(this,"d")}function Dte(){X7.call(this,"c")}function kte(){}function Ote(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new ste(this),this.O=Ite,e=aee?125:void 0,this.T=new nte(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Rte}function Rte(){this.i=null,this.g="",this.h=!1}V7(Pte,X7),V7(Dte,X7),V7(kte,Ate),kte.prototype.g=function(){return new XMLHttpRequest},kte.prototype.i=function(){return{}},Mte=new kte;var Ite=45e3,Lte={},Nte={};function jte(e,t,n){e.K=1,e.v=nne(Zte(t)),e.s=n,e.P=!0,Bte(e,null)}function Bte(e,t){e.F=Date.now(),Gte(e),e.A=Zte(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),mne(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Rte,e.g=pre(e.l,n?t:null,!e.s),0<e.N&&(e.L=new ate(U7(e.La,e,e.g),e.N)),cte(e.S,e.g,"readystatechange",e.ib),t=e.H?Eee(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),vte(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Fte(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function zte(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=Ute(e,n),r==Nte){4==t&&(e.o=4,xte(14),i=!1),hte(e.j,e.m,null,"[Incomplete Response]");break}if(r==Lte){e.o=4,xte(15),hte(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}hte(e.j,e.m,r,null),Yte(e,r)}Fte(e)&&r!=Nte&&r!=Lte&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,xte(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),are(t),t.K=!0,xte(11))):(hte(e.j,e.m,n,"[Invalid Chunked Response]"),qte(e),Wte(e))}function Ute(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Nte:(n=Number(t.substring(n,r)),isNaN(n)?Lte:(r+=1)+n>t.length?Nte:(t=t.substr(r,n),e.C=r+n,t))}function Gte(e){e.V=Date.now()+e.O,Vte(e,e.O)}function Vte(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=wte(U7(e.gb,e),t)}function Hte(e){e.B&&(R7.clearTimeout(e.B),e.B=null)}function Wte(e){0==e.l.G||e.I||cre(e.l,e)}function qte(e){Hte(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,rte(e.T),ute(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Yte(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||wne(n.h,e)))if(!e.J&&wne(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(ZR){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;lre(n),Jne(n)}ore(n),xte(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=wte(U7(n.cb,n),6e3));if(1>=bne(n.h)&&n.ja){try{n.ja()}catch(ZR){}n.ja=void 0}}else dre(n,11)}else if((e.J||n.g==e)&&lre(n),!K7(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.I=c[1],n.ka=c[2];const t=c[3];null!=t&&(n.ma=t,n.j.info("VER="+n.ma));const i=c[4];null!=i&&(n.Ca=i,n.j.info("SVER="+n.Ca));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Sne(o,o.h),o.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.za=e,tne(r.F,r.D,e))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var a=e;if((r=n).sa=fre(r,r.H?r.ka:null,r.V),a.J){_ne(r.h,a);var s=a,l=r.J;l&&s.setTimeout(l),s.B&&(Hte(s),Gte(s)),r.g=a}else ire(r);0<n.i.length&&ere(n)}else"stop"!=c[0]&&"close"!=c[0]||dre(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?dre(n,7):Zne(n):"noop"!=c[0]&&n.l&&n.l.wa(c),n.A=0)}vte()}catch(ZR){}}function Xte(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(L7(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(L7(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(L7(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(P7=Ote.prototype).setTimeout=function(e){this.O=e},P7.ib=function(e){e=e.target;const t=this.L;t&&3==Wne(e)?t.l():this.La(e)},P7.La=function(e){try{if(e==this.g)e:{const u=Wne(this.g);var t=this.g.Ea();this.g.aa();if(!(3>u)&&(3!=u||aee||this.g&&(this.h.h||this.g.fa()||qne(this.g)))){this.I||4!=u||7==t||vte(),Hte(this);var n=this.g.aa();this.Y=n;t:if(Fte(this)){var r=qne(this.g);e="";var i=r.length,o=4==Wne(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qte(this),Wte(this);var a="";break t}this.h.i=new R7.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.fa();if(this.i=200==n,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.U,u,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,l=this.g;if((s=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K7(s)){var c=s;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,xte(12),qte(this),Wte(this);break e}hte(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Yte(this,n)}this.P?(zte(this,u,a),aee&&this.i&&3==u&&(cte(this.S,this.T,"tick",this.hb),this.T.start())):(hte(this.j,this.m,a,null),Yte(this,a)),4==u&&qte(this),this.i&&!this.I&&(4==u?cre(this.l,this):(this.i=!1,Gte(this)))}else 400==n&&0<a.indexOf("Unknown SID")?(this.o=3,xte(12)):(this.o=0,xte(13)),qte(this),Wte(this)}}}catch(lG){}},P7.hb=function(){if(this.g){var e=Wne(this.g),t=this.g.fa();this.C<t.length&&(Hte(this),zte(this,e,t),this.i&&4!=e&&Gte(this))}},P7.cancel=function(){this.I=!0,qte(this)},P7.gb=function(){this.B=null;const e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(vte(),xte(17)),qte(this),this.o=2,Wte(this)):Vte(this,this.V-e)};var Qte=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kte(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Kte){this.h=void 0!==t?t:e.h,Jte(this,e.j),this.s=e.s,this.g=e.g,$te(this,e.m),this.l=e.l,t=e.i;var n=new dne;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ene(this,n),this.o=e.o}else e&&(n=String(e).match(Qte))?(this.h=!!t,Jte(this,n[1]||"",!0),this.s=rne(n[2]||""),this.g=rne(n[3]||"",!0),$te(this,n[4]),this.l=rne(n[5]||"",!0),ene(this,n[6]||"",!0),this.o=rne(n[7]||"")):(this.h=!!t,this.i=new dne(null,this.h))}function Zte(e){return new Kte(e)}function Jte(e,t,n){e.j=n?rne(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function $te(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ene(e,t,n){t instanceof dne?(e.i=t,function(e,t){t&&!e.j&&(hne(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(fne(this,t),mne(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ine(t,cne)),e.i=new dne(t,e.h))}function tne(e,t,n){e.i.set(t,n)}function nne(e){return tne(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function rne(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ine(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,one),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function one(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Kte.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ine(t,ane,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ine(t,ane,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ine(n,"/"==n.charAt(0)?lne:sne,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ine(n,une)),e.join("")};var ane=/[#\/\?@]/g,sne=/[#\?:]/g,lne=/[#\?]/g,cne=/[#\?@]/g,une=/#/g;function dne(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function hne(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function fne(e,t){hne(e),t=gne(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function pne(e,t){return hne(e),t=gne(e,t),e.g.has(t)}function mne(e,t,n){fne(e,t),0<n.length&&(e.i=null,e.g.set(gne(e,t),q7(n)),e.h+=n.length)}function gne(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(P7=dne.prototype).add=function(e,t){hne(this),this.i=null,e=gne(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},P7.forEach=function(e,t){hne(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},P7.oa=function(){hne(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},P7.W=function(e){hne(this);let t=[];if("string"===typeof e)pne(this,e)&&(t=t.concat(this.g.get(gne(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},P7.set=function(e,t){return hne(this),this.i=null,pne(this,e=gne(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},P7.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},P7.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")};function vne(e){this.l=e||yne,R7.PerformanceNavigationTiming?e=0<(e=R7.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(R7.g&&R7.g.Ga&&R7.g.Ga()&&R7.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var yne=10;function xne(e){return!!e.h||!!e.g&&e.g.size>=e.j}function bne(e){return e.h?1:e.g?e.g.size:0}function wne(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Sne(e,t){e.g?e.g.add(t):e.h=t}function _ne(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ane(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return q7(e.i)}function Ene(){}function Cne(){this.g=new Ene}function Mne(e,t,n){const r=n||"";try{Xte(e,(function(e,n){let i=e;N7(e)&&(i=qee(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(UV){throw t.push(r+"type="+encodeURIComponent("_badmap")),UV}}function Tne(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(XR){}}function Pne(e){this.l=e.ac||null,this.j=e.jb||!1}function Dne(e,t){Vee.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=kne,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}vne.prototype.cancel=function(){if(this.i=Ane(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},Ene.prototype.stringify=function(e){return R7.JSON.stringify(e,void 0)},Ene.prototype.parse=function(e){return R7.JSON.parse(e,void 0)},V7(Pne,Ate),Pne.prototype.g=function(){return new Dne(this.l,this.j)},Pne.prototype.i=function(e){return function(){return e}}({}),V7(Dne,Vee);var kne=0;function One(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Rne(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ine(e)}function Ine(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(P7=Dne.prototype).open=function(e,t){if(this.readyState!=kne)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ine(this)},P7.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||R7).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},P7.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rne(this)),this.readyState=kne},P7.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ine(this)),this.g&&(this.readyState=3,Ine(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof R7.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;One(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},P7.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rne(this):Ine(this),3==this.readyState&&One(this)}},P7.Va=function(e){this.g&&(this.response=this.responseText=e,Rne(this))},P7.Ua=function(e){this.g&&(this.response=e,Rne(this))},P7.ga=function(){this.g&&Rne(this)},P7.setRequestHeader=function(e,t){this.v.append(e,t)},P7.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},P7.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Dne.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Lne=R7.JSON.parse;function Nne(e){Vee.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jne,this.K=this.L=!1}V7(Nne,Vee);var jne="",Bne=/^https?$/i,Fne=["POST","PUT"];function zne(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Une(e),Vne(e)}function Une(e){e.D||(e.D=!0,Hee(e,"complete"),Hee(e,"error"))}function Gne(e){if(e.h&&"undefined"!=typeof O7&&(!e.C[1]||4!=Wne(e)||2!=e.aa()))if(e.v&&4==Wne(e))ite(e.Ha,0,e);else if(Hee(e,"readystatechange"),4==Wne(e)){e.h=!1;try{const s=e.aa();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){var i=String(e.H).match(Qte)[1]||null;if(!i&&R7.self&&R7.self.location){var o=R7.self.location.protocol;i=o.substr(0,o.length-1)}r=!Bne.test(i?i.toLowerCase():"")}n=r}if(n)Hee(e,"complete"),Hee(e,"success");else{e.m=6;try{var a=2<Wne(e)?e.g.statusText:""}catch(oG){a=""}e.j=a+" ["+e.aa()+"]",Une(e)}}finally{Vne(e)}}}function Vne(e,t){if(e.g){Hne(e);const n=e.g,r=e.C[0]?I7:null;e.g=null,e.C=null,t||Hee(e,"ready");try{n.onreadystatechange=r}catch(UV){}}}function Hne(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(R7.clearTimeout(e.A),e.A=null)}function Wne(e){return e.g?e.g.readyState:0}function qne(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case jne:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(nB){return null}}function Yne(e){let t="";return Aee(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Xne(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Yne(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):tne(e,t,n))}function Qne(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kne(e){this.Ca=0,this.i=[],this.j=new dte,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Qne("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Qne("baseRetryDelayMs",5e3,e),this.bb=Qne("retryDelaySeedMs",1e4,e),this.$a=Qne("forwardChannelMaxRetries",2,e),this.ta=Qne("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new vne(e&&e.concurrentRequestLimit),this.Fa=new Cne,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Zne(e){if($ne(e),3==e.G){var t=e.U++,n=Zte(e.F);tne(n,"SID",e.I),tne(n,"RID",t),tne(n,"TYPE","terminate"),nre(e,n),(t=new Ote(e,e.j,t,void 0)).K=2,t.v=nne(Zte(n)),n=!1,R7.navigator&&R7.navigator.sendBeacon&&(n=R7.navigator.sendBeacon(t.v.toString(),"")),!n&&R7.Image&&((new Image).src=t.v,n=!0),n||(t.g=pre(t.l,null),t.g.da(t.v)),t.F=Date.now(),Gte(t)}hre(e)}function Jne(e){e.g&&(are(e),e.g.cancel(),e.g=null)}function $ne(e){Jne(e),e.u&&(R7.clearTimeout(e.u),e.u=null),lre(e),e.h.cancel(),e.m&&("number"===typeof e.m&&R7.clearTimeout(e.m),e.m=null)}function ere(e){xne(e.h)||e.m||(e.m=!0,Jee(e.Ja,e),e.C=0)}function tre(e,t){var n;n=t?t.m:e.U++;const r=Zte(e.F);tne(r,"SID",e.I),tne(r,"RID",n),tne(r,"AID",e.T),nre(e,r),e.o&&e.s&&Xne(r,e.o,e.s),n=new Ote(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=rre(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Sne(e.h,n),jte(n,r,t)}function nre(e,t){e.ia&&Aee(e.ia,(function(e,n){tne(t,n,e)})),e.l&&Xte({},(function(e,n){tne(t,n,e)}))}function rre(e,t,n){n=Math.min(e.i.length,n);var r=e.l?U7(e.l.Ra,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].h;const s=i[a].g;if(n-=t,0>n)t=Math.max(0,i[a].h-100),o=!1;else try{Mne(s,e,"req"+n+"_")}catch(KU){r&&r(s)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function ire(e){e.g||e.u||(e.Z=1,Jee(e.Ia,e),e.A=0)}function ore(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=wte(U7(e.Ia,e),ure(e,e.A)),e.A++,!0)}function are(e){null!=e.B&&(R7.clearTimeout(e.B),e.B=null)}function sre(e){e.g=new Ote(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Zte(e.sa);tne(t,"RID","rpc"),tne(t,"SID",e.I),tne(t,"CI",e.L?"0":"1"),tne(t,"AID",e.T),tne(t,"TYPE","xmlhttp"),nre(e,t),e.o&&e.s&&Xne(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=nne(Zte(t)),n.s=null,n.P=!0,Bte(n,e)}function lre(e){null!=e.v&&(R7.clearTimeout(e.v),e.v=null)}function cre(e,t){var n=null;if(e.g==t){lre(e),are(e),e.g=null;var r=2}else{if(!wne(e.h,t))return;n=t.D,_ne(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Hee(r=mte(),new bte(r,n)),ere(e)}else ire(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(bne(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=wte(U7(e.Ja,e,t),ure(e,e.C)),e.C++,!0))}(e,t)||2==r&&ore(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:dre(e,5);break;case 4:dre(e,10);break;case 3:dre(e,6);break;default:dre(e,2)}}function ure(e,t){let n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function dre(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=U7(e.kb,e);n||(n=new Kte("//www.google.com/images/cleardot.gif"),R7.location&&"http"==R7.location.protocol||Jte(n,"https"),nne(n)),function(e,t){const n=new dte;if(R7.Image){const r=new Image;r.onload=G7(Tne,n,r,"TestLoadImage: loaded",!0,t),r.onerror=G7(Tne,n,r,"TestLoadImage: error",!1,t),r.onabort=G7(Tne,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=G7(Tne,n,r,"TestLoadImage: timeout",!1,t),R7.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else xte(2);e.G=0,e.l&&e.l.va(t),hre(e),$ne(e)}function hre(e){if(e.G=0,e.la=[],e.l){const t=Ane(e.h);0==t.length&&0==e.i.length||(Y7(e.la,t),Y7(e.la,e.i),e.h.i.length=0,q7(e.i),e.i.length=0),e.l.ua()}}function fre(e,t,n){var r=n instanceof Kte?Zte(n):new Kte(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),$te(r,r.m);else{var i=R7.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new Kte(null,void 0);r&&Jte(o,r),t&&(o.g=t),i&&$te(o,i),n&&(o.l=n),r=o}return n=e.D,t=e.za,n&&t&&tne(r,n,t),tne(r,"VER",e.ma),nre(e,r),r}function pre(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Nne(new Pne({jb:!0})):new Nne(e.ra)).Ka(e.H),t}function mre(){}function gre(){if(iee&&!(10<=Number(vee)))throw Error("Environmental error: no available transport.")}function vre(e,t){Vee.call(this),this.g=new Kne(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!K7(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!K7(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bre(this)}function yre(e){Pte.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xre(){Dte.call(this),this.status=1}function bre(e){this.g=e}(P7=Nne.prototype).Ka=function(e){this.L=e},P7.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Mte.g(),this.C=this.u?Ete(this.u):Ete(Mte),this.g.onreadystatechange=U7(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(XR){return void zne(this,XR)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=R7.FormData&&e instanceof R7.FormData,!(0<=W7(Fne,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Hne(this),0<this.B&&((this.K=function(e){return iee&&mee()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=U7(this.qa,this)):this.A=ite(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(XR){zne(this,XR)}},P7.qa=function(){"undefined"!=typeof O7&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hee(this,"timeout"),this.abort(8))},P7.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Hee(this,"complete"),Hee(this,"abort"),Vne(this))},P7.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vne(this,!0)),Nne.X.M.call(this)},P7.Ha=function(){this.s||(this.F||this.v||this.l?Gne(this):this.fb())},P7.fb=function(){Gne(this)},P7.aa=function(){try{return 2<Wne(this)?this.g.status:-1}catch(tB){return-1}},P7.fa=function(){try{return this.g?this.g.responseText:""}catch(tB){return""}},P7.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Lne(t)}},P7.Ea=function(){return this.m},P7.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(P7=Kne.prototype).ma=8,P7.G=1,P7.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Ote(this,this.j,e,void 0);let o=this.s;if(this.S&&(o?(o=Eee(o),Mee(o,this.S)):o=this.S),null!==this.o||this.N||(i.H=o,o=null),this.O)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.g&&"string"===typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=rre(this,i,t),tne(n=Zte(this.F),"RID",e),tne(n,"CVER",22),this.D&&tne(n,"X-HTTP-Session-Id",this.D),nre(this,n),o&&(this.N?t="headers="+encodeURIComponent(String(Yne(o)))+"&"+t:this.o&&Xne(n,this.o,o)),Sne(this.h,i),this.Ya&&tne(n,"TYPE","init"),this.O?(tne(n,"$req",t),tne(n,"SID","null"),i.Z=!0,jte(i,n,null)):jte(i,n,t),this.G=2}}else 3==this.G&&(e?tre(this,e):0==this.i.length||xne(this.h)||tre(this))},P7.Ia=function(){if(this.u=null,sre(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=wte(U7(this.eb,this),e)}},P7.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,xte(10),Jne(this),sre(this))},P7.cb=function(){null!=this.v&&(this.v=null,Jne(this),ore(this),xte(19))},P7.kb=function(e){e?(this.j.info("Successfully pinged google.com"),xte(2)):(this.j.info("Failed to ping google.com"),xte(1))},(P7=mre.prototype).xa=function(){},P7.wa=function(){},P7.va=function(){},P7.ua=function(){},P7.Ra=function(){},gre.prototype.g=function(e,t){return new vre(e,t)},V7(vre,Vee),vre.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;xte(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=fre(e,null,e.V),ere(e)},vre.prototype.close=function(){Zne(this.g)},vre.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=qee(e),e=n);t.i.push(new class{constructor(e,t){this.h=e,this.g=t}}(t.ab++,e)),3==t.G&&ere(t)},vre.prototype.M=function(){this.g.l=null,delete this.j,Zne(this.g),delete this.g,vre.X.M.call(this)},V7(yre,Pte),V7(xre,Dte),V7(bre,mre),bre.prototype.xa=function(){Hee(this.g,"a")},bre.prototype.wa=function(e){Hee(this.g,new yre(e))},bre.prototype.va=function(e){Hee(this.g,new xre)},bre.prototype.ua=function(){Hee(this.g,"b")},gre.prototype.createWebChannel=gre.prototype.g,vre.prototype.send=vre.prototype.u,vre.prototype.open=vre.prototype.m,vre.prototype.close=vre.prototype.close,Ste.NO_ERROR=0,Ste.TIMEOUT=8,Ste.HTTP_ERROR=6,_te.COMPLETE="complete",Cte.EventType=Tte,Tte.OPEN="a",Tte.CLOSE="b",Tte.ERROR="c",Tte.MESSAGE="d",Vee.prototype.listen=Vee.prototype.N,Nne.prototype.listenOnce=Nne.prototype.O,Nne.prototype.getLastError=Nne.prototype.Oa,Nne.prototype.getLastErrorCode=Nne.prototype.Ea,Nne.prototype.getStatus=Nne.prototype.aa,Nne.prototype.getResponseJson=Nne.prototype.Sa,Nne.prototype.getResponseText=Nne.prototype.fa,Nne.prototype.send=Nne.prototype.da,Nne.prototype.setWithCredentials=Nne.prototype.Ka;k7.createWebChannelTransport=function(){return new gre},k7.getStatEventTarget=function(){return mte()},k7.ErrorCode=Ste,k7.EventType=_te,k7.Event=fte,k7.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},k7.FetchXmlHttpFactory=Pne,k7.WebChannel=Cte,k7.XhrIo=Nne;const wre="@firebase/firestore";class Sre{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sre.UNAUTHENTICATED=new Sre(null),Sre.GOOGLE_CREDENTIALS=new Sre("google-credentials-uid"),Sre.FIRST_PARTY=new Sre("first-party-uid"),Sre.MOCK_USER=new Sre("mock-user");let _re="9.15.0";const Are=new B9("@firebase/firestore");function Ere(e){if(Are.logLevel<=R9.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Tre);Are.debug("Firestore (".concat(_re,"): ").concat(e),...i)}}function Cre(e){if(Are.logLevel<=R9.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Tre);Are.error("Firestore (".concat(_re,"): ").concat(e),...i)}}function Mre(e){if(Are.logLevel<=R9.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Tre);Are.warn("Firestore (".concat(_re,"): ").concat(e),...i)}}function Tre(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Pre(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(_re,") INTERNAL ASSERTION FAILED: ")+e;throw Cre(t),new Error(t)}function Dre(e,t){e||Pre()}const kre={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ore extends b9{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Rre{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ire{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Lre{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Sre.UNAUTHENTICATED)))}shutdown(){}}class Nre{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class jre{constructor(e){this.t=e,this.currentUser=Sre.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Rre;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rre,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{Ere("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Ere("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rre)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ere("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Dre("string"==typeof t.accessToken),new Ire(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dre(null===e||"string"==typeof e),new Sre(e)}}class Bre{constructor(e,t,n,r){this.h=e,this.l=t,this.m=n,this.g=r,this.type="FirstParty",this.user=Sre.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Dre(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Fre{constructor(e,t,n,r){this.h=e,this.l=t,this.m=n,this.g=r}getToken(){return Promise.resolve(new Bre(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable((()=>t(Sre.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zre{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ure{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const n=e=>{null!=e.error&&Ere("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.A;return this.A=e.token,Ere("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ere("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.T.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.T.getImmediate({optional:!0});e?r(e):Ere("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Dre("string"==typeof e.token),this.A=e.token,new zre(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Gre(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Vre{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Gre(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function Hre(e,t){return e<t?-1:e>t?1:0}class Wre{constructor(e,t,n){void 0===t?t=0:t>e.length&&Pre(),void 0===n?n=e.length-t:n>e.length-t&&Pre(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Wre.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wre?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qre extends Wre{construct(e,t,n){return new qre(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ore(kre.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new qre(e)}static emptyPath(){return new qre([])}}class Yre{constructor(e){this.path=e}static fromPath(e){return new Yre(qre.fromString(e))}static fromName(e){return new Yre(qre.fromString(e).popFirst(5))}static empty(){return new Yre(qre.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qre.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qre.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Yre(new qre(e.slice()))}}class Xre{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Xre.UNKNOWN_ID=-1;function Qre(e){return"IndexedDbTransactionError"===e.name}class Kre{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ut(e),this.ct=e=>t.writeSequenceNumber(e))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}Kre.at=-1;class Zre{constructor(e,t,n,r,i,o,a,s){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s}}class Jre{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Jre("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jre&&e.projectId===this.projectId&&e.database===this.database}}function $re(e){return 0===e&&1/e==-1/0}class eie{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new eie(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new eie(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Hre(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}eie.EMPTY_BYTE_STRING=new eie("");function tie(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nie(e){return"string"==typeof e?eie.fromBase64String(e):eie.fromUint8Array(e)}function rie(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class iie{constructor(e,t){this.comparator=e,this.root=t||aie.EMPTY}insert(e,t){return new iie(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,aie.BLACK,null,null))}remove(e){return new iie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,aie.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oie(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oie(this.root,e,this.comparator,!1)}getReverseIterator(){return new oie(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oie(this.root,e,this.comparator,!0)}}class oie{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class aie{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:aie.RED,this.left=null!=r?r:aie.EMPTY,this.right=null!=i?i:aie.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new aie(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return aie.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return aie.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,aie.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,aie.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pre();if(this.right.isRed())throw Pre();const e=this.left.check();if(e!==this.right.check())throw Pre();return e+(this.isRed()?0:1)}}aie.EMPTY=null,aie.RED=!0,aie.BLACK=!1,aie.EMPTY=new class{constructor(){this.size=0}get key(){throw Pre()}get value(){throw Pre()}get color(){throw Pre()}get left(){throw Pre()}get right(){throw Pre()}copy(e,t,n,r,i){return this}insert(e,t,n){return new aie(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sie{constructor(e){this.comparator=e,this.data=new iie(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lie(this.data.getIterator())}getIteratorFrom(e){return new lie(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof sie))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new sie(this.comparator);return t.data=e,t}}class lie{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}var cie,uie;(uie=cie||(cie={}))[uie.OK=0]="OK",uie[uie.CANCELLED=1]="CANCELLED",uie[uie.UNKNOWN=2]="UNKNOWN",uie[uie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",uie[uie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",uie[uie.NOT_FOUND=5]="NOT_FOUND",uie[uie.ALREADY_EXISTS=6]="ALREADY_EXISTS",uie[uie.PERMISSION_DENIED=7]="PERMISSION_DENIED",uie[uie.UNAUTHENTICATED=16]="UNAUTHENTICATED",uie[uie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",uie[uie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",uie[uie.ABORTED=10]="ABORTED",uie[uie.OUT_OF_RANGE=11]="OUT_OF_RANGE",uie[uie.UNIMPLEMENTED=12]="UNIMPLEMENTED",uie[uie.INTERNAL=13]="INTERNAL",uie[uie.UNAVAILABLE=14]="UNAVAILABLE",uie[uie.DATA_LOSS=15]="DATA_LOSS";new iie(Yre.comparator);new iie(Yre.comparator);new iie(Yre.comparator),new sie(Yre.comparator);new sie(Hre);const die=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hie=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fie=hie;class pie{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(tie(e.integerValue));else if("doubleValue"in e){const n=tie(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),$re(n)?t.le(0):t.le(n))}else if("timestampValue"in e){const n=e.timestampValue;this.he(t,20),"string"==typeof n?t.fe(n):(t.fe("".concat(n.seconds||"")),t.le(n.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(nie(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.he(t,45),t.le(n.latitude||0),t.le(n.longitude||0)}else"mapValue"in e?rie(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Pre()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const n=e.fields||{};this.he(t,55);for(const r of Object.keys(n))this.de(r,t),this.ce(n[r],t)}ye(e,t){const n=e.values||[];this.he(t,50);for(const r of n)this.ce(r,t)}me(e,t){this.he(t,37),Yre.fromName(e).path.forEach((e=>{this.he(t,60),this.pe(e,t)}))}he(e,t){e.le(t)}_e(e){e.le(2)}}pie.Ie=new pie;new Uint8Array(0);class mie{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new mie(e,mie.DEFAULT_COLLECTION_PERCENTILE,mie.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}mie.DEFAULT_COLLECTION_PERCENTILE=10,mie.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mie.DEFAULT=new mie(41943040,mie.DEFAULT_COLLECTION_PERCENTILE,mie.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mie.DISABLED=new mie(-1,0,0);function gie(){return"undefined"!=typeof document?document:null}class vie{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Hs=e,this.timerId=t,this.mo=n,this.yo=r,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-n);r>0&&Ere("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,(()=>(this.Eo=Date.now(),e()))),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class yie{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Rre,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new yie(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ore(kre.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xie(e,t){if(Cre("AsyncQueue","".concat(t,": ").concat(e)),Qre(e))return new Ore(kre.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}function bie(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Pre()}function wie(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ore(kre.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bie(e);throw new Ore(kre.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}const Sie=new Map;class _ie{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ore(kre.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ore(kre.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,r){if(!0===t&&!0===r)throw new Ore(kre.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Aie{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _ie({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ore(kre.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ore(kre.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _ie(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Lre;switch(e.type){case"gapi":const t=e.client;return new Fre(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ore(kre.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Sie.get(e);t&&(Ere("ComponentProvider","Removing Datastore"),Sie.delete(e),t.terminate())}(this),Promise.resolve()}}class Eie{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Sre.UNAUTHENTICATED,this.clientId=Vre.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ere("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ere("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ore(kre.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rre;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(UV){const n=xie(UV,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}class Cie{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new vie(this,"async_queue_retry"),this.Wc=()=>{const e=gie();e&&Ere("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const e=gie();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=gie();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise((()=>{}));const t=new Rre;return this.Hc((()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Lc.push(e),this.Jc())))}async Jc(){if(0!==this.Lc.length){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(V7){if(!Qre(V7))throw V7;Ere("AsyncQueue","Operation failed with retryable error: "+V7)}this.Lc.length>0&&this.xo.Ro((()=>this.Jc()))}}Hc(e){const t=this.Bc.then((()=>(this.Gc=!0,e().catch((e=>{this.Kc=e,this.Gc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Cre("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Gc=!1,e))))));return this.Bc=t,t}enqueueAfterDelay(e,t,n){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const r=yie.createAndSchedule(this,e,t,n,(e=>this.Yc(e)));return this.Uc.push(r),r}zc(){this.Kc&&Pre()}verifyOperationInProgress(){}async Xc(){let e;do{e=this.Bc,await e}while(e!==this.Bc)}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then((()=>{this.Uc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()}))}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}class Mie extends Aie{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Cie,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Tie(this),this._firestoreClient.terminate()}}function Tie(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new Zre(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Eie(e._authCredentials,e._appCheckCredentials,e._queue,r)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_re="9.15.0",u7(new T9("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new Mie(new jre(e.getProvider("auth-internal")),new Ure(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ore(kre.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jre(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),v7(wre,"3.8.0",e),v7(wre,"3.8.0","esm2017")}();v7("firebase","9.15.0","app");let Pie,Die;const kie=new WeakMap,Oie=new WeakMap,Rie=new WeakMap,Iie=new WeakMap,Lie=new WeakMap;let Nie={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Oie.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Rie.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fie(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function jie(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Die||(Die=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(zie(this),n),Fie(kie.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Fie(e.apply(zie(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(zie(this),t,...r);return Rie.set(o,t.sort?t.sort():[t]),Fie(o)}}function Bie(e){return"function"===typeof e?jie(e):(e instanceof IDBTransaction&&function(e){if(Oie.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Oie.set(e,t)}(e),t=e,(Pie||(Pie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Nie):e);var t}function Fie(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Fie(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&kie.set(t,e)})).catch((()=>{})),Lie.set(t,e),t}(e);if(Iie.has(e))return Iie.get(e);const t=Bie(e);return t!==e&&(Iie.set(e,t),Lie.set(t,e)),t}const zie=e=>Lie.get(e);const Uie=["get","getKey","getAll","getAllKeys","count"],Gie=["put","add","delete","clear"],Vie=new Map;function Hie(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Vie.get(t))return Vie.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Gie.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Uie.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return Vie.set(t,o),o}!function(e){Nie=e(Nie)}((e=>({...e,get:(t,n,r)=>Hie(t,n)||e.get(t,n,r),has:(t,n)=>!!Hie(t,n)||e.has(t,n)})));const Wie="@firebase/installations",qie="0.6.0",Yie=1e4,Xie="w:".concat(qie),Qie="FIS_v2",Kie=36e5,Zie=new w9("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Jie(e){return e instanceof b9&&e.code.includes("request-failed")}function $ie(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function eoe(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function toe(e,t){const n=(await t.json()).error;return Zie.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function noe(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function roe(e,t){let{refreshToken:n}=t;const r=noe(e);return r.append("Authorization",function(e){return"".concat(Qie," ").concat(e)}(n)),r}async function ioe(e){const t=await e();return t.status>=500&&t.status<600?e():t}function ooe(e){return new Promise((t=>{setTimeout(t,e)}))}const aoe=/^[cdef][\w-]{21}$/;function soe(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return aoe.test(t)?t:""}catch(hR){return""}}function loe(e){return"".concat(e.appName,"!").concat(e.appId)}const coe=new Map;function uoe(e,t){const n=loe(e);doe(n,t),function(e,t){const n=foe();n&&n.postMessage({key:e,fid:t});poe()}(n,t)}function doe(e,t){const n=coe.get(e);if(n)for(const r of n)r(t)}let hoe=null;function foe(){return!hoe&&"BroadcastChannel"in self&&(hoe=new BroadcastChannel("[Firebase] FID Change"),hoe.onmessage=e=>{doe(e.data.key,e.data.fid)}),hoe}function poe(){0===coe.size&&hoe&&(hoe.close(),hoe=null)}const moe="firebase-installations-store";let goe=null;function voe(){return goe||(goe=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=Fie(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(Fie(a.result),e.oldVersion,e.newVersion,Fie(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),s}("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(moe)}})),goe}async function yoe(e,t){const n=loe(e),r=(await voe()).transaction(moe,"readwrite"),i=r.objectStore(moe),o=await i.get(n);return await i.put(t,n),await r.done,o&&o.fid===t.fid||uoe(e,t.fid),t}async function xoe(e){const t=loe(e),n=(await voe()).transaction(moe,"readwrite");await n.objectStore(moe).delete(t),await n.done}async function boe(e,t){const n=loe(e),r=(await voe()).transaction(moe,"readwrite"),i=r.objectStore(moe),o=await i.get(n),a=t(o);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||o&&o.fid===a.fid||uoe(e,a.fid),a}async function woe(e){let t;const n=await boe(e.appConfig,(n=>{const r=function(e){return Aoe(e||{fid:soe(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Zie.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const o=$ie(n),a=noe(n),s=r.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:Qie,appId:n.appId,sdkVersion:Xie},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await ioe((()=>fetch(o,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:eoe(e.authToken)}}throw await toe("Create Installation",u)}(e,t);return yoe(e.appConfig,n)}catch(UV){throw Jie(UV)&&409===UV.customData.serverCode?await xoe(e.appConfig):await yoe(e.appConfig,{fid:t.fid,registrationStatus:0}),UV}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Soe(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Soe(e){let t=await _oe(e.appConfig);for(;1===t.registrationStatus;)await ooe(100),t=await _oe(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await woe(e);return n||t}return t}function _oe(e){return boe(e,(e=>{if(!e)throw Zie.create("installation-not-found");return Aoe(e)}))}function Aoe(e){return 1===(t=e).registrationStatus&&t.registrationTime+Yie<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Eoe(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat($ie(e),"/").concat(n,"/authTokens:generate")}(n,t),o=roe(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const s={installation:{sdkVersion:Xie,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(s)},c=await ioe((()=>fetch(i,l)));if(c.ok){return eoe(await c.json())}throw await toe("Generate Auth Token",c)}async function Coe(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await boe(e.appConfig,(r=>{if(!Doe(r))throw Zie.create("not-registered");const i=r.authToken;if(!n&&koe(i))return r;if(1===i.requestStatus)return t=Moe(e,n),r;{if(!navigator.onLine)throw Zie.create("app-offline");const n=Ooe(r);return t=Poe(e,n),n}})),i=t?await t:r.authToken;return i}async function Moe(e,t){let n=await Toe(e.appConfig);for(;1===n.authToken.requestStatus;)await ooe(100),n=await Toe(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Coe(e,t):r}function Toe(e){return boe(e,(e=>{if(!Doe(e))throw Zie.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Yie<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}async function Poe(e,t){try{const n=await Eoe(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await yoe(e.appConfig,r),n}catch(UV){if(!Jie(UV)||401!==UV.customData.serverCode&&404!==UV.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await yoe(e.appConfig,n)}else await xoe(e.appConfig);throw UV}}function Doe(e){return void 0!==e&&2===e.registrationStatus}function koe(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Kie}(e)}function Ooe(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}async function Roe(e){const{registrationPromise:t}=await woe(e);t&&await t}function Ioe(e){return Zie.create("missing-app-config-values",{valueName:e})}const Loe="installations",Noe=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Ioe("App Configuration");if(!e.name)throw Ioe("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ioe(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:d7(t,"heartbeat"),_delete:()=>Promise.resolve()}},joe=e=>{const t=d7(e.getProvider("app").getImmediate(),Loe).getImmediate(),n={getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await woe(t);return r?r.catch(console.error):Coe(t).catch(console.error),n.fid}(t),getToken:e=>async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await Roe(n);return(await Coe(n,t)).token}(t,e)};return n};u7(new T9(Loe,Noe,"PUBLIC")),u7(new T9("installations-internal",joe,"PRIVATE")),v7(Wie,qie),v7(Wie,qie,"esm2017");const Boe="analytics",Foe="https://www.googletagmanager.com/gtag/js",zoe=new B9("@firebase/analytics");function Uoe(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function Goe(e,t,n,r){return async function(i,o,a){try{"event"===i?await async function(e,t,n,r,i){try{let o=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Uoe(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){o=[];break}o.push(i)}}0===o.length&&(o=Object.values(t)),await Promise.all(o),e("event",r,i||{})}catch(UV){zoe.error(UV)}}(e,t,n,o,a):"config"===i?await async function(e,t,n,r,i,o){const a=r[i];try{if(a)await t[a];else{const e=(await Uoe(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(UV){zoe.error(UV)}e("config",i,o)}(e,t,n,r,o,a):"consent"===i?e("consent","update",a):e("set",o)}catch(UV){zoe.error(UV)}}}const Voe=new w9("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'});const Hoe=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Woe(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function qoe(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Woe(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(o,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(s){}throw Voe.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}async function Yoe(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hoe;var a;const{appId:s,measurementId:l}=e;try{await Xoe(n,r)}catch(UV){if(l)return zoe.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===UV||void 0===UV?void 0:UV.message,"]")),{appId:s,measurementId:l};throw UV}try{const t=await qoe(e);return o.deleteThrottleMetadata(s),t}catch(UV){const r=UV;if(!Qoe(r)){if(o.deleteThrottleMetadata(s),l)return zoe.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===r||void 0===r?void 0:r.message,"]")),{appId:s,measurementId:l};throw UV}const c=503===Number(null===(a=null===r||void 0===r?void 0:r.customData)||void 0===a?void 0:a.httpStatus)?C9(i,o.intervalMillis,30):C9(i,o.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return o.setThrottleMetadata(s,u),zoe.debug("Calling attemptFetch again in ".concat(c," millis")),Yoe(e,u,n,o)}}function Xoe(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(o),r(Voe.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function Qoe(e){if(!(e instanceof b9)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class Koe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Zoe,Joe;function $oe(e){Joe=e}function eae(e){Zoe=e}async function tae(e,t,n,r,i,o,a){var s;const l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hoe,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw Voe.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Voe.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new Koe;return setTimeout((async()=>{s.abort()}),void 0!==n?n:6e4),Yoe({appId:r,apiKey:i,measurementId:o},a,s,t)}(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&zoe.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((e=>zoe.error(e))),t.push(l);const c=async function(){if(!h9())return zoe.warn(Voe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await f9()}catch(UV){return zoe.warn(Voe.create("indexeddb-unavailable",{errorInfo:null===UV||void 0===UV?void 0:UV.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Foe)&&n.src.includes(e))return n;return null})(o)||function(e,t){const n=document.createElement("script");n.src="".concat(Foe,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}(o,u.measurementId),Joe&&(i("consent","default",Joe),$oe(void 0)),i("js",new Date);const h=null!==(s=null===a||void 0===a?void 0:a.config)&&void 0!==s?s:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",u.measurementId,h),Zoe&&(i("set",Zoe),eae(void 0)),u.measurementId}class nae{constructor(e){this.app=e}_delete(){return delete rae[this.app.options.appId],Promise.resolve()}}let rae={},iae=[];const oae={};let aae,sae,lae="dataLayer",cae="gtag",uae=!1;function dae(){const e=[];if(function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>"(".concat(t+1,") ").concat(e))).join(" "),n=Voe.create("invalid-analytics-context",{errorInfo:t});zoe.warn(n.message)}}function hae(e,t,n){dae();const r=e.options.appId;if(!r)throw Voe.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Voe.create("no-api-key");zoe.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=rae[r])throw Voe.create("already-exists",{id:r});if(!uae){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(lae);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=Goe(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(rae,iae,oae,lae,cae);sae=e,aae=t,uae=!0}rae[r]=tae(e,iae,oae,t,aae,lae,n);return new nae(e)}function fae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=d7(e,Boe);if(n.isInitialized()){const e=n.getImmediate();if(_9(t,n.getOptions()))return e;throw Voe.create("already-initialized")}const r=n.initialize({options:t});return r}function pae(e,t,n,r){e=M9(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(sae,rae[e.app.options.appId],t,n,r).catch((e=>zoe.error(e)))}const mae="@firebase/analytics",gae="0.9.0";u7(new T9(Boe,((e,t)=>{let{options:n}=t;return hae(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),u7(new T9("analytics-internal",(function(e){try{const t=e.getProvider(Boe).getImmediate();return{logEvent:(e,n,r)=>pae(t,e,n,r)}}catch(UV){throw Voe.create("interop-component-reg-failed",{reason:UV})}}),"PRIVATE")),v7(mae,gae),v7(mae,gae,"esm2017");const vae=m7({apiKey:"AIzaSyC1ssliMOJ0ctBKYbefFn_IIm4PmqI0tPo",authDomain:"meggsrental.firebaseapp.com",projectId:"meggsrental",storageBucket:"meggsrental.appspot.com",messagingSenderId:"404521719390",appId:"1:404521719390:web:849d9cc2652b38b09786cf",measurementId:"G-EYS077BY03"}),yae=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g7();e=M9(e);const t=d7(e,Boe);t.isInitialized()?t.getImmediate():fae(e)}(vae),function(e,t){const n="string"==typeof e?e:t||"(default)",r=d7("object"==typeof e?e:g7(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=g9("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=wie(e,Aie))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&Mre("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:"".concat(t,":").concat(n),ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Sre.MOCK_USER;else{t=x9(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Ore(kre.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Sre(o)}e._authCredentials=new Nre(new Ire(t,n))}}(r,...e)}}(vae),"firebasestorage.googleapis.com");class xae extends b9{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(bae(e),"Firebase Storage: ".concat(t," (").concat(bae(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xae.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bae(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}function bae(e){return"storage/"+e}function wae(){return new xae("unknown","An unknown error occurred, please check the error payload for server response.")}function Sae(){return new xae("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function _ae(){return new xae("canceled","User canceled the upload/download.")}function Aae(e){return new xae("invalid-argument",e)}function Eae(){return new xae("app-deleted","The Firebase app was deleted.")}class Cae{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Cae.makeFromUrl(e,t)}catch(UV){return new Cae(e,"")}if(""===n.path)return n;throw new xae("invalid-default-bucket","Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===yae?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<s.length;l++){const t=s[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Cae(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new xae("invalid-url","Invalid URL '"+e+"'.")}(e);return n}}class Mae{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Tae(e,t,n,r){if(r<t)throw Aae("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Aae("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Pae(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}var Dae;function kae(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Dae||(Dae={}));class Oae{constructor(e,t,n,r,i,o,a,s,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Rae(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Dae.NO_ERROR,i=n.getStatus();if((!t||kae(i,this.additionalRetryCodes_))&&this.retry){const t=n.getErrorCode()===Dae.ABORT;return void e(!1,new Rae(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new Rae(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(UV){r(UV)}else if(null!==i){const e=wae();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Eae():_ae())}else{r(Sae())}};this.canceled_?t(0,new Rae(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,a=!1,s=0;function l(){return 2===s}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function h(){o&&clearTimeout(o)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===s?(s=2,o=0):o=1e3*(r+Math.random()),d(o)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),d(0)):e||(s=1)))}return d(0),o=setTimeout((()=>{a=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Rae{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Iae(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function Lae(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function Nae(e,t){t&&(e["X-Firebase-GMPID"]=t)}function jae(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function Bae(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class Fae{constructor(e,t){this._service=e,this._location=t instanceof Cae?t:Cae.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Fae(e,t)}get root(){const e=new Cae(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Bae(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Cae(this._location.bucket,e);return new Fae(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new xae("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function zae(e,t){const n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:Cae.makeFromBucketSpec(n,e)}function Uae(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:x9(i,e.app.options.projectId))}class Gae{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=yae,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Cae.makeFromBucketSpec(r,this._host):zae(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Cae.makeFromBucketSpec(this._url,e):this._bucket=zae(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Tae("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Tae("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fae(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Mae(Eae());{const o=function(e,t,n,r,i,o){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const s=Pae(e.urlParams),l=e.url+s,c=Object.assign({},e.headers);return Nae(c,t),Iae(c,n),Lae(c,o),jae(c,r),new Oae(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Vae="@firebase/storage",Hae="0.10.0",Wae="storage";function qae(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Uae(e,t,n,r)}function Yae(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new Gae(r,i,o,n,p7)}u7(new T9(Wae,Yae,"PUBLIC").setMultipleInstances(!0)),v7(Vae,Hae,""),v7(Vae,Hae,"esm2017");const{firestoreFormattedOffer:Xae}=WH(),Qae=()=>{const{offerId:e}=Xae;!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g7(),t=arguments.length>1?arguments[1]:void 0;e=M9(e);const n=d7(e,Wae).getImmediate({identifier:t}),r=g9("storage");r&&qae(n,...r)}();return(0,jU.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,jU.jsx)("div",{className:"h-fit w-fit",children:(0,jU.jsx)(YH,{title:"Click Me",onClick:async()=>{console.log()},type:"button",uiType:"primary"})})})},Kae=e=>{let{btnTitle:t,icon:n,link:r,secondIcon:i}=e;const o=Ge();return(0,jU.jsxs)("button",{type:"button",onClick:()=>o(r),className:"flex items-center justify-center gap-x-2 text-lmGrey300 duration-300 hover:scale-101 hover:text-lmGrey600 active:scale-99 dark:text-dmGrey300 dark:hover:text-dmGrey100 ".concat(qH.LmDmHoverBorder," w-full rounded-lg px-4 py-3 shadow"),children:[(0,jU.jsx)("i",{className:"".concat(n," flex h-[14px] min-h-[14px] w-[14px] min-w-[14px] items-center justify-center text-[14px]")}),(0,jU.jsx)("span",{className:"flex w-full text-sm text-lmGrey600 dark:text-dmGrey100",children:t}),(0,jU.jsx)("i",{className:"".concat((void 0===i||i)&&"fa-solid fa-chevron-right"," flex h-[14px] min-h-[14px] w-[14px] min-w-[14px] items-center justify-center text-[14px]")})]})},Zae=e=>{let{profileButtonList:t}=e;return(0,jU.jsx)("div",{className:"flex flex-col gap-y-2 py-3",children:t.map(((e,t)=>(0,jU.jsx)(Kae,{btnTitle:e.btnTitle,icon:e.icon,link:e.link,onClickCallback:e.callback},t)))})},Jae=[{btnTitle:"Account",icon:"fa-solid fa-user",link:"account"},{btnTitle:"Payments",icon:"fa-solid fa-credit-card",link:"payments"},{btnTitle:"Reviews",icon:"fa-solid fa-star",link:"reviews"},{btnTitle:"Notification",icon:"fa-solid fa-bell",link:"notification"},{btnTitle:"Help",icon:"fa-solid fa-handshake-angle",link:"/help"},{btnTitle:"Terms of Service",icon:"fa-solid fa-section",link:"/terms-of-service"},{btnTitle:"Privacy Policy",icon:"fa-solid fa-user-shield",link:"/privacy-policy"},{btnTitle:"Sign Out",icon:"fa-solid fa-right-from-bracket",link:"/sign-in"}],{userProfileBig:$ae}=WH(),ese=()=>(0,jU.jsx)(_W,{puffer:!1,pic:$ae.photoUrl,children:(0,jU.jsxs)("div",{className:"flex w-full max-w-[348px] flex-col gap-y-3 overflow-y-scroll px-[2px]",children:[(0,jU.jsx)(mW,{userProfileData:$ae}),(0,jU.jsx)(Zae,{profileButtonList:Jae})]})}),tse=e=>{let{title:t}=e;const n=Ge();return(0,jU.jsxs)("div",{className:"flex w-full items-center justify-center gap-x-2 py-3 text-lmGrey600 dark:text-dmGrey100",children:[(0,jU.jsx)("i",{onClick:()=>n("/profile"),className:"fa-solid fa-chevron-left cursor-pointer flex h-6 w-6 items-center justify-center text-[20px]"}),(0,jU.jsx)("span",{className:"w-full text-center text-2xl",children:t}),(0,jU.jsx)("i",{className:"h-6 w-6"})]})},{genderSelect:nse,userProfileBig:rse}=WH(),ise=()=>{const{control:e,handleSubmit:t}=nY(),n=e=>console.log(e);return(0,jU.jsx)(_W,{puffer:!1,pic:rse.photoUrl,children:(0,jU.jsxs)("div",{className:"flex w-full max-w-[348px] flex-col gap-y-3 overflow-y-scroll px-[2px] py-6",children:[(0,jU.jsx)(tse,{title:"Account"}),(0,jU.jsxs)("form",{onSubmit:t(n),className:"flex w-full flex-col gap-y-3",children:[(0,jU.jsx)(uq,{name:"firstName",control:e,rules:{required:"First name is required",pattern:{value:/^[a-zA-Z]+$/,message:"Only letter are allowed"}},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-signature",onChange:t.onChange,label:"First Name",placeholder:"Max",type:"text",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"lastName",control:e,rules:{required:"Last name is required",pattern:{value:/^[a-zA-Z]+$/,message:"Only letter are allowed"}},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-signature",onChange:t.onChange,label:"Last Name",placeholder:"Musterman",type:"text",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"birthday",control:e,rules:{required:"Birthday is required"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-calendar-days",onChange:t.onChange,label:"Birthday",placeholder:"25.10.1999",type:"text",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"email",control:e,rules:{required:"Email is required",pattern:{value:/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/,message:"Invalid email address"}},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-at",onChange:t.onChange,label:"Email",placeholder:"maxMustermann@web.de",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"password",control:e,rules:{required:"Password is required",pattern:{value:/^\S*(?=\S{6,})(?=\S*\d)(?=\S*[A-Z])(?=\S*[a-z])(?=\S*[!@#$%^&*? ])\S*$/,message:"Minimum 6 Characters - 1 upper and 1 lower case - 1 letter and 1 special character"}},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-lock",onChange:t.onChange,label:"Password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022",type:"password",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"gender",control:e,rules:{required:"Select an option"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{icon:nse.icon,placeholder:nse.placeholder,itemList:nse.list,onChange:t.onChange,label:"What is your gender?",error:n.error})}}),(0,jU.jsx)(uq,{name:"telephoneNumber",control:e,rules:{pattern:{value:/^\d+$/,message:"Only numbers are allowed"}},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-phone",onChange:t.onChange,label:"Telephone number (optional)",placeholder:"03 251 2342783",type:"number",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"city",control:e,rules:{required:"City is required"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-city",onChange:t.onChange,label:"Preferred city, city you live in",placeholder:"Dresden",type:"text",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"smoking",control:e,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-smoking",onChange:t.onChange,label:"Do you smoke?",placeholder:"No",type:"text",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"bio",control:e,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(d8,{onChange:t.onChange,label:"A place for a short bio.",placeholder:"I rather use my bike than driving in my car, so hit me up if you want to borrow it :D",value:t.value,name:t.name,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)("button",{type:"submit",onClick:n,className:"flex w-[340px] items-center justify-center rounded-lg bg-lmPrimary py-3 px-4 text-white shadow-md",children:"Submit changes"})]})]})})},{userProfileBig:ose}=WH(),ase=()=>(0,jU.jsx)(_W,{puffer:!1,pic:ose.photoUrl,children:(0,jU.jsxs)("div",{className:"flex w-full max-w-[348px] flex-col gap-y-3 overflow-y-scroll px-[2px] py-6",children:[(0,jU.jsx)(tse,{title:"Notification"}),(0,jU.jsx)("span",{className:"w-full text-center text-lmGrey600 dark:text-dmGrey100",children:"Currently not available"})]})}),{userProfileBig:sse}=WH(),lse=()=>(0,jU.jsx)(_W,{puffer:!1,pic:sse.photoUrl,children:(0,jU.jsxs)("div",{className:"flex w-full max-w-[348px] flex-col gap-y-3 overflow-y-scroll px-[2px] py-6",children:[(0,jU.jsx)(tse,{title:"Payments"}),(0,jU.jsx)("span",{className:"w-full text-center text-lmGrey600 dark:text-dmGrey100",children:"Currently not available"})]})}),{userProfileBig:cse}=WH(),use=()=>(0,jU.jsx)(_W,{puffer:!1,pic:cse.photoUrl,children:(0,jU.jsxs)("div",{className:"flex w-full max-w-[348px] flex-col gap-y-3 overflow-y-scroll px-[2px] py-6",children:[(0,jU.jsx)(tse,{title:"Reviews"}),(0,jU.jsx)(JH,{})]})}),dse=e=>{let{personId:t,onSuccessCallback:n,onErrorCallback:r}=e;return E4(["fetch-person",t],(()=>(e=>l6.get("https://swapi.dev/api/people/".concat(e,"/")))(t)),{enabled:!1,onSuccess:n,onError:r})},hse=()=>l6.get("https://swapi.dev/api/planets/17/"),fse=()=>l6.get("https://swapi.dev/api/starships/9/"),pse=()=>l6.get("https://swapi.dev/api/people/1/"),mse=()=>{const{debounce:e}=p4(),{data:t,isLoading:n,isError:r,error:i}=E4(["map-autocomplete"],fse,{staleTime:3e4,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchInterval:36e5}),{data:o,isLoading:a,refetch:s,isFetching:l}=E4(["fetch-person"],pse,{enabled:!1,onSuccess:e=>{console.log(e),console.log("perform sideeffect after data fetching")},onError:e=>{console.log(e),console.log("perform sideeffect after error")},select:e=>e.data.map((e=>e.name))}),{data:c,refetch:u}=(e=>{let{onSuccessCallback:t,onErrorCallback:n}=e;return E4(["fetch-planets"],hse,{enabled:!1,onSuccess:t,onError:n})})({onSuccessCallback:e=>console.log("hook and api works: ",e.data.name)}),{data:d,refetch:h}=dse({personId:10,onSuccessCallback:e=>console.log("another one: ",e.data.name)});const f=e((()=>{}),2e3);return n||l?(0,jU.jsx)("h2",{children:"Loading..."}):r?(0,jU.jsx)("h2",{children:i.message}):(0,jU.jsxs)("div",{className:"flex w-full justify-center gap-x-4 bg-slate-400 py-6",children:[(0,jU.jsx)("input",{type:"text",onChange:f}),(0,jU.jsx)("div",{children:null===t||void 0===t?void 0:t.data.name}),(0,jU.jsx)("div",{children:null===o||void 0===o?void 0:o.data.name}),(0,jU.jsxs)("div",{children:["as Hook and manual: ",null===c||void 0===c?void 0:c.data.name]}),(0,jU.jsxs)("div",{children:["manual with input: ",null===d||void 0===d?void 0:d.data.name]}),(0,jU.jsx)(YH,{type:"button",uiType:"primary",title:"Click me to fetch a ship",onClick:s}),(0,jU.jsx)(YH,{type:"button",uiType:"secondary",title:"Click me to fetch a planet",onClick:u}),(0,jU.jsx)(YH,{type:"button",uiType:"primary",title:"Specific",onClick:h})]})},gse=()=>{const{handleStorage:e,handleContinue:t,handleGoBack:n}=EW(),r=Ge();return{handleCallback:i=>{let{data:o,nextStep:a}=i;switch(a){case"finish":localStorage.removeItem("uploadData"),r("/homepage");break;case!0:t(),e(o,"uploadData");break;case"back":n();break;case"close":localStorage.removeItem("uploadData"),r("/user-offers")}}}},{citiesAutocomplete:vse}=WH(),yse=e=>{var t;let{handleCallback:n}=e;const{name:r,priceDay:i,priceWeek:o,priceMonth:a,startDate:s,endDate:l,city:c}=null!==(t=JSON.parse(localStorage.getItem("uploadData")))&&void 0!==t&&t,{control:u,handleSubmit:d}=nY();return(0,jU.jsxs)("form",{onSubmit:d((e=>{console.log("basic info");n({data:e,nextStep:!0})})),className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-2",children:[(0,jU.jsx)("span",{className:"text-base font-semibold text-lmGrey600 dark:text-dmGrey100",children:"Basic Information"}),(0,jU.jsx)(uq,{name:"name",control:u,rules:{required:"Name is required"},defaultValue:r||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-signature",onChange:t.onChange,label:"What is the name of the offer/car?",placeholder:"Volkswagen Fox",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"priceDay",control:u,rules:{required:"Price of the day is required",pattern:{value:/^\d+$/,message:"Only numbers are allowed"}},defaultValue:i||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-coins",secondIcon:"fa-solid fa-euro",onChange:t.onChange,label:"What is the price per day?",placeholder:"30...",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"priceWeek",control:u,rules:{required:"Price for a week is required",pattern:{value:/^\d+$/,message:"Only numbers are allowed"}},defaultValue:o||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-coins",secondIcon:"fa-solid fa-euro",onChange:t.onChange,label:"What is the price per week?",placeholder:"200...",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"priceMonth",control:u,rules:{required:"Price for a month is required",pattern:{value:/^\d+$/,message:"Only numbers are allowed"}},defaultValue:a||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-coins",secondIcon:"fa-solid fa-euro",onChange:t.onChange,label:"What is the price per month?",placeholder:"500...",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsxs)("div",{className:"flex gap-x-2",children:[(0,jU.jsx)(uq,{name:"startDate",control:u,rules:{required:"Start date is required"},defaultValue:s||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-calendar-days",onChange:t.onChange,label:"Start date",placeholder:"02.06.2023",type:"date",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"endDate",control:u,rules:{required:"End date is required"},defaultValue:l||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-calendar-days",onChange:t.onChange,label:"End date",placeholder:"21.06.2023",type:"date",value:t.value,onBlur:t.onBlur,error:n.error})}})]}),(0,jU.jsx)(uq,{name:"city",control:u,rules:{required:"City is required"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(uX,{value:c||void 0,itemList:vse.list,onChange:t.onChange,label:"Where is the offer/car located?",error:n.error})}})]}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Continue",firstBtnType:"submit",firstBtnOnClick:d})]})},{transmissionSelect:xse,fuelSelect:bse,trunkSelect:wse,seatSelect:Sse}=WH(),_se=e=>{var t;let{handleCallback:n}=e;const{transmission:r,fuelType:i,trunkVolume:o,seats:a}=null!==(t=JSON.parse(localStorage.getItem("uploadData")))&&void 0!==t&&t,{control:s,handleSubmit:l}=nY();return(0,jU.jsxs)("form",{onSubmit:l((e=>{console.log("basic info");n({data:e,nextStep:!0})})),className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-2",children:[(0,jU.jsx)("span",{className:"text-base font-semibold text-lmGrey600 dark:text-dmGrey100",children:"Car Specification - 1"}),(0,jU.jsx)(uq,{name:"transmission",control:s,rules:{required:"Select an option"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:r||void 0,icon:xse.icon,placeholder:xse.placeholder,itemList:xse.list,onChange:t.onChange,label:"Select the Transmission",error:n.error})}}),(0,jU.jsx)(uq,{name:"fuelType",control:s,rules:{required:"Select an option"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:i||void 0,icon:bse.icon,placeholder:bse.placeholder,itemList:bse.list,onChange:t.onChange,label:"Select the Fuel Type",error:n.error})}}),(0,jU.jsx)(uq,{name:"trunkVolume",control:s,rules:{required:"Select an option"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:o||void 0,icon:wse.icon,placeholder:wse.placeholder,itemList:wse.list,onChange:t.onChange,label:"Select the Trunk Volume",error:n.error})}}),(0,jU.jsx)(uq,{name:"seats",control:s,rules:{required:"Select an option"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:a||void 0,icon:Sse.icon,placeholder:Sse.placeholder,itemList:Sse.list,onChange:t.onChange,label:"Select the amounts of Seats",error:n.error})}})]}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Continue",firstBtnType:"submit",firstBtnOnClick:l})]})},{carTypeSelect:Ase,colorSelect:Ese}=WH(),Cse=e=>{var t;let{handleCallback:n}=e;const{carType:r,milage:i,color:o}=null!==(t=JSON.parse(localStorage.getItem("uploadData")))&&void 0!==t&&t,{control:a,handleSubmit:s}=nY();return(0,jU.jsxs)("form",{onSubmit:s((e=>{console.log("basic info");n({data:e,nextStep:!0})})),className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-2",children:[(0,jU.jsx)("span",{className:"text-base font-semibold text-lmGrey600 dark:text-dmGrey100",children:"Car Specification - 2"}),(0,jU.jsx)(uq,{name:"carType",control:a,rules:{required:"Select an option"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:r||void 0,icon:Ase.icon,placeholder:Ase.placeholder,itemList:Ase.list,onChange:t.onChange,label:"Select the Car Type",error:n.error})}}),(0,jU.jsx)(uq,{name:"milage",control:a,rules:{required:"Milage is required",pattern:{value:/^\d+$/,message:"Invalid code"}},defaultValue:i||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(_Y,{firstIcon:"fa-solid fa-gauge",type:"number",onChange:t.onChange,label:"What is the Car Milage? (in km)",placeholder:"187000",value:t.value,onBlur:t.onBlur,error:n.error})}}),(0,jU.jsx)(uq,{name:"color",control:a,rules:{required:"Select an option"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:o||void 0,icon:Ese.icon,placeholder:Ese.placeholder,itemList:Ese.list,onChange:t.onChange,label:"Select the Color",error:n.error})}})]}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Continue",firstBtnType:"submit",firstBtnOnClick:s})]})},{smokingSelect:Mse,eatingSelect:Tse}=WH(),Pse=e=>{var t;let{handleCallback:n}=e;const{smoking:r,eating:i,carBio:o}=null!==(t=JSON.parse(localStorage.getItem("uploadData")))&&void 0!==t&&t,{control:a,handleSubmit:s}=nY();return(0,jU.jsxs)("form",{onSubmit:s((e=>{console.log("basic info");n({data:e,nextStep:!0})})),className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-2",children:[(0,jU.jsx)("span",{className:"text-base font-semibold text-lmGrey600 dark:text-dmGrey100",children:"Car Specification - 3"}),(0,jU.jsx)(uq,{name:"smoking",control:a,rules:{required:"Select an option"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:r||void 0,icon:Mse.icon,placeholder:Mse.placeholder,itemList:Mse.list,onChange:t.onChange,label:"Select if Smoking is allowed",error:n.error})}}),(0,jU.jsx)(uq,{name:"eating",control:a,rules:{required:"Select an option"},render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(TX,{value:i||void 0,icon:Tse.icon,placeholder:Tse.placeholder,itemList:Tse.list,onChange:t.onChange,label:"Select if Eating is allowed",error:n.error})}}),(0,jU.jsx)(uq,{name:"carBio",control:a,defaultValue:o||void 0,render:e=>{let{field:t,fieldState:n}=e;return(0,jU.jsx)(d8,{onChange:t.onChange,label:"Do you have additional remarks/notes",placeholder:"She likes it gentle, then it is smooth sailing with my beauty :D",value:t.value,name:t.name,onBlur:t.onBlur,error:n.error})}})]}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Continue",firstBtnType:"submit",firstBtnOnClick:s})]})},Dse=e=>{let{handleCallback:t,maxRounds:n,currentRound:r}=e;return(0,jU.jsxs)("div",{className:"flex flex-col items-center justify-center gap-y-2 p-2",children:[(0,jU.jsxs)("div",{className:"flex w-full items-center justify-between text-lmGrey300 dark:text-dmGrey300",children:[(0,jU.jsx)("i",{onClick:()=>{t({nextStep:"back"})},className:"fa-solid fa-chevron-left flex h-11 w-11 cursor-pointer items-center justify-start text-[22px] hover:text-dmGrey600 dark:hover:text-dmGrey100"}),(0,jU.jsx)("i",{onClick:()=>{t({nextStep:"close"})},className:"fa-solid fa-times flex h-11 w-11 cursor-pointer items-center justify-end text-[24px] hover:text-dmGrey600 dark:hover:text-dmGrey100"})]}),(0,jU.jsx)(SW,{amount:n,finished:r})]})},kse=()=>(0,jU.jsxs)("div",{className:"flex w-full max-w-[340px] flex-col gap-y-2",children:[(0,jU.jsx)("label",{htmlFor:"fileUpload",className:"text-sm text-lmGrey500 dark:text-dmGrey25",children:"Upload up to 6 images"}),(0,jU.jsxs)("div",{className:"relative flex h-[180px] w-full cursor-pointer flex-col items-center justify-center gap-y-2 rounded-lg border border-dashed border-lmGrey100 bg-transparent p-6 shadow-sm duration-500 hover:opacity-60",children:[(0,jU.jsx)("i",{className:"fa-solid fa-cloud-arrow-up text-[32px] text-lmGrey300 dark:text-dmGrey300"}),(0,jU.jsx)("span",{className:"text-center text-sm text-lmGrey300 dark:text-dmGrey300",children:"Click to choose a file"}),(0,jU.jsx)("input",{type:"file",name:"fileUpload",multiple:!0,className:"absolute opacity-0 h-full cursor-pointer"})]})]}),Ose=e=>{let{handleCallback:t}=e;const{handleSubmit:n}=nY();return(0,jU.jsxs)("form",{onSubmit:n((e=>{console.log("basic info");t({data:e,nextStep:!0})})),className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-2",children:[(0,jU.jsx)("span",{className:"text-base font-semibold text-lmGrey600 dark:text-dmGrey100",children:"Images"}),(0,jU.jsx)(kse,{}),(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-1 text-xs text-lmGrey600 dark:text-dmGrey100",children:[(0,jU.jsx)("span",{children:"*Make sure the order is correct. The first image is going to be the Thumbnail of your offer"}),(0,jU.jsxs)("span",{children:["**We recommend:",(0,jU.jsx)("br",{}),"first three images are images of the exterio the",(0,jU.jsx)("br",{}),"last three images are images of the interio"]})]})]}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Continue",firstBtnType:"submit",firstBtnOnClick:n})]})},Rse=e=>{let{handleCallback:t}=e;const n=()=>{console.log("finish");t({nextStep:"finish"})};return(0,jU.jsxs)("div",{onSubmit:n,className:"flex w-full max-w-[340px] flex-col gap-y-8",children:[(0,jU.jsxs)("div",{className:"flex w-full flex-col gap-y-2",children:[(0,jU.jsx)("span",{className:"text-base font-semibold text-lmGrey600 dark:text-dmGrey100",children:"Upload Preview"}),(0,jU.jsx)(K6,{})]}),(0,jU.jsx)(rY,{firstBtn:"primary",firstBtnTitle:"Upload",firstBtnType:"submit",firstBtnOnClick:n})]})},Ise=()=>{const{currentRound:e}=EW(),{handleCallback:t}=gse(),n={1:(0,jU.jsx)(yse,{handleCallback:t}),2:(0,jU.jsx)(_se,{handleCallback:t}),3:(0,jU.jsx)(Cse,{handleCallback:t}),4:(0,jU.jsx)(Pse,{handleCallback:t}),5:(0,jU.jsx)(Ose,{handleCallback:t}),6:(0,jU.jsx)(Rse,{handleCallback:t})};return(0,jU.jsx)(_W,{puffer:!1,pic:"https://firebasestorage.googleapis.com/v0/b/meggsrental.appspot.com/o/others%2FgermanStreet.webp?alt=media&token=299dade6-a4d2-40cc-a099-cfb97431bec1",children:(0,jU.jsxs)("div",{className:"flex w-full max-w-[348px] flex-col gap-y-8",children:[(0,jU.jsx)(Dse,{handleCallback:t,maxRounds:6,currentRound:e-1}),n[e]]})})},Lse=()=>{const{exampleOffers:e}=WH(),t=e.filter((e=>"ae5cdceb-1e5b-4b84-9bab-bab3d55a1abb"===e.ownerId));return(0,jU.jsx)(A6,{offerList:t})};function Nse(){const e=new V;return(0,jU.jsx)(Y,{client:e,children:(0,jU.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-white dark:bg-dmGrey900",children:(0,jU.jsx)("div",{className:"relative flex  w-full max-w-[1440px] flex-col items-center overflow-scroll bg-white dark:bg-dmGrey900",children:(0,jU.jsxs)(rt,{children:[(0,jU.jsx)("div",{className:"hidden","aria-hidden":"true",children:(0,jU.jsx)(MV,{})}),(0,jU.jsx)(wW,{}),(0,jU.jsx)(UU,{}),(0,jU.jsxs)(Je,{children:[(0,jU.jsx)(Ke,{path:"/explore/map",element:(0,jU.jsx)($6,{})}),(0,jU.jsx)(Ke,{path:"/explore/catalog",element:(0,jU.jsx)(E6,{})}),(0,jU.jsx)(Ke,{path:"/favorites",element:(0,jU.jsx)(e8,{})}),(0,jU.jsx)(Ke,{path:"/offer-details/:offerId",element:(0,jU.jsx)(s9,{})}),(0,jU.jsx)(Ke,{path:"/user-offers",element:(0,jU.jsx)(Lse,{})}),(0,jU.jsx)(Ke,{path:"/upload",element:(0,jU.jsx)(Ise,{})}),(0,jU.jsx)(Ke,{path:"/chat",element:(0,jU.jsx)(n4,{})}),(0,jU.jsx)(Ke,{path:"/chat/sidebar",element:(0,jU.jsx)(t4,{})}),(0,jU.jsx)(Ke,{path:"/chat/chat-main/:chatId",element:(0,jU.jsx)(Q3,{})}),(0,jU.jsx)(Ke,{path:"/",element:(0,jU.jsx)(Y8,{})}),(0,jU.jsx)(Ke,{path:"/homepage",element:(0,jU.jsx)(Y8,{})}),(0,jU.jsx)(Ke,{path:"/profile",element:(0,jU.jsx)(ese,{})}),(0,jU.jsx)(Ke,{path:"/profile/account",element:(0,jU.jsx)(ise,{})}),(0,jU.jsx)(Ke,{path:"/profile/payments",element:(0,jU.jsx)(lse,{})}),(0,jU.jsx)(Ke,{path:"/profile/reviews",element:(0,jU.jsx)(use,{})}),(0,jU.jsx)(Ke,{path:"/profile/notification",element:(0,jU.jsx)(ase,{})}),(0,jU.jsx)(Ke,{path:"/help",element:(0,jU.jsx)(i8,{})}),(0,jU.jsx)(Ke,{path:"/terms-of-service",element:(0,jU.jsx)(mse,{})}),(0,jU.jsx)(Ke,{path:"/privacy-policy",element:(0,jU.jsx)(Qae,{})}),(0,jU.jsx)(Ke,{path:"/sign-in",element:(0,jU.jsx)(PY,{})}),(0,jU.jsx)(Ke,{path:"/sign-up",element:(0,jU.jsx)(jX,{})}),(0,jU.jsx)(Ke,{path:"/forgot-password",element:(0,jU.jsx)(CY,{})}),(0,jU.jsx)(Ke,{path:"/*",element:(0,jU.jsx)(X8,{})})]})]})})})})}const jse=e=>{let{children:t}=e;return(0,jU.jsx)(aW,{children:(0,jU.jsx)(nW,{children:(0,jU.jsx)(zU,{children:(0,jU.jsx)(CV,{children:t})})})})};r.createRoot(document.getElementById("root")).render((0,jU.jsx)(e.StrictMode,{children:(0,jU.jsx)(jse,{children:(0,jU.jsx)(Nse,{})})}))})()})();
//# sourceMappingURL=main.5f9f244a.js.map